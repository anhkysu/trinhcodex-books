(window.webpackJsonp=window.webpackJsonp||[]).push([["3zNK"],{"/x9n":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformModActionErrorCode=t.ModAction=t.FeedbackType=void 0;const o=n("UJef").Mirrored(["INTERNAL","INVALID_INPUT","UNAUTHORIZED"]);t.PerformModActionErrorCode=o;const a=n("UJef").Mirrored(["CHANGE_TYPE","CLEAR_FLAGS","UNDELETE"]);t.ModAction=a;const r=n("UJef").Mirrored(["ALL_PROJECT_ANSWER","ALL_PROJECT_QUESTION","ANSWER","COMMENT","PROGRAM","PROJECTFEEDBACK","PROJECT_CRITIQUE_ANSWER","PROJECT_CRITIQUE_QUESTION","PROJECT_EVAL_ANSWER","PROJECT_EVAL_QUESTION","PROJECT_HELP_ANSWER","PROJECT_HELP_QUESTION","QUESTION","REPLY","SUGGESTED_CLARIFICATION"]);t.FeedbackType=r},"15OY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackType=t.AddFeedbackToDiscussionMutationErrorCode=void 0;const o=n("UJef").Mirrored(["ALL_PROJECT_ANSWER","ALL_PROJECT_QUESTION","ANSWER","COMMENT","PROGRAM","PROJECTFEEDBACK","PROJECT_CRITIQUE_ANSWER","PROJECT_CRITIQUE_QUESTION","PROJECT_EVAL_ANSWER","PROJECT_EVAL_QUESTION","PROJECT_HELP_ANSWER","PROJECT_HELP_QUESTION","QUESTION","REPLY","SUGGESTED_CLARIFICATION"]);t.FeedbackType=o;const a=n("UJef").Mirrored(["INTERNAL","INVALID_INPUT","NOT_FOUND","UNAUTHORIZED"]);t.AddFeedbackToDiscussionMutationErrorCode=a},"Az/T":function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DiscussionList=void 0;var a=o(n("pVnL")),r=k(n("q1tI")),i=n("/MKj"),s=n("mR6N"),l=o(n("wa3X")),c=n("yhei"),d=o(n("Pwnf")),p=n("Vxy9"),u=o(n("gE8/")),f=n("JimW"),m=n("Pk2J"),g=k(n("8jAt")),y=n("MrPL"),h=o(n("y6Wz")),b=n("AE4M"),w=n("i4Cj"),E=k(n("TqM9")),C=o(n("cfQQ")),v=n("NVWR"),T=n("DDFQ"),S=o(n("M+bw"));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}class A extends r.Component{constructor(...e){super(...e),this.getPostsToShow=()=>{const{postKeys:e,newPostKey:t,tab:n,contentKind:o,profile:a}=this.props,r=a&&a.get("isModerator");return"clarifications"===n&&"Article"===o&&!r?e.filter((e=>e===t)):e},this.isCompactView=()=>"compact"===this.props.discussionContext.viewMode,this.isMaximized=()=>"maximized"===this.props.discussionContext.view,this.onClickSelectAll=()=>{const{onSelectPosts:e,postKeys:t}=this.props;e(t)},this.maybeRenderListHeader=e=>{const{tab:t,contentKind:n}=this.props;return e.length||"Video"!==n||"clarifications"!==t?null:r.createElement(p.LabelLarge,{style:E.clarificationsListHeader},w.miscStrings.clarificationListSuggested)},this.renderStructuredData=e=>{const t=(0,y.keys)(e).reduce(((t,n)=>(e[n]&&"QUESTION"===e[n].feedbackType&&e[n].answerCount&&t.push(e[n]),t)),[]).slice(0,10).sort(((e,t)=>t.sumVotesIncremented-e.sumVotesIncremented));return t.length?r.createElement(v.JsonLd,{schema:(0,v.faqPageSchema)({mainEntity:t.map((t=>({name:t.content,acceptedAnswer:{text:e[t.answers[0]].content}})))})}):null},this.renderContent=e=>{const{fetchingPosts:t,newPostKey:n,resetNewPostKeyInfo:o,tab:a,topicSlug:i,discussionContext:d,clarificationsEnabled:u,onContentPage:m,setFocusOnTopLevelInput:g,profileLoading:y,profile:E,contentKind:C,hasUnansweredHelpRequests:v,includeCheckboxes:T,posts:S}=this.props;if(!e.length){if(t)return r.createElement(c.CircularSpinner,{size:"medium",style:O.noPostsWrapper});const e=m&&(0,b.showMainDiscussionInput)(a,C,d,E,v);return r.createElement(f.View,{style:O.noPostsWrapper},r.createElement(p.LabelLarge,null,w.miscStrings.noPosts),e&&r.createElement(l.default,{onClick:g,style:O.noPostsButton},w.miscStrings.joinTheConversation))}const P=y||E&&E.get("isChildAccount");return r.createElement(r.Fragment,null,this.renderStructuredData(S),r.createElement("ul",null,e.map((e=>r.createElement("li",{"data-test-id":"discussion-list-item",key:e,className:(0,s.css)(O.post,!this.isCompactView()&&O.postExtraSpacing)},r.createElement(h.default,{tab:a,postKey:e,newPostKey:n,resetNewPostKeyInfo:o,topicSlug:i,restrictPosting:null!=P&&P,clarificationsEnabled:u,isMaximized:this.isMaximized(),moderatorMode:d.moderatorMode,viewMode:d.viewMode,isProjectFeedback:d.showProjectFeedback,includeCheckbox:T}))))))},this.renderMultiSelectors=()=>{const e=this.props.selectedPosts.filter((e=>e)).length;return r.createElement(f.View,{style:O.selectionContainer},r.createElement(l.default,{kind:"secondary",size:"small",style:O.selectAllButton,onClick:this.onClickSelectAll},g._("Select all")),r.createElement(l.default,{kind:"secondary",size:"small",onClick:this.props.onDeselectAll},g._("Deselect all")),e>0&&r.createElement("div",{className:(0,s.css)(O.selectedTotal)},r.createElement(r.Fragment,null,e," "),r.createElement(r.Fragment,null,g._("Selected")," ")))}}componentDidUpdate(e,t,n){const{selectedPosts:o,onSelectedPostsChanged:a,postKeys:r,onDeselectAll:i}=this.props;a&&(r!==e.postKeys&&i(),o!==e.selectedPosts&&a(o))}render(){const{fetchingPosts:e,contentKind:t,isComplete:n,cursor:o,onNextPage:a,includeCheckboxes:i,gqlClient:s}=this.props,c=this.getPostsToShow(),d=this.isMaximized();return r.createElement(f.View,{style:[O.wrapper,d&&O.maximizedContainer]},i&&this.renderMultiSelectors(),r.createElement(f.View,{style:[!d&&E.listWrapper,!this.isCompactView()&&O.listWrapperExtraSpacing]},"Topic"===t&&r.createElement(b.EnglishLink,{style:O.englishLink}),this.maybeRenderListHeader(c),this.renderContent(c)),o&&!n&&r.createElement(l.default,{onClick:()=>a(s),spinner:e},w.miscStrings.showMore))}}t.DiscussionList=A;const O=s.StyleSheet.create({wrapper:{width:"100%"},maximizedContainer:{backgroundColor:d.default.white,maxWidth:"100%",padding:"0 20px"},listWrapper:{backgroundColor:d.default.white,paddingTop:u.default.medium_16},listWrapperExtraSpacing:{paddingTop:u.default.xLarge_32},post:(0,a.default)({},E.postWrapper),postExtraSpacing:{marginBottom:u.default.large_24},linkStyledButton:{color:d.default.offBlack64,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0},englishLink:{marginBottom:20},noPostsWrapper:{textAlign:"center",margin:"0 auto",padding:`${u.default.xLarge_32}px 0 ${u.default.medium_16}px`},noPostsButton:{marginTop:u.default.medium_16},selectionContainer:{flexDirection:"row",marginTop:u.default.medium_16},selectAllButton:{marginRight:4},selectedTotal:{marginLeft:10,paddingTop:5}}),x={resetNewPostKeyInfo:T.resetNewPostKeyInfoAction,onNextPage:T.getNextPageAction,setFocusOnTopLevelInput:T.setFocusOnTopLevelInputAction,onSelectPosts:T.selectPosts,onDeselectAll:T.deselectAll};var I=(0,m.compose)(S.default,C.default,(0,i.connect)((e=>{const t=e.tabs[e.currentTab];return{fetchingPosts:e.fetchingPosts,tab:e.currentTab,newPostKey:e.newPostKey,cursor:t.cursor,isComplete:t.isComplete,postKeys:t.postKeys,contentKind:e.contentKind,selectedPosts:e.selectedPosts,posts:e.posts}}),x))(A);t.default=I},DDFQ:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.upvotePost=t.updatePosts=t.undeletePost=t.toggleReplyInputAction=t.stopEditingPostAction=t.stopAcceptingClarificationAction=t.startEditingPostAction=t.startAcceptingClarificationAction=t.setFocusOnTopLevelInputAction=t.selectPosts=t.resetNewPostKeyInfoAction=t.resetFocusOnTopLevelInputAction=t.resetExpandKeyAction=t.postSuccessAction=t.modifyNotificationsAction=t.initializeDiscussionListComponentAction=t.initializeContentAction=t.getNextPageAction=t.flagPost=t.fetchReplies=t.editPost=t.editAcceptedClarificationAction=t.downvotePost=t.deselectPost=t.deselectAll=t.deletePost=t.deleteAcceptedClarificationPost=t.clearFlags=t.clearAndFetchPostsAction=t.changeType=t.changeTabAction=t.changeSortByAction=t.addReply=t.acceptClarificationAction=void 0;var a=o(n("pVnL")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("4PhQ")),i=o(n("tCRy")),s=n("69Ww"),l=n("/x9n");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const d=e=>t=>{r.default.log(`Failed to ${e} due to: ${t}`)},p=(e,t,n)=>{const o=t(),{currentSort:r,currentTab:l,qaExpandKey:c,youtubeId:p,apiId:u}=o;((e,t)=>{const{currentTab:n}=t();e({type:"updatePosts",tab:n,posts:[],cursor:"",isComplete:!0,totalCount:0})})(e,t);let f=o.contentKind.toLowerCase(),m=o.contentId;"Video"===o.contentKind&&"clarifications"===l&&p&&(f="youtubevideo",m=p);const g=(0,s.toGqlFeedbackType)(l);e({type:"fetchingPosts"}),i.default.get(u).fetchPosts({topicId:m,feedbackType:g,currentSort:"recent"===r?2:1,qaExpandKey:c,focusKind:f},n).then((t=>{if(null==t)return;const{feedback:n,cursor:o,totalCount:r,isComplete:s}=t,c={type:"updatePosts",tab:l,posts:n,cursor:o,totalCount:r,isComplete:s};return"clarifications"===l&&"youtubevideo"===f&&p?i.default.get(u).fetchAcceptedClarifications({youtubeId:p}).then((t=>{e((0,a.default)({},c,{acceptedClarificationPosts:t}))})).catch(d("fetch accepted clarifications")):e(c),t})).catch(d("fetch posts"))};t.clearAndFetchPostsAction=e=>(t,n)=>p(t,n,e);t.initializeContentAction=(e,t,n,o,a,r,i)=>(s,l)=>{s({type:"initializeContent",topicSlug:e,contentKind:t,contentId:n,youtubeId:o,expandFeedbackType:a,qaExpandKey:r}),p(s,l,i)};t.initializeDiscussionListComponentAction=(e,t,n,o,a,r,i)=>(s,l)=>{s({type:"initializeDiscussionListComponent",topicSlug:e,tab:t,cursor:n,apiId:o}),r?s(u(t,r,n,a)):p(s,l,i)};t.getNextPageAction=e=>(t,n)=>{const o=n(),{currentSort:a,currentTab:r,qaExpandKey:l,youtubeId:c,apiId:p,tabs:u}=o,f=u[r];if(!f.cursor)return;let m=o.contentKind.toLowerCase(),g=o.contentId;"Video"===o.contentKind&&"clarifications"===r&&c&&(m="youtubevideo",g=c),t({type:"fetchingPosts"}),i.default.get(p).fetchPosts({topicId:g,cursor:f.cursor,feedbackType:(0,s.toGqlFeedbackType)(r),qaExpandKey:l,focusKind:m,currentSort:"recent"===a?2:1},e).then((e=>{if(null!=e)return t({type:"appendPosts",tab:r,posts:e.feedback,cursor:e.cursor,totalCount:e.totalCount,isComplete:e.isComplete}),e})).catch(d("get next"))};t.changeTabAction=(e,t)=>(n,o)=>{n({type:"changeTab",tab:e}),p(n,o,t)};t.changeSortByAction=(e,t)=>(n,o)=>{n({type:"changeSortBy",sort:e}),p(n,o,t)};t.resetExpandKeyAction=()=>({type:"resetExpandKey"});t.resetNewPostKeyInfoAction=()=>({type:"resetNewPostKey"});t.setFocusOnTopLevelInputAction=()=>({type:"setFocusOnTopLevelInput"});t.resetFocusOnTopLevelInputAction=()=>({type:"resetFocusOnTopLevelInput"});t.postSuccessAction=(e,t)=>({type:"postSuccess",post:e,tab:t});t.upvotePost=(e,t)=>(n,o)=>{const{apiId:a}=o();i.default.get(a).upvotePost({postKey:e.key,alreadyVoted:e.upVoted},t).catch(d("upvote post")),n({type:"upvotePost",postKey:e.key})};t.downvotePost=(e,t)=>(n,o)=>{const{apiId:a}=o();i.default.get(a).downvotePost({postKey:e.key,alreadyVoted:e.downVoted},t).catch(d("downvote post")),n({type:"downvotePost",postKey:e.key})};t.flagPost=(e,t,n)=>(o,a)=>{const{apiId:r}=a();i.default.get(r).flagPost({postKey:e.key,flag:t},n).then((n=>{if(!n)return d("flag post");o({type:"flagPost",postKey:e.key,flag:t})})).catch(d("flag post"))};t.changeType=(e,t,n)=>(o,a)=>{const{apiId:r}=a(),c=l.FeedbackType.cast((0,s.toGqlFeedbackType)(t));i.default.get(r).changeType({entityKey:e.key,intoType:c},n).catch(d("change type of post")),o({type:"changePostType",postKey:e.key,postType:t})};t.clearFlags=(e,t)=>(n,o)=>{const{apiId:a}=o();i.default.get(a).clearFlags({entityKey:e.key},t).catch(d("clear flags")),n({type:"clearFlags",postKey:e.key})};t.deletePost=(e,t)=>(n,o)=>{const{apiId:a}=o();i.default.get(a).deletePost({postKey:e.key},t).then((t=>{t&&n({type:"deletePost",postKey:e.key})}))};t.deleteAcceptedClarificationPost=(e,t)=>(t,n)=>{const{apiId:o}=n();i.default.get(o).deleteAcceptedClarification({clarificationId:e.id}).catch(d("delete accepted clarification")),t({type:"deleteAcceptedClarificationPost",clarificationId:e.id})};t.undeletePost=(e,t)=>(n,o)=>{const{apiId:a}=o();i.default.get(a).undeletePost({entityKey:e.key},t).catch(d("undelete post")),n({type:"undeletePost",postKey:e.key})};t.editPost=(e,t)=>(t,n)=>{t({type:"editPost",postKey:e.key,content:e.content})};t.acceptClarificationAction=(e,t,n,o,a,s,l,c)=>(e,t)=>{const{youtubeId:n,clarificationBeingAcceptedId:d,apiId:p}=t();if(!n)throw new r.KAError("Can't accept a clarification if we don't know the youtubeId.",r.Errors.Internal);if(!d)throw new r.KAError("Can't accept a clarification if we don't have a clarificationBeingAcceptedId.",r.Errors.Internal);i.default.get(p).acceptClarification({kaid:o,youtubeId:n,openTimestamp:s,closeTimestamp:l,text:a}).then((t=>{i.default.get(p).deletePost({postKey:d},c).then((n=>{n&&e({type:"acceptClarification",originalClarificationId:d,clarification:t})}))}))};t.startAcceptingClarificationAction=e=>t=>{t({type:"startAcceptingClarification",clarificationId:e})};t.startEditingPostAction=e=>t=>{t({type:"startEditingPost",postKey:e})};t.editAcceptedClarificationAction=(e,t,n,o)=>(o,s)=>{const{acceptedClarificationPosts:l,postBeingEditedKey:c,apiId:p}=s(),u=l.find((e=>e.id===c));if(!u)throw new r.KAError(`The clarification you're trying to edit doesn't seem to exist!\nThe posts's key is:\n${c||"unknown"}`,r.Errors.Internal);const f=(0,a.default)({},u,{openTimestamp:t,closeTimestamp:n,text:e,youtubeId:u.youtubeId});i.default.get(p).editAcceptedClarification((0,a.default)({},f)).then((e=>{o({type:"editAcceptedClarification",clarification:e}),o({type:"stopEditingPost"})})).catch(d("edit accepted clarification"))};t.stopAcceptingClarificationAction=()=>e=>{e({type:"stopAcceptingClarification"})};t.stopEditingPostAction=()=>e=>{e({type:"stopEditingPost"})};t.modifyNotificationsAction=(e,t,n)=>(o,r)=>{const{apiId:s}=r();i.default.get(s).modifyNotificationsFlag({postKey:e,enable:t},n).then((t=>{if(null==t)return d("modify notification settings");const n=r().posts[e];o({type:"updatePost",post:(0,a.default)({},n,{notifyOnAnswer:t})})})).catch(d("modify notification settings"))};t.fetchReplies=(e,t)=>(n,o)=>{const{apiId:a}=o();i.default.get(a).fetchReplies({postKey:e},t).then((t=>{if(null==t)return d("fetch replies");n({type:"updateReplies",parentKey:e,replies:t})})).catch(d("fetch replies"))};t.addReply=(e,t,n)=>(o,r)=>{const{apiId:s}=r();i.default.get(s).addReply({postKey:e,text:t},n).then((t=>{if(null==t)return;const n=(0,a.default)({},t,{answers:[],replies:[]});o({type:"addReply",post:n,parentKey:e})})).catch(d("add reply"))};t.toggleReplyInputAction=e=>(t,n)=>{t({type:"toggleReplyInput",postKey:e})};const u=(e,t,n,o)=>(a,r)=>{a({type:"updatePosts",tab:e,posts:t,cursor:n,isComplete:o,totalCount:t.length}),a({type:"changeTab",tab:e})};t.updatePosts=u;t.selectPosts=e=>(t,n)=>{t({type:"selectPosts",postKeys:e})};t.deselectPost=e=>(t,n)=>{t({type:"deselectPost",postKey:e})};t.deselectAll=()=>(e,t)=>{e({type:"deselectAll"})}},EFbQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(null===e)return"";const a=o._(r(t||""));if("TOO_BRIEF"===e)return o._("Your %(feedbackType)s is too brief. Try writing a more specific %(feedbackType)s.",{feedbackType:a});if("BAD_CAPITALS"===e)return o._("Try using standard capitalization to improve your %(feedbackType)s's quality.",{feedbackType:a});if("TOO_MANY_REPEATS"===e)return o._('Try to avoid repeating the "%(letter)s" character so many times.',{letter:n});if("TIP_OR_THANKS"===e)return o._("Are you trying to post a tip or thanks? Check out the Tips & Thanks section above.");return""};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("8jAt"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}const r=e=>e.replaceAll("_"," ").toLocaleLowerCase()},F4p2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(n("q1tI")),a=n("mR6N"),r=n("Vxy9"),i=n("JimW"),s=n("i4Cj"),l=p(n("TqM9")),c=p(n("8jAt"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const u=a.StyleSheet.create({formattingOptionsTable:{width:"100%",marginTop:14},formattingOptionsRow:{borderTop:l.border,borderBottom:l.border},formattingOptionsHeaderRow:{backgroundColor:l.secondaryBackgroundColor,textAlign:"left",textTransform:"uppercase"},formattingOptionsRowContent:{padding:"14px 16px 16px 16px"},italic:{fontStyle:"italic"},code:{fontFamily:"Inconsolata"},codeSnippet:{height:231}});var f=()=>o.createElement("table",{className:(0,a.css)(u.formattingOptionsTable)},o.createElement("thead",null,o.createElement("tr",{className:(0,a.css)(u.formattingOptionsRow,u.formattingOptionsHeaderRow)},o.createElement("th",{scope:"col"},o.createElement(i.View,{style:u.formattingOptionsRowContent},s.formattingOptionsStrings.rawTextHeading)),o.createElement("th",{scope:"col"},o.createElement(i.View,{style:u.formattingOptionsRowContent},s.formattingOptionsStrings.formattedTextHeading)))),o.createElement("tbody",null,o.createElement("tr",{className:(0,a.css)(u.formattingOptionsRow)},o.createElement("td",null,o.createElement(i.View,{style:u.formattingOptionsRowContent},"*",s.formattingOptionsStrings.bold,"*")),o.createElement("td",null,o.createElement(i.View,{style:u.formattingOptionsRowContent,"aria-labelledby":"bold","aria-describedby":"boldDescription"},o.createElement(r.LabelLarge,{id:"bold"},s.formattingOptionsStrings.bold),o.createElement("span",{className:"sr-only",id:"boldDescription"},s.formattingOptionsStrings.boldDescription)))),o.createElement("tr",{className:(0,a.css)(u.formattingOptionsRow)},o.createElement("td",null,o.createElement(i.View,{style:u.formattingOptionsRowContent},c.doNotTranslate("_"),s.formattingOptionsStrings.italics,c.doNotTranslate("_"))),o.createElement("td",null,o.createElement(i.View,{style:[u.formattingOptionsRowContent,u.italic],"aria-labelledby":"italics","aria-describedby":"italicsDescription"},o.createElement("span",{id:"italics"},s.formattingOptionsStrings.italics),o.createElement("span",{className:"sr-only",id:"italicsDescription"},s.formattingOptionsStrings.italicsDescription)))),o.createElement("tr",{className:(0,a.css)(u.formattingOptionsRow)},o.createElement("td",null,o.createElement(i.View,{style:u.formattingOptionsRowContent},"`",s.formattingOptionsStrings.code,"`")),o.createElement("td",null,o.createElement(i.View,{style:[u.formattingOptionsRowContent,u.code],"aria-labelledby":"code","aria-describedby":"codeDescription"},o.createElement("span",{id:"code"},s.formattingOptionsStrings.code),o.createElement("span",{className:"sr-only",id:"codeDescription"},s.formattingOptionsStrings.codeDescription)))),o.createElement("tr",{className:(0,a.css)(u.formattingOptionsRow)},o.createElement("td",null,o.createElement(i.View,{style:u.formattingOptionsRowContent},o.createElement(i.View,null,c.doNotTranslate("```if (x < 0) {")),o.createElement(i.View,null,"    ",c.doNotTranslate("return;")),o.createElement(i.View,null,c.doNotTranslate("&#125;```")))),o.createElement("td",null,o.createElement(i.View,{style:[u.formattingOptionsRowContent,u.code],"aria-describedby":"codeSnippetDescription"},o.createElement(i.View,null,c.doNotTranslate("if (x < 0) {")),o.createElement(i.View,null,"    ",c.doNotTranslate("return;")),o.createElement(i.View,null,c.doNotTranslate("&#125;")),o.createElement("span",{className:"sr-only",id:"codeSnippetDescription"},s.formattingOptionsStrings.codeDescription))))));t.default=f},HbaH:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),r=F(n("q1tI")),i=o(n("i8i4")),s=n("/MKj"),l=n("mR6N"),c=n("Vxy9"),d=n("JimW"),p=n("JasB"),u=o(n("Pwnf")),f=n("z8VS"),m=n("Pk2J"),g=o(n("mt3D")),y=o(n("mEQP")),h=o(n("EFbQ")),b=F(n("6OHE")),w=o(n("cfQQ")),E=F(n("4PhQ")),C=o(n("QCGh")),v=n("3xyp"),T=F(n("TqM9")),S=n("i4Cj"),P=n("AE4M"),k=n("DDFQ"),A=n("nR7h"),O=n("iMDn"),x=o(n("M+bw")),I=n("69Ww"),M=n("15OY"),K=n("gMOT");function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function F(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const _=b.domainColors("default").domain1,L=()=>r.createElement("a",{href:(0,v.getZendeskCommunityLink)(),className:(0,l.css)(V.helpLink)},S.footerStrings.helpCenter);class D extends r.Component{constructor(e){super(e),this.editingOrAcceptingClarification=()=>!!(this.props.editing||this.props.acceptingClarification||this.props.editingAcceptedClarification),this.handleWindowKeyup=e=>{"Tab"===e.key&&this.textarea&&document.activeElement===this.textarea&&this.setState({hideFocusOutline:!1})},this.handleFocus=()=>{this.setState({textareaExpanded:!0})},this.collapseTextarea=()=>{if(!this._isMounted)return;this.setState({hideFocusOutline:!0,textareaExpanded:!1,formattingOptionsExpanded:!1,previewExpanded:!1});const{onToggleFormattingOptionsExpanded:e,onTogglePreviewExpanded:t}=this.props;e&&e(!1),t&&t(!1)},this.handleDocumentInteraction=e=>{if(!this.container)return;const t=e.target;this.container.contains(t)||this.collapseTextarea()},this.getSanitizedText=e=>{if(e&&e.length){const t=e.trim();if(t.length)return t}return null},this.handleTextChange=e=>{let t=!0;const n=this.getSanitizedText(e.target.value);n&&(t=!1),this.setState({postContent:n,submitButtonDisabled:t})},this.updateUI=e=>{const{onPostSuccess:t,tab:n,editing:o,onEditPost:a}=this.props;let r=!1;const i=(0,h.default)(e.feedbackCode,e.feedbackType,e.feedbackChar);e.showLowQualityNotice?this._isMounted&&this.setState({submitStatus:"failed",isLowQuality:!0,feedbackEditTip:i||""}):(o?a(e,e.content):this.textarea&&(this.textarea.value=""),t(e,n),r=!0,this.collapseTextarea(),this._isMounted&&this.setState({postContent:"",submitStatus:"ready",submitButtonDisabled:true,isLowQuality:!1}))},this.getPlaceholderText=()=>{const{isReply:e,isAnswer:t,tab:n}=this.props,o=S.postStrings.areResponsesCalledAnswers(n);return e?S.postStrings.replyCommentPlaceholder:!t&&n&&S.tabsStrings[n]?S.tabsStrings[n].placeholder:t&&o?S.postStrings.answerPlaceholder:S.postStrings.replyPlaceholder},this.getTextareaLabel=()=>{const{isReply:e,isAnswer:t,tab:n,acceptingClarification:o}=this.props,a=S.postStrings.areResponsesCalledAnswers(n);return e?S.postStrings.comment:t&&a?S.postStrings.answer:t?S.postStrings.reply:n&&S.tabsStrings[n]?S.tabsStrings[n].textAreaLabel:o?S.miscStrings.acceptedClarificationLabel:""},this.updateFeedback=(e,t,n,o)=>{o.mutate(K.UPDATE_FEEDBACK,{variables:{feedbackKey:e,textContent:t,shownLowQualityNotice:n}}).then((e=>{var t,n,o;if(null!=e&&null!=(t=e.data)&&null!=(n=t.updateFeedback)&&null!=(o=n.error)&&o.code){var a,r,i;this.handleErrors(null==e||null==(a=e.data)||null==(r=a.updateFeedback)||null==(i=r.error)?void 0:i.code)}else{var s,l;const t=null==e||null==(s=e.data)||null==(l=s.updateFeedback)?void 0:l.feedback,n=(0,O.filterFeedback)(t);this.updateUI(n)}}))},this.addFeedbackToDiscussion=(e,t,n,o,a)=>{var r;const i=(0,I.toGqlFeedbackType)(n),s=null!=(r=M.FeedbackType.cast(i))?r:M.FeedbackType.QUESTION;this.props.gqlClient.mutate(A.ADD_FEEDBACK_TO_DISCUSSION,{variables:{focusKind:e,focusId:t,feedbackType:s,textContent:o}}).then((e=>{var t,n,o;if(null!=e&&null!=(t=e.data)&&null!=(n=t.addFeedbackToDiscussion)&&null!=(o=n.error)&&o.code){var a,r,i;this.handleErrors(null==e||null==(a=e.data)||null==(r=a.addFeedbackToDiscussion)||null==(i=r.error)?void 0:i.code)}else{var s,l;const t=null==e||null==(s=e.data)||null==(l=s.addFeedbackToDiscussion)?void 0:l.feedback,n=(0,O.filterFeedback)(t);this.updateUI(n)}}))},this.addAnswerToQuestion=(e,t,n,o)=>{this.props.gqlClient.mutate(A.ADD_FEEDBACK_TO_DISCUSSION,{variables:{parentKey:e,textContent:t,fromVideoAuthor:n,shownLowQualityNotice:o,feedbackType:M.FeedbackType.ANSWER}}).then((t=>{var n,o,a;if(null!=t&&null!=(n=t.data)&&null!=(o=n.addFeedbackToDiscussion)&&null!=(a=o.error)&&a.code)this.handleErrors(t.data.addFeedbackToDiscussion.error.code);else{var r,i;const n=null==t||null==(r=t.data)||null==(i=r.addFeedbackToDiscussion)?void 0:i.feedback,o=(0,O.filterFeedback)(n);o.questionKey=e,this.updateUI(o)}}))},this.handleErrors=e=>{this._isMounted&&this.setState({submitStatus:"failed"})},this.getSubmissionType=()=>{const{feedbackKey:e,youtubeId:t,tab:n,topicSlug:o,isAnswer:a,postKey:r}=this.props;let i=this.props.contentKind?this.props.contentKind.toLowerCase():null,s=this.props.contentId;return"video"===i&&"clarifications"===n&&t&&(i="youtubevideo",s=t),r?"UpdateFeedback":!r&&a&&e?"AddAnswer":!r&&s&&i&&"comments"===n&&!a?"AddComment":!r&&s&&i&&n?"AddFeedback":(E.default.error("We don't have enough information to submit this type of post.",E.Errors.Internal,{sentryData:{contexts:{extras:{feedbackType:n,contentKind:i,topicSlug:o}}}}),"error")},this.handleSubmit=()=>{const{feedbackKey:e,youtubeId:t,tab:n,isReply:o,onAddReply:a,postKey:r,acceptingClarification:i,editingAcceptedClarification:s,onSubmitAcceptedClarification:l,gqlClient:c}=this.props,{postContent:d,isFromAuthor:p,submitStatus:u,isLowQuality:f}=this.state;if(!d||"submitting"===u)return;if((i||s)&&l&&d)return void l(d);if(!r&&o&&e&&d)return this.setState({submitStatus:"submitting"}),void a(e,d,c);this.setState({submitStatus:"submitting",feedbackEditTip:""});let m=this.props.contentKind?this.props.contentKind.toLowerCase():null,g=this.props.contentId;"video"===m&&"clarifications"===n&&t&&(m="youtubevideo",g=t);switch(this.getSubmissionType()){case"UpdateFeedback":r&&this.updateFeedback(r,d,f,c);break;case"AddAnswer":e&&this.addAnswerToQuestion(e,d,p,f);break;case"AddComment":case"AddFeedback":m&&g&&this.addFeedbackToDiscussion(m,g,n,d,f)}},this.renderTextarea=e=>{const{isAnswer:t,isReply:n,editing:o}=this.props,{hideFocusOutline:i,textareaExpanded:s,submitStatus:c,feedbackEditTip:p}=this.state,u="submitting"===c,f=this.getPlaceholderText(),m=s&&p,g=s&&!t&&!n&&!o,y=[V.textareaContainer,!!m&&V.textareaContainerError,s&&(n||this.editingOrAcceptingClarification()?V.replyTextareaContainerExpanded:V.textareaContainerExpanded)],h=[V.textareaField,(t||this.editingOrAcceptingClarification())&&V.textareaFieldForAnswer,g&&V.textareaFieldExpanded,i&&V.textareaNoFocusOutline,m&&V.textareaFieldError],b=n?{rows:1}:null;return r.createElement(d.View,{style:y},r.createElement("textarea",(0,a.default)({id:e,className:(0,l.css)(h),placeholder:`${f}`,"aria-label":f,onFocus:this.handleFocus,onBlur:()=>this.setState({hideFocusOutline:!0}),onClick:()=>this.setState({hideFocusOutline:!0}),onChange:this.handleTextChange,onKeyUp:this.handleTextChange,ref:e=>this.textarea=e,disabled:u},b)))},this.renderFooter=()=>{const{tab:e,isAnswer:t,isReply:n,editing:o,acceptingClarification:a,editingAcceptedClarification:i,onToggleFormattingOptionsExpanded:s,onTogglePreviewExpanded:l,onCancel:c}=this.props,{formattingOptionsExpanded:d,previewExpanded:p,submitButtonDisabled:u,submitStatus:f,textareaExpanded:m}=this.state,g=a||i,h=!!(m||t||o)&&!a;return r.createElement(y.default,{tab:e,content:this.state.postContent||"",isAnswer:t,isReply:n,editing:o,acceptingClarification:g,submitButtonDisabled:u&&!g,submitStatus:f,onSubmit:this.handleSubmit,onCancel:c,canShowFormattingOptions:h,formattingOptionsExpanded:d,onToggleFormattingOptionsExpanded:e=>{s&&s(e),this.setState({formattingOptionsExpanded:e})},previewExpanded:p,onTogglePreviewExpanded:e=>{l&&l(e),this.setState({previewExpanded:e})}})},this.state={hideFocusOutline:!0,textareaExpanded:!1,formattingOptionsExpanded:!1,previewExpanded:!1,postContent:e.initialPostContent,submitButtonDisabled:!0,submitStatus:"ready",isLowQuality:!1,feedbackEditTip:"",isFromAuthor:!1}}UNSAFE_componentWillMount(){const{isAnswer:e,isReply:t}=this.props;e||t||!(0,P.userHasJustLoggedIn)(window.location)||this.setState({hideFocusOutline:!1})}componentDidMount(){const{isAnswer:e,isReply:t}=this.props;this._isMounted=!0;const{textarea:n}=this;n&&!e&&!t&&(0,P.userHasJustLoggedIn)(window.location)&&n.focus({preventScroll:!0}),n&&this.props.autoFocus&&n.focus(),n&&(n.value=this.props.initialPostContent),document.addEventListener("keyup",this.handleWindowKeyup),document.addEventListener("mousedown",this.handleDocumentInteraction),document.addEventListener("touchstart",this.handleDocumentInteraction)}UNSAFE_componentWillUpdate(e,t){const{textarea:n}=this;n&&e.autoFocus&&this.state.hideFocusOutline&&this.setState({hideFocusOutline:!1}),e.newPostKey&&"submitting"===this.state.submitStatus&&(this.textarea&&(this.textarea.value=""),this.collapseTextarea(),this.setState({submitStatus:"ready",submitButtonDisabled:!0,isLowQuality:!1}),this.props.resetNewPostKeyInfo&&this.props.resetNewPostKeyInfo())}componentDidUpdate(e,t){const{textarea:n}=this;n&&this.props.autoFocus&&!e.autoFocus&&(setTimeout((()=>n&&n.focus()),0),this.props.resetFocusOnTopLevelInput())}componentWillUnmount(){this._isMounted=!1,document.removeEventListener("keyup",this.handleWindowKeyup),document.removeEventListener("mousedown",this.handleDocumentInteraction),document.removeEventListener("touchstart",this.handleDocumentInteraction)}getIsModerator(){const{profile:e}=this.props;return!!e&&e.get("isModerator")}render(){const{tab:e,isAnswer:t,isReply:n,showAvatar:o,clarificationsEnabled:a,contentKind:s}=this.props,{textareaExpanded:u,feedbackEditTip:m,isFromAuthor:y}=this.state,h=this.getTextareaLabel(),b=e&&S.tabsStrings[e]||{},w=!t&&b.tipLabel,E=!t&&b.tipContents,v=u&&m,T=u||t||this.editingOrAcceptingClarification(),P=u&&!t&&!n&&!this.editingOrAcceptingClarification(),k="clarifications"!==e&&a,A=e=>{const a=e.get("content-input");return r.createElement(d.View,{style:n?V.replyContainer:V.container,ref:e=>this.container=i.default.findDOMNode(e)},r.createElement(d.View,{"aria-live":"polite",style:V.errorText},v&&r.createElement(c.Body,null,m)),r.createElement(d.View,{style:[V.textAreaHeading,o&&V.textAreaHeadingMargin]},r.createElement("label",{htmlFor:a},r.createElement(c.Body,null,h)),r.createElement(p.Spring,null),t&&"scratchpad"!==s&&this.getIsModerator()?r.createElement(f.Checkbox,{label:S.postStrings.fromTheAuthor,style:V.postAsAuthorCheckbox,checked:y,onChange:e=>this.setState({isFromAuthor:e})}):null),r.createElement(d.View,{style:V.expandableContainer},o&&r.createElement(d.View,{style:V.avatarContainer},r.createElement(g.default,{showCurrentUserAvatar:!0})),r.createElement(d.View,{style:V.textareaAndTipsContainer},this.renderTextarea(a),T&&this.renderFooter(),P&&r.createElement(d.View,null,r.createElement(d.View,{style:V.tip},r.createElement(d.View,{style:V.tipHeading},r.createElement(c.LabelLarge,null,w)),E),r.createElement(d.View,{style:V.helpLinksContainer},r.createElement(L,null),k&&r.createElement(C.default,{className:(0,l.css)(V.helpLink),onClick:this.props.onReportMistake},S.footerStrings.reportMistake))))))};return r.createElement(d.UniqueIDProvider,{mockOnFirstRender:!0,scope:"discussion-input"},(e=>r.createElement("form",null,A(e))))}}D.defaultProps={initialPostContent:"",editing:!1,showAvatar:!0};const V=l.StyleSheet.create({container:{backgroundColor:b.colors.white},replyContainer:{backgroundColor:u.default.offWhite},errorText:{marginLeft:64,color:u.default.red},expandableContainer:{flexDirection:"row"},avatarContainer:{marginRight:T.avatarFormSpace},textareaAndTipsContainer:{width:"100%"},textAreaHeading:{flexDirection:"row"},textAreaHeadingMargin:{marginLeft:56},postAsAuthorCheckbox:{minWidth:148,marginTop:4},textareaContainer:{marginTop:4,marginBottom:0,borderRadius:4,flex:1,border:T.border,backgroundColor:u.default.white},textareaContainerExpanded:{borderBottomRightRadius:0,borderBottomLeftRadius:0},replyTextareaContainerExpanded:{paddingBottom:7},textareaContainerError:{borderColor:u.default.red,backgroundColor:T.errorBackgroundColor},textareaField:{boxSizing:"border-box",border:"none",resize:"vertical",width:"98%",fontSize:16,lineHeight:1.38,transition:`min-height ${b.standardTransition}`,minHeight:34,overflow:"auto",padding:"8px 12px",margin:"1px 0px 1px 1px",":focus":{outline:"auto"},"::placeholder":{color:`solid 1px ${u.default.offBlack16}`,fontSize:16,lineHeight:1.38}},textareaFieldForAnswer:{minHeight:62},textareaFieldError:{backgroundColor:T.errorBackgroundColor},textareaFieldExpanded:{minHeight:T.textareaMinHeight,overflow:"auto"},textareaNoFocusOutline:{":focus":{outline:"none"}},tip:{marginTop:24,marginBottom:16,padding:24,borderRadius:2,backgroundColor:T.secondaryBackgroundColor},tipHeading:{marginBottom:8},helpLinksContainer:{textAlign:"right"},helpLink:{color:_,textDecoration:"none",":hover":{textDecoration:"underline"}}}),N={onAddReply:k.addReply,onEditPost:k.editPost,resetFocusOnTopLevelInput:k.resetFocusOnTopLevelInputAction};var j=(0,m.compose)(w.default,x.default,(0,s.connect)((e=>({newPostKey:e.newPostKey,youtubeId:e.youtubeId})),N))(D);t.default=j},IW3x:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.FEEDBACK_QUERY=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    query feedbackQuery(
        $topicId: String!
        $focusKind: String!
        $cursor: String
        $limit: Int
        $feedbackType: FeedbackType!
        $currentSort: Int
        $qaExpandKey: String
    ) {
        feedback(
            focusId: $topicId
            cursor: $cursor
            limit: $limit
            feedbackType: $feedbackType
            focusKind: $focusKind
            sort: $currentSort
            qaExpandKey: $qaExpandKey
        ) {
            feedback {
                replyCount
                appearsAsDeleted
                author {
                    id
                    kaid
                    nickname
                    avatar {
                        name
                        imageSrc
                    }
                }
                badges {
                    name
                    icons {
                        smallUrl
                    }
                    description
                }
                content
                date
                definitelyNotSpam
                deleted
                downVoted
                expandKey
                feedbackType
                flaggedBy
                flaggedByUser
                flags
                focusUrl
                focus {
                    kind
                    id
                    translatedTitle
                    relativeUrl
                }
                fromVideoAuthor
                key
                lowQualityScore
                notifyOnAnswer
                permalink
                qualityKind
                replyCount
                replyExpandKeys
                showLowQualityNotice
                sumVotesIncremented
                upVoted
                ... on QuestionFeedback {
                    hasAnswered
                    answers {
                        replyCount
                        appearsAsDeleted
                        author {
                            id
                            kaid
                            nickname
                            avatar {
                                name
                                imageSrc
                            }
                        }
                        badges {
                            name
                            icons {
                                smallUrl
                            }
                            description
                        }
                        content
                        date
                        definitelyNotSpam
                        deleted
                        downVoted
                        expandKey
                        feedbackType
                        flaggedBy
                        flaggedByUser
                        flags
                        focusUrl
                        focus {
                            kind
                            id
                            translatedTitle
                            relativeUrl
                        }
                        fromVideoAuthor
                        key
                        lowQualityScore
                        notifyOnAnswer
                        permalink
                        qualityKind
                        replyCount
                        replyExpandKeys
                        showLowQualityNotice
                        sumVotesIncremented
                        upVoted
                    }
                    isOld
                }
                ... on AnswerFeedback {
                    question {
                        replyCount
                        appearsAsDeleted
                        author {
                            id
                            kaid
                            nickname
                            avatar {
                                name
                                imageSrc
                            }
                        }
                        badges {
                            name
                            icons {
                                smallUrl
                            }
                            description
                        }
                        content
                        date
                        definitelyNotSpam
                        deleted
                        downVoted
                        expandKey
                        feedbackType
                        flaggedBy
                        flaggedByUser
                        flags
                        focusUrl
                        focus {
                            kind
                            id
                            translatedTitle
                            relativeUrl
                        }
                        fromVideoAuthor
                        key
                        lowQualityScore
                        notifyOnAnswer
                        permalink
                        qualityKind
                        replyCount
                        replyExpandKeys
                        showLowQualityNotice
                        sumVotesIncremented
                        upVoted
                    }
                }
            }
            cursor
            isComplete
            sortedByDate
        }
    }
`)));t.FEEDBACK_QUERY=s},IZy4:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getTimestampSecondsFromText=t.getTimestampFromSeconds=t.formatContent=t.VideoTimestampLink=void 0;var a=l(n("q1tI")),r=l(n("8jAt")),i=o(n("wINb"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const c=/(\d{1,3}):([0-5]\d)/g;t.getTimestampSecondsFromText=e=>{let t=0,n=20;const o=c.exec(e);return o&&(t=parseFloat(o[1]),n=parseFloat(o[2])),60*t+n};t.getTimestampFromSeconds=e=>{const t=Math.floor(e/60),n=e-60*t,o=t.toString(),a=n.toString();return{minutes:o,seconds:a.length>1?a:0+a}};const d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},p=e=>d[e],u=/[&<>"'`=]/,f=/[&<>"'`=]/g,m=(e,t,n,o)=>{const a=`<img src=${(0,i.default)("/images/play.png")} class='youTubePlayIcon' aria-hidden="true" alt="" />`;return`<div class='youTubeLink' data-seconds='${60*Number(t)+Number(n)}' tabindex='0' role='link' aria-label='${`${e} ${r._("Click to jump to %(timestamp)s in video",{timestamp:e})}`}'>${o||`${a} ${e}`}</div>`},g=(e,t,n)=>m(e,t,n);t.VideoTimestampLink=e=>a.createElement("span",{dangerouslySetInnerHTML:{__html:m(e.timestamp,e.minutes,e.seconds,e.children)}});t.formatContent=(e,t)=>{let n=(e=>{if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return u.test(e)?e.replace(f,p):e})(e);return n=n.replace(/[\n]/g,"<br>"),n=n.replace(/(\W|^)_(\S.*?\S)_(\W|$)/g,(function(e,t,n,o){return t+"<em>"+n+"</em>"+o})),n=n.replace(/(\W|^)\*(\b.*?\b)\*(\W|$)/g,(function(e,t,n,o){return t+"<strong>"+n+"</strong>"+o})),n=n.replace(/&#x60;&#x60;&#x60;(.*?)&#x60;&#x60;&#x60;/gm,(function(e,t){return"<pre><code class='discussion-code-format discussion-code-block'>"+(t=(t=t.replace(/^\s*(<br>)+/,"")).replace(/(<br>)+\s*$/,""))+"</code></pre>"})),n=n.replace(/&#x60;(.*?)&#x60;/g,(function(e,t){return"<code class='discussion-code-format discussion-code-inline'>"+t+"</code>"})),n=((e,t)=>e.replace(/\b(?:(?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>&]+|&amp;|\((?:[^\s()<>]|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’&]))/gi,(e=>{if(!/^https?:\/\//.test(e)){if(!e.match(/[^\/]*khanacademy.org|^\//))return e;e="https://"+e}return`<a  href="${e}" ${t?'rel="nofollow"':""}>${e}</a>`})))(n,t),n=n.replace(c,g),n}},KPIR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),a=n("mR6N"),r=n("i4Cj"),i=n("4Arr");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e,t){return Array.prototype.filter.call(e,t)}function c(e){const t=l(e,(e=>e.classList.contains("overall-eval-info"))),n=t.length>0?t[0].textContent:"";return 0===n.length?null:o.createElement("div",{className:(0,a.css)(p.moreInfo)},o.createElement("strong",null,r.evalStrings.fromTheEvaluator),o.createElement("div",{dangerouslySetInnerHTML:{__html:(0,i.formatContent)(n,!0)}}))}class d extends o.Component{render(){const{post:e}=this.props,{content:t,question:n}=e,s=e.sumVotesIncremented>1,d=function(e){const t=document.implementation.createHTMLDocument();return t.body?(t.body.innerHTML=e,t.body.children||new HTMLCollection):new HTMLCollection}(t),u=l(d,(e=>{const t="li"===e.tagName.toLowerCase(),n=e.classList.contains("pass");return t&&!n})),f=s?r.evalStrings.projectPassedEval:r.evalStrings.projectFailedEval;let m=null;if(s){const e=c(d);e&&(m=o.createElement("div",null,e))}else{const e=u.map((function(e,t){const{primary:n,extra:r}=function(e){const t=(e=e.cloneNode(!0)).querySelector("div");let n="";return t&&(n=t.textContent,t.innerHTML=""),{primary:e.textContent,extra:n}}(e);return o.createElement("li",{key:"objective-"+t},o.createElement("div",{className:(0,a.css)(p.failedObjectiveItem)},o.createElement("strong",null,n)),o.createElement("div",{className:(0,a.css)(p.objectiveMoreInfo),dangerouslySetInnerHTML:{__html:(0,i.formatContent)(r,!0)}}))}));m=o.createElement("div",null,c(d),o.createElement("div",{className:(0,a.css)(p.failedObjectives)},o.createElement("strong",null,r.evalStrings.needsMoreWork),o.createElement("ul",{className:(0,a.css)(p.styledList)},e)))}const g=n&&n.content||"";return o.createElement("div",null,o.createElement("div",null,g),o.createElement("div",{className:"eval-guideline"},o.createElement("div",{className:(0,a.css)(p.evalTitle)},f),m))}}t.default=d;const p=a.StyleSheet.create({moreInfo:{marginTop:20},objectiveMoreInfo:{marginBottom:10},failedObjectiveItem:{marginTop:10},failedObjectives:{marginTop:20},styledList:{marginLeft:16,listStyle:"disc"},evalTitle:{fontSize:"larger"}})},RTsg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(o,i,s):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),a=n("IZy4");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}class i extends o.Component{render(){const e=(0,a.formatContent)(this.props.string,!0);return o.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}}t.default=i},RdRB:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),r=n("mR6N"),i=o(n("lTCR")),s=n("JimW"),l=o(n("Pwnf")),c=o(n("gE8/")),d=n("Vxy9"),p=o(n("yA8i")),u=n("8r+/"),f=o(n("wINb")),m=o(n("fXTs")),g=n("i4Cj"),y=n("AE4M");let h;function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}class w extends a.Component{shouldComponentUpdate(e){return!e.gqlResult.loading}render(){const{gqlResult:{loading:e,data:t}}=this.props;if(e||!t||!t.user)return a.createElement("span",null,g.avatarStrings.findingProfileInformation);const{nickname:n,username:o,avatar:i,bio:l,points:c,isPhantom:p,isActor:u,isCoachedByActor:m,userSummaryIsVisibleToActor:h,actorHasUserScopedPermission:b}=t.user,w=!(u||m||h||b);return a.createElement(s.View,{style:C.tooltipContainer},a.createElement(s.View,{style:C.avatarContainer},i&&n&&a.createElement("img",{className:(0,r.css)(C.tooltipAvatar),src:(0,f.default)(i.imageSrc),alt:g.avatarStrings.getAvatarForUser(i&&(0,y.getAriaAvatarName)(i.name),n)})),a.createElement(s.View,{style:C.tooltipBody},a.createElement(s.View,{style:C.tooltipHeader},a.createElement(d.HeadingSmall,{style:[C.nameText,C.nickname]},p?g.avatarStrings.unclaimedPoints:n),a.createElement(d.LabelMedium,{style:[C.nameText,C.username]},o?"@"+o:null)),a.createElement(d.LabelMedium,{style:C.bio},(0,y.hideExternalLinks)(l)),"sal"===o?a.createElement(d.LabelMedium,{style:C.points},"+∞"):a.createElement(d.LabelMedium,{style:C.points},!c&&0!==c||w?g.avatarStrings.questionMark:"+"+c.toLocaleString())))}}const E=(0,u.gqlOp)((0,i.default)(h||(h=(e=>e)`
    query getUserHoverCardProfile($kaid: String!) {
        user(kaid: $kaid) {
            id
            nickname
            username
            bio
            avatar {
                name
                imageSrc
            }
            points
            isPhantom
            isActor
            isCoachedByActor
            userSummaryIsVisibleToActor
            actorHasUserScopedPermission(capability: CAN_VIEW_USER_IDENTITY)
        }
    }
`))),C=r.StyleSheet.create({tooltipContainer:{flexDirection:"row",width:350},avatarContainer:{marginRight:c.default.xLarge_32,marginTop:c.default.xxSmall_6},tooltipAvatar:{width:64,height:64},tooltipBody:{width:"100%"},tooltipHeader:{flexDirection:"row",alignItems:"flex-end",flexWrap:"wrap",marginTop:c.default.xxSmall_6,marginBottom:c.default.small_12},nameText:{marginTop:c.default.xxSmall_6,maxWidth:272,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},nickname:{marginRight:c.default.small_12},username:{color:l.default.offBlack50,":hover":{textDecoration:"none"}},bio:{marginBottom:c.default.medium_16},points:{color:l.default.darkBlue,textAlign:"right",fontWeight:700,fontSize:16,marginBottom:c.default.small_12}}),v=(0,p.default)((({kaid:e})=>({query:E,fetchPolicy:"cache-first",variables:{kaid:e}})))(w);var T=e=>a.createElement(m.default,null,a.createElement(v,e));t.default=T},WmEb:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.VOTE_ENTITY_MUTATION=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation VoteEntityMutation($postKey: String!, $voteType: Int!) {
        voteEntity(entityKey: $postKey, voteType: $voteType) {
            error {
                code
            }
        }
    }
`)));t.VOTE_ENTITY_MUTATION=s},XKyD:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ConfirmDeletionModal=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),r=n("mR6N"),i=n("Uafs"),s=n("JimW"),l=n("Vxy9"),c=n("JasB"),d=o(n("wa3X")),p=n("i4Cj");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const f=({handleClose:e,handleSubmit:t})=>a.createElement(i.OnePaneDialog,{style:{maxHeight:280},role:"alertdialog",title:p.confirmDeletionModalStrings.delete,content:a.createElement(s.View,null,a.createElement(l.Body,null,p.confirmDeletionModalStrings.confirmDeletion)),footer:a.createElement(s.View,{style:m.footer},a.createElement(d.default,{onClick:e,kind:"tertiary"},p.confirmDeletionModalStrings.cancel),a.createElement(c.Strut,{size:16}),a.createElement(d.default,{onClick:t,color:"destructive"},p.confirmDeletionModalStrings.delete))});t.ConfirmDeletionModal=f;const m=r.StyleSheet.create({footer:{flexDirection:"row"}});var g=f;t.default=g},doqZ:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.DELETE_POST_MUTATION=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation DeletePostMutation($postKey: String!) {
        hideFeedback(feedbackKey: $postKey) {
            error {
                code
            }
        }
    }
`)));t.DELETE_POST_MUTATION=s},fjY8:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),r=n("mR6N"),i=n("DzHr"),s=n("JimW"),l=n("Vxy9"),c=o(n("wa3X")),d=n("JasB"),p=o(n("SGU3")),u=n("i4Cj");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}class m extends a.Component{render(){const{flaggedBy:e,flags:t,onCancel:n,onClearAllFlags:o}=this.props;return a.createElement(i.OneColumnModal,{content:a.createElement(s.View,null,a.createElement(l.Title,{style:g.title},u.clearFlagsModalStrings.flagsTitle),e.map(((e,n)=>a.createElement(l.Body,{key:e},a.createElement(p.default,{href:`/profile/${e}/discussion`,target:"_blank"},e)," - ",t[n])))),footer:a.createElement(s.View,{style:g.footer},a.createElement(c.default,{onClick:n,kind:"tertiary"},u.clearFlagsModalStrings.cancel),a.createElement(d.Strut,{size:16}),a.createElement(c.default,{onClick:o},u.clearFlagsModalStrings.clearAllFlags))})}}t.default=m;const g=r.StyleSheet.create({footer:{flexDirection:"row"},title:{marginBottom:24}})},gMOT:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_FEEDBACK=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation UpdateFeedback(
        $feedbackKey: String!
        $textContent: String!
        $shownLowQualityNotice: Boolean
    ) {
        updateFeedback(
            feedbackKey: $feedbackKey
            textContent: $textContent
            shownLowQualityNotice: $shownLowQualityNotice
        ) {
            feedback {
                appearsAsDeleted
                author {
                    id
                    kaid
                    nickname
                    avatar {
                        name
                        imageSrc
                    }
                }
                content
                date
                definitelyNotSpam
                deleted
                downVoted
                expandKey
                feedbackType
                flaggedBy
                flags
                focusUrl
                focus {
                    kind
                    id
                    translatedTitle
                    relativeUrl
                }
                fromVideoAuthor
                key
                lowQualityScore
                notifyOnAnswer
                permalink
                qualityKind
                replyCount
                replyExpandKeys
                showLowQualityNotice
                sumVotesIncremented
                upVoted
            }
            error {
                code
            }
        }
    }
`)));t.UPDATE_FEEDBACK=s},giNK:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.PERFORM_MOD_ACTION=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation PerformModAction(
        $modAction: ModAction!
        $entityKey: String!
        $intoType: FeedbackType
    ) {
        performModAction(
            modAction: $modAction
            entityKey: $entityKey
            intoType: $intoType
        ) {
            error {
                code
            }
        }
    }
`)));t.PERFORM_MOD_ACTION=s},gzgZ:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),r=n("mR6N"),i=o(n("Pwnf")),s=n("Vxy9");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const c=(0,n("JimW").addStyle)("button");class d extends a.Component{render(){const{disabled:e,icon:t,id:n,children:o,onClick:r,style:i}=this.props;return a.createElement(c,{id:n,onClick:r,style:[p.linkStyledButton,p.toolButton,e&&p.disabled,i],disabled:e},t,a.createElement(s.LabelXSmall,{style:p.text},o))}}t.default=d;const p=r.StyleSheet.create({linkStyledButton:{color:i.default.offBlack64,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0,":focus":{outline:"auto"}},toolButton:{display:"flex",alignItems:"center"},text:{marginLeft:5},disabled:{cursor:"default",color:i.default.offBlack32}})},iMDn:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.filterFeedbackList=t.filterFeedback=void 0;var a=o(n("pVnL")),r=o(n("8OQS"));const i=["__typename","feedbackType","author","replyCount","focus","answers"],s=e=>{var t,n;const{feedbackType:o,author:s,replyCount:c,focus:d,answers:p}=e,u=(0,r.default)(e,i),f=o?o.toLowerCase():"",m=(0,a.default)({},u,{type:f,authorAvatarName:(null==s||null==(t=s.avatar)?void 0:t.name)||"",authorAvatarSrc:(null==s||null==(n=s.avatar)?void 0:n.imageSrc)||"",authorKaid:(null==s?void 0:s.kaid)||"",authorNickname:(null==s?void 0:s.nickname)||"",replyCount:c||0,answerCount:0,focus:d,replies:[],feedbackType:o});if(p){const e=p?l(p):[];m.answers=e,m.answerCount=e.length}return m};t.filterFeedback=s;const l=e=>e.filter(Boolean).map(s);t.filterFeedbackList=l},iRWY:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),r=y(n("q1tI")),i=n("mR6N"),s=n("JimW"),l=n("Vxy9"),c=o(n("Pwnf")),d=y(n("hCZ8")),p=o(n("Nw73")),u=o(n("oia8")),f=n("i4Cj"),m=y(n("TqM9"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const h=(0,s.addStyle)("button");class b extends r.Component{constructor(...e){super(...e),this.state={flagType:null},this.handleSubmit=()=>{this.props.onClose(this.state.flagType)}}render(){const{onClose:e,post:t,tab:n}=this.props,o=["inappropriate"];return"questions"===n?o.push("shouldBeTipsOrThanks"):"comments"===n&&o.push("shouldBeQuestion"),o.push.apply(o,["lowquality","spam"]),r.createElement(d.default,{style:w.modal,onClose:e},r.createElement(s.View,{style:w.content},r.createElement(l.Title,{style:w.title},f.flagModalStrings.header),r.createElement(s.View,{style:w.post},r.createElement(l.Body,null,t.content)),r.createElement(s.View,null,o.map(((e,t)=>r.createElement(s.View,{key:e,style:[w.row,t>0&&w.separator]},r.createElement(h,{style:w.button,onClick:()=>this.setState({flagType:e})},r.createElement(u.default,{selected:this.state.flagType===e}),r.createElement(l.Body,null,f.flagModalStrings.flags[e].title)),r.createElement(l.Body,{style:w.desc},f.flagModalStrings.flags[e].description)))))),r.createElement(d.ModalFooter,{style:E},r.createElement(p.default,{width:138,color:c.default.blue,onClick:this.handleSubmit,disabled:!this.state.flagType},f.flagModalStrings.submit)))}}t.default=b;const w=i.StyleSheet.create({modal:{width:662,maxHeight:"80%"},title:{marginBottom:24},content:{flex:1,padding:"64px 64px 0px 64px"},row:{padding:"16px 0",flexShrink:0,alignItems:"start"},button:(0,a.default)({},m.notAButton,{display:"inline-flex",flexDirection:"row",alignItems:"center",":focus":{outline:"auto"}}),separator:{borderTop:`solid 1px ${c.default.offBlack16}`},desc:{color:c.default.offBlack64,paddingLeft:24},post:{flex:1,border:`solid 1px ${c.default.offBlack16}`,color:c.default.offBlack64,borderRadius:4,padding:16,overflow:"auto"}}),E={justifyContent:"flex-end",paddingLeft:16,paddingRight:16}},jEbg:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.FEEDBACK_REPLIES_QUERY=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    query getFeedbackReplies($postKey: String!) {
        feedbackReplies(feedbackKey: $postKey) {
            expandKey
            appearsAsDeleted
            author {
                id
                kaid
                nickname
                avatar {
                    name
                    imageSrc
                }
            }
            content
            date
            definitelyNotSpam
            deleted
            downVoted
            expandKey
            feedbackType
            flaggedBy
            flaggedByUser
            flags
            focusUrl
            fromVideoAuthor
            key
            lowQualityScore
            notifyOnAnswer
            permalink
            qualityKind
            replyCount
            replyExpandKeys
            showLowQualityNotice
            sumVotesIncremented
            upVoted
        }
    }
`)));t.FEEDBACK_REPLIES_QUERY=s},mEQP:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),r=w(n("q1tI")),i=o(n("i8i4")),s=n("mR6N"),l=o(n("wa3X")),c=n("JasB"),d=n("JimW"),p=n("Vxy9"),u=o(n("F4p2")),f=n("i4Cj"),m=w(n("6OHE")),g=o(n("uEGL")),y=w(n("TqM9")),h=o(n("RTsg"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const E=m.domainColors("default").domain1;class C extends r.Component{constructor(...e){super(...e),this.renderFormattingOptionsButton=e=>{const{onToggleFormattingOptionsExpanded:t,formattingOptionsExpanded:n}=this.props,o=!n,a=n?f.footerStrings.hideFormattingOptions:f.footerStrings.showFormattingOptions;return r.createElement(l.default,{kind:"tertiary","aria-expanded":n?"true":"false","aria-controls":e,"aria-label":a,style:(v.button,v.formattingButton),onClick:()=>{t&&t(o)}},a)},this.renderPreviewButton=e=>{const{onTogglePreviewExpanded:t,previewExpanded:n}=this.props,o=!n,a=n?f.footerStrings.hideMarkdownPreview:f.footerStrings.showMarkdownPreview;return r.createElement(l.default,{kind:"tertiary","aria-expanded":n?"true":"false","aria-controls":e,"aria-label":a,style:(v.button,v.formattingButton),onClick:()=>{t&&t(o)}},a)}}componentDidUpdate(e){const{submitButton:t}=this;t&&"failed"===this.props.submitStatus&&"submitting"===e.submitStatus&&setTimeout((()=>t&&t.focus()),0)}getSubmitButtonCopy(){const{tab:e,isAnswer:t,isReply:n,editing:o,acceptingClarification:a,submitStatus:r}=this.props,i=f.postStrings.areResponsesCalledAnswers(e);return"submitting"===r?f.footerStrings.submitting:o?f.postStrings.saveChanges:a?f.postStrings.acceptClarification:n?f.postStrings.comment:!t&&e?f.tabsStrings[e].buttonContents:t&&i?f.postStrings.answerButtonContents:f.postStrings.replyButtonContents}renderPreviewArea(){return r.createElement(p.Body,{style:[y.content,v.previewContainer,this.props.previewExpanded&&v.previewContainerExpanded]},r.createElement(h.default,{string:this.props.content}))}render(){const{isReply:e,editing:t,acceptingClarification:n,canShowFormattingOptions:o,formattingOptionsExpanded:a,submitButtonDisabled:s,submitStatus:p,onSubmit:m}=this.props,g=t||n,y="submitting"===p,h=this.getSubmitButtonCopy(),b=n?[v.textareaFooter,v.textareaFooterAcceptingClarification]:v.textareaFooter;return r.createElement(d.UniqueIDProvider,{mockOnFirstRender:!0,scope:"discussion-post-formatting-options-button"},(t=>r.createElement(d.View,{style:[v.textareaContainerFooter,e&&v.textareaReplyFooter]},r.createElement(d.View,{style:b,"aria-live":"polite"},!n&&this.renderPreviewButton(t.get("toggle-preview-button")),!n&&this.renderFormattingOptionsButton(t.get("toggle-button")),r.createElement(d.View,{style:v.buttonContainer},g&&r.createElement(l.default,{kind:"tertiary",onClick:this.props.onCancel,style:v.button},f.postStrings.cancel),g&&r.createElement(c.Strut,{size:8}),r.createElement(l.default,{disabled:s||y,onClick:m,spinner:y,style:v.button,ref:e=>this.submitButton=i.default.findDOMNode(e),"aria-label":h},h))),r.createElement(d.View,null,this.renderPreviewArea()),r.createElement(d.View,{style:[v.formattingOptionsContainer,o&&a&&v.formattingOptionsContainerExpanded],id:t.get("toggle-button")},o&&a&&r.createElement(u.default,null)))))}}t.default=C,C.defaultProps={editing:!1,acceptingClarification:!1};const v=s.StyleSheet.create({textareaContainerFooter:{padding:"12px 16px",border:y.border,borderTop:"none",borderBottomRightRadius:4,borderBottomLeftRadius:4},textareaFooter:{flexDirection:"row",justifyContent:"space-between",[g.default.xsOrSmaller]:{flexDirection:"column"}},textareaReplyFooter:{border:"none",paddingLeft:0,paddingRight:0},textareaFooterAcceptingClarification:{justifyContent:"flex-end"},submitButtonContents:{flexDirection:"row",alignItems:"center",justifyContent:"center"},button:{[g.default.xsOrSmaller]:{width:"calc(100% + 60px)"}},submitButtonSpinner:{marginRight:8},notAButton:(0,a.default)({},y.notAButton),footerSecondaryButton:{color:E,marginRight:16,":hover":{textDecoration:"underline"},[g.default.xsOrSmaller]:{width:"100%",marginBottom:16,marginRight:0}},previewContainer:{display:"none"},previewContainerExpanded:{borderTop:y.border,borderBottom:y.border,boxSizing:"border-box",marginTop:16,marginBottom:16,display:"block",minHeight:y.textareaMinHeight,transition:`min-height ${m.standardTransition}`,overflow:"auto"},formattingOptionsContainer:{display:"none"},formattingOptionsContainerExpanded:{display:"flex"},formattingLabel:{fontWeight:"bold"},formattingButton:{[g.default.xsOrSmaller]:{width:"100%"}},buttonContainer:{flexDirection:"row"}})},mt3D:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DATA_QUERY=void 0;var a=C(n("q1tI")),r=n("mR6N"),i=o(n("lTCR")),s=n("JimW"),l=C(n("TqM9")),c=C(n("6OHE")),d=n("8r+/"),p=o(n("f4yp")),u=o(n("wINb")),f=n("i4Cj"),m=o(n("OsXK")),g=o(n("RdRB")),y=o(n("QCGh")),h=n("AE4M"),b=o(n("cfQQ"));let w;function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const v=(0,d.gqlOp)((0,i.default)(w||(w=(e=>e)`
    query discussionAvatar {
        user {
            id
            avatar {
                name
                imageSrc
            }
        }
    }
`)));t.DATA_QUERY=v;class T extends a.Component{constructor(...e){super(...e),this.renderImage=(e,t,n)=>{let o=null;return o=t?a.createElement("img",{className:(0,r.css)(S.image),src:(0,u.default)(n),alt:f.avatarStrings.getAvatarForUser((0,h.getAriaAvatarName)(t),e)}):a.createElement("img",{className:(0,r.css)(S.image),src:(0,u.default)(n),alt:"","aria-hidden":!0}),a.createElement(s.View,{style:S.container},o)},this.renderTooltip=(e,t,n,o)=>{const r=a.createElement(g.default,{kaid:n}),i=`${f.avatarStrings.getAvatarForUser((0,h.getAriaAvatarName)(t),e)} ${f.avatarStrings.goToUserProfile(e)}`,s=`/profile/${n}/discussion`;return a.createElement(m.default,{content:r,side:"top",offset:12,horizontalAlignment:"left",enablePointerEvents:!0,ariaLive:"polite"},a.createElement(y.default,{href:s,"aria-label":i},o))}}render(){const{showCurrentUserAvatar:e,avatarSrc:t,avatarName:n,username:o,enableProfilePreviewTooltip:r,kaid:i,profile:s}=this.props;let l;return e&&s?a.createElement(p.default,{query:v,fetchPolicy:"cache-and-network"},(({data:e})=>{var a,c;const d=s.get("username"),p=(null==e||null==(a=e.user)?void 0:a.avatar.name)||n,u=(null==e||null==(c=e.user)?void 0:c.avatar.imageSrc)||t;return l=this.renderImage(d,p,u),r?this.renderTooltip(o,n,i,l):l})):(l=this.renderImage(o,n,t),r?this.renderTooltip(o,n,i,l):l)}}T.defaultProps={showCurrentUserAvatar:!1,avatarName:"Default Khan Academy avatar",avatarSrc:"/images/avatars/svg/blobby-green.svg",username:"",kaid:"",enableProfilePreviewTooltip:!1};const S=r.StyleSheet.create({container:{borderRadius:"50%",width:48,minWidth:48,height:48,border:`solid 2px ${l.borderColor}`,backgroundColor:c.colors.white,flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:32,height:32}});var P=(0,b.default)(T);t.default=P},nR7h:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_FEEDBACK_TO_DISCUSSION=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation AddFeedbackToDiscussion(
        $focusKind: String
        $focusId: String
        $parentKey: String
        $textContent: String!
        $feedbackType: FeedbackType!
        $fromVideoAuthor: Boolean
        $shownLowQualityNotice: Boolean
    ) {
        addFeedbackToDiscussion(
            focusKind: $focusKind
            focusId: $focusId
            parentKey: $parentKey
            textContent: $textContent
            feedbackType: $feedbackType
            fromVideoAuthor: $fromVideoAuthor
            shownLowQualityNotice: $shownLowQualityNotice
        ) {
            feedback {
                appearsAsDeleted
                author {
                    id
                    kaid
                    nickname
                    avatar {
                        name
                        imageSrc
                    }
                }
                content
                date
                definitelyNotSpam
                deleted
                downVoted
                expandKey
                feedbackType
                flaggedBy
                flags
                focusUrl
                focus {
                    kind
                    id
                    translatedTitle
                    relativeUrl
                }
                fromVideoAuthor
                key
                lowQualityScore
                notifyOnAnswer
                permalink
                qualityKind
                replyCount
                replyExpandKeys
                showLowQualityNotice
                sumVotesIncremented
                upVoted
                ... on LowQualityFeedback {
                    feedbackCode
                    feedbackChar
                }
            }
            error {
                code
            }
        }
    }
`)));t.ADD_FEEDBACK_TO_DISCUSSION=s},oia8:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=d(n("q1tI")),r=n("mR6N"),i=o(n("Pwnf")),s=n("JimW"),l=d(n("TqM9"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}class p extends a.Component{render(){const{selected:e}=this.props;return a.createElement(s.View,{"aria-hidden":"true",style:[u.fakeRadioButton,e&&u.selectedFakeRadioButton]})}}t.default=p,p.defaultProps={selected:!1};const u=r.StyleSheet.create({fakeRadioButton:{flexShrink:0,flexGrow:0,borderRadius:"50%",width:16,height:16,border:l.border,marginRight:8,boxSizing:"border-box"},selectedFakeRadioButton:{border:`4px solid ${i.default.blue}`}})},qRmI:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AcceptedClarificationInput=void 0;var a=g(n("q1tI")),r=n("/MKj"),i=n("mR6N"),s=o(n("gE8/")),l=n("JimW"),c=o(n("HbaH")),d=n("IZy4"),p=n("i4Cj"),u=g(n("TqM9")),f=n("DDFQ");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}class y extends a.Component{constructor(e){super(e),this.getStartAndEndFromProps=()=>{const{post:e,editingOrAccepting:t}=this.props;let n=20,o=40;"editing"===t&&e.closeTimestamp?(n=e.openTimestamp,o=e.closeTimestamp):e.content&&(n=(0,d.getTimestampSecondsFromText)(e.content),o=n+20);const a=(0,d.getTimestampFromSeconds)(n),r=(0,d.getTimestampFromSeconds)(o);return{startingTimestampMinutes:Number(a.minutes),startingTimestampSeconds:Number(a.seconds),endingTimestampMinutes:Number(r.minutes),endingTimestampSeconds:Number(r.seconds)}},this.handleSubmitAcceptedClarification=e=>{const{post:t,editingOrAccepting:n,onSubmitClarificationAcceptance:o,onSubmitClarificationEdit:a}=this.props,{startingTimestampMinutes:r,startingTimestampSeconds:i,endingTimestampMinutes:s,endingTimestampSeconds:l}=this.state,c=60*r+i,d=60*s+l;c>=d||("editing"===n?a(e,c,d):t.authorAvatarSrc&&o(t.key,t.authorAvatarSrc,t.authorNickname,t.authorKaid,e,c,d))},this.renderClarificationTimestampInput=e=>{const t=this.state[e];return a.createElement("input",{className:(0,i.css)(h.acceptClarificationInput),value:t,onChange:t=>{const n=t.target.value,o=n.length?Number(n):0;this.setState({[e]:o})},type:"number",min:0,max:59})},this.state=this.getStartAndEndFromProps()}componentDidUpdate(e){this.props.editingOrAccepting===e.editingOrAccepting&&this.props.post.openTimestamp===e.post.openTimestamp&&this.props.post.closeTimestamp===e.post.closeTimestamp&&this.props.post.content===e.post.content||this.setState(this.getStartAndEndFromProps())}render(){const{post:e,contentId:t,topicSlug:n,onCancel:o}=this.props;let r="",i="";return e.key?(r=e.key,i=e.content):e.id&&(r=e.id,i=e.text),a.createElement(l.View,{style:h.replyInputContainer},a.createElement(c.default,{acceptingClarification:!0,tab:"clarifications",contentKind:"Video",contentId:t,topicSlug:n,feedbackKey:r,initialPostContent:i,onCancel:o,onSubmitAcceptedClarification:this.handleSubmitAcceptedClarification}),a.createElement(l.View,{style:h.acceptClarificationContainer},p.miscStrings.timestampFromLabel,this.renderClarificationTimestampInput("startingTimestampMinutes"),":",this.renderClarificationTimestampInput("startingTimestampSeconds"),p.miscStrings.timestampToLabel,this.renderClarificationTimestampInput("endingTimestampMinutes"),":",this.renderClarificationTimestampInput("endingTimestampSeconds")))}}t.AcceptedClarificationInput=y;const h=i.StyleSheet.create({spinner:{marginRight:s.default.xSmall_8},replyInputContainer:{paddingBottom:s.default.large_24},acceptClarificationContainer:{display:"block",marginLeft:u.avatarContainerDiameter+u.avatarFormSpace},acceptClarificationInput:{width:40,padding:0,margin:"16px 4px 0 4px",textAlign:"right"}}),b={onSubmitClarificationAcceptance:f.acceptClarificationAction,onSubmitClarificationEdit:f.editAcceptedClarificationAction};var w=(0,r.connect)((e=>({contentId:e.contentId})),b)(y);t.default=w},"r/58":function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.MODIFY_NOTIFICATIONS_FLAG_MUTATION=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation notifyAnswer($key: String!, $notifyOnAnswer: Boolean!) {
        modifyNotifyOnAnswer(
            feedbackKey: $key
            notifyOnAnswer: $notifyOnAnswer
        ) {
            feedback {
                feedbackType
                content
                notifyOnAnswer
            }
        }
    }
`)));t.MODIFY_NOTIFICATIONS_FLAG_MUTATION=s},"t/UD":function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.FLAG_POST_MUTATION=void 0;var a=n("Xbru"),r=o(n("lTCR"));let i;const s=(0,a.gqlOp)((0,r.default)(i||(i=(e=>e)`
    mutation FlagPostMutation(
        $flag: String!
        $entityKey: String!
        $justification: String
    ) {
        flagEntity(
            flag: $flag
            entityKey: $entityKey
            justification: $justification
        ) {
            error {
                code
            }
        }
    }
`)));t.FLAG_POST_MUTATION=s},t0zn:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createDiscussionStore=void 0;var a=n("ANjH"),r=o(n("TdMD")),i=o(n("wkgs"));const s=(0,n("0zMT").createCompose)({reduxDevtoolsOptions:{name:"Discussions"}})((0,a.applyMiddleware)(r.default))(a.createStore),l=()=>s(i.default);t.createDiscussionStore=l;var c=l();t.default=c},tCRy:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.feedbackQueryToFetchPostResponse=t.defaultApi=t.default=void 0;var a=o(n("pVnL")),r=n("R0mg"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}o.default=e,n&&n.set(e,o);return o}(n("4PhQ")),s=n("iMDn"),l=n("lGNd"),c=n("doqZ"),d=n("r/58"),p=n("t/UD"),u=n("giNK"),f=n("WmEb"),m=n("IW3x"),g=n("AE4M"),y=n("lMZt"),h=n("/x9n"),b=n("jEbg"),w=n("nR7h"),E=n("15OY");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}const v=1,T=0,S=-1,P=(e,t)=>{var n,o,a,r;const i=null!=(n=t.cursor)?n:"",l=null==(o=t.sortedByDate)||o,c=null!=(a=t.isComplete)&&a,d=(0,s.filterFeedbackList)(null!=(r=t.feedback)?r:[]);return{cursor:i,feedback:d,isComplete:c,qaExpandKey:e.qaExpandKey||"",sortedByDate:l,totalCount:d.length,type:e.feedbackType}};t.feedbackQueryToFetchPostResponse=P;const k=(e,t)=>t.mutate(f.VOTE_ENTITY_MUTATION,{variables:e}).then((({data:e})=>{var t;return null!=e&&null!=(t=e.voteEntity)&&t.error?(0,g.getVoteEntityErrorMessage)(e.voteEntity.error):null})).catch((e=>(0,g.getVoteEntityErrorMessage)({code:y.VoteEntityMutationErrorCode.INTERNAL}))),A={inappropriate:"inappropriate",lowquality:"lowquality",shouldBeQuestion:"changetoquestion",shouldBeTipsOrThanks:"changetocomment",spam:"spam",plagiarism:"plagiarism","vote-soliciting":"vote-soliciting","using-disallowed":"using-disallowed"},O=(e,t,n)=>{const o=(0,a.default)({modAction:n},e);return t.mutate(u.PERFORM_MOD_ACTION,{variables:o}).then((({data:e})=>{var t;return null==e||null==(t=e.performModAction)||!t.error})).catch((()=>!1))},x={getId:()=>"default",fetchPosts:async(e,t)=>{const n=await t.query(m.FEEDBACK_QUERY,{variables:e,fetchPolicy:"network-only"});return n&&n.data&&n.data.feedback?P(e,n.data.feedback):null},modifyNotificationsFlag:async(e,t)=>{var n,o;const a=await t.mutate(d.MODIFY_NOTIFICATIONS_FLAG_MUTATION,{variables:{key:e.postKey,notifyOnAnswer:e.enable}});return null!=a&&null!=(n=a.data)&&null!=(o=n.modifyNotifyOnAnswer)&&o.feedback?a.data.modifyNotifyOnAnswer.feedback.notifyOnAnswer:null},upvotePost:({postKey:e,alreadyVoted:t},n)=>k({postKey:e,voteType:t?T:v},n),downvotePost:({postKey:e,alreadyVoted:t},n)=>k({postKey:e,voteType:t?T:S},n),flagPost:async(e,t)=>{var n,o;const a=A[e.flag],r=await t.mutate(p.FLAG_POST_MUTATION,{variables:{entityKey:e.postKey,flag:a}});return null==(null==r||null==(n=r.data)||null==(o=n.flagEntity)?void 0:o.error)},changeType:(e,t)=>O(e,t,h.ModAction.CHANGE_TYPE),clearFlags:(e,t)=>O(e,t,h.ModAction.CLEAR_FLAGS),deletePost:async(e,t)=>{var n,o,a;const r=await t.mutate(c.DELETE_POST_MUTATION,{variables:{postKey:e.postKey}});return null==(null==r||null==(n=r.data)||null==(o=n.hideFeedback)||null==(a=o.error)?void 0:a.code)},undeletePost:(e,t)=>O(e,t,h.ModAction.UNDELETE),fetchReplies:async(e,t)=>{var n;if(!e.postKey){const e=new i.KAError("Cannot fetch replies without a postkey",i.Errors.NotAllowed);return i.default.error(e,i.Errors.Internal),Promise.reject(e)}const o=await t.query(b.FEEDBACK_REPLIES_QUERY,{variables:{postKey:e.postKey},fetchPolicy:"network-only"});if(null!=o&&null!=(n=o.data)&&n.feedbackReplies){const e=o.data.feedbackReplies;return(0,s.filterFeedbackList)(e)}return null},addReply:async(e,t)=>{var n;const o=await t.mutate(w.ADD_FEEDBACK_TO_DISCUSSION,{variables:{parentKey:e.postKey,textContent:e.text,feedbackType:E.FeedbackType.REPLY}});if(null!=o&&null!=(n=o.data)&&n.addFeedbackToDiscussion){var a,r;const e=null==o||null==(a=o.data)||null==(r=a.addFeedbackToDiscussion)?void 0:r.feedback;return(0,s.filterFeedback)(e)}return null},fetchAcceptedClarifications:e=>(0,r.getOfficialClarifications)((0,l.getUnsafeApolloGqlClient)(),e.youtubeId),acceptClarification:e=>(0,r.createOfficialClarification)((0,l.getUnsafeApolloGqlClient)(),e.youtubeId,e.kaid,e.text,e.openTimestamp,e.closeTimestamp),editAcceptedClarification:e=>(0,r.updateOfficialClarification)((0,l.getUnsafeApolloGqlClient)(),e.id,e.youtubeId,e.text,e.openTimestamp,e.closeTimestamp),deleteAcceptedClarification:e=>(0,r.deleteOfficialClarification)((0,l.getUnsafeApolloGqlClient)(),e.clarificationId)};t.defaultApi=x;const I={};var M={get:e=>e&&I[e]||(0,a.default)({},x),register(e,t){I[e]=t}};t.default=M},wkgs:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.calcSumVotes=d,t.default=function(e,t){if(!e)return c;switch(t.type){case"initializeContent":{const{topicSlug:n,contentKind:o,contentId:r,youtubeId:i,qaExpandKey:s}=t,l="projectfeedback"===t.expandFeedbackType?"projecthelp":t.expandFeedbackType;return(0,a.default)({},e,{topicSlug:n,contentKind:o,contentId:r,youtubeId:i,qaExpandKey:s,expandFeedbackType:l,currentTab:l||e.currentTab})}case"initializeDiscussionListComponent":{const{topicSlug:n,tab:o,cursor:r,apiId:i}=t,{tabs:s}=e;return(0,a.default)({},e,{topicSlug:n,apiId:i||"",contentKind:"Topic",currentTab:o,tabs:(0,a.default)({},s,{[o]:(0,a.default)({},s[o],{cursor:r})})})}case"postSuccess":{const{post:n,tab:o}=t;n.answers=n.answers||[],n.replies=n.replies||[];let r=[],s={};const{questionKey:l}=n;if("answer"===n.type&&l){r=e.tabs[o].postKeys;const t=e.posts[l];t.answers.unshift(n.key),s=(0,a.default)({},e.posts,{[l]:t,[n.key]:n})}else r=[n.key].concat(e.tabs[o].postKeys),s=(0,a.default)({[n.key]:n},e.posts);let c=e.hasUnansweredHelpRequests;if("projecthelp"===n.type)c=!0;else if("projecthelp"===o&&"answer"===n.type&&c){const t=e.tabs.projecthelp.postKeys;if(1===t.length)c=!1;else{const e=t.find((e=>(0,i.isPostUnanswered)(e,s)));c=!!e}}return(0,a.default)({},e,{posts:s,hasUnansweredHelpRequests:c,tabs:(0,a.default)({},e.tabs,{[o]:(0,a.default)({},e.tabs[o],{postKeys:r,totalCount:e.tabs[o].totalCount+1})}),newPostKey:n.key})}case"fetchingPosts":return(0,a.default)({},e,{fetchingPosts:!0});case"updatePosts":{const{tab:n,cursor:o,isComplete:r,totalCount:s}=t,{tabs:l}=e,c=(0,a.default)({},e.posts,p(t.posts)),d=t.posts.map((e=>e.key)),u=t.acceptedClarificationPosts||[],f=(t,n)=>"projecthelp"===t.tab?t.posts.some((e=>("projecthelp"===e.type||"PROJECT_HELP_QUESTION"===e.feedbackType)&&(0,i.isPostUnanswered)(e.key,n))):e.hasUnansweredHelpRequests;return(0,a.default)({},e,{fetchingPosts:!1,posts:c,acceptedClarificationPosts:u,hasUnansweredHelpRequests:f(t,c),tabs:(0,a.default)({},l,{[n]:{postKeys:d,cursor:o,isComplete:r,totalCount:s}})})}case"appendPosts":{const{tab:n,cursor:o,isComplete:i}=t,{tabs:s}=e,l=t.posts.filter((t=>!(0,r.keys)(e.posts).includes(t.key))),c=(0,a.default)({},e.posts,p(l)),d=s[n].postKeys,u=l.map((e=>e.key)),f=[].concat(d,u);return(0,a.default)({},e,{fetchingPosts:!1,posts:c,newPostKey:u.length?u[0]:null,tabs:(0,a.default)({},s,{[n]:(0,a.default)({},e.tabs[n],{postKeys:f,cursor:o,isComplete:i})})})}case"updatePost":{const{post:n}=t,o=e.posts[n.key];return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n.key]:(0,a.default)({},o,n)})})}case"updateReplies":{const{replies:n,parentKey:o}=t,r=(0,a.default)({},e.posts,p(n));return(0,a.default)({},e,{posts:(0,a.default)({},r,{[o]:(0,a.default)({},r[o],{replies:n.map((e=>e.key))})})})}case"addReply":{var n;const{parentKey:o,post:r}=t,i=(0,a.default)({},e.posts,{[r.key]:r});i[o].replyCount=null!=(n=i[o].replyCount)?n:0,i[o].replyCount+=1;const s=i[o].replies||[];return i[o].replies=[].concat(s,[r.key]),(0,a.default)({},e,{posts:i,newPostKey:r.key})}case"upvotePost":{const{postKey:n}=t,o=e.posts[n];if(!o)throw new s.KAError("post doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n]:(0,a.default)({},o,{downVoted:!1,upVoted:!o.upVoted,sumVotesIncremented:d(o,1)})})})}case"changePostType":{const{postKey:n,postType:o}=t,r=e.posts[n],c=(0,i.getPostType)(r);if("answer"===o)throw new s.KAError("Cannot change the type to an Answer",s.Errors.Internal);if(!r)throw new s.KAError("post doesn't exist",s.Errors.Internal);if(!c)throw new s.KAError("post has no type",s.Errors.Internal);if("reply"===c||"scratchpad"===c||"projecthelp"===c||"projecteval"===c||"projectevalanswer"===c||"projecthelpanswer"===c)throw new s.KAError(`posts of type "${c}" can't be changed to another type`,s.Errors.Internal);const d={comment:"comments",question:"questions",clarification:"clarifications"}[o],p=e.tabs[d].postKeys;if("answer"===c||"projecthelp"===c){if(!r.questionKey)throw new s.KAError("answer has no parent",s.Errors.Internal);const t=e.posts[r.questionKey];let n=e.posts;return t&&(n=(0,a.default)({},e.posts,{[t.key]:(0,a.default)({},t,{answers:t.answers.filter((e=>e!==r.key))})})),(0,a.default)({},e,{posts:(0,a.default)({},n,{[r.key]:(0,a.default)({},r,{type:o,feedbackType:(0,l.toGqlFeedbackType)(o)})}),tabs:(0,a.default)({},e.tabs,{[d]:(0,a.default)({},e.tabs[d],{postKeys:[r.key].concat(p),totalCount:e.tabs[d].totalCount+1})})})}const u={comment:"comments",question:"questions",clarification:"clarifications"}[c];return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[r.key]:(0,a.default)({},r,{type:o,feedbackType:(0,l.toGqlFeedbackType)(o)})}),tabs:(0,a.default)({},e.tabs,{[u]:(0,a.default)({},e.tabs[u],{postKeys:e.tabs[u].postKeys.filter((e=>e!==r.key)),totalCount:e.tabs[u].totalCount-1}),[d]:(0,a.default)({},e.tabs[d],{postKeys:[r.key].concat(p),totalCount:e.tabs[d].totalCount+1})})})}case"clearFlags":{const{postKey:n}=t,o=e.posts[n];if(!o)throw new s.KAError("post doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n]:(0,a.default)({},o,{flags:[],flaggedByUser:!1})})})}case"downvotePost":{const{postKey:n}=t,o=e.posts[n];if(!o)throw new s.KAError("post doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n]:(0,a.default)({},o,{downVoted:!o.downVoted,upVoted:!1,sumVotesIncremented:d(o,-1)})})})}case"flagPost":{const{postKey:n,flag:o}=t,r=e.posts[n],i=r.flags||[];if(!r)throw new s.KAError("post doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n]:(0,a.default)({},r,{flaggedByUser:!0,flags:[].concat(i,[o])})})})}case"changeTab":return(0,a.default)({},e,{currentTab:t.tab,newPostKey:null});case"changeSortBy":return(0,a.default)({},e,{currentSort:t.sort,newPostKey:null});case"resetNewPostKey":return(0,a.default)({},e,{newPostKey:null});case"setFocusOnTopLevelInput":return(0,a.default)({},e,{focusOnTopLevelInput:!0});case"resetFocusOnTopLevelInput":return(0,a.default)({},e,{focusOnTopLevelInput:!1});case"resetExpandKey":return(0,a.default)({},e,{expandFeedbackType:null,qaExpandKey:null});case"deletePost":{const{currentTab:n}=e,{postKey:o}=t,r=e.posts[o];if(!r)throw new s.KAError("post doesn't exist",s.Errors.Internal);const l=(0,a.default)({},e.posts,{[o]:(0,a.default)({},r,{deleted:!0})}),c="projecthelp"===r.type;let d=e.hasUnansweredHelpRequests;if(c&&d){d=!1;const t=e.tabs.projecthelp.postKeys;t.length>1&&(d=t.some((e=>(0,i.isPostUnanswered)(e,l))))}if("projecthelp"===n&&"answer"===r.type&&!d&&r.questionKey){const t=e.posts[r.questionKey],n=t.answers.some((e=>{const t=l[e];return t&&!t.deleted&&!t.appearsAsDeleted}));d=!n}return(0,a.default)({},e,{hasUnansweredHelpRequests:d,posts:l})}case"deleteAcceptedClarificationPost":{const{clarificationId:n}=t,o=e.acceptedClarificationPosts.filter((e=>e.id!==n));if(o.length===e.acceptedClarificationPosts.length)throw new s.KAError("accepted clarification doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{acceptedClarificationPosts:o})}case"undeletePost":{const{postKey:n}=t,o=e.posts[n];if(!o)throw new s.KAError("post doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n]:(0,a.default)({},o,{deleted:!1})})})}case"editPost":{const{postKey:n,content:o}=t,r=e.posts[n];if(!r)throw new s.KAError("post doesn't exist",s.Errors.Internal);return(0,a.default)({},e,{posts:(0,a.default)({},e.posts,{[n]:(0,a.default)({},r,{content:o})})})}case"acceptClarification":{const{originalClarificationId:n,clarification:o}=t,r=(0,a.default)({},e.posts);delete r[n];const i=e.tabs.clarifications.postKeys.filter((e=>e!==n));if(i.length===e.tabs.clarifications.postKeys.length)throw new s.KAError("Couldn't find the clarification to delete.",s.Errors.Internal);return(0,a.default)({},e,{posts:r,acceptedClarificationPosts:[].concat(e.acceptedClarificationPosts,[o]),tabs:(0,a.default)({},e.tabs,{clarifications:(0,a.default)({},e.tabs.clarifications,{postKeys:i,totalCount:e.tabs.clarifications.totalCount-1})})})}case"startAcceptingClarification":return(0,a.default)({},e,{clarificationBeingAcceptedId:t.clarificationId});case"stopAcceptingClarification":return(0,a.default)({},e,{clarificationBeingAcceptedId:null});case"startEditingPost":return(0,a.default)({},e,{postBeingEditedKey:t.postKey});case"stopEditingPost":return(0,a.default)({},e,{postBeingEditedKey:null});case"editAcceptedClarification":{const{clarification:n}=t,o=e.acceptedClarificationPosts.map((e=>e.id===n.id?n:e));return(0,a.default)({},e,{acceptedClarificationPosts:o})}case"toggleReplyInput":return(0,a.default)({},e,{displayInputPostKey:e.displayInputPostKey===t.postKey?null:t.postKey});case"selectPosts":{const n=(0,a.default)({},e.selectedPosts);return t.postKeys.forEach((e=>{n[e]=!0})),(0,a.default)({},e,{selectedPosts:n})}case"deselectPost":{const n=(0,a.default)({},e.selectedPosts,{[t.postKey]:!1});return(0,a.default)({},e,{selectedPosts:n})}case"deselectAll":return(0,a.default)({},e,{selectedPosts:{}});default:return t.type,e}},t.defaultState=void 0,t.flattenPosts=p;var a=o(n("pVnL")),r=n("MrPL"),i=n("AE4M"),s=n("4PhQ"),l=n("69Ww");const c={topicSlug:"",contentKind:"",contentId:"",youtubeId:null,posts:{},acceptedClarificationPosts:[],tabs:{questions:{cursor:"",isComplete:!0,postKeys:[],totalCount:0},answers:{cursor:"",isComplete:!0,postKeys:[],totalCount:0},comments:{cursor:"",isComplete:!0,postKeys:[],totalCount:0},clarifications:{cursor:"",isComplete:!0,postKeys:[],totalCount:0},projecthelp:{cursor:"",isComplete:!0,postKeys:[],totalCount:0}},newPostKey:null,focusOnTopLevelInput:!1,currentTab:"questions",currentSort:"top-voted",currentCursor:"",qaExpandKey:null,expandFeedbackType:null,displayInputPostKey:null,apiId:"",clarificationBeingAcceptedId:null,postBeingEditedKey:null,hasUnansweredHelpRequests:null,selectedPosts:{}};t.defaultState=c;function d(e,t){return 1===t?e.upVoted?e.sumVotesIncremented-1:e.sumVotesIncremented+(e.downVoted?2:1):e.downVoted?e.sumVotesIncremented+1:e.sumVotesIncremented-(e.upVoted?2:1)}function p(e){return e.reduce(((e,t)=>{const n=t.answers||[];return(0,a.default)({},e,p(n),{[t.key]:(0,a.default)({},t,{answers:n.map((e=>e.key)),replies:[]})})}),{})}},y6Wz:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DiscussionPost=void 0;var a=o(n("pVnL")),r=o(n("8OQS")),i=te(n("q1tI")),s=te(n("i8i4")),l=n("/MKj"),c=n("mR6N"),d=o(n("eIwi")),p=n("Pk2J"),u=n("JimW"),f=n("vwLt"),m=n("Vxy9"),g=o(n("wa3X")),y=o(n("Pwnf")),h=o(n("yts4")),b=o(n("gE8/")),w=n("Uafs"),E=n("g8Be"),C=te(n("8jAt")),v=n("z8VS"),T=o(n("SGU3")),S=o(n("qRmI")),P=o(n("fjY8")),k=o(n("mt3D")),A=o(n("HbaH")),O=o(n("iRWY")),x=o(n("KPIR")),I=o(n("RTsg")),M=o(n("hSyu")),K=o(n("EIXS")),R=o(n("XKyD")),F=n("AE4M"),_=o(n("mXPZ")),L=n("Y8R6"),D=n("Tipd"),V=o(n("mCQM")),N=o(n("7e7+")),j=o(n("gzgZ")),B=n("SjSX"),q=o(n("cfQQ")),U=o(n("4Du/")),W=o(n("M+bw")),$=n("i4Cj"),H=te(n("6OHE")),Q=o(n("uEGL")),z=te(n("TqM9")),J=o(n("qRKg")),G=o(n("wINb")),Y=n("179n"),X=n("DDFQ");const Z=["style"];function ee(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ee=function(e){return e?n:t})(e)}function te(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ee(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}const{compactStyles:ne}=z,oe=(0,u.addStyle)("button"),ae=e=>{const{style:t}=e,n=(0,r.default)(e,Z);return i.createElement(oe,(0,a.default)({style:[de.linkStyledButton,t]},n))},re={downvoteSelected:{small:"M8.868 14.48l6.277-10.984A1 1 0 0 0 14.277 2H1.723a1 1 0 0 0-.868 1.496l6.277 10.985a1 1 0 0 0 1.736 0z"},downvote:{small:"M8 11.969L12.554 4H3.446L8 11.969zm.868 2.512a1 1 0 0 1-1.736 0L.855 3.496A1 1 0 0 1 1.723 2h12.554a1 1 0 0 1 .868 1.496L8.868 14.481z"},flagSelected:{small:"M4 11.775V15a1 1 0 0 1-2 0V2.66a1 1 0 0 1 .435-.826c1.04-.712 2.274-.968 3.701-.768 2.448.342 2.734 2.094 4.728 2.342 1.11.138 2.256-.05 3.436-.566a.5.5 0 0 1 .7.458v9.182a.5.5 0 0 1-.18.385c-1.097.914-2.416 1.275-3.956 1.083-2.439-.303-2.744-2.065-4.728-2.342A5.104 5.104 0 0 0 4 11.775z"},flag:{small:"M4 11.775V15a1 1 0 0 1-2 0V2.66a1 1 0 0 1 .435-.826c1.04-.712 2.274-.968 3.701-.768 2.448.342 2.734 2.094 4.728 2.342 1.11.138 2.256-.05 3.436-.566a.5.5 0 0 1 .7.458v9.182a.5.5 0 0 1-.18.385c-1.097.914-2.416 1.275-3.956 1.083-2.439-.303-2.744-2.065-4.728-2.342A5.104 5.104 0 0 0 4 11.775zm6.617-6.382c-1.2-.15-1.981-.57-2.99-1.39l-.279-.228c-.596-.484-.907-.647-1.489-.729-.735-.103-1.34-.035-1.859.195v6.474c.807-.169 1.614-.2 2.413-.088 1.185.166 1.945.585 2.957 1.41l.239.195c.618.503.92.661 1.501.733.743.093 1.354.002 1.89-.274V5.323a7.902 7.902 0 0 1-2.383.07z"},upvoteSelected:{small:"M8.868 2.52l6.277 10.984A1 1 0 0 1 14.277 15H1.723a1 1 0 0 1-.868-1.496L7.132 2.519a1 1 0 0 1 1.736 0z"},upvote:{small:"M3.446 13h9.108L8 5.031 3.446 13zM8.868 2.52l6.277 10.984A1 1 0 0 1 14.277 15H1.723a1 1 0 0 1-.868-1.496L7.132 2.519a1 1 0 0 1 1.736 0z"}},ie=({label:e,onClick:t})=>i.createElement(g.default,{kind:"tertiary",size:"small",style:{marginRight:12},onClick:t},e);class se extends i.Component{static getRepliesExpandedFromProps(e){const{post:t,qaExpandKey:n,newPostKey:o}=e,{replyCount:a}=t;return(0,F.shouldAutoExpandReplies)(t,n)&&null!=a&&a>0&&!o}constructor(e){super(e),this.nodes={},this.srOnlyFlagModal=i.createElement(u.View,{style:J.default.srOnly}," ",$.postStrings.flagAriaLabel),this.srOnlyToolOpensModal=i.createElement(u.View,{style:J.default.srOnly}," ",$.postStrings.toolOpensModal),this.getRepliesContainerId=()=>`${this.props.post.key}-replies-container`,this.setModalVisibility=e=>t=>{this.setState((n=>({isModalOpen:(0,a.default)({},n.isModalOpen,{[t]:e})})))},this.openModal=this.setModalVisibility(!0),this.closeModal=this.setModalVisibility(!1),this.maybeAutoFocusPost=e=>{if(!this.postElement||!this.postElement.focus)return;const{post:t,qaExpandKey:n,newPostKey:o,resetExpandKey:a,resetNewPostKeyInfo:r}=this.props;return o&&o===t.key?(this.postElement.focus(),void r()):n&&t.expandKey===n?(this.postElement.focus(),void a()):void(!this.postElement||e&&e.autoFocusPostOnMount||!this.props.autoFocusPostOnMount||this.postElement.focus())},this.handleUpvote=()=>{if(!_.default.isLoggedIn)return void this.redirectToSignup();const{post:e,gqlClient:t,onUpvotePost:n}=this.props,{key:o,sumVotesIncremented:a,upVoted:r,downVoted:i}=e;if(n({key:o,upVoted:!!r},t),r){const t=a-1;this.setState({ariaVoteMessage:$.postStrings.ariaAbstained(e,t)})}else{const t=a+(i?2:1);this.setState({ariaVoteMessage:$.postStrings.ariaUpvoted(e,t)})}},this.handleDownvote=()=>{if(!_.default.isLoggedIn)return void this.redirectToSignup();const{post:e,gqlClient:t,onDownvotePost:n}=this.props,{key:o,sumVotesIncremented:a,downVoted:r,upVoted:i}=e;if(n({key:o,downVoted:!!r},t),r){const t=a+1;this.setState({ariaVoteMessage:$.postStrings.ariaAbstained(e,t)})}else{const t=a-(i?2:1);this.setState({ariaVoteMessage:$.postStrings.ariaDownvoted(e,t)})}},this.handleChangeToQuestion=()=>{const{onChangeType:e,post:t,gqlClient:n}=this.props;e(t,"question",n)},this.handleChangeToTipsAndThanks=()=>{const{onChangeType:e,post:t,gqlClient:n}=this.props;e(t,"comment",n)},this.handleChangeToMistakes=()=>{const{onChangeType:e,post:t,gqlClient:n}=this.props;e(t,"clarification",n)},this.handleClearAllFlags=()=>{const{moderatorMode:e,onClearFlags:t,post:n,gqlClient:o}=this.props;t(n,o),e&&this.setState({skipped:!0})},this.handleUndelete=()=>{const{onUndeletePost:e,post:t,gqlClient:n}=this.props;e(t,n),this.setState({ariaPostStatusChangedMessage:$.postStrings.ariaUndeleted})},this.handleDelete=()=>{const{moderatorMode:e,onDeletePost:t,post:n,gqlClient:o}=this.props;t(n,o),this.setState({ariaPostStatusChangedMessage:$.postStrings.ariaDeleted,skipped:e})},this.handleSkip=()=>{this.setState({skipped:!0})},this.handleClickComment=()=>{const{post:e,onShowReplies:t,gqlClient:n}=this.props,{replyCount:o,replies:a}=e;!this.state.repliesExpanded&&o&&o>0&&a.length!==o&&t(this.props.post.key,n),_.default.isLoggedIn||o&&0!==o?this.setState({repliesExpanded:!this.state.repliesExpanded}):this.redirectToSignup()},this.handleReplyInputToggle=()=>{const{displayInputPostKey:e,post:t}=this.props;this.props.onToggleReplyInput(t.key),e===t.key&&this.setState({formattingOptionsExpanded:!1})},this.showFlagButton=e=>{const{post:t,profileLoading:n}=this.props,o=(0,F.getPostTypeAllowingProgram)(t);return!("projecteval"===o)&&((!this.isCompactView()||"reply"===o)&&(!n&&(!e||e&&!e.get("isChildAccount"))))},this.renderPostHeader=()=>{var e,t;const{post:n,showPostedIn:o,showParentQuestion:a,moderatorMode:r,profile:s}=this.props,{expandKey:l,key:p,author:f,feedbackType:g,authorNickname:y,authorKaid:h,date:b,badges:w,permalink:E,focus:C}=n,v="scratchpad"===(0,F.getPostTypeAllowingProgram)(n),S=[z.datetime,!this.shouldShowAuthor()&&ne.datetime],P="reply"===(0,F.getPostTypeAllowingProgram)(n),k=r?(0,d.default)(b).toString():(0,d.default)(b).fromNow(),A=(0,F.getDirectLinkSrString)(k,n),O=i.createElement(m.LabelMedium,{style:S},i.createElement(u.View,{"aria-hidden":"true"},k),i.createElement(u.View,{style:J.default.srOnly},A));let x=null;v&&b&&(x=i.createElement(m.LabelMedium,{style:S},"(",$.miscStrings.created,": ",(0,d.default)(b).toString(),")"));const I=E&&l&&g?`${E}?qa_expand_key=${l}&qa_expand_type=${g.toLowerCase()}`:"";let M=null;n.deleted?M=i.createElement(m.HeadingXSmall,{style:de.deletedPostLabel},$.miscStrings.deleted):n.appearsAsDeleted&&(M=i.createElement(m.HeadingXSmall,{style:de.hiddenPostLabel},$.miscStrings.automaticallyHidden));const K=[z.nameAndDatetime,this.isCompactView()&&ce.nameAndDatetime];return i.createElement(u.View,{style:[de.postHeader,P&&de.replyHeader]},i.createElement(u.View,null,i.createElement(u.View,{style:K},this.shouldShowAuthor()&&i.createElement(F.PostAuthorName,{name:null!=(e=null==f?void 0:f.nickname)?e:y,kaid:null!=(t=null==f?void 0:f.kaid)?t:h}),i.createElement(T.default,{href:I,rel:"nofollow"},O),x,M,i.createElement(u.View,{style:J.default.srOnly,role:"status","aria-live":"polite"},this.state.ariaPostStatusChangedMessage)),o&&!!C&&i.createElement(u.View,{style:de.postedInContainer},i.createElement(m.LabelMedium,{style:de.postedInLabel},$.miscStrings.postedIn),i.createElement(m.LabelMedium,null,i.createElement(T.default,{href:I,kind:"primary",rel:"nofollow"},C.translatedTitle||$.miscStrings.untitled))),a&&n.question&&i.createElement(u.View,{style:de.postedInContainer},i.createElement(m.LabelMedium,{style:de.postedInLabel},$.postStrings.answerQuestion,":"),i.createElement(m.Caption,null,n.question&&n.question.content))),w&&0!==w.length&&i.createElement(u.View,{style:de.badges},w.map(((e,t)=>{const{icons:n,translatedDescription:o}=e,a=n.small||n.smallUrl,r=o||(0,Y.getTextForBadgeInexact)({name:e.name||"",description:e.description||"",fullDescription:""},!1).translatedDescription;return i.createElement(u.View,{key:`discussionBadge${t}${p}`,title:r},i.createElement("img",{className:(0,c.css)(de.badge),src:(0,G.default)(a),alt:r}))}))),this.renderModeratorOrOwnerActionsAsDropdown(s,z.actionPickerMobile))},this.renderReplyButton=()=>{const{displayInputPostKey:e,post:t}=this.props,n=$.postStrings.areResponsesCalledAnswers((0,F.getPostTypeAllowingProgram)(t)),o=n?$.postStrings.answer:$.postStrings.reply,a=i.createElement(u.View,{"aria-hidden":"true"},o),r=n?"answer":"reply",s=(0,F.getRespondButtonSrString)(t,r),l=i.createElement(u.View,{style:J.default.srOnly},s);return _.default.isLoggedIn?i.createElement("button",{className:(0,c.css)(de.linkStyledButton),onClick:this.handleReplyInputToggle,"aria-expanded":e===t.key,"aria-controls":(0,F.getAnswerInputId)(t.key)},i.createElement(m.LabelLarge,null,a,l)):i.createElement("button",{className:(0,c.css)(de.linkStyledButton),onClick:()=>this.redirectToSignup()},i.createElement(m.LabelLarge,null,a,l,this.srOnlyToolOpensModal))},this.renderCommentButton=()=>{const{post:e,restrictPosting:t}=this.props,{repliesExpanded:n}=this.state,o=e.replyCount&&e.replyCount>0?$.postStrings.getComments(e.replyCount):i.createElement(u.View,{"aria-hidden":"true"},$.postStrings.comment),a=(0,F.getRespondButtonSrString)(e,"comment"),r=i.createElement(u.View,{style:J.default.srOnly},a);return e.replyCount&&e.replyCount>0||_.default.isLoggedIn&&!t?i.createElement("button",{className:(0,c.css)(de.linkStyledButton),onClick:()=>{this.handleClickComment()},"aria-expanded":n,"aria-controls":this.getRepliesContainerId()},i.createElement(m.LabelLarge,null,o,r)):t?void 0:i.createElement("button",{className:(0,c.css)(de.linkStyledButton),onClick:()=>this.redirectToSignup()},i.createElement(m.LabelLarge,null,o,r,this.srOnlyToolOpensModal))},this.renderPostFooter=()=>{const{post:e,restrictPosting:t,isMaximized:n,profile:o}=this.props,a=(0,F.getPostTypeAllowingProgram)(e),r="reply"===a,s="question"===a,l="projecthelp"===a,c="projecteval"===a,d="projectevalanswer"===a,p=t||this.isCompactView(),f=i.createElement(u.View,{style:de.postFooterPrimary},(s||l)&&!p&&i.createElement(i.Fragment,null,this.renderReplyButton(),i.createElement(m.LabelMedium,{style:de.separator,"aria-hidden":"true"},"•")),!r&&!c&&!d&&!this.isCompactView()&&this.renderCommentButton(),i.createElement(V.default,null),i.createElement(u.View,{style:z.tools},!r&&!c&&!d&&i.createElement(m.LabelXSmall,{style:de.votesSum},"(",$.postStrings.getVotes(e.sumVotesIncremented),")"),this.renderTools(o)),!n&&this.renderModeratorOrOwnerActions(o,z.actionPickerDesktop)),g=i.createElement(u.View,null,n&&this.renderModeratorOrOwnerActions(o,de.maximizedDesktop));return i.createElement(u.View,{style:de.postFooter},f,g)},this.handleAnswerPostSuccess=(e,t)=>{this.props.onPostSuccess(e,t),this.hideReplyInputField()},this.handleEditingPost=e=>{this.setState({editing:!1})},this.hideReplyInputField=()=>{this.props.onToggleReplyInput(this.props.post.key),this.setState({formattingOptionsExpanded:!1})},this.handleSelectionChange=e=>{const{onSelectPosts:t,onDeselectPost:n,post:o}=this.props;e?t([o.key]):n(o.key)},this.maybeRenderExpandCollapseButton=(e,t,n,o)=>{if(!n||n.length<2||!o)return;const a=$.postStrings.areResponsesCalledAnswers(e.type),r=n.length-1,s=a?$.answersStrings.seeAllAnswers(r):$.answersStrings.seeAllReplies(r),l=a?$.answersStrings.hideAnswers(r):$.answersStrings.hideReplies(r);return i.createElement(ae,{style:de.expandCollapseButton,onClick:()=>{o.length<n.length&&this.expandAnswers(t),o.length===n.length&&this.collapseAnswers(t)}},i.createElement(m.LabelLarge,null,o.length<n.length?s:l))},this.state={ariaVoteMessage:"",ariaFlagMessage:"",ariaPostStatusChangedMessage:"",repliesExpanded:se.getRepliesExpandedFromProps(e),editing:!1,formattingOptionsExpanded:!1,previewExpanded:!1,expandedKeys:[],skipped:!1,isModalOpen:{clearFlags:!1,confirmDeletion:!1}}}componentDidMount(){const{qaExpandKey:e,onShowReplies:t,post:n,gqlClient:o}=this.props,{answers:a,replyCount:r,replies:i,key:s}=n,{repliesExpanded:l}=this.state;(0,F.shouldAutoExpandAnswers)(n,e)&&this.state.expandedKeys.length!==a.length&&this.expandAnswers(s),(l||(0,F.shouldAutoExpandReplies)(n,e))&&r&&i.length!==r&&t(s,o),this.maybeAutoFocusPost()}componentDidUpdate(e){const t=se.getRepliesExpandedFromProps(e),n=se.getRepliesExpandedFromProps(this.props);!t&&n&&this.setState({repliesExpanded:!0}),this.maybeAutoFocusPost(e)}redirectToSignup(){const{pathname:e,search:t,hash:n}=this.props.location,o=e+t+n;(0,L.redirect)((0,D.getLoginURL)(o))}renderFlagsTooltipContent(){const{post:e}=this.props,{flaggedBy:t,flags:n}=e,o=(t||[]).map(((e,t)=>({kaid:e,flag:n&&n[t]})));return i.createElement(u.View,null,i.createElement("ul",null,o.map(((e,t)=>i.createElement("li",{key:t},i.createElement(u.View,{style:de.flagsTooltipRow},i.createElement(m.LabelSmall,{style:de.flagsTooltipKaid},e.kaid,":"),i.createElement(m.LabelSmall,{style:de.flagsTooltipText},e.flag||$.miscStrings.unknown)))))))}renderMinimalFlags(e,t,n){return i.createElement(u.UniqueIDProvider,{mockOnFirstRender:!0,scope:"discussion-list"},(o=>i.createElement(K.default,{content:this.renderFlagsTooltipContent(),toggleOnHover:e.length>0,offset:12,a11y:{title:{id:o.get("flag-tt")}}},i.createElement(m.LabelXSmall,{style:[n,de.moderatorFlagged],"aria-labelledby":o.get("flag-tt")},$.postStrings.flagged,t))))}renderFlagButton(e){const{onFlagPost:t,post:n,tab:o,gqlClient:a}=this.props,r=[de.flagText,this.isCompactView()&&ce.flagText],s=n.flags||[],l=` (${s.length})`;if((0,F.isModeratorProfile)(e))return this.renderMinimalFlags(s,l,r);const c=e&&!e.get("isPhantom")&&!(0,F.userMeetsCommunityRequirements)(e),d=n.flaggedByUser?y.default.blue:c?y.default.offBlack32:y.default.offBlack64;return i.createElement(u.UniqueIDProvider,{mockOnFirstRender:!0,scope:"discussion-list"},(s=>i.createElement(M.default,{modal:({closeModal:e})=>i.createElement(O.default,{post:n,tab:o,onClose:o=>{o&&(t(n,o,a),this.setState({ariaFlagMessage:$.postStrings.ariaFlagged})),e()}}),ariaLabel:$.postStrings.flagModal,focusId:s.get("flag")},(t=>i.createElement(K.default,{content:c&&$.upsellStrings.notEnoughPointsUnverifiedEmailAccountAgeFlag,toggleOnHover:!!c,offset:12,a11y:{title:{id:"flag"}}},i.createElement(j.default,{id:s.get("flag"),icon:i.createElement(h.default,{size:"small",icon:n.flaggedByUser?re.flagSelected:re.flag,color:d}),style:[de.toolButton,de.flagTool],disabled:n.flaggedByUser||!!c,onClick:()=>{_.default.isLoggedIn?t():this.redirectToSignup()}},i.createElement(u.View,{style:r},n.flaggedByUser?$.postStrings.flagged:$.postStrings.flag,(0,F.isModeratorProfile)(e)&&l,_.default.isLoggedIn?this.srOnlyFlagModal:this.srOnlyToolOpensModal)))))))}isCompactView(){const{viewMode:e}=this.props;return"compact"===e}shouldShowAuthor(){const{post:e,moderatorMode:t}=this.props,n="projectevalanswer"===(0,F.getPostTypeAllowingProgram)(e);return!!t||!this.isCompactView()&&!n}renderOpenModals(){const{post:e,schedule:t}=this.props,{isModalOpen:n}=this.state;return i.createElement(i.Fragment,null,i.createElement(w.ModalLauncher,{key:"deletePost",onClose:()=>{this.closeModal("confirmDeletion"),t.animationFrame((()=>{this.actionMenu&&this.actionMenu.focus()}))},opened:n.confirmDeletion,modal:({closeModal:e})=>i.createElement(R.default,{handleClose:e,handleSubmit:()=>{this.handleDelete(),e()}})}),i.createElement(w.ModalLauncher,{key:"clearFlags",onClose:()=>this.closeModal("clearFlags"),opened:n.clearFlags,modal:({closeModal:t})=>i.createElement(P.default,{flaggedBy:e.flaggedBy||e.flaggedByKaid||[],flags:e.flags||[],postKey:e.key,onCancel:t,onClearAllFlags:this.handleClearAllFlags})}))}renderDeleteAction(e,t){const n=(0,F.isModeratorProfile)(e)?this.handleDelete:()=>this.openModal("confirmDeletion");return i.createElement(t,{key:"delete",label:$.postStrings.delete,onClick:n})}getModeratorOrOwnerActions(e,t){var n,o;const{moderatorMode:a,isProjectFeedback:r}=this.props;if(!e)return[];const{post:s,tab:l,onModifyNotifications:c,contentKind:d,onStartAcceptingClarification:p,gqlClient:u}=this.props,f=null!=(n=null==(o=s.author)?void 0:o.kaid)?n:s.authorKaid,m=(0,F.getPostTypeAllowingProgram)(s),g=(0,B.getKaid)(e)===f,y="reply"===m,h="scratchpad"===m,b="projecteval"===m,w="projectevalanswer"===m,E="question"===m;if(!(0,F.isModeratorProfile)(e)&&!g)return[];const C=[],v=(0,F.getPostContext)({profile:e,post:s,moderatorMode:!!a});!(0,F.isModeratorProfile)(e)||y||h||w||b||("comments"!==l&&"clarifications"!==l||C.push(i.createElement(t,{key:"changeToQuestion",onClick:this.handleChangeToQuestion,label:$.postStrings.changeToQuestion})),"questions"!==l&&"clarifications"!==l||C.push(i.createElement(t,{key:"changeToTipsAndThanks",onClick:this.handleChangeToTipsAndThanks,label:$.postStrings.changeToTipsAndThanks})),r||"questions"!==l&&"comments"!==l||C.push(i.createElement(t,{key:"changeToMistakes",onClick:this.handleChangeToMistakes,label:$.postStrings.changeToMistakes})));const T=s.notifyOnAnswer?$.postStrings.turnNotificationsOff:$.postStrings.turnNotificationsOn;return E&&g&&!s.isOld&&C.push(i.createElement(t,{key:"notification",label:T,onClick:()=>{c(s.key,!s.notifyOnAnswer,u)}})),h||b||w||C.push(i.createElement(t,{key:"edit",label:$.postStrings.edit,onClick:()=>this.setState({editing:!0})})),s.deleted||C.push(this.renderDeleteAction(e,t)),(0,F.isModeratorProfile)(e)&&s.deleted&&C.push(i.createElement(t,{key:"undelete",label:$.postStrings.undelete,onClick:this.handleUndelete})),F.capabilities.clearFlags(v)&&C.push(i.createElement(t,{key:"clearFlags2",label:$.postStrings.clearFlags,onClick:()=>this.openModal("clearFlags")})),F.capabilities.approve(v)&&C.push(i.createElement(t,{key:"approve",label:$.postStrings.approve,onClick:this.handleClearAllFlags})),a&&(0,F.isModeratorProfile)(e)&&C.push(i.createElement(t,{key:"skip",label:$.postStrings.skip,onClick:this.handleSkip})),!(0,F.isModeratorProfile)(e)||"clarifications"!==l||"Video"!==d&&"video"!==d&&"YouTubeVideo"!==d||C.push(i.createElement(t,{key:"accept_clarification",label:$.postStrings.acceptClarification,onClick:()=>p(s.key)})),C}renderModeratorOrOwnerActionsAsDropdown(e,t){const n=this.getModeratorOrOwnerActions(e,f.ActionItem);return i.createElement(f.ActionMenu,{ref:e=>{const t=s.findDOMNode(e);this.props.getRef&&this.props.getRef(t);const n=t&&t.querySelector("button");n instanceof HTMLButtonElement&&(this.actionMenu=n)},menuText:C._("more"),alignment:"right",style:t},n)}renderModeratorOrOwnerActionsAsFlat(e,t){const n=this.getModeratorOrOwnerActions(e,ie);return i.createElement(u.View,{style:[t,de.expandedActionList]},n.map(((e,t)=>i.createElement(u.View,{key:t},e))))}renderModeratorOrOwnerActions(e,t){const{isMaximized:n}=this.props;return n?this.renderModeratorOrOwnerActionsAsFlat(e,t):this.renderModeratorOrOwnerActionsAsDropdown(e,t)}renderTools(e){const{post:t}=this.props,n=(0,F.getPostTypeAllowingProgram)(t),o="projecteval"===n,a="projectevalanswer"===n,r=!this.isCompactView()&&!o&&!a;return i.createElement(i.Fragment,null,r&&this.renderVoteTools(e),this.showFlagButton(e)&&this.renderFlagButton(e))}renderVoteTools(e){const{post:t,restrictPosting:n}=this.props,o="reply"===(0,F.getPostTypeAllowingProgram)(t);let a=null;var r,s;e&&!e.get("isPhantom")&&(e.get("kaid")===(null!=(r=null==(s=t.author)?void 0:s.kaid)?r:t.authorKaid)?a="noSelfVoting":e.get("points")<5e3&&!(0,F.isModeratorProfile)(e)&&(a="atLeast5000"));const l=!!a,d=l?y.default.offBlack32:t.upVoted?y.default.green:y.default.offBlack64,p=l?y.default.offBlack32:t.downVoted?y.default.red:y.default.offBlack64,f=t.upVoted?$.postStrings.alreadyUpVoted:void 0,m=t.downVoted?$.postStrings.alreadyDownVoted:void 0;return!o&&!n&&i.createElement(i.Fragment,null,i.createElement(K.default,{content:a&&$.postStrings[a],toggleOnHover:l,offset:12,a11y:{title:{id:"upvote"}}},i.createElement(j.default,{icon:i.createElement(h.default,{"aria-label":f,size:"small",icon:t.upVoted?re.upvoteSelected:re.upvote,color:d}),style:de.toolButton,onClick:()=>this.handleUpvote(),disabled:l,"aria-labelledby":"upvote"},i.createElement(u.View,{style:de.voteText},$.postStrings.upvote,!_.default.isLoggedIn&&this.srOnlyToolOpensModal,_.default.isLoggedIn&&a&&i.createElement("span",{className:(0,c.css)(J.default.srOnly)},$.postStrings[a])))),i.createElement(K.default,{content:a&&$.postStrings[a],toggleOnHover:l,offset:12,a11y:{title:{id:"downvote"}}},i.createElement(j.default,{icon:i.createElement(h.default,{"aria-label":m,size:"small",icon:t.downVoted?re.downvoteSelected:re.downvote,color:p}),style:de.toolButton,onClick:()=>this.handleDownvote(),disabled:l,"aria-labelledby":"downvote"},i.createElement(u.View,{style:de.voteText},$.postStrings.downvote,!_.default.isLoggedIn&&this.srOnlyToolOpensModal,_.default.isLoggedIn&&a&&i.createElement("span",{className:(0,c.css)(J.default.srOnly)},$.postStrings[a])))),i.createElement(u.View,{style:J.default.srOnly,role:"status","aria-live":"polite"},i.createElement(u.View,null,this.state.ariaVoteMessage),i.createElement(u.View,null,this.state.ariaFlagMessage)))}renderReplies(){const{post:e,tab:t,topicSlug:n,resetNewPostKeyInfo:o,contentId:r,contentKind:s,restrictPosting:l,includeCheckbox:c}=this.props,{replies:d,replyCount:p}=e,{repliesExpanded:f}=this.state;if(0===p&&(!_.default.isLoggedIn||l))return;if(f&&p&&p>0&&0===d.length)return i.createElement(u.View,{style:[de.replyContainer,de.loading]},i.createElement(N.default,{size:"xsmall",style:de.spinner,sentryId:"discussion_replies_load",description:"Loading discussion post replies",sentryTeam:"learning-platform"}),$.postStrings.loading);const m=[de.outerRepliesContainer,this.isCompactView()&&ce.outerRepliesContainer];return i.createElement(u.View,{style:f?m:[de.collapsedReplyContainer,de.displayNone],id:this.getRepliesContainerId()},i.createElement(u.View,{style:de.innerRepliesContainer},d&&d.map(((e,n)=>i.createElement(u.View,{key:e},i.createElement(u.View,{style:de.replyContainer},i.createElement(ue,(0,a.default)({},this.props,{postKey:e,tab:t,autoFocusPostOnMount:0===n&&f,includeCheckbox:c}))))))),_.default.isLoggedIn&&!l&&i.createElement(u.View,{style:de.replyInputContainer},i.createElement(A.default,{autoFocus:f&&!d.length,isReply:!0,tab:t,topicSlug:n,feedbackKey:e.key,resetNewPostKeyInfo:o,onPostSuccess:(e,t)=>{},contentKind:s,contentId:r,showAvatar:this.isCompactView()})))}expandAnswers(e){this.setState({expandedKeys:[].concat(this.state.expandedKeys,[e])})}collapseAnswers(e){this.setState({expandedKeys:this.state.expandedKeys.filter((t=>t!==e))})}maybeRenderAnswers(e,t){var n,o;const{topicSlug:a,newPostKey:r,resetNewPostKeyInfo:s,tab:l,displayInputPostKey:d,restrictPosting:p,clarificationsEnabled:u,viewMode:f,post:m,moderatorMode:g,isMaximized:y,contentKind:h,profile:b,includeCheckbox:w}=this.props,E=d===t;if("questions"!==l&&"projecthelp"!==l)return null;if((!e||0===e.length)&&p)return null;const C=i.createElement("div",{className:(0,c.css)(de.answerInputFieldContainer,E&&de.answerInputFieldContainerExpanded),id:(0,F.getAnswerInputId)(t)},"projecthelp"===l&&((0,B.getKaid)(b)===(null!=(n=null==(o=m.author)?void 0:o.kaid)?n:m.authorKaid)?$.userProjectsStrings.authorAnsweringOwnHelpRequest:null),i.createElement(A.default,{isAnswer:!0,autoFocus:E,tab:l,clarificationsEnabled:u,onPostSuccess:this.handleAnswerPostSuccess,topicSlug:a,feedbackKey:t,onToggleFormattingOptionsExpanded:e=>this.setState({formattingOptionsExpanded:e}),onTogglePreviewExpanded:e=>this.setState({previewExpanded:e}),showAvatar:!this.isCompactView(),contentKind:h}));if(e&&0!==e.length){const n=this.state.expandedKeys.includes(t)?e:[e[0]];return i.createElement("div",{className:(0,c.css)(de.answersList,"compact"===f&&ce.answersList)},!p&&C,i.createElement("ul",null,n.map(((e,t)=>i.createElement("li",{key:e,className:(0,c.css)(de.answer)},i.createElement(ue,{tab:l,postKey:e,newPostKey:r,resetNewPostKeyInfo:s,isAnswer:!0,getRef:t=>this.nodes[e]=t,topicSlug:a,restrictPosting:p,moderatorMode:g,viewMode:f,isMaximized:y,autoFocusPostOnMount:1===t,includeCheckbox:w}))))),this.maybeRenderExpandCollapseButton(m,t,e,n))}return i.createElement("div",{className:(0,c.css)(de.answersList,this.isCompactView()&&ce.answersList,!d&&de.displayNone)},C)}renderDefaultContent(){var e;const{post:t}=this.props,n="reply"===(null==(e=(0,F.getPostTypeAllowingProgram)(t))?void 0:e.toLowerCase());return i.createElement(m.Body,{style:[z.content,n&&de.replyContent]},i.createElement(I.default,{string:t.content}))}renderProjectEval(){const{post:e}=this.props;return i.createElement(x.default,{post:e})}renderScratchpadContent(){const{post:e}=this.props,{relativeUrl:t="",title:n=""}=e;return i.createElement(u.View,null,i.createElement("h2",null,i.createElement("a",{href:t},n)),i.createElement("iframe",{src:(0,G.default)(`${t}/embedded?editor=yes`),className:(0,c.css)(de.scratchpadFrame),frameBorder:"0",scrolling:"no"}))}renderProjectPreview(){const{post:e}=this.props,{focus:t}=e;return t&&t.relativeUrl?i.createElement("img",{className:(0,c.css)(de.projectPreview),src:(0,G.default)(`${t.relativeUrl}/latest.png`),alt:t.translatedTitle}):null}renderContent(){const{post:e}=this.props;switch((0,F.getPostTypeAllowingProgram)(e)){case"scratchpad":return this.renderScratchpadContent();case"projectevalanswer":return this.renderProjectEval();case"projecteval":case"projecthelp":return i.createElement(u.View,null,this.renderDefaultContent(),this.renderProjectPreview());default:return this.renderDefaultContent()}}render(){var e,t,n,o,a,r;const{post:l,isAnswer:c,tab:d,contentKind:p,contentId:f,topicSlug:g,resetNewPostKeyInfo:y,clarificationBeingAcceptedId:h,onStopAcceptingClarification:b,includeCheckbox:w,selected:E}=this.props,{key:C,author:T,authorNickname:P,authorAvatarName:O,authorAvatarSrc:x,authorKaid:I,content:M,fromVideoAuthor:K}=l,{editing:R,skipped:_}=this.state,L=C===h,D="reply"===(0,F.getPostTypeAllowingProgram)(l);if(_)return null;return i.createElement(u.View,{testId:"discussion-post"},this.renderOpenModals(),!R&&!L&&i.createElement(u.View,{style:[z.post,D&&de.horizontalSeparator],tabIndex:-1,ref:e=>{const t=s.findDOMNode(e);this.props.getRef&&this.props.getRef(t),this.postElement=t}},this.shouldShowAuthor()&&i.createElement(u.View,{style:de.avatar},i.createElement(k.default,{username:null!=(e=null==T?void 0:T.nickname)?e:P,avatarName:null!=(t=null==T||null==(n=T.avatar)?void 0:n.name)?t:O,avatarSrc:null!=(o=null==T||null==(a=T.avatar)?void 0:a.imageSrc)?o:x,kaid:null!=(r=null==T?void 0:T.kaid)?r:I,enableProfilePreviewTooltip:!0})),i.createElement(u.View,{style:z.everythingButTheAvatar},this.renderPostHeader(),i.createElement(u.View,{style:de.contentContainer},K&&i.createElement(m.LabelSmall,{style:de.fromTheAuthor},$.postStrings.fromTheAuthor),this.renderContent(),(l.appearsAsDeleted||l.deleted)&&i.createElement(u.View,{style:[de.contentBackdrop,l.deleted&&de.deletedPost,l.appearsAsDeleted&&!l.deleted&&de.hiddenPost]})),this.renderPostFooter(),!D&&this.renderReplies())),R&&i.createElement(u.View,{style:de.replyInputContainer},i.createElement(A.default,{editing:R,postKey:l.key,isReply:D,isAnswer:c,tab:d,contentKind:p,contentId:f,topicSlug:g,feedbackKey:l.key,resetNewPostKeyInfo:y,initialPostContent:M,onPostSuccess:(e,t)=>this.handleEditingPost(e),onCancel:()=>this.setState({editing:!1}),showAvatar:!this.isCompactView()}),!D&&i.createElement(u.View,{style:{marginLeft:48}},this.renderReplies())),L&&i.createElement(S.default,{post:l,editingOrAccepting:"accepting",onCancel:b}),!c&&!D&&this.maybeRenderAnswers(l.answers,l.key),w&&i.createElement(v.Checkbox,{style:de.checkbox,checked:E,onChange:this.handleSelectionChange,"aria-label":"Post selection"}))}}t.DiscussionPost=se;const le=y.default.offBlack64,ce=c.StyleSheet.create(ne),de=c.StyleSheet.create({postHeader:{flexDirection:"row",justifyContent:"space-between",marginBottom:8},outerRepliesContainer:{backgroundColor:y.default.offWhite,marginTop:b.default.large_24,paddingTop:b.default.large_24,paddingLeft:b.default.large_24,paddingRight:b.default.large_24,maxHeight:"none",transition:`all ${H.standardTransition}`,[Q.default.xsOrSmaller]:ne.outerRepliesContainer},outerRepliesContainerWithAvatar:{[Q.default.xsOrSmaller]:{marginLeft:-64}},collapsedReplyContainer:{paddingLeft:b.default.large_24,paddingRight:b.default.large_24,maxHeight:0,overflow:"hidden",transition:`all ${H.standardTransition}`,visibility:"hidden"},innerRepliesContainer:{marginBottom:2},replyContainer:{marginBottom:2},replyHeader:{marginBottom:0},replyContent:{paddingTop:b.default.xxxSmall_4},loading:{flexDirection:"row",paddingTop:0,minHeight:48,alignItems:"center"},spinner:{marginRight:b.default.xSmall_8},replyInputContainer:{paddingBottom:b.default.large_24},postedInContainer:{marginTop:b.default.xxxSmall_4,flexDirection:"row",alignItems:"baseline"},postedInLabel:{color:y.default.offBlack64,marginRight:b.default.xxSmall_6},hiddenPostLabel:{color:y.default.gold,marginLeft:8,alignSelf:"center"},deletedPostLabel:{color:y.default.red,marginLeft:8,alignSelf:"center"},badges:{flexDirection:"row"},badge:{width:16,height:16,marginLeft:4},contentContainer:{position:"relative"},contentBackdrop:{width:"100%",height:"100%",borderRadius:4,opacity:.1,position:"absolute",zIndex:-1},hiddenPost:{backgroundColor:y.default.gold},deletedPost:{backgroundColor:y.default.red},postFooter:{flexDirection:"row",flexWrap:"wrap",alignItems:"center",height:40},postFooterPrimary:{flexDirection:"row",alignItems:"center",width:"100%"},linkStyledButton:{color:le,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0},votesSum:{color:le,marginLeft:12,[Q.default.xsOrSmaller]:{display:"none"}},voteText:{[Q.default.xsOrSmaller]:{display:"none"}},toolButton:{marginLeft:12},flagTool:{[Q.default.xsOrSmaller]:{}},flagText:{[Q.default.xsOrSmaller]:ne.flagText},moderatorFlagged:{marginLeft:8},fromTheAuthor:{marginLeft:8},notificationsUnavailableText:{marginLeft:12},horizontalSeparator:{borderBottom:z.border,clear:"both",paddingBottom:b.default.small_12,":last-child":{borderBottom:"none",paddingBottom:0}},separator:{color:z.borderColor,paddingLeft:b.default.xxxSmall_4,paddingRight:b.default.xxxSmall_4},expandCollapseButton:{marginTop:24,marginBottom:8},answersList:{marginLeft:68,[Q.default.xsOrSmaller]:ne.answersList},answerInputFieldContainer:{display:"none"},answerInputFieldContainerExpanded:{margin:"20px 0 28px 0",display:"block"},maximizedDesktop:{[Q.default.smOrSmaller]:{display:"none"}},displayNone:{display:"none"},answer:{marginTop:24},expandedActionList:{flexDirection:"row"},avatar:{marginRight:24},scratchpadFrame:{width:940,height:440,border:0},flagsTooltipRow:{flexDirection:"row"},flagsTooltipKaid:{color:y.default.blue},flagsTooltipText:{paddingLeft:8},projectPreview:{width:40},checkbox:{position:"absolute",top:60,left:15}}),pe={onChangeType:X.changeType,onClearFlags:X.clearFlags,onDeletePost:X.deletePost,onDownvotePost:X.downvotePost,onFlagPost:X.flagPost,onModifyNotifications:X.modifyNotificationsAction,onPostSuccess:X.postSuccessAction,onShowReplies:X.fetchReplies,onToggleReplyInput:X.toggleReplyInputAction,onUndeletePost:X.undeletePost,onUpvotePost:X.upvotePost,resetExpandKey:X.resetExpandKeyAction,onStartAcceptingClarification:X.startAcceptingClarificationAction,onStopAcceptingClarification:X.stopAcceptingClarificationAction,onSelectPosts:X.selectPosts,onDeselectPost:X.deselectPost},ue=(0,p.compose)(U.default,q.default,E.withActionScheduler,W.default,(0,l.connect)(((e,t)=>{const n=e.posts[t.postKey],{contentKind:o,contentId:a}=((e,t,n,o)=>{if(n.focus)return{contentKind:n.focus.kind,contentId:n.focus.id};if(n.question&&n.question.focus)return{contentKind:n.question.focus.kind,contentId:n.question.focus.id};if(n.questionKey){const t=e[n.questionKey];if(t&&t.focus)return{contentKind:t.focus.kind,contentId:t.focus.id}}else if(o)return{contentKind:o.contentKind,contentId:o.contentId};return t})(e.posts,{contentKind:e.contentKind,contentId:e.contentId},n,t.contentKind?{contentKind:t.contentKind,contentId:t.contentId}:void 0),r="Topic"===e.contentKind,i=r&&"answer"===(0,F.getPostTypeAllowingProgram)(n),s=!0===e.selectedPosts[n.key];return{post:n,contentId:a,contentKind:o,qaExpandKey:e.qaExpandKey,newPostKey:e.newPostKey,displayInputPostKey:e.displayInputPostKey,clarificationBeingAcceptedId:e.clarificationBeingAcceptedId,showPostedIn:r,showParentQuestion:i,selected:s}}),pe))(se);var fe=ue;t.default=fe}}]);
//# sourceMappingURL=../../sourcemaps/en/3zNK.48a424a0670a304b1d44.js.map