(window.webpackJsonp=window.webpackJsonp||[]).push([["79qq"],{"832m":function(e,t,r){"use strict";r.d(t,"a",(function(){return te})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return ee})),r.d(t,"d",(function(){return re})),r.d(t,"e",(function(){return z}));var n=r("5pch"),i=r.n(n),s=Math.pow(2,-42);function o(e){return i.a.isNumber(e)&&!i.a.isNaN(e)}function a(e,t,r){return null==e||null==t?e===t:e===t||(null==r&&(r=1e-9),Math.abs(e-t)<r)}function l(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function h(e,t){return Math.round(e/t)*t}function c(e,t){return Math.floor(e/t)*t}function p(e,t){return Math.ceil(e/t)*t}var u=Object.freeze({__proto__:null,DEFAULT_TOLERANCE:1e-9,EPSILON:s,is:o,equal:a,sign:function(e,t){return a(e,0,t)?0:Math.abs(e)/e},isInteger:function(e,t){return a(Math.round(e),e,t)},round:l,roundTo:h,floorTo:c,ceilTo:p,toFraction:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=[1,0],i=[0,1],o=Math.floor(e),l=e-o;i[0]<=r;){if(a(n[0]/i[0],e,t))return[n[0],i[0]];n=[o*n[0]+n[1],n[0]],i=[o*i[0]+i[1],i[0]],l=1/l-(o=Math.floor(1/l))}return[e,1]}});function d(e){return e.reduce(((e,t)=>e+t),0)}function m(e){return e.reduce(((e,t)=>e*t),1)}function f(e,t){return!!i.a.isArray(e)&&(void 0===t||e.length===t)&&e.every(o)}function g(e){return k(e,1/v(e))}function v(e){return Math.sqrt(y(e,e))}function y(e,t){return d(i.a.zip(e,t).map(m))}function b(){var e=i.a.zip(...arguments);return e.map(d)}function x(e,t){return i.a.zip(e,t).map((e=>e[0]-e[1]))}function w(e){return e.map((e=>-e))}function k(e,t){return e.map((e=>e*t))}function C(e,t,r){return i.a.zip(e,t).every((e=>a(e[0],e[1],r)))}function E(e,t,r){return!(!a(v(e),0,r)&&!a(v(t),0,r))||C(e=g(e),t=g(t),r)}function S(e,t,r){return E(e,t,r)||E(e,w(t),r)}function T(e){var t=v(e),r=Math.atan2(e[1],e[0]);return r<0&&(r+=2*Math.PI),[t,r]}function M(e){var t=T(e);return[t[0],180*t[1]/Math.PI]}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e*Math.cos(t),e*Math.sin(t)]}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(e,t*Math.PI/180)}function I(e,t){var r=T(e),n=r[1]+t;return _(r[0],n)}function O(e,t){var r=M(e),n=r[1]+t;return A(r[0],n)}function N(e,t){return Math.acos(y(e,t)/(v(e)*v(t)))}function P(e,t){return k(t,y(e,t)/y(t,t))}function R(e,t){return e.map(((e,r)=>l(e,t[r]||t)))}function L(e,t){return e.map(((e,r)=>h(e,t[r]||t)))}function F(e,t){return e.map(((e,r)=>c(e,t[r]||t)))}function D(e,t){return e.map(((e,r)=>p(e,t[r]||t)))}var z=Object.freeze({__proto__:null,is:f,normalize:g,length:v,dot:y,add:b,subtract:x,negate:w,scale:k,equal:C,codirectional:E,collinear:S,polarRadFromCart:T,polarDegFromCart:M,cartFromPolarRad:_,cartFromPolarDeg:A,rotateRad:I,rotateDeg:O,angleRad:N,angleDeg:function(e,t){return 180*N(e,t)/Math.PI},projection:P,round:R,roundTo:L,floorTo:F,ceilTo:D});function B(e,t){var r=x(t[1],t[0]),n=x(e,t[0]);return v(x(P(n,r),n))}function q(e,t){var r=x(t[1],t[0]),n=x(e,t[0]),i=x(k(P(n,r),2),n);return b(t[0],i)}var H=f,U=b,W=b,j=x,G=C,V=T,Y=M,X=_,Q=A,K=R,$=L,Z=F,J=D,ee=Object.freeze({__proto__:null,rotateRad:function(e,t,r){return void 0===r?I(e,t):b(r,I(x(e,r),t))},rotateDeg:function(e,t,r){return void 0===r?O(e,t):b(r,O(x(e,r),t))},distanceToPoint:function(e,t){return v(x(e,t))},distanceToLine:B,reflectOverLine:q,compare:function(e,t,r){if(e.length!==t.length)return e.length-t.length;for(var n=0;n<e.length;n++)if(!a(e[n],t[n],r))return e[n]-t[n];return 0},is:H,addVector:U,addVectors:W,subtractVector:j,equal:G,polarRadFromCart:V,polarDegFromCart:Y,cartFromPolarRad:X,cartFromPolarDeg:Q,round:K,roundTo:$,floorTo:Z,ceilTo:J}),te=Object.freeze({__proto__:null,distanceToPoint:function(e,t){return B(t,e)},reflectPoint:function(e,t){return q(t,e)},midpoint:function(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},equal:function(e,t,r){var n=x(e[1],e[0]);return!!S(n,x(t[1],t[0]),r)&&(!!G(e[0],t[0])||S(n,x(t[0],e[0]),r))}}),re=Object.freeze({__proto__:null,equal:function(e,t,r){var n=x(e[1],e[0]),i=x(t[1],t[0]),s=G(e[0],t[0]),o=E(n,i,r);return s&&o}})},BWOr:function(e,t,r){var n,i=r("96rG"),s="mathquill-command-id",o="mathquill-block-id",a=Math.min,l=Math.max;function h(){}var c=[].slice;function p(e){var t=e.length-1;return function(){var r=c.call(arguments,0,t),n=c.call(arguments,t);return e.apply(this,r.concat([n]))}}var u=p((function(e,t){return p((function(r,n){if(e in r)return r[e].apply(r,t.concat(n))}))}));function d(e){return p((function(t,r){"function"!=typeof t&&(t=u(t));return e.call(this,(function(e){return t.apply(e,[e].concat(r))}))}))}function m(e){var t=c.call(arguments,1);return function(){return e.apply(this,t)}}function f(e,t){if(!t)throw new Error("prayer failed: "+e)}var g=function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function s(){}return function e(r,o){function a(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}undefined===o&&(o=r,r=Object),a.Bare=l;var h,c=s.prototype=r.prototype,p=l.prototype=a.prototype=a.p=new s;return p.constructor=a,a.mixin=function(t){return l.prototype=a.prototype=e(a,t).prototype,a},(a.open=function(e){if(h={},i(e)?h=e.call(a,p,c,a,r):n(e)&&(h=e),n(h))for(var s in h)t.call(h,s)&&(p[s]=h[s]);return i(p.init)||(p.init=r),a})(o)}}(0,{}.hasOwnProperty),v=-1;function y(e){f("a direction was passed",e===v||1===e)}var b=g(i,(function(e){e.insDirOf=function(e,t){return e===v?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===v?this.prependTo(t):this.appendTo(t)}})),x=g((function(e){e.parent=0,e[v]=0,e[1]=0,e.init=function(e,t,r){this.parent=e,this[v]=t,this[1]=r},this.copy=function(e){return x(e.parent,e[v],e[1])}})),w=g((function(e){e[v]=0,e[1]=0,e.parent=0;var t=0;this.byId={},e.init=function(){this.id=t+=1,w.byId[this.id]=this,this.ends={},this.ends[v]=0,this.ends[1]=0},e.dispose=function(){delete w.byId[this.id]},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=b(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){e=b(e||this.html());function t(e){if(e.getAttribute){var r=e.getAttribute("mathquill-command-id"),n=e.getAttribute("mathquill-block-id");r&&w.byId[r].jQadd(e),n&&w.byId[n].jQadd(e)}for(e=e.firstChild;e;e=e.nextSibling)t(e)}for(var r=0;r<e.length;r+=1)t(e[r]);return e},e.createDir=function(e,t){y(e);var r=this;return r.jQize(),r.jQ.insDirOf(e,t.jQ),t[e]=r.adopt(t.parent,t[v],t[1]),r},e.createLeftOf=function(e){return this.createDir(v,e)},e.selectChildren=function(e,t){return M(e,t)},e.bubble=d((function(e){for(var t=this;t;t=t.parent){if(!1===e(t))break}return this})),e.postOrder=d((function(e){return function t(r){r.eachChild(t),e(r)}(this),this})),e.isEmpty=function(){return 0===this.ends[v]&&0===this.ends[1]},e.children=function(){return C(this.ends[v],this.ends[1])},e.eachChild=function(){var e=this.children();return e.each.apply(e,arguments),this},e.foldChildren=function(e,t){return this.children().fold(e,t)},e.withDirAdopt=function(e,t,r,n){return C(this,this).withDirAdopt(e,t,r,n),this},e.adopt=function(e,t,r){return C(this,this).adopt(e,t,r),this},e.disown=function(){return C(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}));function k(e,t,r){f("a parent is always present",e),f("leftward is properly set up",t?t[1]===r&&t.parent===e:e.ends[v]===r),f("rightward is properly set up",r?r[v]===t&&r.parent===e:e.ends[1]===t)}var C=g((function(e){e.init=function(e,t,r){if(r===n&&(r=v),y(r),f("no half-empty fragments",!e==!t),this.ends={},e){f("withDir is passed to Fragment",e instanceof w),f("oppDir is passed to Fragment",t instanceof w),f("withDir and oppDir have the same parent",e.parent===t.parent),this.ends[r]=e,this.ends[-r]=t;var i=this.fold([],(function(e,t){return e.push.apply(e,t.jQ.get()),e}));this.jQ=this.jQ.add(i)}},e.jQ=b(),e.withDirAdopt=function(e,t,r,n){return e===v?this.adopt(t,r,n):this.adopt(t,n,r)},e.adopt=function(e,t,r){k(e,t,r);var n=this;n.disowned=!1;var i=n.ends[v];if(!i)return this;var s=n.ends[1];return t||(e.ends[v]=i),r?r[v]=s:e.ends[1]=s,n.ends[1][1]=r,n.each((function(r){r[v]=t,r.parent=e,t&&(t[1]=r),t=r})),n},e.disown=function(){var e=this,t=e.ends[v];if(!t||e.disowned)return e;e.disowned=!0;var r=e.ends[1],n=t.parent;return k(n,t[v],t),k(n,r,r[1]),t[v]?t[v][1]=r[1]:n.ends[v]=r[1],r[1]?r[1][v]=t[v]:n.ends[1]=t[v],e},e.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},e.each=d((function(e){var t=this,r=t.ends[v];if(!r)return t;for(;r!==t.ends[1][1];r=r[1]){if(!1===e(r))break}return t})),e.fold=function(e,t){return this.each((function(r){e=t.call(this,e,r)})),e}})),E={},S={},T=g(x,(function(e){e.init=function(e,t){this.parent=e,this.options=t;var r=this.jQ=this._jQ=b('<span class="mq-cursor">&#8203;</span>');this.blink=function(){r.toggleClass("mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[v][v]===this[v]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=b(),this},e.withDirInsertAt=function(e,t,r,n){var i=this.parent;this.parent=t,this[e]=r,this[-e]=n,i!==t&&i.blur&&i.blur(this)},e.insDirOf=function(e,t){return y(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(v,e)},e.insRightOf=function(e){return this.insDirOf(1,e)},e.insAtDirEnd=function(e,t){return y(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(v,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(1,e)},e.jumpUpDown=function(e,t){var r=this;r.upDownCache[e.id]=x.copy(r);var n=r.upDownCache[t.id];if(n)n[1]?r.insLeftOf(n[1]):r.insAtRightEnd(n.parent);else{var i=r.offset().left;t.seek(i,r)}},e.offset=function(){var e=this.jQ.removeClass("mq-cursor").offset();return this.jQ.addClass("mq-cursor"),e},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,r=e[1],n=e[v];if(e.disown().eachChild((function(i){i.isEmpty()||(i.children().adopt(t,n,r).each((function(t){t.jQ.insertBefore(e.jQ.first())})),n=i.ends[1])})),!this[1])if(this[v])this[1]=this[v][1];else for(;!this[1];){if(this.parent=this.parent[1],!this.parent){this[1]=e[1],this.parent=t;break}this[1]=this.parent.ends[v]}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(t),e.jQ.remove(),e[v].siblingDeleted&&e[v].siblingDeleted(this.options,1),e[1].siblingDeleted&&e[1].siblingDeleted(this.options,v)},e.startSelection=function(){for(var e=this.anticursor=x.copy(this),t=e.ancestors={},r=e;r.parent;r=r.parent)t[r.parent.id]=r},e.endSelection=function(){delete this.anticursor},e.select=function(){var e=this.anticursor;if(this[v]===e[v]&&this.parent===e.parent)return!1;for(var t=this;t.parent;t=t.parent)if(t.parent.id in e.ancestors){var r=t.parent;break}f("cursor and anticursor in the same tree",r);var n,i,s=e.ancestors[r.id],o=1;if(t[v]!==s)for(var a=t;a;a=a[1])if(a[1]===s[1]){o=v,n=t,i=s;break}return 1===o&&(n=s,i=t),n instanceof x&&(n=n[1]),i instanceof x&&(i=i[v]),this.hide().selection=r.selectChildren(n,i),this.insDirOf(o,this.selection.ends[o]),this.selectionChanged(),!0},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[v]=this.selection.ends[v][v],this[1]=this.selection.ends[1][1],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[v]=e.ends[v][v],this[1]=e.ends[1][1],delete this.selection),e}})),M=g(C,(function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e){return this.fold("",(function(t,r){return t+r[e]()}))}})),_=g((function(e){e.init=function(e,t,r){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=r,e.controller=this,this.cursor=e.cursor=T(e,r)},e.handle=function(e,t){var r=this.options.handlers;if(r&&r.fns[e]){var n=r.APIClasses[this.KIND_OF_MQ](this);t===v||1===t?r.fns[e](t,n):r.fns[e](n)}};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}})),A={},I=g(),O={},N=g(),P={};function R(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function L(e){return R(),Ne(e)}L.prototype=N.p,L.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return(R=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),L},L.getInterface=z;var F=z.MIN=1,D=z.MAX=2;function z(e){if(!(F<=e&&e<=D))throw"Only interface versions between "+F+" and "+D+" supported. You specified: "+e;function t(e){if(!e||!e.nodeType)return null;var t=b(e).children(".mq-root-block").attr(o),n=t&&w.byId[t].controller;return n?r[n.KIND_OF_MQ](n):null}var r={};function n(e,t){for(var n in t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:r}),t)if(t.hasOwnProperty(n)){var i=t[n],s=O[n];e[n]=s?s(i):i}}t.L=v,t.R=1,t.config=function(e){return n(I.p,e),this},t.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";P[e]=t};var i=r.AbstractMathQuill=g(N,(function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t=this.__controller,r=t.root,n=t.container;t.createTextarea();var i=n.addClass(e).contents().detach();r.jQ=b('<span class="mq-root-block"/>').attr(o,r.id).appendTo(n),this.latex(i.text()),this.revert=function(){return n.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(i)}},e.config=function(e){return n(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder("reflow"),this}}));for(var s in t.prototype=i.prototype,r.EditableField=g(i,(function(e,t){e.__mathquillify=function(){return t.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},e.focus=function(){return this.__controller.textarea.focus(),this},e.blur=function(){return this.__controller.textarea.blur(),this},e.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},e.cmd=function(e){var t=this.__controller.notify(),r=t.cursor;if(/^\\[a-z]+$/i.test(e)){e=e.slice(1);var n=E[e];n&&(e=n(e),r.selection&&e.replaces(r.replaceSelection()),e.createLeftOf(r.show()),this.__controller.scrollHoriz())}else r.parent.write(r,e);return t.blurred&&r.hide().parent.blur(),this},e.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[v];)e.selectLeft();return this},e.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},e.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},e.moveToLeftEnd=function(){return this.moveToDirEnd(v)},e.moveToRightEnd=function(){return this.moveToDirEnd(1)},e.keystroke=function(e){e=e.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var t=0;t<e.length;t+=1)this.__controller.keystroke(e[t],{preventDefault:h});return this},e.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},e.dropEmbedded=function(e,t,r){var n=e-b(window).scrollLeft(),i=t-b(window).scrollTop(),s=document.elementFromPoint(n,i);this.__controller.seek(b(s),e,t),Oe().setOptions(r).createLeftOf(this.__controller.cursor)}})),t.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},t.EditableField.prototype=r.EditableField.prototype,A)!function(n,i){var s=r[n]=i(r);t[n]=function(r,i){var o=t(r);if(o instanceof s||!r||!r.nodeType)return o;var a=_(s.RootBlock(),b(r),I());return a.KIND_OF_MQ=n,s(a).__mathquillify(i,e)},t[n].prototype=s.prototype}(s,A[s]);return t}L.noConflict=function(){return window.MathQuill=B,L};var B=window.MathQuill;function q(e){for(var t="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),r=0;r<t.length;r+=1)!function(t){e[t]=function(e){this.controller.handle(t,e)}}(t[r]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}window.MathQuill=L;var H,U=g((function(e,t,r){function n(e,t){throw"Parse Error: "+t+" at "+(e=e?"'"+e+"'":"EOF")}e.init=function(e){this._=e},e.parse=function(e){return this.skip(o)._(""+e,(function(e,t){return t}),n)},e.or=function(e){f("or is passed a parser",e instanceof r);var t=this;return r((function(r,n,i){return t._(r,n,(function(t){return e._(r,n,i)}))}))},e.then=function(e){var t=this;return r((function(n,i,s){return t._(n,(function(t,n){var o=e instanceof r?e:e(n);return f("a parser is returned",o instanceof r),o._(t,i,s)}),s)}))},e.many=function(){var e=this;return r((function(t,r,n){for(var i=[];e._(t,s,o););return r(t,i);function s(e,r){return t=e,i.push(r),!0}function o(){return!1}}))},e.times=function(e,t){arguments.length<2&&(t=e);var n=this;return r((function(r,i,s){for(var o,a=[],l=!0,h=0;h<e;h+=1)if(!(l=n._(r,c,p)))return s(r,o);for(;h<t&&l;h+=1)l=n._(r,c,u);return i(r,a);function c(e,t){return a.push(t),r=e,!0}function p(e,t){return o=t,r=e,!1}function u(e,t){return!1}}))},e.result=function(e){return this.then(s(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then((function(e){return t.many().map((function(t){return e.concat(t)}))}))},e.map=function(e){return this.then((function(t){return s(e(t))}))},e.skip=function(e){return this.then((function(t){return e.result(t)}))};this.string=function(e){var t=e.length,n="expected '"+e+"'";return r((function(r,i,s){var o=r.slice(0,t);return o===e?i(r.slice(t),o):s(r,n)}))};var i=this.regex=function(e){f("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return r((function(r,n,i){var s=e.exec(r);if(s){var o=s[0];return n(r.slice(o.length),o)}return i(r,t)}))},s=r.succeed=function(e){return r((function(t,r){return r(t,e)}))},o=(r.fail=function(e){return r((function(t,r,n){return n(t,e)}))},r.letter=i(/^[a-z]/i),r.letters=i(/^[a-z]*/i),r.digit=i(/^[0-9]/),r.digits=i(/^[0-9]*/),r.whitespace=i(/^\s+/),r.optWhitespace=i(/^\s*/),r.any=r((function(e,t,r){return e?t(e.slice(1),e.charAt(0)):r(e,"expected any character")})),r.all=r((function(e,t,r){return t("",e)})),r.eof=r((function(e,t,r){return e?r(e,"expected EOF"):t(e,e)})))})),W=(H={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},function(e,t){var r,n=null,s=null,o=i(e),a=i(t.container||o),l=h;function c(e){l=e,clearTimeout(r),r=setTimeout(e)}a.bind("keydown keypress input keyup focusout paste",(function(e){l(e)}));var p=!1;function u(){t.keystroke(function(e){var t,r=e.which||e.keyCode,n=H[r],i=[];return e.ctrlKey&&i.push("Ctrl"),e.originalEvent&&e.originalEvent.metaKey&&i.push("Meta"),e.altKey&&i.push("Alt"),e.shiftKey&&i.push("Shift"),t=n||String.fromCharCode(r),i.length||n?(i.push(t),i.join("-")):t}(n),n)}function d(){if(!("selectionStart"in(e=o[0]))||e.selectionStart===e.selectionEnd){var e,r=o.val();1===r.length?(o.val(""),t.typedText(r)):r&&o[0].select&&o[0].select()}}function m(){var e=o.val();o.val(""),e&&t.paste(e)}return a.bind({keydown:function(e){n=e,s=null,p&&c((function(e){e&&"focusout"===e.type||!o[0].select||o[0].select(),l=h,clearTimeout(r)})),u()},keypress:function(e){n&&s&&u(),s=e,c(d)},focusout:function(){n=s=null},paste:function(e){o.focus(),c(m)}}),{select:function(e){l(),l=h,clearTimeout(r),o.val(e),e&&o[0].select&&o[0].select(),p=!!e}}});_.open((function(e,t){e.exportText=function(){return this.root.foldChildren("",(function(e,t){return e+t.text()}))}})),_.open((function(e){e.focusBlurEvents=function(){var e,t=this,r=t.root,n=t.cursor;function i(){clearTimeout(e),n.selection&&n.selection.jQ.addClass("mq-blur"),s()}function s(){n.hide().parent.blur(),t.container.removeClass("mq-focused"),b(window).off("blur",i)}t.textarea.focus((function(){t.blurred=!1,clearTimeout(e),t.container.addClass("mq-focused"),n.parent||n.insAtRightEnd(r),n.selection?(n.selection.jQ.removeClass("mq-blur"),t.selectionChanged()):n.show()})).blur((function(){t.blurred=!0,e=setTimeout((function(){r.postOrder("intentionalBlur"),n.clearSelection().endSelection(),s()})),b(window).on("blur",i)})),t.blurred=!0,n.hide().parent.blur()}})),_.open((function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}})),w.open((function(e){e.keystroke=function(e,t,r){var n=r.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":r.ctrlDeleteDir(v);break;case"Shift-Backspace":case"Backspace":r.backspace();break;case"Esc":case"Tab":return void r.escapeDir(1,e,t);case"Shift-Tab":case"Shift-Esc":return void r.escapeDir(v,e,t);case"End":r.notify("move").cursor.insAtRightEnd(n.parent);break;case"Ctrl-End":r.notify("move").cursor.insAtRightEnd(r.root);break;case"Shift-End":for(;n[1];)r.selectRight();break;case"Ctrl-Shift-End":for(;n[1]||n.parent!==r.root;)r.selectRight();break;case"Home":r.notify("move").cursor.insAtLeftEnd(n.parent);break;case"Ctrl-Home":r.notify("move").cursor.insAtLeftEnd(r.root);break;case"Shift-Home":for(;n[v];)r.selectLeft();break;case"Ctrl-Shift-Home":for(;n[v]||n.parent!==r.root;)r.selectLeft();break;case"Left":r.moveLeft();break;case"Shift-Left":r.selectLeft();break;case"Ctrl-Left":break;case"Right":r.moveRight();break;case"Shift-Right":r.selectRight();break;case"Ctrl-Right":break;case"Up":r.moveUp();break;case"Down":r.moveDown();break;case"Shift-Up":if(n[v])for(;n[v];)r.selectLeft();else r.selectLeft();case"Shift-Down":if(n[1])for(;n[1];)r.selectRight();else r.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":r.ctrlDeleteDir(1);break;case"Shift-Del":case"Del":r.deleteForward();break;case"Meta-A":case"Ctrl-A":for(r.notify("move").cursor.insAtRightEnd(r.root);n[v];)r.selectLeft();break;default:return}t.preventDefault(),r.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){f("overridden or never called on this node")}})),_.open((function(e){function t(e,t){var r=e.notify("upDown").cursor,n=t+"Into",i=t+"OutOf";return r[1][n]?r.insAtLeftEnd(r[1][n]):r[v][n]?r.insAtRightEnd(r[v][n]):r.parent.bubble((function(e){var t=e[i];if(t&&("function"==typeof t&&(t=e[i](r)),t instanceof w&&r.jumpUpDown(e,t),!0!==t))return!1})),e}this.onNotify((function(e){"move"!==e&&"upDown"!==e||this.show().clearSelection()})),e.escapeDir=function(e,t,r){y(e);var n=this.cursor;if(n.parent!==this.root&&r.preventDefault(),n.parent!==this.root)return n.parent.moveOutOf(e,n),this.notify("move")},O.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){y(e);var t=this.cursor,r=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,r):t.parent.moveOutOf(e,t,r),this.notify("move")},e.moveLeft=function(){return this.moveDir(v)},e.moveRight=function(){return this.moveDir(1)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify((function(e){"upDown"!==e&&(this.upDownCache={})})),this.onNotify((function(e){"edit"===e&&this.show().deleteSelection()})),e.deleteDir=function(e){y(e);var t=this.cursor,r=t.selection;return this.notify("edit"),r||(t[e]?t[e].deleteTowards(e,t):t.parent.deleteOutOf(e,t)),t[v].siblingDeleted&&t[v].siblingDeleted(t.options,1),t[1].siblingDeleted&&t[1].siblingDeleted(t.options,v),t.parent.bubble("reflow"),this},e.ctrlDeleteDir=function(e){y(e);var t=this.cursor;return!t[v]||t.selection?ctrlr.deleteDir():(this.notify("edit"),C(t.parent.ends[v],t[v]).remove(),t.insAtDirEnd(v,t.parent),t[v].siblingDeleted&&t[v].siblingDeleted(t.options,1),t[1].siblingDeleted&&t[1].siblingDeleted(t.options,v),t.parent.bubble("reflow"),this)},e.backspace=function(){return this.deleteDir(v)},e.deleteForward=function(){return this.deleteDir(1)},this.onNotify((function(e){"select"!==e&&this.endSelection()})),e.selectDir=function(e){var t=this.notify("select").cursor,r=t.selection;y(e),t.anticursor||t.startSelection();var n=t[e];n?r&&r.ends[e]===n&&t.anticursor[-e]!==n?n.unselectInto(e,t):n.selectTowards(e,t):t.parent.selectOutOf(e,t),t.clearSelection(),t.select()||t.show()},e.selectLeft=function(){return this.selectDir(v)},e.selectRight=function(){return this.selectDir(1)}}));var j=function(){function e(e){for(var t=e[0]||K(),r=1;r<e.length;r+=1)e[r].children().adopt(t,t.ends[1],0);return t}var t=U.string,r=U.regex,n=U.letter,i=U.any,s=U.optWhitespace,o=U.succeed,a=U.fail,l=n.map((function(e){return ee(e)})),h=r(/^[^${}\\_^]/).map((function(e){return X(e)})),c=r(/^[^\\a-eg-zA-Z]/).or(t("\\").then(r(/^[a-z]+/i).or(r(/^\s+/).result(" ")).or(i))).then((function(e){var t=E[e];return t?t(e).parser():a("unknown command: \\"+e)})).or(l).or(h),p=t("{").then((function(){return d})).skip(t("}")),u=s.then(p.or(c.map((function(e){var t=K();return e.adopt(t,0,0),t})))),d=u.many().map(e).skip(s),m=t("[").then(u.then((function(e){return"]"!==e.join("latex")?o(e):a()})).many().map(e).skip(s)).skip(t("]")),f=d;return f.block=u,f.optBlock=m,f}();_.open((function(e,t){e.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.writeLatex=function(e){var t=this.notify("edit").cursor,r=U.all,n=U.eof,i=j.skip(n).or(r.result(!1)).parse(e);i&&!i.isEmpty()&&(i.children().adopt(t.parent,t[v],t[1]),i.jQize().insertBefore(t.jQ),t[v]=i.ends[1],i.finalizeInsert(t.options,t),i.ends[1][1].siblingCreated&&i.ends[1][1].siblingCreated(t.options,v),i.ends[v][v].siblingCreated&&i.ends[v][v].siblingCreated(t.options,1),t.parent.bubble("reflow"));return this},e.renderLatexMath=function(e){var t=this.root,r=this.cursor,n=U.all,i=U.eof,s=j.skip(i).or(n.result(!1)).parse(e);t.eachChild("postOrder","dispose"),t.ends[v]=t.ends[1]=0,s&&s.children().adopt(t,0,0);var o=t.jQ;if(s){var a=s.join("html");o.html(a),t.jQize(o.children()),t.finalizeInsert(r.options)}else o.empty();delete r.selection,r.insAtRightEnd(t)},e.renderLatexText=function(e){var t=this.root,r=this.cursor;t.jQ.children().slice(1).remove(),t.eachChild("postOrder","dispose"),t.ends[v]=t.ends[1]=0,delete r.selection,r.show().insAtRightEnd(t);var n=U.regex,i=U.string,s=U.eof,o=U.all,a=i("$").then(j).skip(i("$").or(s)).map((function(e){var t=RootMathCommand(r);t.createBlocks();var n=t.ends[v];return e.children().adopt(n,0,0),t})),l=i("\\$").result("$").or(n(/^[^$]/)).map(X),h=a.or(l).many().skip(s).or(o.result(!1)).parse(e);if(h){for(var c=0;c<h.length;c+=1)h[c].adopt(t,t.ends[1],0);t.jQize().appendTo(t.jQ),t.finalizeInsert(r.options)}}})),_.open((function(e){e.delegateMouseEvents=function(){var e=this.root.jQ;this.container.bind("mousedown.mathquill",(function(t){var r,i=b(t.target).closest(".mq-root-block"),s=w.byId[i.attr(o)||e.attr(o)].controller,a=s.cursor,l=a.blink,c=s.textareaSpan,p=s.textarea;function u(e){r=b(e.target)}function d(e){a.anticursor||a.startSelection(),s.seek(r,e.pageX,e.pageY).cursor.select(),r=n}s.blurred&&(s.editable||i.prepend(c),p.focus()),t.preventDefault(),t.target.unselectable=!0,a.blink=h,s.seek(b(t.target),t.pageX,t.pageY).cursor.startSelection(),i.mousemove(u),b(t.target.ownerDocument).mousemove(d).mouseup((function e(t){a.blink=l,a.selection||(s.editable?a.show():c.detach()),i.unbind("mousemove",u),b(t.target.ownerDocument).unbind("mousemove",d).unbind("mouseup",e)}))}))}})),_.open((function(e){e.seek=function(e,t,r){var n=this.notify("select").cursor;if(e){var i=e.attr(o)||e.attr(s);if(!i){var a=e.parent();i=a.attr(o)||a.attr(s)}}var l=i?w.byId[i]:this.root;return f("nodeId is the id of some Node that exists",l),n.clearSelection().show(),l.seek(t,n),this.scrollHoriz(),this}})),_.open((function(e){e.scrollHoriz=function(){var e=this.cursor,t=e.selection,r=this.root.jQ[0].getBoundingClientRect();if(t){var n=t.jQ[0].getBoundingClientRect(),i=n.left-(r.left+20),s=n.right-(r.right-20);if(t.ends[v]===e[1])if(i<0)a=i;else{if(!(s>0))return;if(n.left-s<r.left+20)a=i;else a=s}else if(s>0)a=s;else{if(!(i<0))return;if(n.right-i>r.right-20)a=s;else a=i}}else{var o=e.jQ[0].getBoundingClientRect().left;if(o>r.right-20)var a=o-(r.right-20);else{if(!(o<r.left+20))return;var a=o-(r.left+20)}}this.root.jQ.stop().animate({scrollLeft:"+="+a},100)}})),_.open((function(e){I.p.substituteTextarea=function(){return b("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},e.createTextarea=function(){var e=this.textareaSpan=b('<span class="mq-textarea"></span>'),t=this.options.substituteTextarea();if(!t.nodeType)throw"substituteTextarea() must return a DOM element, got "+t;t=this.textarea=b(t).appendTo(e);var r=this;r.cursor.selectionChanged=function(){r.selectionChanged()},r.container.bind("copy",(function(){r.setTextareaSelection()}))},e.selectionChanged=function(){var e=this;fe(e.container[0]),e.textareaSelectionTimeout===n&&(e.textareaSelectionTimeout=setTimeout((function(){e.setTextareaSelection()})))},e.setTextareaSelection=function(){this.textareaSelectionTimeout=n;var e="";this.cursor.selection&&(e=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},e.staticMathTextareaEvents=function(){var e=this,t=(e.root,e.cursor),r=e.textarea,n=e.textareaSpan;function i(){n.detach(),e.blurred=!0}this.container.prepend('<span class="mq-selectable">$'+e.exportLatex()+"$</span>"),e.blurred=!0,r.bind("cut paste",!1).focus((function(){e.blurred=!1})).blur((function(){t.selection&&t.selection.clear(),setTimeout(i)})),e.selectFn=function(e){r.val(e),e&&r.select()}},e.editablesTextareaEvents=function(){var e=this,t=(e.root,e.cursor),r=e.textarea,n=e.textareaSpan,i=W(r,this);this.selectFn=function(e){i.select(e)},this.container.prepend(n).on("cut",(function(r){t.selection&&setTimeout((function(){e.notify("edit"),t.parent.bubble("reflow")}))})),this.focusBlurEvents()},e.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.write(t,e),this.scrollHoriz()},e.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show()}}));var G=g(w,(function(e,t){e.finalizeInsert=function(e,t){var r=this;r.postOrder("finalizeTree",e),r.postOrder("contactWeld",t),r.postOrder("blur"),r.postOrder("reflow"),r[1].siblingCreated&&r[1].siblingCreated(e,v),r[v].siblingCreated&&r[v].siblingCreated(e,1),r.bubble("reflow")}})),V=g(G,(function(e,t){e.init=function(e,r,n){var i=this;t.init.call(i),i.ctrlSeq||(i.ctrlSeq=e),r&&(i.htmlTemplate=r),n&&(i.textTemplate=n)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,(function(e,t){return e&&t.isEmpty()}))},e.parser=function(){var e=j.block,t=this;return e.times(t.numBlocks()).map((function(e){t.blocks=e;for(var r=0;r<e.length;r+=1)e[r].adopt(t,t.ends[1],0);return t}))},e.createLeftOf=function(e){var r=this,n=r.replacedFragment;r.createBlocks(),t.createLeftOf.call(r,e),n&&(n.adopt(r.ends[v],0,0),n.jQ.appendTo(r.ends[v].jQ)),r.finalizeInsert(e.options),r.placeCursor(e)},e.createBlocks=function(){for(var e=this,t=e.numBlocks(),r=e.blocks=Array(t),n=0;n<t;n+=1){(r[n]=K()).adopt(e,e.ends[1],0)}},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[v],(function(e,t){return e.isEmpty()?e:t})))},e.moveTowards=function(e,t,r){var n=r&&this[r+"Into"];t.insAtDirEnd(-e,n||this.ends[-e])},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return M(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function r(e){var t={};return t[v]=e.jQ.offset().left,t[1]=t[v]+e.jQ.outerWidth(),t}var n=this,i=r(n);if(e<i[v])return t.insLeftOf(n);if(e>i[1])return t.insRightOf(n);var s=i[v];n.eachChild((function(o){var a=r(o);return e<a[v]?(e-s<a[v]-e?o[v]?t.insAtRightEnd(o[v]):t.insLeftOf(n):t.insAtLeftEnd(o),!1):e>a[1]?void(o[1]?s=a[1]:i[1]-e<e-a[1]?t.insRightOf(n):t.insAtRightEnd(o)):(o.seek(e,t),!1)}))},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e=this,t=e.blocks,r=" mathquill-command-id="+e.id,n=e.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);f("no unmatched angle brackets",n.join("")===this.htmlTemplate);for(var i=0,s=n[0];s;s=n[i+=1])if("/>"===s.slice(-2))n[i]=s.slice(0,-2)+r+"/>";else if("<"===s.charAt(0)){f("not an unmatched top-level close tag","/"!==s.charAt(1)),n[i]=s.slice(0,-1)+r+">";var o=1;do{f("no missing close tags",s=n[i+=1]),"</"===s.slice(0,2)?o-=1:"<"===s.charAt(0)&&"/>"!==s.slice(-2)&&(o+=1)}while(o>0)}return n.join("").replace(/>&(\d+)/g,(function(e,r){return" mathquill-block-id="+t[r].id+">"+t[r].join("html")}))},e.latex=function(){return this.foldChildren(this.ctrlSeq,(function(e,t){return e+"{"+(t.latex()||" ")+"}"}))},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],(function(r,n){t+=1;var i=n.text();return r&&"("===e.textTemplate[t]&&"("===i[0]&&")"===i.slice(-1)?r+i.slice(1,-1)+e.textTemplate[t]:r+n.text()+(e.textTemplate[t]||"")}))}})),Y=g(V,(function(e,t){e.init=function(e,r,n){n||(n=e&&e.length>1?e.slice(1):e),t.init.call(this,e,r,[n])},e.parser=function(){return U.succeed(this)},e.numBlocks=function(){return 0},e.replaces=function(e){e.remove()},e.createBlocks=h,e.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e]},e.deleteTowards=function(e,t){t[e]=this.remove()[e]},e.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},e.latex=function(){return this.ctrlSeq},e.text=function(){return this.textTemplate},e.placeCursor=h,e.isEmpty=function(){return!0}})),X=g(Y,(function(e,t){e.init=function(e,r){t.init.call(this,e,"<span>"+(r||e)+"</span>")}})),Q=g(Y,(function(e,t){e.init=function(e,r,n){t.init.call(this,e,'<span class="mq-binary-operator">'+r+"</span>",n)}})),K=g(G,(function(e,t){e.join=function(e){return this.foldChildren("",(function(t,r){return t+r[e]()}))},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[v]===this.ends[1]&&0!==this.ends[v]?this.ends[v].text():this.join("text")},e.keystroke=function(e,r,n){return!n.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(r.preventDefault(),void n.escapeDir("Shift-Spacebar"===e?v:1,e,r))},e.moveOutOf=function(e,t,r){!(r&&this.parent[r+"Into"])&&this[e]?t.insAtDirEnd(-e,this[e]):t.insDirOf(e,this.parent)},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var r=this.ends[1];if(!r||r.jQ.offset().left+r.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[v].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<r.jQ.offset().left;)r=r[v];return r.seek(e,t)},e.chToCmd=function(e){var t;return e.match(/^[a-eg-zA-Z]$/)?ee(e):/^\d$/.test(e)?Z(e):(t=S[e]||E[e])?t(e):X(e)},e.write=function(e,t){var r=this.chToCmd(t);e.selection&&r.replaces(e.replaceSelection()),r.createLeftOf(e.show())},e.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},e.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}}));A.StaticMath=function(e){return g(e.AbstractMathQuill,(function(t,r){this.RootBlock=K,t.__mathquillify=function(){return r.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){r.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField)},t.latex=function(){var t=r.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],e.MathField),t}}))};var $=g(K,q);A.MathField=function(e){return g(e.EditableField,(function(e,t){this.RootBlock=$,e.__mathquillify=function(e,r){return this.config(e),r>1&&(this.__controller.root.reflow=h),t.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}}))},E.notin=E.cong=E.equiv=E.oplus=E.otimes=g(Q,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}})),E["≠"]=E.ne=E.neq=m(Q,"\\ne ","&ne;"),E.ast=E.star=E.loast=E.lowast=m(Q,"\\ast ","&lowast;"),E.therefor=E.therefore=m(Q,"\\therefore ","&there4;"),E.cuz=E.because=m(Q,"\\because ","&#8757;"),E.prop=E.propto=m(Q,"\\propto ","&prop;"),E["≈"]=E.asymp=E.approx=m(Q,"\\approx ","&asymp;"),E.isin=E.in=m(Q,"\\in ","&isin;"),E.ni=E.contains=m(Q,"\\ni ","&ni;"),E.notni=E.niton=E.notcontains=E.doesnotcontain=m(Q,"\\not\\ni ","&#8716;"),E.sub=E.subset=m(Q,"\\subset ","&sub;"),E.sup=E.supset=E.superset=m(Q,"\\supset ","&sup;"),E.nsub=E.notsub=E.nsubset=E.notsubset=m(Q,"\\not\\subset ","&#8836;"),E.nsup=E.notsup=E.nsupset=E.notsupset=E.nsuperset=E.notsuperset=m(Q,"\\not\\supset ","&#8837;"),E.sube=E.subeq=E.subsete=E.subseteq=m(Q,"\\subseteq ","&sube;"),E.supe=E.supeq=E.supsete=E.supseteq=E.supersete=E.superseteq=m(Q,"\\supseteq ","&supe;"),E.nsube=E.nsubeq=E.notsube=E.notsubeq=E.nsubsete=E.nsubseteq=E.notsubsete=E.notsubseteq=m(Q,"\\not\\subseteq ","&#8840;"),E.nsupe=E.nsupeq=E.notsupe=E.notsupeq=E.nsupsete=E.nsupseteq=E.notsupsete=E.notsupseteq=E.nsupersete=E.nsuperseteq=E.notsupersete=E.notsuperseteq=m(Q,"\\not\\supseteq ","&#8841;"),E.N=E.naturals=E.Naturals=m(X,"\\mathbb{N}","&#8469;"),E.P=E.primes=E.Primes=E.projective=E.Projective=E.probability=E.Probability=m(X,"\\mathbb{P}","&#8473;"),E.Z=E.integers=E.Integers=m(X,"\\mathbb{Z}","&#8484;"),E.Q=E.rationals=E.Rationals=m(X,"\\mathbb{Q}","&#8474;"),E.R=E.reals=E.Reals=m(X,"\\mathbb{R}","&#8477;"),E.C=E.complex=E.Complex=E.complexes=E.Complexes=E.complexplane=E.Complexplane=E.ComplexPlane=m(X,"\\mathbb{C}","&#8450;"),E.H=E.Hamiltonian=E.quaternions=E.Quaternions=m(X,"\\mathbb{H}","&#8461;"),E.quad=E.emsp=m(X,"\\quad ","    "),E.qquad=m(X,"\\qquad ","        "),E.diamond=m(X,"\\diamond ","&#9671;"),E.bigtriangleup=m(X,"\\bigtriangleup ","&#9651;"),E.ominus=m(X,"\\ominus ","&#8854;"),E.uplus=m(X,"\\uplus ","&#8846;"),E.bigtriangledown=m(X,"\\bigtriangledown ","&#9661;"),E.sqcap=m(X,"\\sqcap ","&#8851;"),E.triangleleft=m(X,"\\triangleleft ","&#8882;"),E.sqcup=m(X,"\\sqcup ","&#8852;"),E.triangleright=m(X,"\\triangleright ","&#8883;"),E.odot=E.circledot=m(X,"\\odot ","&#8857;"),E.bigcirc=m(X,"\\bigcirc ","&#9711;"),E.dagger=m(X,"\\dagger ","&#0134;"),E.ddagger=m(X,"\\ddagger ","&#135;"),E.wr=m(X,"\\wr ","&#8768;"),E.amalg=m(X,"\\amalg ","&#8720;"),E.models=m(X,"\\models ","&#8872;"),E.prec=m(X,"\\prec ","&#8826;"),E.succ=m(X,"\\succ ","&#8827;"),E.preceq=m(X,"\\preceq ","&#8828;"),E.succeq=m(X,"\\succeq ","&#8829;"),E.simeq=m(X,"\\simeq ","&#8771;"),E.mid=m(X,"\\mid ","&#8739;"),E.ll=m(X,"\\ll ","&#8810;"),E.gg=m(X,"\\gg ","&#8811;"),E.parallel=m(X,"\\parallel ","&#8741;"),E.nparallel=m(X,"\\nparallel ","&#8742;"),E.bowtie=m(X,"\\bowtie ","&#8904;"),E.sqsubset=m(X,"\\sqsubset ","&#8847;"),E.sqsupset=m(X,"\\sqsupset ","&#8848;"),E.smile=m(X,"\\smile ","&#8995;"),E.sqsubseteq=m(X,"\\sqsubseteq ","&#8849;"),E.sqsupseteq=m(X,"\\sqsupseteq ","&#8850;"),E.doteq=m(X,"\\doteq ","&#8784;"),E.frown=m(X,"\\frown ","&#8994;"),E.vdash=m(X,"\\vdash ","&#8870;"),E.dashv=m(X,"\\dashv ","&#8867;"),E.nless=m(X,"\\nless ","&#8814;"),E.ngtr=m(X,"\\ngtr ","&#8815;"),E.longleftarrow=m(X,"\\longleftarrow ","&#8592;"),E.longrightarrow=m(X,"\\longrightarrow ","&#8594;"),E.Longleftarrow=m(X,"\\Longleftarrow ","&#8656;"),E.Longrightarrow=m(X,"\\Longrightarrow ","&#8658;"),E.longleftrightarrow=m(X,"\\longleftrightarrow ","&#8596;"),E.updownarrow=m(X,"\\updownarrow ","&#8597;"),E.Longleftrightarrow=m(X,"\\Longleftrightarrow ","&#8660;"),E.Updownarrow=m(X,"\\Updownarrow ","&#8661;"),E.mapsto=m(X,"\\mapsto ","&#8614;"),E.nearrow=m(X,"\\nearrow ","&#8599;"),E.hookleftarrow=m(X,"\\hookleftarrow ","&#8617;"),E.hookrightarrow=m(X,"\\hookrightarrow ","&#8618;"),E.searrow=m(X,"\\searrow ","&#8600;"),E.leftharpoonup=m(X,"\\leftharpoonup ","&#8636;"),E.rightharpoonup=m(X,"\\rightharpoonup ","&#8640;"),E.swarrow=m(X,"\\swarrow ","&#8601;"),E.leftharpoondown=m(X,"\\leftharpoondown ","&#8637;"),E.rightharpoondown=m(X,"\\rightharpoondown ","&#8641;"),E.nwarrow=m(X,"\\nwarrow ","&#8598;"),E.ldots=m(X,"\\ldots ","&#8230;"),E.cdots=m(X,"\\cdots ","&#8943;"),E.vdots=m(X,"\\vdots ","&#8942;"),E.ddots=m(X,"\\ddots ","&#8945;"),E.surd=m(X,"\\surd ","&#8730;"),E.triangle=m(X,"\\triangle ","&#9651;"),E.ell=m(X,"\\ell ","&#8467;"),E.top=m(X,"\\top ","&#8868;"),E.flat=m(X,"\\flat ","&#9837;"),E.natural=m(X,"\\natural ","&#9838;"),E.sharp=m(X,"\\sharp ","&#9839;"),E.wp=m(X,"\\wp ","&#8472;"),E.bot=m(X,"\\bot ","&#8869;"),E.clubsuit=m(X,"\\clubsuit ","&#9827;"),E.diamondsuit=m(X,"\\diamondsuit ","&#9826;"),E.heartsuit=m(X,"\\heartsuit ","&#9825;"),E.spadesuit=m(X,"\\spadesuit ","&#9824;"),E.parallelogram=m(X,"\\parallelogram ","&#9649;"),E.square=m(X,"\\square ","&#11036;"),E.oint=m(X,"\\oint ","&#8750;"),E.bigcap=m(X,"\\bigcap ","&#8745;"),E.bigcup=m(X,"\\bigcup ","&#8746;"),E.bigsqcup=m(X,"\\bigsqcup ","&#8852;"),E.bigvee=m(X,"\\bigvee ","&#8744;"),E.bigwedge=m(X,"\\bigwedge ","&#8743;"),E.bigodot=m(X,"\\bigodot ","&#8857;"),E.bigotimes=m(X,"\\bigotimes ","&#8855;"),E.bigoplus=m(X,"\\bigoplus ","&#8853;"),E.biguplus=m(X,"\\biguplus ","&#8846;"),E.lfloor=m(X,"\\lfloor ","&#8970;"),E.rfloor=m(X,"\\rfloor ","&#8971;"),E.lceil=m(X,"\\lceil ","&#8968;"),E.rceil=m(X,"\\rceil ","&#8969;"),E.opencurlybrace=E.lbrace=m(X,"\\lbrace ","{"),E.closecurlybrace=E.rbrace=m(X,"\\rbrace ","}"),E.lbrack=m(X,"["),E.rbrack=m(X,"]"),E.slash=m(X,"/"),E.vert=m(X,"|"),E.perp=E.perpendicular=m(X,"\\perp ","&perp;"),E.nabla=E.del=m(X,"\\nabla ","&nabla;"),E.hbar=m(X,"\\hbar ","&#8463;"),E.AA=E.Angstrom=E.angstrom=m(X,"\\text\\AA ","&#8491;"),E.ring=E.circ=E.circle=m(X,"\\circ ","&#8728;"),E.bull=E.bullet=m(X,"\\bullet ","&bull;"),E.setminus=E.smallsetminus=m(X,"\\setminus ","&#8726;"),E.not=E["¬"]=E.neg=m(X,"\\neg ","&not;"),E["…"]=E.dots=E.ellip=E.hellip=E.ellipsis=E.hellipsis=m(X,"\\dots ","&hellip;"),E.converges=E.darr=E.dnarr=E.dnarrow=E.downarrow=m(X,"\\downarrow ","&darr;"),E.dArr=E.dnArr=E.dnArrow=E.Downarrow=m(X,"\\Downarrow ","&dArr;"),E.diverges=E.uarr=E.uparrow=m(X,"\\uparrow ","&uarr;"),E.uArr=E.Uparrow=m(X,"\\Uparrow ","&uArr;"),E.to=m(Q,"\\to ","&rarr;"),E.rarr=E.rightarrow=m(X,"\\rightarrow ","&rarr;"),E.implies=m(Q,"\\Rightarrow ","&rArr;"),E.rArr=E.Rightarrow=m(X,"\\Rightarrow ","&rArr;"),E.gets=m(Q,"\\gets ","&larr;"),E.larr=E.leftarrow=m(X,"\\leftarrow ","&larr;"),E.impliedby=m(Q,"\\Leftarrow ","&lArr;"),E.lArr=E.Leftarrow=m(X,"\\Leftarrow ","&lArr;"),E.harr=E.lrarr=E.leftrightarrow=m(X,"\\leftrightarrow ","&harr;"),E.iff=m(Q,"\\Leftrightarrow ","&hArr;"),E.hArr=E.lrArr=E.Leftrightarrow=m(X,"\\Leftrightarrow ","&hArr;"),E.Re=E.Real=E.real=m(X,"\\Re ","&real;"),E.Im=E.imag=E.image=E.imagin=E.imaginary=E.Imaginary=m(X,"\\Im ","&image;"),E.part=E.partial=m(X,"\\partial ","&part;"),E.infty=E.infin=E.infinity=m(X,"\\infty ","&infin;"),E.alef=E.alefsym=E.aleph=E.alephsym=m(X,"\\aleph ","&alefsym;"),E.xist=E.xists=E.exist=E.exists=m(X,"\\exists ","&exist;"),E.nexists=E.nexist=m(X,"\\nexists ","&#8708;"),E.and=E.land=E.wedge=m(X,"\\wedge ","&and;"),E.or=E.lor=E.vee=m(X,"\\vee ","&or;"),E.o=E.O=E.empty=E.emptyset=E.oslash=E.Oslash=E.nothing=E.varnothing=m(Q,"\\varnothing ","&empty;"),E.cup=E.union=m(Q,"\\cup ","&cup;"),E.cap=E.intersect=E.intersection=m(Q,"\\cap ","&cap;"),E.deg=E.degree=m(X,"\\degree ","&deg;"),E.ang=E.angle=m(X,"\\angle ","&ang;"),E.measuredangle=m(X,"\\measuredangle ","&#8737;");var Z=g(X,(function(e,t){e.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[v]instanceof J&&!1!==e[v].isItalic||e[v]instanceof be&&e[v][v]instanceof J&&!1!==e[v][v].isItalic)?(E._().createLeftOf(e),t.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.createLeftOf.call(this,e)}})),J=g(Y,(function(e,t){e.init=function(e,r){t.init.call(this,e,"<var>"+(r||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return!this[v]||this[v]instanceof J||this[v]instanceof Q||"\\ "===this[v].ctrlSeq||(e="*"+e),!this[1]||this[1]instanceof Q||this[1]instanceof be||(e+="*"),e}}));I.p.autoCommands={_maxLength:0},O.autoCommands=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),r={},n=0,i=0;i<t.length;i+=1){var s=t[i];if(s.length<2)throw'autocommand "'+s+'" not minimum length of 2';if(E[s]===ie)throw'"'+s+'" is a built-in operator name';r[s]=1,n=l(n,s.length)}return r._maxLength=n,r};var ee=g(J,(function(e,t){function r(e){return!e||e instanceof Q||e instanceof we}e.init=function(e){return t.init.call(this,this.letter=e)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments);var r=e.options.autoCommands,n=r._maxLength;if(n>0){for(var i="",s=this,o=0;s instanceof ee&&s.ctrlSeq===s.letter&&o<n;)i=s.letter+i,s=s[v],o+=1;for(;i.length;){if(r.hasOwnProperty(i)){for(o=1,s=this;o<i.length;o+=1,s=s[v]);return C(s,this).remove(),e[v]=s[v],E[i](i).createLeftOf(e)}i=i.slice(1)}}},e.italicize=function(e){return this.isItalic=e,this.jQ.toggleClass("mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==v&&this[1]instanceof ee||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t=e.autoOperatorNames;if(0!==t._maxLength){for(var n=this.letter,i=this[v];i instanceof ee;i=i[v])n=i.letter+n;for(var s=this[1];s instanceof ee;s=s[1])n+=s.letter;C(i[1]||this.parent.ends[v],s[v]||this.parent.ends[1]).each((function(e){e.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),e.ctrlSeq=e.letter}));e:for(var o=0,l=i[1]||this.parent.ends[v];o<n.length;o+=1,l=l[1])for(var h=a(t._maxLength,n.length-o);h>0;h-=1){var c=n.slice(o,o+h);if(t.hasOwnProperty(c)){for(var p=0,u=l;p<h;p+=1,u=u[1]){u.italicize(!1);var d=u}var m=te.hasOwnProperty(c);if(l.ctrlSeq=(m?"\\":"\\operatorname{")+l.ctrlSeq,d.ctrlSeq+=m?" ":"}",ne.hasOwnProperty(c)&&d[v][v][v].jQ.addClass("mq-last"),r(l[v])||l.jQ.addClass("mq-first"),!r(d[1]))if(d[1]instanceof be){var f=d[1];(f.siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("mq-after-operator-name",!(f[1]instanceof Me))})()}else d.jQ.toggleClass("mq-last",!(d[1]instanceof Me));o+=h-1,l=d;continue e}}}}})),te={},re=I.p.autoOperatorNames={_maxLength:9},ne={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var e="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),t=0;t<e.length;t+=1)te[e[t]]=re[e[t]]=1;var r="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" ");for(t=0;t<r.length;t+=1)te[r[t]]=1;var n="sin cos tan sec cosec csc cotan cot ctg".split(" ");for(t=0;t<n.length;t+=1)re[n[t]]=re["arc"+n[t]]=re[n[t]+"h"]=re["ar"+n[t]+"h"]=re["arc"+n[t]+"h"]=1;var i="gcf hcf lcm proj span".split(" ");for(t=0;t<i.length;t+=1)re[i[t]]=1}(),O.autoOperatorNames=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),r={},n=0,i=0;i<t.length;i+=1){var s=t[i];if(s.length<2)throw'"'+s+'" not minimum length of 2';r[s]=1,n=l(n,s.length)}return r._maxLength=n,r};var ie=g(Y,(function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){for(var t=this.ctrlSeq,r=0;r<t.length;r+=1)ee(t.charAt(r)).createLeftOf(e)},e.parser=function(){for(var e=this.ctrlSeq,t=K(),r=0;r<e.length;r+=1)ee(e.charAt(r)).adopt(t,t.ends[1],0);return U.succeed(t.children())}}));for(var se in re)re.hasOwnProperty(se)&&(E[se]=ie);E.operatorname=g(V,(function(e){e.createLeftOf=h,e.numBlocks=function(){return 1},e.parser=function(){return j.block.map((function(e){return e.children()}))}})),E.f=g(ee,(function(e,t){e.init=function(){Y.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("mq-f",e),t.italicize.apply(this,arguments)}})),E[" "]=E.space=m(X,"\\ ","&nbsp;"),E["'"]=E.prime=m(X,"'","&prime;"),E.backslash=m(X,"\\backslash ","\\"),S["\\"]||(S["\\"]=E.backslash),E.$=m(X,"\\$","$");var oe=g(Y,(function(e,t){e.init=function(e,r){t.init.call(this,e,'<span class="mq-nonSymbola">'+(r||e)+"</span>")}}));E["@"]=oe,E["&"]=m(oe,"\\&","&amp;"),E["%"]=m(oe,"\\%","%"),E.alpha=E.beta=E.gamma=E.delta=E.zeta=E.eta=E.theta=E.iota=E.kappa=E.mu=E.nu=E.xi=E.rho=E.sigma=E.tau=E.chi=E.psi=E.omega=g(J,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}})),E.phi=m(J,"\\phi ","&#981;"),E.phiv=E.varphi=m(J,"\\varphi ","&phi;"),E.epsilon=m(J,"\\epsilon ","&#1013;"),E.epsiv=E.varepsilon=m(J,"\\varepsilon ","&epsilon;"),E.piv=E.varpi=m(J,"\\varpi ","&piv;"),E.sigmaf=E.sigmav=E.varsigma=m(J,"\\varsigma ","&sigmaf;"),E.thetav=E.vartheta=E.thetasym=m(J,"\\vartheta ","&thetasym;"),E.upsilon=E.upsi=m(J,"\\upsilon ","&upsilon;"),E.gammad=E.Gammad=E.digamma=m(J,"\\digamma ","&#989;"),E.kappav=E.varkappa=m(J,"\\varkappa ","&#1008;"),E.rhov=E.varrho=m(J,"\\varrho ","&#1009;"),E.pi=E["π"]=m(oe,"\\pi ","&pi;"),E.lambda=m(oe,"\\lambda ","&lambda;"),E.Upsilon=E.Upsi=E.upsih=E.Upsih=m(Y,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),E.Gamma=E.Delta=E.Theta=E.Lambda=E.Xi=E.Pi=E.Sigma=E.Phi=E.Psi=E.Omega=E.forall=g(X,(function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}}));var ae=g(V,(function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=j.parse(this.latex);t.children().adopt(e.parent,e[v],e[1]),e[v]=t.ends[1],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[1][1].siblingCreated&&t.ends[1][1].siblingCreated(e.options,v),t.ends[v][v].siblingCreated&&t.ends[v][v].siblingCreated(e.options,1),e.parent.bubble("reflow")},e.parser=function(){var e=j.parse(this.latex).children();return U.succeed(e)}}));E["¹"]=m(ae,"^1"),E["²"]=m(ae,"^2"),E["³"]=m(ae,"^3"),E["¼"]=m(ae,"\\frac14"),E["½"]=m(ae,"\\frac12"),E["¾"]=m(ae,"\\frac34");var le=g(Q,(function(e){e.init=X.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){if(1!==t)return this.jQ[0].className=!this[v]||this[v]instanceof Q||/^[,;:\(\[]$/.test(this[v].ctrlSeq)?"":"mq-binary-operator",this}}));E["+"]=m(le,"+","+"),E["–"]=E["-"]=m(le,"-","&minus;"),E["±"]=E.pm=E.plusmn=E.plusminus=m(le,"\\pm ","&plusmn;"),E.mp=E.mnplus=E.minusplus=m(le,"\\mp ","&#8723;"),S["*"]=E.sdot=E.cdot=m(Q,"\\cdot ","&middot;","*");var he=g(Q,(function(e,t){e.init=function(e,r){this.data=e,this.strict=r;var n=r?"Strict":"";t.init.call(this,e["ctrlSeq"+n],e["html"+n],e["text"+n])},e.swap=function(e){this.strict=e;var t=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]]},e.deleteTowards=function(e,r){if(e===v&&!this.strict)return this.swap(!0),void this.bubble("reflow");t.deleteTowards.apply(this,arguments)}})),ce={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},pe={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"};E["<"]=E.lt=m(he,ce,!0),E[">"]=E.gt=m(he,pe,!0),E["≤"]=E.le=E.leq=m(he,ce,!1),E["≥"]=E.ge=E.geq=m(he,pe,!1);var ue=g(Q,(function(e,t){e.init=function(){t.init.call(this,"=","=")},e.createLeftOf=function(e){if(e[v]instanceof he&&e[v].strict)return e[v].swap(!1),void e[v].bubble("reflow");t.createLeftOf.apply(this,arguments)}}));E["="]=ue,E["×"]=E.times=m(Q,"\\times ","&times;","[x]"),E["÷"]=E.div=E.divide=E.divides=m(Q,"\\div ","&divide;","[/]"),S["~"]=E.sim=m(Q,"\\sim ","~","~");var de,me,fe=h,ge=document.createElement("div").style;for(var ve in{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(ve in ge){me=ve;break}me?de=function(e,t,r){e.css(me,"scale("+t+","+r+")")}:"filter"in ge?(fe=function(e){e.className=e.className},de=function(e,t,r){t/=1+(r-1)/2,e.css("fontSize",r+"em"),e.hasClass("mq-matrixed-container")||e.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>');var n=e.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+t+",SizingMethod='auto expand')");function i(){e.css("marginRight",(n.width()-1)*(t-1)/t+"px")}i();var s=setInterval(i);b(window).load((function(){clearTimeout(s),i()}))}):de=function(e,t,r){e.css("fontSize",r+"em")};var ye=g(V,(function(e,t){e.init=function(e,r,n){t.init.call(this,e,"<"+r+" "+n+">&0</"+r+">")}}));E.mathrm=m(ye,"\\mathrm","span",'class="mq-roman mq-font"'),E.mathit=m(ye,"\\mathit","i",'class="mq-font"'),E.mathbf=m(ye,"\\mathbf","b",'class="mq-font"'),E.mathsf=m(ye,"\\mathsf","span",'class="mq-sans-serif mq-font"'),E.mathtt=m(ye,"\\mathtt","span",'class="mq-monospace mq-font"'),E.underline=m(ye,"\\underline","span",'class="mq-non-leaf mq-underline"'),E.overline=E.bar=m(ye,"\\overline","span",'class="mq-non-leaf mq-overline"'),E.overrightarrow=m(ye,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),E.overleftarrow=m(ye,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"');E.textcolor=g(V,(function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,r=U.optWhitespace,n=U.string,i=U.regex;return r.then(n("{")).then(i(/^[#\w\s.,()%-]*/)).skip(n("}")).then((function(r){return e.setColor(r),t.parser.call(e)}))}})),E.class=g(V,(function(e,t){e.parser=function(){var e=this,r=U.string,n=U.regex;return U.optWhitespace.then(r("{")).then(n(/^[-\w\s\\\xA0-\xFF]*/)).skip(r("}")).then((function(r){return e.htmlTemplate='<span class="mq-class '+r+'">&0</span>',t.parser.call(e)}))}}));var be=g(V,(function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){if(e[v]||!e.options.supSubsRequireOperand)return t.createLeftOf.apply(this,arguments)},e.contactWeld=function(e){for(var t=v;t;t=t===v&&1)if(this[t]instanceof be){for(var r="sub";r;r="sub"===r&&"sup"){var n=this[r],i=this[t][r];if(n){if(i)if(n.isEmpty())o=x(i,0,i.ends[v]);else{n.jQ.children().insAtDirEnd(-t,i.jQ);var s=n.children().disown(),o=x(i,s.ends[1],i.ends[v]);t===v?s.adopt(i,i.ends[1],0):s.adopt(i,0,i.ends[v])}else this[t].addBlock(n.disown());this.placeCursor=function(e,r){return function(n){n.insAtDirEnd(-t,e||r)}}(i,n)}}this.remove(),e&&e[v]===this&&(1===t&&o?o[v]?e.insRightOf(o[v]):e.insAtLeftEnd(o.parent):e.insRightOf(this[t]));break}this.respace()},I.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[v].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var r=this.chToCmd(t);return r instanceof Y?e.deleteSelection():e.clearSelection().insRightOf(this.parent),r.createLeftOf(e.show())}e[v]&&!e[1]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(t)>-1&&e.insRightOf(this.parent),K.p.write.apply(this,arguments)}},e.moveTowards=function(e,r,n){r.options.autoSubscriptNumerals&&!this.sup?r.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,r){if(r.options.autoSubscriptNumerals&&this.sub){var n=this.sub.ends[-e];n instanceof Y?n.remove():n&&n.deleteTowards(e,r.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(v,r.insAtLeftEnd(this.sub)),this.sup&&r.insDirOf(-e,this))}else t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var r=t&&t.latex();return t?e+(1===r.length?r:"{"+(r||" ")+"}"):""}return e("_",this.sub)+e("^",this.sup)},e.respace=e.siblingCreated=e.siblingDeleted=function(e,t){1!==t&&this.jQ.toggleClass("mq-limit","\\int "===this[v].ctrlSeq)},e.addBlock=function(e){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=b('<span class="mq-sup"/>').append(e.jQ.children()).attr(o,e.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=b('<span class="mq-sub"></span>').append(e.jQ.children()).attr(o,e.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;t<2;t+=1)!function(e,t,r,n){e[t].deleteOutOf=function(i,s){if(s.insDirOf(this[i]?-i:i,this.parent),!this.isEmpty()){var o=this.ends[i];this.children().disown().withDirAdopt(i,s.parent,s[i],s[-i]).jQ.insDirOf(-i,s.jQ),s[-i]=o}e.supsub=r,delete e[t],delete e[n+"Into"],e[r][n+"OutOf"]=xe,delete e[r].deleteOutOf,"sub"===t&&b(e.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}}));function xe(e){var t=this.parent,r=e;do{if(r[1])return e.insLeftOf(t);r=r.parent.parent}while(r!==t);e.insRightOf(t)}E.subscript=E._=g(be,(function(e,t){e.supsub="sub",e.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.finalizeTree=function(){this.downInto=this.sub=this.ends[v],this.sub.upOutOf=xe,t.finalizeTree.call(this)}})),E.superscript=E.supscript=E["^"]=g(be,(function(e,t){e.supsub="sup",e.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',e.textTemplate=["^"],e.finalizeTree=function(){this.upInto=this.sup=this.ends[1],this.sup.downOutOf=xe,t.finalizeTree.call(this)}}));var we=g(V,(function(e,t){e.init=function(e,t){var r='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+t+'</big><span class="mq-from"><span>&0</span></span></span>';Y.prototype.init.call(this,e,r)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(ee("n").createLeftOf(e),ue().createLeftOf(e))},e.latex=function(){function e(e){return 1===e.length?e:"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[v].latex())+"^"+e(this.ends[1].latex())},e.parser=function(){for(var e=U.string,t=U.optWhitespace,r=U.succeed,n=j.block,i=this,s=i.blocks=[K(),K()],o=0;o<s.length;o+=1)s[o].adopt(i,i.ends[1],0);return t.then(e("_").or(e("^"))).then((function(e){var t=s["_"===e?0:1];return n.then((function(e){return e.children().adopt(t,t.ends[1],0),r(i)}))})).many().result(i)},e.finalizeTree=function(){this.downInto=this.ends[v],this.upInto=this.ends[1],this.ends[v].upOutOf=this.ends[1],this.ends[1].downOutOf=this.ends[v]}}));E["∑"]=E.sum=E.summation=m(we,"\\sum ","&sum;"),E["∏"]=E.prod=E.product=m(we,"\\prod ","&prod;"),E.coprod=E.coproduct=m(we,"\\coprod ","&#8720;"),E["∫"]=E.int=E.integral=m(Y,"\\int ","<big>&int;</big>");var ke=E.frac=E.dfrac=E.cfrac=E.fraction=g(V,(function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[1].upOutOf=this.ends[v],this.downInto=this.ends[v].downOutOf=this.ends[1]}})),Ce=E.over=S["/"]=g(ke,(function(e,t){e.createLeftOf=function(e){if(!this.replacedFragment){for(var r=e[v];r&&!(r instanceof Q||r instanceof(E.text||h)||r instanceof we||"\\ "===r.ctrlSeq||/^[,;:]$/.test(r.ctrlSeq));)r=r[v];r instanceof we&&r[1]instanceof be&&(r=r[1])[1]instanceof be&&r[1].ctrlSeq!=r.ctrlSeq&&(r=r[1]),r!==e[v]&&(this.replaces(C(r[1]||e.parent.ends[v],e[v])),e[v]=r)}t.createLeftOf.call(this,e)}})),Ee=E.sqrt=E["√"]=g(V,(function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.parser=function(){return j.optBlock.then((function(e){return j.block.map((function(t){var r=Se();return r.blocks=[e,t],e.adopt(r,0,0),t.adopt(r,e,0),r}))})).or(t.parser.call(this))},e.reflow=function(){var e=this.ends[1].jQ;de(e.prev(),1,e.innerHeight()/+e.css("fontSize").slice(0,-2)-.1)}})),Se=(E.vec=g(V,(function(e,t){e.ctrlSeq="\\vec",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;</span><span class="mq-vector-stem">&0</span></span>',e.textTemplate=["vec(",")"]})),E.nthroot=g(Ee,(function(e,t){e.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[v].latex()+"]{"+this.ends[1].latex()+"}"}})));function Te(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},e.reflow=function(){var e=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));de(this.delimjQs,a(1+.2*(e-1),1.2),1.2*e)}}var Me=g(g(V,Te),(function(e,t){e.init=function(e,r,i,s,o){t.init.call(this,"\\left"+s,n,[r,i]),this.side=e,this.sides={},this.sides[v]={ch:r,ctrlSeq:s},this.sides[1]={ch:i,ctrlSeq:o}},e.numBlocks=function(){return 1},e.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(1===this.side?" mq-ghost":"")+'">'+this.sides[v].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===v?" mq-ghost":"")+'">'+this.sides[1].ch+"</span></span>",t.html.call(this)},e.latex=function(){return"\\left"+this.sides[v].ctrlSeq+this.ends[v].latex()+"\\right"+this.sides[1].ctrlSeq},e.oppBrack=function(e,t,r){return t instanceof Me&&t.side&&t.side!==-r&&("|"===this.sides[this.side].ch||t.side===-this.side)&&(!e.restrictMismatchedBrackets||_e[this.sides[this.side].ch]===t.sides[t.side].ch||{"(":"]","[":")"}[this.sides[v].ch]===t.sides[1].ch)&&t},e.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side],e.delimjQs.eq(this.side===v?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},e.createLeftOf=function(e){if(!this.replacedFragment)var r=e.options,n=this.oppBrack(r,e[v],v)||this.oppBrack(r,e[1],1)||this.oppBrack(r,e.parent.parent);if(n){var i=this.side=-n.side;this.closeOpposing(n),n===e.parent.parent&&e[i]&&(C(e[i],e.parent.ends[i],-i).disown().withDirAdopt(-i,n.parent,n,n[i]).jQ.insDirOf(i,n.jQ),n.bubble("reflow"))}else i=(n=this).side,n.replacedFragment?n.side=0:e[-i]&&(n.replaces(C(e[-i],e.parent.ends[-i],i)),e[-i]=0),t.createLeftOf.call(n,e);i===v?e.insAtLeftEnd(n.ends[v]):e.insRightOf(n)},e.placeCursor=h,e.unwrap=function(){this.ends[v].children().disown().adopt(this.parent,this,this[1]).jQ.insertAfter(this.jQ),this.remove()},e.deleteSide=function(e,t,r){var n=this.parent,i=this[e],s=n.ends[e];if(e===this.side)return this.unwrap(),void(i?r.insDirOf(-e,i):r.insAtDirEnd(e,n));var o=r.options,a=!this.side;if(this.side=-e,this.oppBrack(o,this.ends[v].ends[this.side],e)){this.closeOpposing(this.ends[v].ends[this.side]);var l=this.ends[v].ends[e];this.unwrap(),l.siblingCreated&&l.siblingCreated(r.options,e),i?r.insDirOf(-e,i):r.insAtDirEnd(e,n)}else{if(this.oppBrack(o,this.parent.parent,e))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&a)return this.unwrap(),void(i?r.insDirOf(-e,i):r.insAtDirEnd(e,n));this.sides[e]={ch:_e[this.sides[this.side].ch],ctrlSeq:_e[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(e===v?0:1).addClass("mq-ghost").html(this.sides[e].ch)}if(i){l=this.ends[v].ends[e];C(i,s,-e).disown().withDirAdopt(-e,this.ends[v],l,0).jQ.insAtDirEnd(e,this.ends[v].jQ.removeClass("mq-empty")),l.siblingCreated&&l.siblingCreated(r.options,e),r.insDirOf(-e,i)}else t?r.insDirOf(e,this):r.insAtDirEnd(e,this.ends[v])}},e.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},e.finalizeTree=function(){this.ends[v].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===v?1:0).removeClass("mq-ghost"),this.side=0}},e.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}})),_e={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"};function Ae(e,t){t=t||e;var r=_e[e],n=_e[t];S[e]=m(Me,v,e,r,t,n),S[r]=m(Me,1,e,r,t,n)}Ae("("),Ae("["),Ae("{","\\{"),E.langle=m(Me,v,"&lang;","&rang;","\\langle ","\\rangle "),E.rangle=m(Me,1,"&lang;","&rang;","\\langle ","\\rangle "),S["|"]=m(Me,v,"|","|","|","|"),E.left=g(V,(function(e){e.parser=function(){var e=U.regex,t=U.string,r=(U.succeed,U.optWhitespace);return r.then(e(/^(?:[([|]|\\\{)/)).then((function(n){var i="\\"===n.charAt(0)?n.slice(1):n;return j.then((function(s){return t("\\right").skip(r).then(e(/^(?:[\])|]|\\\})/)).map((function(e){var t="\\"===e.charAt(0)?e.slice(1):e,r=Me(0,i,t,n,e);return r.blocks=[s],s.adopt(r,0,0),r}))}))}))}})),E.right=g(V,(function(e){e.parser=function(){return U.fail("unmatched \\right")}}));var Ie=E.binom=E.binomial=g(g(V,Te),(function(e,t){e.ctrlSeq="\\binom",e.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',e.textTemplate=["choose(",",",")"]}));E.choose=g(Ie,(function(e){e.createLeftOf=Ce.prototype.createLeftOf}));E.editable=E.MathQuillMathField=g(V,(function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',e.parser=function(){var e=this,r=U.string,n=U.regex,i=U.succeed;return r("[").then(n(/^[a-z][a-z0-9]*/i)).skip(r("]")).map((function(t){e.name=t})).or(i()).then(t.parser.call(e))},e.finalizeTree=function(){var e=_(this.ends[v],this.jQ,I());e.KIND_OF_MQ="MathField",e.editable=!0,e.createTextarea(),e.editablesTextareaEvents(),e.cursor.insAtRightEnd(e.root),q(e.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[v].controller))},e.latex=function(){return this.ends[v].latex()},e.text=function(){return this.ends[v].text()}}));var Oe=E.embed=g(Y,(function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){var e=this;return string=U.string,regex=U.regex,succeed=U.succeed,string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then((function(t){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map((function(r){return e.setOptions(P[t](r))}))}))}})),Ne=z(1);for(var Pe in Ne)!function(e,t){"function"==typeof t?(L[e]=function(){return R(),t.apply(this,arguments)},L[e].prototype=t.prototype):L[e]=t}(Pe,Ne[Pe]);e.exports=L},DGHZ:function(e,t,r){"use strict";r.r(t),r.d(t,"Keypad",(function(){return dn})),r.d(t,"KeypadInput",(function(){return Ue})),r.d(t,"KeypadTypes",(function(){return U})),r.d(t,"keypadConfigurationPropType",(function(){return xe})),r.d(t,"keypadElementPropType",(function(){return we}));var n=r("Pwnf"),i=r("8jAt"),s=r("mR6N"),o=r("17x9"),a=r.n(o),l=r("q1tI"),h=r("i8i4"),c=r.n(h),p=r("96rG"),u=r.n(p),d=r("BWOr"),m=r.n(d),f=r("/MKj"),g=r("ANjH"),v=r("Oy/b"),y=r.n(v),b=r("VeD8"),x=r("pQ8y"),w=r("JimW"),k=r("Taw3"),C=r("HdAV"),E=r.n(C);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function A(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var I={PLUS:"PLUS",MINUS:"MINUS",NEGATIVE:"NEGATIVE",TIMES:"TIMES",DIVIDE:"DIVIDE",DECIMAL:"DECIMAL",PERIOD:"PERIOD",PERCENT:"PERCENT",CDOT:"CDOT",EQUAL:"EQUAL",NEQ:"NEQ",GT:"GT",LT:"LT",GEQ:"GEQ",LEQ:"LEQ",FRAC_INCLUSIVE:"FRAC_INCLUSIVE",FRAC_EXCLUSIVE:"FRAC_EXCLUSIVE",FRAC:"FRAC",EXP:"EXP",EXP_2:"EXP_2",EXP_3:"EXP_3",SQRT:"SQRT",CUBE_ROOT:"CUBE_ROOT",RADICAL:"RADICAL",LEFT_PAREN:"LEFT_PAREN",RIGHT_PAREN:"RIGHT_PAREN",LN:"LN",LOG:"LOG",LOG_N:"LOG_N",SIN:"SIN",COS:"COS",TAN:"TAN",PI:"PI",THETA:"THETA",UP:"UP",RIGHT:"RIGHT",DOWN:"DOWN",LEFT:"LEFT",BACKSPACE:"BACKSPACE",DISMISS:"DISMISS",JUMP_OUT_PARENTHESES:"JUMP_OUT_PARENTHESES",JUMP_OUT_EXPONENT:"JUMP_OUT_EXPONENT",JUMP_OUT_BASE:"JUMP_OUT_BASE",JUMP_INTO_NUMERATOR:"JUMP_INTO_NUMERATOR",JUMP_OUT_NUMERATOR:"JUMP_OUT_NUMERATOR",JUMP_OUT_DENOMINATOR:"JUMP_OUT_DENOMINATOR",NOOP:"NOOP",FRAC_MULTI:"FRAC_MULTI",MANY:"MANY"};class O extends l.Component{render(){var{numberOfLines:e,style:t}=this.props,r=Object(s.css)(N.initial,...Array.isArray(t)?t:[t],1===e&&N.singleLineStyle);return l.createElement("span",{className:r,style:this.props.dynamicStyle},this.props.children)}}var N=s.StyleSheet.create({initial:{color:"inherit",display:"inline",font:"inherit",margin:0,padding:0,textDecorationLine:"none",wordWrap:"break-word"},singleLineStyle:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});class P extends l.Component{render(){var e=Object(s.css)(P.styles.initial,...Array.isArray(this.props.style)?this.props.style:[this.props.style])+(this.props.extraClassName?" ".concat(this.props.extraClassName):"");return l.createElement("div",{className:e,style:this.props.dynamicStyle,onClick:this.props.onClick,onTouchCancel:this.props.onTouchCancel,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart,"aria-label":this.props.ariaLabel,role:this.props.role},this.props.children)}}M(P,"styles",s.StyleSheet.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",margin:0,padding:0,position:"relative",backgroundColor:"transparent",color:"inherit",font:"inherit",textAlign:"inherit",textDecorationLine:"none",listStyle:"none",maxWidth:"100%",minHeight:0,minWidth:0}}));var R=n.default.blue,L=n.default.offBlack;n.default.offBlack32;var F=n.default.offBlack16;n.default.offBlack8;var D,z="#FFF",B="#F6F7F7",q=F,H="solid",U={FRACTION:"FRACTION",EXPRESSION:"EXPRESSION"},W={EMPTY:"EMPTY",VALUE:"VALUE",OPERATOR:"OPERATOR",INPUT_NAVIGATION:"INPUT_NAVIGATION",KEYPAD_NAVIGATION:"KEYPAD_NAVIGATION",MANY:"MANY",ECHO:"ECHO"},j="LANDSCAPE",G="PORTRAIT",V="PHONE",Y="TABLET",X={FULLSCREEN:"FULLSCREEN",COMPACT:"COMPACT"},Q={LEFT:"LEFT",BOTTOM:"BOTTOM"},K={LEFT:["LEFT"],BOTTOM:["BOTTOM"],ALL:["LEFT","BOTTOM"],NONE:[]},$={MATH:"MATH",SVG:"SVG",TEXT:"TEXT"},Z="COMMA",J="PERIOD",ee={SLIDE_AND_FADE:"SLIDE_AND_FADE",FADE_ONLY:"FADE_ONLY",LONG_FADE_ONLY:"LONG_FADE_ONLY"};D="undefined"!=typeof window&&window.icu&&","===window.icu.getDecimalFormatSymbols().decimal_separator?Z:J;var te={[I.PLUS]:{type:W.OPERATOR,ariaLabel:i._("Plus")},[I.MINUS]:{type:W.OPERATOR,ariaLabel:i._("Minus")},[I.NEGATIVE]:{type:W.VALUE,ariaLabel:i._("Negative")},[I.TIMES]:{type:W.OPERATOR,ariaLabel:i._("Multiply")},[I.DIVIDE]:{type:W.OPERATOR,ariaLabel:i._("Divide")},[I.DECIMAL]:{type:W.VALUE,ariaLabel:i._("Decimal"),icon:D===Z?{type:$.TEXT,data:","}:{type:$.SVG,data:I.PERIOD}},[I.PERCENT]:{type:W.OPERATOR,ariaLabel:i._("Percent")},[I.CDOT]:{type:W.OPERATOR,ariaLabel:i._("Multiply")},[I.EQUAL]:{type:W.OPERATOR,ariaLabel:i._("Equals sign")},[I.NEQ]:{type:W.OPERATOR,ariaLabel:i._("Not-equals sign")},[I.GT]:{type:W.OPERATOR,ariaLabel:i._("Greater than sign")},[I.LT]:{type:W.OPERATOR,ariaLabel:i._("Less than sign")},[I.GEQ]:{type:W.OPERATOR,ariaLabel:i._("Greater than or equal to sign")},[I.LEQ]:{type:W.OPERATOR,ariaLabel:i._("Less than or equal to sign")},[I.FRAC_INCLUSIVE]:{type:W.OPERATOR,ariaLabel:i._("Fraction, with current expression in numerator")},[I.FRAC_EXCLUSIVE]:{type:W.OPERATOR,ariaLabel:i._("Fraction, excluding the current expression")},[I.FRAC]:{type:W.OPERATOR,ariaLabel:i._("Fraction, excluding the current expression")},[I.EXP]:{type:W.OPERATOR,ariaLabel:i._("Custom exponent")},[I.EXP_2]:{type:W.OPERATOR,ariaLabel:i._("Square")},[I.EXP_3]:{type:W.OPERATOR,ariaLabel:i._("Cube")},[I.SQRT]:{type:W.OPERATOR,ariaLabel:i._("Square root")},[I.CUBE_ROOT]:{type:W.OPERATOR,ariaLabel:i._("Cube root")},[I.RADICAL]:{type:W.OPERATOR,ariaLabel:i._("Radical with custom root")},[I.LEFT_PAREN]:{type:W.OPERATOR,ariaLabel:i._("Left parenthesis")},[I.RIGHT_PAREN]:{type:W.OPERATOR,ariaLabel:i._("Right parenthesis")},[I.LN]:{type:W.OPERATOR,ariaLabel:i._("Natural logarithm")},[I.LOG]:{type:W.OPERATOR,ariaLabel:i._("Logarithm with base 10")},[I.LOG_N]:{type:W.OPERATOR,ariaLabel:i._("Logarithm with custom base")},[I.SIN]:{type:W.OPERATOR,ariaLabel:i._("Sine")},[I.COS]:{type:W.OPERATOR,ariaLabel:i._("Cosine")},[I.TAN]:{type:W.OPERATOR,ariaLabel:i._("Tangent")},[I.PI]:{type:W.VALUE,ariaLabel:i._("Pi"),icon:{type:$.MATH,data:"\\pi"}},[I.THETA]:{type:W.VALUE,ariaLabel:i._("Theta"),icon:{type:$.MATH,data:"\\theta"}},[I.NOOP]:{type:W.EMPTY},[I.UP]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Up arrow")},[I.RIGHT]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Right arrow")},[I.DOWN]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Down arrow")},[I.LEFT]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Left arrow")},[I.JUMP_OUT_PARENTHESES]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Navigate right out of a set of parentheses")},[I.JUMP_OUT_EXPONENT]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Navigate right out of an exponent")},[I.JUMP_OUT_BASE]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Navigate right out of a base")},[I.JUMP_INTO_NUMERATOR]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Navigate right into the numerator of a fraction")},[I.JUMP_OUT_NUMERATOR]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Navigate right out of the numerator and into the denominator")},[I.JUMP_OUT_DENOMINATOR]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Navigate right out of the denominator of a fraction")},[I.BACKSPACE]:{type:W.INPUT_NAVIGATION,ariaLabel:i._("Delete")},[I.DISMISS]:{type:W.KEYPAD_NAVIGATION,ariaLabel:i._("Dismiss")}};te[I.FRAC_MULTI]={childKeyIds:[I.FRAC_INCLUSIVE,I.FRAC_EXCLUSIVE]},te[I.MANY]={type:W.MANY};for(var re of[0,1,2,3,4,5,6,7,8,9]){var ne="".concat(re);te["NUM_".concat(re)]={type:W.VALUE,ariaLabel:ne,icon:{type:$.TEXT,data:ne}}}for(var ie of["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]){var se=ie.toLowerCase(),oe=ie.toUpperCase();for(var ae of[se,oe])te[ae]={type:W.VALUE,ariaLabel:ae,icon:{type:$.MATH,data:ae}}}for(var le of Object.keys(te))te[le]=T({id:le,icon:{type:$.SVG,data:le}},te[le]);var he="NONE",ce="IN_PARENS",pe="IN_SUPER_SCRIPT",ue="IN_SUB_SCRIPT",de="IN_NUMERATOR",me="IN_DENOMINATOR",fe="BEFORE_FRACTION",ge=Object.freeze({__proto__:null,NONE:he,IN_PARENS:ce,IN_SUPER_SCRIPT:pe,IN_SUB_SCRIPT:ue,IN_NUMERATOR:de,IN_DENOMINATOR:me,BEFORE_FRACTION:fe}),ve=a.a.shape({type:a.a.oneOf(Object.keys($)).isRequired,data:a.a.string.isRequired}),ye=a.a.oneOf(Object.keys(te)),be=a.a.shape({ariaLabel:a.a.string,id:ye.isRequired,type:a.a.oneOf(Object.keys(W)).isRequired,childKeyIds:a.a.arrayOf(ye),icon:ve.isRequired}),xe=a.a.shape({keypadType:a.a.oneOf(Object.keys(U)).isRequired,extraKeys:a.a.arrayOf(ye)}),we=a.a.shape({activate:a.a.func.isRequired,dismiss:a.a.func.isRequired,configure:a.a.func.isRequired,setCursor:a.a.func.isRequired,setKeyHandler:a.a.func.isRequired,getDOMNode:a.a.func.isRequired}),ke=a.a.arrayOf(a.a.oneOf(Object.keys(Q))),Ce=a.a.shape({height:a.a.number,width:a.a.number,top:a.a.number,right:a.a.number,bottom:a.a.number,left:a.a.number}),Ee=a.a.shape({animationId:a.a.string.isRequired,animationType:a.a.oneOf(Object.keys(ee)).isRequired,borders:ke,id:ye.isRequired,initialBounds:Ce.isRequired}),Se=a.a.oneOf(Object.keys(ge)),Te=a.a.shape({parentId:ye.isRequired,bounds:Ce.isRequired,childKeyIds:a.a.arrayOf(ye).isRequired});a.a.oneOfType([a.a.arrayOf(a.a.node),a.a.node]);var Me=45.98;class _e extends l.Component{render(){var{x:e,y:t,animateIntoPosition:r}=this.props,n=r?{msTransitionDuration:"100ms",WebkitTransitionDuration:"100ms",transitionDuration:"100ms",msTransitionProperty:"transform",WebkitTransitionProperty:"transform",transitionProperty:"transform"}:{},i="translate(".concat(e,"px, ").concat(t,"px)"),s=T({position:"absolute",zIndex:4,left:-22,top:0,msTransform:i,WebkitTransform:i,transform:i,width:44,height:44,touchAction:"none"},n);return l.createElement("span",{style:s,onTouchStart:this.props.onTouchStart,onTouchMove:this.props.onTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},l.createElement("svg",{fill:"none",width:44,height:Me,viewBox:"0 0 ".concat(44," ").concat(Me)},l.createElement("filter",{id:"math-input_cursor",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:40.002599999999994,width:36.08,x:"4",y:"0"},l.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),l.createElement("feOffset",{dy:"4"}),l.createElement("feGaussianBlur",{stdDeviation:"4"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.129412 0 0 0 0 0.141176 0 0 0 0 0.172549 0 0 0 0.08 0"}),l.createElement("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),l.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})),l.createElement("g",{filter:"url(#math-input_cursor)"},l.createElement("path",{d:"m22 4-7.07 7.0284c-1.3988 1.3901-2.3515 3.1615-2.7376 5.09-.3861 1.9284-.1883 3.9274.5685 5.7441s2.0385 3.3694 3.6831 4.4619c1.6445 1.0925 3.5781 1.6756 5.556 1.6756s3.9115-.5831 5.556-1.6756c1.6446-1.0925 2.9263-2.6452 3.6831-4.4619s.9546-3.8157.5685-5.7441c-.3861-1.9285-1.3388-3.6999-2.7376-5.09z",fill:"#1865f2"})),l.createElement("path",{d:"m14.9301 10.4841 7.0699-7.06989 7.0699 7.06989.0001.0001c1.3988 1.3984 2.3515 3.1802 2.7376 5.1201s.1883 3.9507-.5685 5.7782c-.7568 1.8274-2.0385 3.3894-3.6831 4.4883-1.6445 1.099-3.5781 1.6855-5.556 1.6855s-3.9115-.5865-5.556-1.6855c-1.6446-1.0989-2.9263-2.6609-3.6831-4.4883-.7568-1.8275-.9546-3.8383-.5685-5.7782s1.3388-3.7217 2.7376-5.1201z",stroke:"#fff",strokeWidth:"2"})))}}M(_e,"propTypes",{animateIntoPosition:a.a.bool,onTouchCancel:a.a.func.isRequired,onTouchEnd:a.a.func.isRequired,onTouchMove:a.a.func.isRequired,onTouchStart:a.a.func.isRequired,visible:a.a.bool.isRequired,x:a.a.number.isRequired,y:a.a.number.isRequired}),M(_e,"defaultProps",{animateIntoPosition:!1,visible:!1,x:0,y:0});class Ae{constructor(e,t){this._scrollListener=()=>{e()};for(var r={},n=0;n<t.changedTouches.length;n++){var i=t.changedTouches[n];r[i.identifier]=[i.clientX,i.clientY]}this._moveListener=t=>{for(var n=0;n<t.changedTouches.length;n++){var i=t.changedTouches[n],s=r[i.identifier];if(s){var o=[i.clientX,i.clientY],a=o[0]-s[0],l=o[1]-s[1];a*a+l*l>64&&e()}}},this._endAndCancelListener=e=>{for(var t=0;t<e.changedTouches.length;t++)delete r[e.changedTouches[t].identifier]}}attach(){window.addEventListener("scroll",this._scrollListener),window.addEventListener("touchmove",this._moveListener),window.addEventListener("touchend",this._endAndCancelListener),window.addEventListener("touchcancel",this._endAndCancelListener)}detach(){window.removeEventListener("scroll",this._scrollListener),window.removeEventListener("touchmove",this._moveListener),window.removeEventListener("touchend",this._endAndCancelListener),window.removeEventListener("touchcancel",this._endAndCancelListener)}}var Ie="write",Oe="cmd",Ne="keystroke",Pe={[I.PLUS]:{str:"+",fn:Ie},[I.MINUS]:{str:"-",fn:Ie},[I.NEGATIVE]:{str:"-",fn:Ie},[I.TIMES]:{str:"\\times",fn:Ie},[I.DIVIDE]:{str:"\\div",fn:Ie},[I.DECIMAL]:{str:D===Z?",":".",fn:Ie},[I.EQUAL]:{str:"=",fn:Ie},[I.NEQ]:{str:"\\neq",fn:Ie},[I.CDOT]:{str:"\\cdot",fn:Ie},[I.PERCENT]:{str:"%",fn:Ie},[I.LEFT_PAREN]:{str:"(",fn:Oe},[I.RIGHT_PAREN]:{str:")",fn:Oe},[I.SQRT]:{str:"sqrt",fn:Oe},[I.PI]:{str:"pi",fn:Oe},[I.THETA]:{str:"theta",fn:Oe},[I.RADICAL]:{str:"nthroot",fn:Oe},[I.LT]:{str:"<",fn:Ie},[I.LEQ]:{str:"\\leq",fn:Ie},[I.GT]:{str:">",fn:Ie},[I.GEQ]:{str:"\\geq",fn:Ie},[I.UP]:{str:"Up",fn:Ne},[I.DOWN]:{str:"Down",fn:Ne},[I.FRAC_INCLUSIVE]:{str:"/",fn:Oe}},Re={[I.LOG]:"log",[I.LN]:"ln",[I.SIN]:"sin",[I.COS]:"cos",[I.TAN]:"tan"},Le=["+","-","\\cdot","\\times","\\div"],Fe=["=","\\neq","<","\\leq",">","\\geq"],De=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ze=["0","1","2","3","4","5","6","7","8","9","\\theta","\\pi",...De.map((e=>e.toLowerCase())),...De.map((e=>e.toUpperCase()))],Be={[ce]:I.JUMP_OUT_PARENTHESES,[pe]:I.JUMP_OUT_EXPONENT,[ue]:I.JUMP_OUT_BASE,[fe]:I.JUMP_INTO_NUMERATOR,[de]:I.JUMP_OUT_NUMERATOR,[me]:I.JUMP_OUT_DENOMINATOR};class qe{constructor(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.MQ=m.a.getInterface(2),this.mathField=this.MQ.MathField(e,{substituteTextarea:function(){return document.createElement("span")}}),this.callbacks=t}focus(){var e=this.mathField.__controller;e.cursor.show(),e.blurred=!1}blur(){var e=this.mathField.__controller;e.cursor.hide(),e.blurred=!0}_writeNormalFunction(e){this.mathField.write("\\".concat(e,"\\left(\\right)")),this.mathField.keystroke("Left")}pressKey(e){var t=this.mathField.__controller.cursor;if(e in Pe){var{str:r,fn:n}=Pe[e];r&&n&&this.mathField[n](r)}else if(Object.keys(Re).includes(e))this._writeNormalFunction(Re[e]);else if(e===I.FRAC_EXCLUSIVE){var i=0===t[this.MQ.L];this.mathField.cmd("\\frac"),i&&this.mathField.keystroke("Left")}else e===I.FRAC?(t[this.MQ.L],this.mathField.cmd("\\frac")):e===I.LOG_N?(this.mathField.write("log_{ }\\left(\\right)"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left")):e===I.CUBE_ROOT?(this.mathField.write("\\sqrt[3]{}"),this.mathField.keystroke("Left")):e===I.EXP||e===I.EXP_2||e===I.EXP_3?this._handleExponent(t,e):e===I.JUMP_OUT_PARENTHESES||e===I.JUMP_OUT_EXPONENT||e===I.JUMP_OUT_BASE||e===I.JUMP_INTO_NUMERATOR||e===I.JUMP_OUT_NUMERATOR||e===I.JUMP_OUT_DENOMINATOR?this._handleJumpOut(t,e):e===I.BACKSPACE?this._handleBackspace(t):e===I.LEFT?this._handleLeftArrow(t):e===I.RIGHT||e===I.JUMP_OUT?this._handleRightArrow(t):/^[a-zA-Z]$/.test(e)?this.mathField.write(e):/^NUM_\d/.test(e)&&this.mathField.write(e[4]);return t.selection||t.show(),this.callbacks.onSelectionChanged&&this.callbacks.onSelectionChanged(t.selection),{context:this.contextForCursor(t)}}setCursorPosition(e,t,r){var n=r||document.elementFromPoint(e,t);if(n){var i=this.getCursor();if(n.hasAttribute("mq-root-block"))i.insAtRightEnd(this.mathField.__controller.root);else{var s=this.mathField.__controller,o=e-document.body.scrollLeft,a=t-document.body.scrollTop;s.seek(u()(n),o,a).cursor.startSelection();var l=this._maybeFindCommand(i[this.MQ.L]);l&&l.endNode&&(i.insLeftOf(l.endNode),this.mathField.keystroke("Right"))}this.callbacks.onCursorMove&&this.callbacks.onCursorMove({context:this.contextForCursor(i)})}}getCursor(){return this.mathField.__controller.cursor}getSelection(){return this.getCursor().selection}getContent(){return this.mathField.latex()}setContent(e){this.mathField.latex(e)}isEmpty(){var e=this.getCursor();return 1===e.parent.id&&0===e[1]&&0===e[-1]}_handleBackspaceInNthRoot(e){var t=0===e[this.MQ.L],r=this._isInsideEmptyNode(e.parent.parent.blocks[0].ends);t?(this._selectNode(e.parent.parent,e),r&&this.mathField.keystroke("Backspace")):this.mathField.keystroke("Backspace")}_handleJumpOut(e,t){var r=this.contextForCursor(e);if(Be[r]===t)switch(r){case ce:e.insRightOf(e.parent.parent);break;case fe:for(var n,i=e;0!==i[this.MQ.R];)this._isFraction(i[this.MQ.R])&&(n=i[this.MQ.R]),i=i[this.MQ.R];e.insLeftOf(n),this.mathField.keystroke("Right");break;case de:for(var s=e.parent.parent.blocks[1];e.parent!==s;)this.mathField.keystroke("Right");break;case me:e.insRightOf(e.parent.parent);break;case ue:e.insRightOf(e.parent.parent),this._isParens(e[this.MQ.R])&&this.mathField.keystroke("Right");break;case pe:e.insRightOf(e.parent.parent);break;default:throw new Error("Attempted to 'Jump Out' from node, but found no "+"appropriate cursor context: ".concat(r))}}_handleBackspace(e){if(e.selection)this.mathField.keystroke("Backspace");else{var t=e.parent,r=t.parent,n=e[this.MQ.L];this._isFraction(n)||this._isSquareRoot(n)||this._isNthRoot(n)?this._selectNode(n,e):this._isNthRootIndex(t)?this._handleBackspaceInRootIndex(e):"\\left("===n.ctrlSeq?this._handleBackspaceOutsideParens(e):"\\left("===r.ctrlSeq?this._handleBackspaceInsideParens(e):this._isInsideLogIndex(e)?this._handleBackspaceInLogIndex(e):"\\ge "===n.ctrlSeq||"\\le "===n.ctrlSeq?this._handleBackspaceAfterLigaturedSymbol(e):this._isNthRoot(r)&&0===n?this._handleBackspaceInNthRoot(e):this.mathField.keystroke("Backspace")}}_handleLeftArrow(e){if(0===e[this.MQ.L]){var t=e.parent.parent;if("\\left("===t.ctrlSeq){var r=this._maybeFindCommandBeforeParens(t);if(r)return void e.insLeftOf(r.startNode)}}this.mathField.keystroke("Left")}_handleRightArrow(e){var t=this._maybeFindCommand(e[this.MQ.R]);t?(e.insLeftOf(t.endNode),this.mathField.keystroke("Right")):this.mathField.keystroke("Right")}_handleExponent(e,t){var r=[...Le,...Fe],n=e[this.MQ.L],i=0===n||r.includes(n.ctrlSeq.trim());switch(i&&this.mathField.write("\\left(\\right)"),t){case I.EXP:this.mathField.cmd("^");break;case I.EXP_2:case I.EXP_3:this.mathField.write("^".concat(t===I.EXP_2?2:3)),i&&(this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"),this.mathField.keystroke("Left"));break;default:throw new Error("Invalid exponent key: ".concat(t))}}_maybeFindCommand(e){if(!e)return null;for(var t,r,n=/^[a-z]$/,i=/^\\[a-z]$/,s="",o=e;0!==o;){var a=o.ctrlSeq.trim();if(!n.test(a)){if(i.test(a)){s=a+s,t=o;break}break}s=a+s,o=o[this.MQ.L]}if(t){for(o=e[this.MQ.R];0!==o;){var l=o.ctrlSeq.trim();if(n.test(l))s+=l;else if("\\left("===l){r=o;break}o=o[this.MQ.R]}return["\\log","\\ln","\\cos","\\sin","\\tan"].includes(s)?{name:s,startNode:t,endNode:r}:null}return null}_maybeFindCommandBeforeParens(e){return this._maybeFindCommand(e[this.MQ.L])}_selectNode(e,t){t.insLeftOf(e),t.startSelection(),t.insRightOf(e),t.select(),t.endSelection()}_isFraction(e){return e.jQ&&e.jQ.hasClass("mq-fraction")}_isNumerator(e){return e.jQ&&e.jQ.hasClass("mq-numerator")}_isDenominator(e){return e.jQ&&e.jQ.hasClass("mq-denominator")}_isSubScript(e){return e.jQ&&(e.jQ.hasClass("mq-sub-only")||e.jQ.hasClass("mq-sub"))}_isSuperScript(e){return e.jQ&&(e.jQ.hasClass("mq-sup-only")||e.jQ.hasClass("mq-sup"))}_isParens(e){return e&&"\\left("===e.ctrlSeq}_isLeaf(e){return e&&e.ctrlSeq&&ze.includes(e.ctrlSeq.trim())}_isSquareRoot(e){return e.blocks&&e.blocks[0].jQ&&e.blocks[0].jQ.hasClass("mq-sqrt-stem")}_isNthRoot(e){return e.blocks&&e.blocks[0].jQ&&e.blocks[0].jQ.hasClass("mq-nthroot")}_isNthRootIndex(e){return e.jQ&&e.jQ.hasClass("mq-nthroot")}_isInsideLogIndex(e){var t=e.parent.parent;if(t&&t.jQ.hasClass("mq-supsub")){var r=this._maybeFindCommandBeforeParens(t);if(r&&"\\log"===r.name)return!0}return!1}_isInsideEmptyNode(e){return 0===e[this.MQ.L]&&0===e[this.MQ.R]}_handleBackspaceInRootIndex(e){if(this._isInsideEmptyNode(e)){var t=e.parent.parent,r=t.latex(),n=t[this.MQ.L];this._selectNode(t,e),""===t.blocks[1].jQ.text()?this.mathField.keystroke("Backspace"):(this.mathField.keystroke("Backspace"),this.mathField.write(r.replace(/^\\sqrt\[\]/,"\\sqrt")),0===n?this.mathField.moveToDirEnd(this.MQ.L):e.insRightOf(n))}else 0!==e[this.MQ.L]&&this.mathField.keystroke("Backspace")}_handleBackspaceInLogIndex(e){if(this._isInsideEmptyNode(e)){var t=e.parent.parent,r=this._maybeFindCommandBeforeParens(t);e.insLeftOf(r.startNode),e.startSelection(),0!==t[this.MQ.R]?e.insRightOf(t[this.MQ.R]):e.insRightOf(t),e.select(),e.endSelection(),""===t[this.MQ.R].contentjQ.text()&&this.mathField.keystroke("Backspace")}else this.mathField.keystroke("Backspace")}_handleBackspaceOutsideParens(e){var t=e[this.MQ.L],r=e[this.MQ.R],n=this._maybeFindCommandBeforeParens(t);n&&n.startNode?(e.insLeftOf(n.startNode),e.startSelection(),0===r?e.insAtRightEnd(e.parent):e.insLeftOf(r),e.select(),e.endSelection()):(e.startSelection(),e.insLeftOf(t),e.select(),e.endSelection())}_handleBackspaceInsideParens(e){if(0===e[this.MQ.L]){var t=e.parent.parent;if(t[this.MQ.L].sub&&t[this.MQ.L].sub.jQ.text())e.insAtRightEnd(t[this.MQ.L].sub);else{var r=this._isInsideEmptyNode(e),n=this._maybeFindCommandBeforeParens(t);e.insLeftOf(n&&n.startNode||t),e.startSelection(),e.insRightOf(t),e.select(),e.endSelection(),r&&this.mathField.keystroke("Backspace")}}else this.mathField.keystroke("Backspace")}_handleBackspaceAfterLigaturedSymbol(e){this.mathField.keystroke("Backspace"),this.mathField.keystroke("Backspace")}contextForCursor(e){for(var t=e;0!==t[this.MQ.R];){if(this._isFraction(t[this.MQ.R]))return fe;if(!this._isLeaf(t[this.MQ.R]))break;t=t[this.MQ.R]}return this._isParens(e.parent&&e.parent.parent)?ce:this._isNumerator(e.parent)?de:this._isDenominator(e.parent)?me:this._isSubScript(e.parent)?ue:this._isSuperScript(e.parent)?pe:he}_isAtTopLevel(e){return!e.parent.parent}}var He=(e,t)=>{var r=e.getBoundingClientRect(),n=r.bottom,i=r.top,s="scrollingElement"in document?document.scrollingElement:-1!==navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement;if(t){var o=window.innerHeight-(t.clientHeight+60);if(n>o){var a=Math.min(n-o+16,i);return void(s.scrollTop+=a)}}i<16&&(s.scrollTop-=r.height+16)};class Ue extends l.Component{constructor(){super(...arguments),M(this,"state",{focused:!1,handle:{animateIntoPosition:!1,visible:!1,x:0,y:0}}),M(this,"_clearKeypadBoundsCache",(e=>{this._keypadBounds=null})),M(this,"_cacheKeypadBounds",(e=>{this._keypadBounds=e.getBoundingClientRect()})),M(this,"_updateInputPadding",(()=>{this._container=c.a.findDOMNode(this),this._root=this._container.querySelector(".mq-root-block");var e=this.getInputInnerPadding();this._root.style.padding="".concat(e.paddingTop,"px ").concat(e.paddingRight,"px")+" ".concat(e.paddingBottom,"px ").concat(e.paddingLeft,"px"),this._root.style.fontSize="".concat(We,"pt")})),M(this,"_getKeypadBounds",(()=>{if(!this._keypadBounds){var e=this.props.keypadElement.getDOMNode();this._cacheKeypadBounds(e)}return this._keypadBounds})),M(this,"_updateCursorHandle",(e=>{var t=this._container.getBoundingClientRect(),r=this._container.querySelector(".mq-cursor").getBoundingClientRect(),n=r.width,i=this.getInputInnerPadding(),s=t.right-n-i.paddingRight,o=t.left+n+i.paddingLeft,a=r.left;r.left>s?a=s:r.left<o&&(a=o),this.setState({handle:{visible:!0,animateIntoPosition:e,x:a+n/2-t.left,y:r.bottom+2-t.top}})})),M(this,"_hideCursorHandle",(()=>{this.setState({handle:{visible:!1,x:0,y:0}})})),M(this,"_handleScroll",(()=>{!1!==this.state.handle.animateIntoPosition&&this._hideCursorHandle()})),M(this,"blur",(()=>{this.mathField.blur(),this.props.onBlur&&this.props.onBlur(),this.setState({focused:!1,handle:{visible:!1}})})),M(this,"focus",(()=>{this.props.keypadElement.setKeyHandler((e=>{var t=this.mathField.pressKey(e),r=()=>{this.setState({handle:{visible:!1}})},n=this.mathField.getContent();return this.props.value!==n?this.props.onChange(n,r):r(),t})),this.mathField.focus(),this.props.onFocus&&this.props.onFocus(),this.setState({focused:!0},(()=>{setTimeout((()=>{if(this._isMounted){var e=this.props.keypadElement&&this.props.keypadElement.getDOMNode();He(this._container,e)}}))}))})),M(this,"_findHitNode",((e,t,r,n,i)=>{for(;r>=e.top&&r<=e.bottom;){var s=[[t-n,r+=i],[t,r],[t+n,r]].map((e=>document.elementFromPoint(...e))).filter((e=>e&&this._root.contains(e)&&(!e.classList.contains("mq-root-block")&&!e.classList.contains("mq-non-leaf")||e.classList.contains("mq-empty")||e.classList.contains("mq-hasCursor")))),o=null,a=[],l=[],h=0,c={},p={};for(var u of s){var d=u.getAttribute("mathquill-command-id");null!=d?(a.push(u),c[d]=(c[d]||0)+1,p[d]=u):l.push(u)}for(var[m,f]of Object.entries(c))f>h&&(h=f,o=p[m]);if(null==o&&l.length>0&&(o=l[0]),null!==o)return this.mathField.setCursorPosition(t,r,o),!0}return!1})),M(this,"_insertCursorAtClosestNode",((e,t)=>{var r=this.mathField.getCursor();if(this._root.hasChildNodes()){var n;t>this._containerBounds.bottom?t=this._containerBounds.bottom-10:t<this._containerBounds.top&&(t=this._containerBounds.top+10),e>this._containerBounds.right?e=this._containerBounds.right-15:e<this._containerBounds.left&&(e=this._containerBounds.left+15),n=-8;if(!this._findHitNode(this._containerBounds,e,t,5,n)&&(t=this._containerBounds.top,n=8,!this._findHitNode(this._containerBounds,e,t,5,n))){var i=this._root.firstChild.getBoundingClientRect(),s=this._root.lastChild.getBoundingClientRect(),o=i.left,a=s.right;Math.abs(e-a)<Math.abs(e-o)?r.insAtRightEnd(this.mathField.mathField.__controller.root):r.insAtLeftEnd(this.mathField.mathField.__controller.root),this.props.keypadElement&&this.props.keypadElement.setCursor({context:this.mathField.contextForCursor(r)})}}else r.insAtLeftEnd(this.mathField.mathField.__controller.root)})),M(this,"handleTouchStart",(e=>{if(e.stopPropagation(),this._hideCursorHandle(),""!==this.mathField.getContent()){this._containerBounds=this._container.getBoundingClientRect();var t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}this.state.focused||this.focus()})),M(this,"handleTouchMove",(e=>{if(e.stopPropagation(),""!==this.mathField.getContent()&&this.state.focused){var t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}})),M(this,"handleTouchEnd",(e=>{e.stopPropagation(),""!==this.mathField.getContent()&&this.state.focused&&this._updateCursorHandle()})),M(this,"onCursorHandleTouchStart",(e=>{e.stopPropagation(),e.preventDefault(),this._containerBounds=this._container.getBoundingClientRect()})),M(this,"_constrainToBound",((e,t,r,n)=>e<t?t+(e-t)*n:e>r?r+(e-r)*n:e)),M(this,"onCursorHandleTouchMove",(e=>{e.stopPropagation();var t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY,n=t-this._containerBounds.left,i=r-22.99-this._containerBounds.top;this.setState({handle:{animateIntoPosition:!1,visible:!0,x:this._constrainToBound(n,0,this._containerBounds.width,.8),y:this._constrainToBound(i,0,this._containerBounds.height,.8)}});var s=r-22;this._insertCursorAtClosestNode(t,s)})),M(this,"onCursorHandleTouchEnd",(e=>{e.stopPropagation(),this._updateCursorHandle(!0)})),M(this,"onCursorHandleTouchCancel",(e=>{e.stopPropagation(),this._updateCursorHandle(!0)})),M(this,"domKeyToMathQuillKey",(e=>{var t={"+":I.PLUS,"-":I.MINUS,"*":I.TIMES,"/":I.DIVIDE,".":I.DECIMAL,"%":I.PERCENT,"=":I.EQUAL,">":I.GT,"<":I.LT,"^":I.EXP};return["0","1","2","3","4","5","6","7","8","9"].includes(e)?"NUM_".concat(e):"Backspace"===e?I.BACKSPACE:e in t?t[e]:null})),M(this,"handleKeyUp",(e=>{var t=this.domKeyToMathQuillKey(e.key);if(t){this.mathField.pressKey(t);var r=this.mathField.getContent();this.props.value!==r&&(this.mathField.setContent(this.props.value),this.props.onChange(r,!1),this._hideCursorHandle())}})),M(this,"getBorderWidthPx",(()=>this.state.focused?2:1)),M(this,"getInputInnerPadding",(()=>{var e=je-this.getBorderWidthPx();return{paddingTop:e-1,paddingRight:e,paddingBottom:e-3,paddingLeft:e}}))}componentDidMount(){this._isMounted=!0,this.mathField=new qe(this._mathContainer,{},{onCursorMove:e=>{this.props.keypadElement&&this.props.keypadElement.setCursor(e)}}),this.mathField.mathField.__controller.container.unbind("mousedown.mathquill"),this.mathField.setContent(this.props.value),this._updateInputPadding(),this._container=c.a.findDOMNode(this),this._root=this._container.querySelector(".mq-root-block"),this._root.addEventListener("scroll",this._handleScroll),this.touchStartInitialScroll=null,this.recordTouchStartOutside=e=>{if(this.state.focused&&!this._container.contains(e.target)){var t=!1;if(this.props.keypadElement&&this.props.keypadElement.getDOMNode())for(var r=this._getKeypadBounds(),n=0;n<e.changedTouches.length;n++){var[i,s]=[e.changedTouches[n].clientX,e.changedTouches[n].clientY];if(r.left<=i&&r.right>=i&&r.top<=s&&r.bottom>=s||r.bottom<s){t=!0;break}}t||(this.didTouchOutside=!0,this.dragListener&&this.dragListener.detach(),this.dragListener=new Ae((()=>{this.didScroll=!0,this.dragListener.detach()}),e),this.dragListener.attach())}},this.blurOnTouchEndOutside=e=>{this.state.focused&&this.didTouchOutside&&!this.didScroll&&this.blur(),this.didTouchOutside=!1,this.didScroll=!1,this.dragListener&&(this.dragListener.detach(),this.removeListeners=null)},window.addEventListener("touchstart",this.recordTouchStartOutside),window.addEventListener("touchend",this.blurOnTouchEndOutside),window.addEventListener("touchcancel",this.blurOnTouchEndOutside),window.addEventListener("resize",this._clearKeypadBoundsCache),window.addEventListener("orientationchange",this._clearKeypadBoundsCache)}UNSAFE_componentWillReceiveProps(e){this.props.keypadElement!==e.keypadElement&&this._clearKeypadBoundsCache()}componentDidUpdate(e,t){this.mathField.getContent()!==this.props.value&&this.mathField.setContent(this.props.value),t.focused!==this.state.focused&&this._updateInputPadding()}componentWillUnmount(){this._isMounted=!1,window.removeEventListener("touchstart",this.recordTouchStartOutside),window.removeEventListener("touchend",this.blurOnTouchEndOutside),window.removeEventListener("touchcancel",this.blurOnTouchEndOutside),window.removeEventListener("resize",this._clearKeypadBoundsCache()),window.removeEventListener("orientationchange",this._clearKeypadBoundsCache())}render(){var{focused:e,handle:t}=this.state,{style:r}=this.props,n=T(T(T({},Ye.innerContainer),{},{borderWidth:this.getBorderWidthPx()},e?{borderColor:R}:{}),r),s=i._("Math input box")+" "+i._("Tap with one or two fingers to open keyboard");return l.createElement(P,{style:Ve.input,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onClick:e=>e.stopPropagation(),role:"textbox",ariaLabel:s},l.createElement("div",{className:"keypad-input",tabIndex:"0",ref:e=>{this.inputRef=e},onKeyUp:this.handleKeyUp},l.createElement("div",{ref:e=>{this._mathContainer=c.a.findDOMNode(e)},style:n})),e&&t.visible&&l.createElement(_e,_({},t,{onTouchStart:this.onCursorHandleTouchStart,onTouchMove:this.onCursorHandleTouchMove,onTouchEnd:this.onCursorHandleTouchEnd,onTouchCancel:this.onCursorHandleTouchCancel})))}}M(Ue,"propTypes",{keypadElement:we,onBlur:a.a.func,onChange:a.a.func.isRequired,onFocus:a.a.func,style:a.a.any,value:a.a.string}),M(Ue,"defaultProps",{style:{},value:""});var We=18,je=12,Ge=20+2*je,Ve=s.StyleSheet.create({input:{position:"relative",display:"inline-block",verticalAlign:"middle",maxWidth:128}}),Ye={innerContainer:{backgroundColor:"white",minHeight:Ge,minWidth:64,maxWidth:128,boxSizing:"border-box",position:"relative",borderStyle:"solid",borderColor:n.default.offBlack50,borderRadius:4,color:L}},Xe={longPressWaitTimeMs:50,swipeThresholdPx:20,holdIntervalMs:250};class Qe{constructor(e,t,r,n){this.handlers=e,this.options=T(T({},Xe),t),this.swipeDisabledNodeIds=r||[],this.multiPressableKeys=n||[],this.touchState={},this.swipeState=null}_maybeCancelLongPressForTouch(e){var{longPressTimeoutId:t}=this.touchState[e];t&&(clearTimeout(t),this.touchState[e]=T(T({},this.touchState[e]),{},{longPressTimeoutId:null}))}_maybeCancelPressAndHoldForTouch(e){var{pressAndHoldIntervalId:t}=this.touchState[e];t&&(clearInterval(t),this.touchState[e]=T(T({},this.touchState[e]),{},{pressAndHoldIntervalId:null}))}_cleanupTouchEvent(e){this._maybeCancelLongPressForTouch(e),this._maybeCancelPressAndHoldForTouch(e),delete this.touchState[e]}_onFocus(e,t){this._maybeCancelLongPressForTouch(t),this._maybeCancelPressAndHoldForTouch(t),this.touchState[t]=T(T({},this.touchState[t]),{},{activeNodeId:e}),this.handlers.onFocus(e),e&&(this.multiPressableKeys.includes(e)?(this.handlers.onTrigger(e),this.touchState[t]=T(T({},this.touchState[t]),{},{pressAndHoldIntervalId:setInterval((()=>{this.handlers.onTrigger(e)}),this.options.holdIntervalMs)})):this.touchState[t]=T(T({},this.touchState[t]),{},{longPressTimeoutId:setTimeout((()=>{this.handlers.onLongPress(e),this.touchState[t]=T(T({},this.touchState[t]),{},{longPressTimeoutId:null})}),this.options.longPressWaitTimeMs)}))}_onSwipeStart(){for(var e of Object.keys(this.touchState))this._maybeCancelLongPressForTouch(e),this._maybeCancelPressAndHoldForTouch(e);this.touchState={},this.handlers.onBlur()}onTouchStart(e,t,r){if(!this.swipeState&&!this.touchState[t]){var n=e();this.touchState[t]={swipeLocked:this.swipeDisabledNodeIds.includes(n),startX:r},this._onFocus(n,t)}}onTouchMove(e,t,r,n){if(this.swipeState)this.swipeState.touchId===t&&this.handlers.onSwipeChange(r-this.swipeState.startX);else if(this.touchState[t]){var{activeNodeId:i,startX:s,swipeLocked:o}=this.touchState[t],a=r-s;if(n&&!o&&Math.abs(a)>this.options.swipeThresholdPx)this._onSwipeStart(),this.swipeState={touchId:t,startX:s},this.handlers.onSwipeChange(r-this.swipeState.startX);else{var l=e();l!==i&&this._onFocus(l,t)}}}onTouchEnd(e,t,r){if(this.swipeState)this.swipeState.touchId===t&&(this.handlers.onSwipeEnd(r-this.swipeState.startX),this.swipeState=null);else if(this.touchState[t]){var{activeNodeId:n,pressAndHoldIntervalId:i}=this.touchState[t];this._cleanupTouchEvent(t),!!i?this.handlers.onBlur():this.handlers.onTouchEnd(n)}}onTouchCancel(e){this.swipeState?this.swipeState.touchId===e&&(this.handlers.onSwipeEnd(0),this.swipeState=null):this.touchState[e]&&(this._cleanupTouchEvent(e),this.handlers.onBlur())}}class Ke{constructor(){this._nodesById={},this._bordersById={},this._orderedIds=[],this._cachedBoundingBoxesById={},window.addEventListener("resize",(()=>{this._cachedBoundingBoxesById={}}))}registerDOMNode(e,t,r,n){this._nodesById[e]=t,this._bordersById[e]=n;var i=[...r||[],e,...this._orderedIds],s=[],o={};for(var a of i)o[a]||(s.push(a),o[a]=!0);this._orderedIds=s}unregisterDOMNode(e){delete this._nodesById[e]}idForCoords(e,t){for(var r of this._orderedIds){var n=this._nodesById[r];if(n){var i=n.getBoundingClientRect();if(i.left<=e&&i.right>e&&i.top<=t&&i.bottom>t)return this._cachedBoundingBoxesById[r]=i,r}}}layoutPropsForId(e){if(!this._cachedBoundingBoxesById[e]){var t=this._nodesById[e];this._cachedBoundingBoxesById[e]=t?t.getBoundingClientRect():new DOMRect}return{initialBounds:this._cachedBoundingBoxesById[e],borders:this._bordersById[e]}}}class $e{constructor(e){this.handlers=e,this.activePopover=null,this.popovers={}}registerPopover(e,t){this.popovers[e]=t}unregisterPopover(e){delete this.popovers[e]}isPopoverVisible(){return null!=this.activePopover}onBlur(){this.activePopover=null,this.handlers.onActiveNodesChanged({popover:null,focus:null})}onFocus(e){this.activePopover?this._isNodeInsidePopover(this.activePopover,e)?this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:e}):this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:null}):(this.activePopover=null,this.handlers.onActiveNodesChanged({popover:null,focus:e}))}onLongPress(e){!this.activePopover&&this.popovers[e]&&(this.activePopover=e,this.handlers.onActiveNodesChanged({popover:{parentId:this.activePopover,childIds:this.popovers[this.activePopover]},focus:this._defaultNodeForPopover(this.activePopover)}))}onTrigger(e){this.handlers.onClick(e,e,!1)}onTouchEnd(e){var t=!!this.activePopover;if(t){if(this._isNodeInsidePopover(this.activePopover,e))this.handlers.onClick(e,e,t);else if(this.activePopover===e){var r=this._defaultNodeForPopover(e);this.handlers.onClick(r,r,t)}}else if(this.popovers[e]){var n=this._defaultNodeForPopover(e),i=e;this.handlers.onClick(n,i,t)}else null!=e&&this.onTrigger(e);this.onBlur()}_isNodeInsidePopover(e,t){return this.popovers[e].includes(t)}_defaultNodeForPopover(e){return this.popovers[e][0]}}var Ze=["popover"],Je=e=>[e.changedTouches[0].clientX,e.changedTouches[0].clientY];class et{constructor(e,t,r,n){var{swipeEnabled:i}=e;this.swipeEnabled=i,this.trackEvents=!1,this.nodeManager=new Ke,this.popoverStateMachine=new $e({onActiveNodesChanged:e=>{var{popover:r}=e,n=A(e,Ze);t.onActiveNodesChanged(T({popover:r&&{parentId:r.parentId,bounds:this.nodeManager.layoutPropsForId(r.parentId).initialBounds,childKeyIds:r.childIds}},n))},onClick:(e,r,n)=>{t.onClick(e,this.nodeManager.layoutPropsForId(r),n)}}),this.gestureStateMachine=new Qe({onFocus:e=>{this.popoverStateMachine.onFocus(e)},onLongPress:e=>{this.popoverStateMachine.onLongPress(e)},onTouchEnd:e=>{this.popoverStateMachine.onTouchEnd(e)},onBlur:()=>{this.popoverStateMachine.onBlur()},onSwipeChange:t.onSwipeChange,onSwipeEnd:t.onSwipeEnd,onTrigger:e=>{this.popoverStateMachine.onTrigger(e)}},{},r,n)}onTouchStart(e,t){if(this.trackEvents){for(var[r]=Je(e),n=0;n<e.changedTouches.length;n++)this.gestureStateMachine.onTouchStart((()=>t),e.changedTouches[n].identifier,r);e.preventDefault()}}onTouchMove(e){if(this.trackEvents)for(var t=this.popoverStateMachine.isPopoverVisible(),r=this.swipeEnabled&&!t,[n,i]=Je(e),s=0;s<e.changedTouches.length;s++)this.gestureStateMachine.onTouchMove((()=>this.nodeManager.idForCoords(n,i)),e.changedTouches[s].identifier,n,r)}onTouchEnd(e){if(this.trackEvents)for(var[t,r]=Je(e),n=0;n<e.changedTouches.length;n++)this.gestureStateMachine.onTouchEnd((()=>this.nodeManager.idForCoords(t,r)),e.changedTouches[n].identifier,t)}onTouchCancel(e){if(this.trackEvents)for(var t=0;t<e.changedTouches.length;t++)this.gestureStateMachine.onTouchCancel(e.changedTouches[t].identifier)}registerDOMNode(e,t,r,n){this.nodeManager.registerDOMNode(e,t,r,n),this.popoverStateMachine.registerPopover(e,r)}unregisterDOMNode(e){this.nodeManager.unregisterDOMNode(e),this.popoverStateMachine.unregisterPopover(e)}enableEventTracking(){this.trackEvents=!0}disableEventTracking(){this.trackEvents=!1}}class tt extends l.Component{render(){var{style:e}=this.props,t=[nt.container,...Array.isArray(e)?e:[e]];return l.createElement(P,{style:t},l.createElement("svg",{width:rt,height:rt,viewBox:"4 4 8 8"},l.createElement("path",{fill:L,opacity:"0.3",d:"M5.29289322,5.70710678 L10.2928932,10.7071068 C10.9228581,11.3370716 12,10.8909049 12,10 L12,5 C12,4.44771525 11.5522847,4 11,4 L6,4 C5.10909515,4 4.66292836,5.07714192 5.29289322,5.70710678 Z"})))}}M(tt,"propTypes",{style:a.a.any});var rt=7,nt=s.StyleSheet.create({container:{position:"absolute",top:0,right:0,width:rt,height:rt}}),it=s.StyleSheet.create({row:{flexDirection:"row"},column:{flexDirection:"column"},oneColumn:{flexGrow:1},fullWidth:{width:"100%"},stretch:{alignItems:"stretch"},centered:{justifyContent:"center",alignItems:"center"},centeredText:{textAlign:"center"},roundedTopLeft:{borderTopLeftRadius:4},roundedTopRight:{borderTopRightRadius:4}}),{row:st,centered:ot}=it;class at extends l.Component{constructor(){super(...arguments),M(this,"_renderMath",(()=>{var{math:e}=this.props;y.a.render(e,c.a.findDOMNode(this))}))}componentDidMount(){this._renderMath()}componentDidUpdate(e){e.math!==this.props.math&&this._renderMath()}render(){var{style:e}=this.props,t=[st,ot,lt.size,lt.base,...Array.isArray(e)?e:[e]];return l.createElement(P,{style:t})}}M(at,"propTypes",{math:a.a.string.isRequired,style:a.a.any});var lt=s.StyleSheet.create({size:{height:48,width:48},base:{fontSize:25}});class ht extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M13 12h24v24H13z"}),l.createElement("path",{d:"M18.182 29.168c1.386 0 2.226-.602 2.674-1.232l-1.162-1.078a1.707 1.707 0 0 1-1.428.728c-1.078 0-1.834-.798-1.834-1.974s.756-1.96 1.834-1.96c.616 0 1.106.252 1.428.728l1.162-1.092c-.448-.616-1.288-1.218-2.674-1.218-2.086 0-3.584 1.47-3.584 3.542 0 2.086 1.498 3.556 3.584 3.556zm6.972 0c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.336 1.582c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05z",fill:this.props.color})))}}M(ht,"propTypes",{color:a.a.string.isRequired});class ct extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M16.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H31.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z",fill:this.props.color})))}}M(ct,"propTypes",{color:a.a.string.isRequired});class pt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M16 21h17M16 27h17",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(pt,"propTypes",{color:a.a.string.isRequired});class ut extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}}M(ut,"propTypes",{color:a.a.string.isRequired});class dt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M28 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM30 18h4v4h-4v-4zM14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22z",fill:this.props.color})))}}M(dt,"propTypes",{color:a.a.string.isRequired});class mt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M19 33l10-18M16 21h17M16 27h17",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(mt,"propTypes",{color:a.a.string.isRequired});class ft extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M16 33h16M16 30l16-6-16-6",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(ft,"propTypes",{color:a.a.string.isRequired});class gt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M20.836 29v-9.338h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882H22.6V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}}M(gt,"propTypes",{color:a.a.string.isRequired});class vt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M18.655 29.168c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05zm5.124-7.658c.588 0 1.064-.476 1.064-1.064 0-.588-.476-1.05-1.064-1.05a1.06 1.06 0 0 0-1.064 1.05c0 .588.49 1.064 1.064 1.064zm.896 7.49v-6.762h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}}M(vt,"propTypes",{color:a.a.string.isRequired});class yt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M32 30l-16-6 16-6"})))}}M(yt,"propTypes",{color:a.a.string.isRequired});class bt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M17.91 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z",fill:this.props.color}),l.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}}M(bt,"propTypes",{color:a.a.string.isRequired});class xt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M19 24h10M24 29V19",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(xt,"propTypes",{color:a.a.string.isRequired});class wt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M16.93 29.168c.742 0 1.218-.196 1.484-.434l-.378-1.344c-.098.098-.35.196-.616.196-.392 0-.616-.322-.616-.742v-3.052h1.372v-1.554h-1.372V20.39h-1.792v1.848h-1.12v1.554h1.12v3.528c0 1.204.672 1.848 1.918 1.848zM25.232 29v-4.368c0-1.946-1.414-2.562-2.954-2.562-1.064 0-2.128.336-2.954 1.064l.672 1.19c.574-.532 1.246-.798 1.974-.798.896 0 1.484.448 1.484 1.134v.91c-.448-.532-1.246-.826-2.142-.826-1.078 0-2.352.602-2.352 2.184 0 1.512 1.274 2.24 2.352 2.24.882 0 1.68-.322 2.142-.868v.7h1.778zm-3.206-1.036c-.7 0-1.274-.364-1.274-.994 0-.658.574-1.022 1.274-1.022.574 0 1.134.196 1.428.588v.84c-.294.392-.854.588-1.428.588zM33.338 29v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z",fill:this.props.color})))}}M(wt,"propTypes",{color:a.a.string.isRequired});var kt=e=>l.createElement("g",_({fill:"none",fillRule:"evenodd"},e),l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M22 18l-6 6 6 6M16 24h16"}));class Ct extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M26 14c-4 6-4 14 0 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(Ct,"propTypes",{color:a.a.string.isRequired});class Et extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M23 14c4 6 4 14 0 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(Et,"propTypes",{color:a.a.string.isRequired});class St extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M16 30l16-6-16-6"})))}}M(St,"propTypes",{color:a.a.string.isRequired});class Tt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M19 24h10",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("circle",{fill:this.props.color,cx:"24",cy:"19.5",r:"1.5"}),l.createElement("circle",{fill:this.props.color,cx:"24",cy:"28.5",r:"1.5"})))}}M(Tt,"propTypes",{color:a.a.string.isRequired});class Mt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("circle",{fill:this.props.color,cx:"24",cy:"30",r:"2"})))}}M(Mt,"propTypes",{color:a.a.string.isRequired});class _t extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("g",{transform:"translate(12 12)"},l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),l.createElement("path",{d:"M16 4L8 20",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("circle",{stroke:this.props.color,strokeWidth:"2",cx:"7",cy:"7",r:"3"}),l.createElement("circle",{stroke:this.props.color,strokeWidth:"2",cx:"17",cy:"17",r:"3"}))))}}M(_t,"propTypes",{color:a.a.string.isRequired});class At extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M20 20l8 8M28 20l-8 8",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(At,"propTypes",{color:a.a.string.isRequired});class It extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM30.92 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z",fill:this.props.color})))}}M(It,"propTypes",{color:a.a.string.isRequired});class Ot extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM33.67 23v-1.5h-2.44c1.66-1.16 2.39-2.03 2.39-3.05 0-1.34-1.13-2.22-2.7-2.22-.93 0-1.99.33-2.7 1.11l.95 1.14c.48-.45 1.04-.73 1.78-.73.49 0 .92.24.92.7 0 .66-.54 1.12-3.43 3.21V23h5.23z",fill:this.props.color})))}}M(Ot,"propTypes",{color:a.a.string.isRequired});class Nt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("g",{transform:"translate(12 12)"},l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),l.createElement("circle",{fill:this.props.color,cx:"12",cy:"12",r:"3"}))))}}M(Nt,"propTypes",{color:a.a.string.isRequired});class Pt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M30 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM32 30h4v4h-4v-4zM12.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H27.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z",fill:this.props.color})))}}M(Pt,"propTypes",{color:a.a.string.isRequired});class Rt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M16 33h16M32 30l-16-6 16-6",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(Rt,"propTypes",{color:a.a.string.isRequired});class Lt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M19 24h10",stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}}M(Lt,"propTypes",{color:a.a.string.isRequired});class Ft extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M13 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM15 18h4v4h-4v-4z",fill:this.props.color}),l.createElement("path",{stroke:this.props.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 29l4 6 9-14h7"})))}}M(Ft,"propTypes",{color:a.a.string.isRequired});class Dt extends l.Component{render(){return l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("g",{transform:"translate(12 12)"},l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),l.createElement("path",{d:"M8 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997c-.55 0-.997-.453-.997-.997v-6.006zM10 18h4v4h-4v-4z",fill:this.props.color}),l.createElement("rect",{fill:this.props.color,x:"2",y:"11",width:"20",height:"2",rx:"1"}),l.createElement("path",{d:"M8 .997C8 .447 8.453 0 8.997 0h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997C8.447 8 8 7.547 8 7.003V.997zM10 2h4v4h-4V2z",fill:this.props.color}))))}}M(Dt,"propTypes",{color:a.a.string.isRequired});var zt=Object.freeze({__proto__:null,COS:ht,LOG:ct,EQUAL:pt,BACKSPACE:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M13 24l6 6h14V18H19l-6 6zm-1.414-1.414l6-6A2 2 0 0 1 19 16h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H19a2 2 0 0 1-1.414-.586l-6-6a2 2 0 0 1 0-2.828z",fill:"#888D93"}),l.createElement("path",{d:"M23 21l6 6M29 21l-6 6",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),SQRT:ut,EXP:dt,NEQ:mt,GEQ:ft,LN:gt,DISMISS:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M18 21l6 6 6-6",strokeLinecap:"round",strokeWidth:"2",stroke:"#71B307",strokeLinejoin:"round"}))),SIN:vt,LT:yt,CUBE_ROOT:bt,PLUS:xt,TAN:wt,LEFT:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement(kt,null)),UP:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement(kt,{transform:"rotate(90 24 24)"})),DOWN:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement(kt,{transform:"rotate(270 24 24)"})),LEFT_PAREN:Ct,RIGHT_PAREN:Et,GT:St,DIVIDE:Tt,PERIOD:Mt,PERCENT:_t,TIMES:At,EXP_3:It,EXP_2:Ot,RIGHT:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement(kt,{transform:"rotate(180 24 24)"})),CDOT:Nt,LOG_N:Pt,LEQ:Rt,MINUS:Lt,NEGATIVE:Lt,RADICAL:Ft,FRAC:Dt,JUMP_OUT_PARENTHESES:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M24 18c3 3 3 9 0 12M18 18c-3 3-3 9 0 12",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M32 27l3-3-3-3M22 24h12"}))),JUMP_OUT_EXPONENT:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M35 19v16M23 19l8 8M31 23v4h-4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M12 12.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 14h4v4h-4v-4z",fill:"#888D93"}))),JUMP_OUT_BASE:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M12 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 30h4v4h-4v-4z",fill:"#888D93"}),l.createElement("path",{d:"M35 13v16M23 29l8-8M27 21h4v4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),JUMP_INTO_NUMERATOR:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M13 16v16M17 22l6-6M23 20v-4h-4",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M26 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 29h4v4h-4v-4z",fill:"#888D93"}),l.createElement("path",{d:"M35 24H25",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M26 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 15h4v4h-4v-4z",fill:"#78C008"}))),JUMP_OUT_NUMERATOR:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{fill:"none",d:"M0 0h48v48H0z"}),l.createElement("path",{fill:"none",d:"M12 12h24v24H12z"}),l.createElement("path",{stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M33 29l-3 3-3-3M30 18v14"}),l.createElement("path",{d:"M16 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 29h4v4h-4v-4z",fill:"#78C008"}),l.createElement("path",{d:"M25 24H15",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M16 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 15h4v4h-4v-4z",fill:"#888D93"}))),JUMP_OUT_DENOMINATOR:()=>l.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("path",{d:"M0 0h48v48H0z"}),l.createElement("path",{d:"M12 12h24v24H12z"}),l.createElement("path",{d:"M35 16v16m-4-4v-4h-4m-2 6l6-6",stroke:"#78C008",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M14 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 29h4v4h-4v-4z",fill:"#888D93"}),l.createElement("path",{d:"M23 24H13",stroke:"#888D93",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M14 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 15h4v4h-4v-4z",fill:"#888D93"})))});class Bt extends l.Component{render(){var{color:e,name:t}=this.props,r=zt[t];return l.createElement(r,{color:e})}}M(Bt,"propTypes",{color:a.a.string.isRequired,name:a.a.string.isRequired});var{row:qt,centered:Ht}=it;class Ut extends l.Component{render(){var{character:e,style:t}=this.props,r=[qt,Ht,Wt.size,Wt.base,...Array.isArray(t)?t:[t]];return l.createElement(P,{style:r},l.createElement(O,null,e))}}M(Ut,"propTypes",{character:a.a.string.isRequired,style:a.a.any});var Wt=s.StyleSheet.create({size:{height:48,width:48},base:{fontFamily:"Proxima Nova",fontSize:25}}),jt="#FFF",Gt=L;class Vt extends l.PureComponent{render(){var{focused:e,icon:t,style:r}=this.props,n=[e?Yt.focused:Yt.unfocused,...Array.isArray(r)?r:[r]];switch(t.type){case $.MATH:return l.createElement(at,{math:t.data,style:n});case $.SVG:return l.createElement(Bt,{name:t.data,color:e?jt:Gt});case $.TEXT:return l.createElement(Ut,{character:t.data,style:n})}throw new Error("No icon or symbol provided")}}M(Vt,"propTypes",{focused:a.a.bool,icon:ve.isRequired,style:a.a.any});var Yt=s.StyleSheet.create({unfocused:{color:Gt},focused:{color:jt}}),{row:Xt,column:Qt,centered:Kt,fullWidth:$t}=it;class Zt extends l.Component{render(){var{focused:e,icons:t}=this.props;if(t.forEach((e=>{if(e.type!==$.MATH)throw new Error("Received invalid icon: type=".concat(e.type,", ")+"data=".concat(e.data))})),1===t.length)return l.createElement(Vt,{icon:t[0],focused:e});var r=Jt.base,n=[Jt.base,Jt.secondary];if(2===t.length)return l.createElement(P,{style:[Xt,Jt.size]},l.createElement(P,{style:[Qt,Kt,$t,Jt.middleLeft]},l.createElement(Vt,{style:r,icon:t[0],focused:e})),l.createElement(P,{style:[Qt,Kt,$t,Jt.middleRight]},l.createElement(Vt,{style:n,icon:t[1],focused:e})));if(t.length>=3)return l.createElement(P,{style:[Qt,Jt.size]},l.createElement(P,{style:Xt},l.createElement(P,{style:[Kt,$t,Jt.topLeft]},l.createElement(Vt,{style:r,icon:t[0],focused:e})),l.createElement(P,{style:[Kt,$t,Jt.topRight]},l.createElement(Vt,{style:n,icon:t[1],focused:e}))),l.createElement(P,{style:Xt},l.createElement(P,{style:[Kt,$t,Jt.bottomLeft]},l.createElement(Vt,{style:n,icon:t[2],focused:e})),l.createElement(P,{style:[Kt,$t,Jt.bottomRight]},t[3]&&l.createElement(Vt,{style:n,icon:t[3],focused:e}))));throw new Error("Invalid number of icons:",t.length)}}M(Zt,"propTypes",{focused:a.a.bool,icons:a.a.arrayOf(ve).isRequired});var Jt=s.StyleSheet.create({size:{height:48,width:48},bottomLeft:{marginBottom:2,marginLeft:4},topLeft:{marginTop:2,marginLeft:4},topRight:{marginTop:2,marginRight:4},bottomRight:{marginBottom:2,marginRight:4},middleLeft:{marginLeft:4},middleRight:{marginRight:4},base:{fontSize:18},secondary:{opacity:.3}});class er extends l.PureComponent{constructor(){super(...arguments),M(this,"_preInjectStyles",(()=>{for(var e of Object.keys(W))for(var t of(Object(s.css)(P.styles.initial,...this._getFocusStyle(e)),Object.values(K)))Object(s.css)(P.styles.initial,...this._getButtonStyle(e,t))})),M(this,"_getFocusStyle",(e=>{var t;return t=e===W.INPUT_NAVIGATION||e===W.KEYPAD_NAVIGATION?tr.light:tr.bright,[tr.focusBox,t]})),M(this,"_getButtonStyle",((e,t,r)=>{var n;switch(e){case W.EMPTY:n=tr.empty;break;case W.MANY:case W.VALUE:n=tr.value;break;case W.OPERATOR:n=tr.operator;break;case W.INPUT_NAVIGATION:case W.KEYPAD_NAVIGATION:n=tr.control;break;case W.ECHO:n=null}var i=[];return-1!==t.indexOf(Q.LEFT)&&i.push(tr.leftBorder),-1!==t.indexOf(Q.BOTTOM)&&i.push(tr.bottomBorder),[tr.buttonBase,n,...i,e===W.ECHO&&tr.echo,this.buttonSizeStyle,...Array.isArray(r)?r:[r]]}))}UNSAFE_componentWillMount(){this.buttonSizeStyle=rr(this.props.heightPx,this.props.widthPx)}componentDidMount(){this._preInjectStyles()}UNSAFE_componentWillUpdate(e,t){e.heightPx===this.props.heightPx&&e.widthPx===this.props.widthPx||(this.buttonSizeStyle=rr(e.heightPx,e.widthPx),this._preInjectStyles())}render(){var{ariaLabel:e,borders:t,childKeys:r,disabled:n,focused:i,icon:s,onTouchCancel:o,onTouchEnd:a,onTouchMove:h,onTouchStart:c,popoverEnabled:p,style:u,type:d}=this.props,m=!n&&i||p||d===W.ECHO,f=this._getButtonStyle(d,t,u),g=this._getFocusStyle(d),v=[tr.iconWrapper,n&&tr.disabled],y={onTouchCancel:o,onTouchEnd:a,onTouchMove:h,onTouchStart:c},b=m&&l.createElement(P,{style:g}),x=!m&&!n&&r&&r.length>0&&l.createElement(tt,{style:tr.decalInset});if(d===W.EMPTY)return l.createElement(P,_({style:f},y));if(d===W.MANY){var w={role:"button",ariaLabel:r[0].ariaLabel},k=r.map((e=>e.icon));return l.createElement(P,_({style:f},y,w),b,l.createElement(P,{style:v},l.createElement(Zt,{icons:k,focused:m})),x)}var C={role:"button",ariaLabel:e};return l.createElement(P,_({style:f},y,C),b,l.createElement(P,{style:v},l.createElement(Vt,{icon:s,focused:m})),x)}}M(er,"propTypes",{ariaLabel:a.a.string,borders:ke,childKeys:a.a.arrayOf(be),disabled:a.a.bool,focused:a.a.bool,heightPx:a.a.number.isRequired,icon:ve,onTouchCancel:a.a.func,onTouchEnd:a.a.func,onTouchMove:a.a.func,onTouchStart:a.a.func,popoverEnabled:a.a.bool,style:a.a.any,type:a.a.oneOf(Object.keys(W)).isRequired,widthPx:a.a.number.isRequired}),M(er,"defaultProps",{borders:K.ALL,childKeys:[],disabled:!1,focused:!1,popoverEnabled:!1});var tr=s.StyleSheet.create({buttonBase:{"-webkit-box-flex":"1",flex:1,cursor:"pointer",userSelect:"none",justifyContent:"center",alignItems:"center",borderColor:q,borderStyle:H,boxSizing:"border-box"},decalInset:{top:4,right:4},echo:{borderColor:"transparent"},value:{backgroundColor:z},operator:{backgroundColor:"#FAFAFA"},control:{backgroundColor:B},empty:{backgroundColor:"#F0F1F2",cursor:"default"},bright:{backgroundColor:R},light:{backgroundColor:"rgba(33, 36, 44, 0.1)"},iconWrapper:{zIndex:1},focusBox:{position:"absolute",zIndex:0,left:4,right:4,bottom:4,top:4,borderRadius:1},disabled:{opacity:.3},leftBorder:{borderLeftWidth:1},bottomBorder:{borderBottomWidth:1}}),rr=(e,t)=>s.StyleSheet.create({buttonSize:{height:e,width:t,maxWidth:t}}).buttonSize,nr=Object(f.connect)((e=>e.layout.buttonDimensions),null,null,{forwardRef:!0})(er),ir=["gestureManager"];class sr extends l.Component{render(){var e=this.props,{gestureManager:t}=e,r=A(e,ir);return l.createElement(nr,_({onTouchStart:e=>t.onTouchStart(e),onTouchEnd:e=>t.onTouchEnd(e),onTouchMove:e=>t.onTouchMove(e),onTouchCancel:e=>t.onTouchCancel(e)},te.NOOP,r))}}M(sr,"propTypes",{gestureManager:a.a.instanceOf(et)});var or=Object(f.connect)((e=>{var{gestures:t}=e;return{gestureManager:t.gestureManager}}),null,null,{forwardRef:!0})(sr),ar=["borders","childKeyIds","disabled","gestureManager","id","style"],lr=["keyConfig"];class hr extends l.Component{shouldComponentUpdate(e){return e.id!==this.props.id||e.gestureManager!==this.props.gestureManager||e.focused!==this.props.focused||e.disabled!==this.props.disabled||e.popoverEnabled!==this.props.popoverEnabled||e.type!==this.props.type||!!e.style}componentWillUnmount(){var{gestureManager:e,id:t}=this.props;e.unregisterDOMNode(t)}render(){var e=this.props,{borders:t,childKeyIds:r,disabled:n,gestureManager:i,id:s,style:o}=e,a=A(e,ar),h=n?{onTouchStart:e=>e.preventDefault()}:{onTouchStart:e=>i.onTouchStart(e,s),onTouchEnd:e=>i.onTouchEnd(e),onTouchMove:e=>i.onTouchMove(e),onTouchCancel:e=>i.onTouchCancel(e)},p=[...Array.isArray(o)?o:[o],cr.preventScrolls];return l.createElement(nr,_({ref:e=>i.registerDOMNode(s,c.a.findDOMNode(e),r,t),borders:t,disabled:n,style:p},h,a))}}M(hr,"propTypes",{borders:ke,childKeyIds:a.a.arrayOf(ye),disabled:a.a.bool,focused:a.a.bool,gestureManager:a.a.instanceOf(et),id:ye.isRequired,popoverEnabled:a.a.bool,style:a.a.any,type:a.a.oneOf(Object.keys(W)).isRequired});var cr=s.StyleSheet.create({preventScrolls:{touchAction:"none"}}),pr=Object(f.connect)(((e,t)=>{var{gestures:r}=e,{keyConfig:n}=t,i=A(t,lr),{id:s,childKeyIds:o,type:a}=n,l=o&&o.map((e=>te[e])),h=a!==W.MANY&&l&&l.length>0;return T(T({},i),{},{childKeyIds:o,gestureManager:r.gestureManager,id:s,focused:r.focus===s,popoverEnabled:r.popover&&r.popover.parentId===s,childKeys:l},(e=>{var{ariaLabel:t,icon:r,type:n}=e;return{ariaLabel:t,icon:r,type:n}})(h?l[0]:n))}),null,null,{forwardRef:!0})(hr),ur=["keys"];class dr extends l.Component{render(){var e=this.props,{keys:t}=e,r=A(e,ur);if(0===t.length)return l.createElement(or,r);if(1===t.length){var n=te[t[0]];return l.createElement(pr,_({keyConfig:n},r))}var i={id:I.MANY,type:W.MANY,childKeyIds:t};return l.createElement(pr,_({keyConfig:i},r))}}M(dr,"propTypes",{keys:a.a.arrayOf(ye).isRequired});class mr extends l.Component{componentDidMount(){var{animationDurationMs:e,onAnimationFinish:t}=this.props;setTimeout((()=>t()),e)}render(){var{borders:e,id:t,initialBounds:r}=this.props,{icon:n}=te[t],i=T({zIndex:2,position:"absolute",pointerEvents:"none"},r);return l.createElement("div",{style:i},l.createElement(nr,{name:t,icon:n,type:W.ECHO,borders:e}))}}M(mr,"propTypes",{animationDurationMs:a.a.number.isRequired,borders:ke,id:ye.isRequired,initialBounds:Ce.isRequired,onAnimationFinish:a.a.func.isRequired});class fr extends l.Component{constructor(){super(...arguments),M(this,"_animationConfigForType",(e=>{var t,r;switch(e){case ee.SLIDE_AND_FADE:t=400,r="echo-slide-and-fade";break;case ee.FADE_ONLY:t=300,r="echo-fade-only";break;case ee.LONG_FADE_ONLY:t=400,r="echo-long-fade-only";break;default:throw new Error("Invalid echo animation type:",e)}return{animationDurationMs:t,animationTransitionName:r}}))}render(){var{echoes:e,onAnimationFinish:t}=this.props;return l.createElement("span",null,Object.keys(ee).map((r=>{var{animationDurationMs:n,animationTransitionName:i}=this._animationConfigForType(r),s=e.filter((e=>e.animationType===r));return l.createElement(b.a,{key:r},s.map((e=>{var{animationId:r}=e;return l.createElement(x.a,{classNames:i,enter:!0,exit:!1,timeout:{enter:n},key:r},l.createElement(mr,_({animationDurationMs:n,onAnimationFinish:()=>t(r)},e)))})))})))}}M(fr,"propTypes",{echoes:a.a.arrayOf(Ee),onAnimationFinish:a.a.func.isRequired});class gr extends l.Component{render(){var{keys:e}=this.props;return l.createElement(P,{style:vr.container},e.map((e=>l.createElement(pr,{key:e.id,keyConfig:e,borders:K.NONE}))))}}M(gr,"propTypes",{keys:a.a.arrayOf(be)});var vr=s.StyleSheet.create({container:{flexDirection:"column-reverse",position:"relative",width:"100%",borderRadius:2,boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",zIndex:1},popoverButton:{backgroundColor:"#FFF",borderWidth:0}});class yr extends l.Component{render(){var{bounds:e,childKeys:t}=this.props,r=T({position:"absolute"},e);return l.createElement("div",{style:r},l.createElement(gr,{keys:t}))}}M(yr,"propTypes",{bounds:Ce.isRequired,childKeys:a.a.arrayOf(be).isRequired});class br extends l.Component{render(){var{popover:e}=this.props;return e?l.createElement(x.a,{in:!0,classNames:"popover",enter:!0,exit:!1,timeout:{enter:200}},l.createElement(yr,{key:e.childKeyIds[0],bounds:e.bounds,childKeys:e.childKeyIds.map((e=>te[e]))})):null}}M(br,"propTypes",{popover:Te});var xr=["initialBounds"];class wr extends l.Component{constructor(){super(...arguments),M(this,"_computeContainer",(()=>{var e=c.a.findDOMNode(this);this._container=e.getBoundingClientRect()})),M(this,"_updateSizeAndPosition",(()=>{this._container=null})),M(this,"_onResize",(()=>{null==this._resizeTimeout&&(this._resizeTimeout=setTimeout((()=>{this._resizeTimeout=null,this._isMounted&&this._updateSizeAndPosition()}),66))}))}componentDidMount(){this._isMounted=!0,window.addEventListener("resize",this._onResize),this._updateSizeAndPosition()}UNSAFE_componentWillReceiveProps(e){this._container||!e.popover&&!e.echoes.length||this._computeContainer()}componentWillUnmount(){this._isMounted=!1,window.removeEventListener("resize",this._onResize)}render(){var{children:e,echoes:t,removeEcho:r,popover:n,style:i}=this.props,s=t.map((e=>{var{initialBounds:t}=e;return T(T({},A(e,xr)),{},{initialBounds:{top:t.top-this._container.top,right:t.right-this._container.left,bottom:t.bottom-this._container.top,left:t.left-this._container.left,width:t.width,height:t.height}})})),o=n&&T(T({},n),{},{bounds:{bottom:this._container.height-(n.bounds.bottom-this._container.top),left:n.bounds.left-this._container.left,width:n.bounds.width}});return l.createElement(P,{style:i},e,l.createElement(fr,{echoes:s,onAnimationFinish:r}),l.createElement(br,{popover:o}))}}M(wr,"propTypes",{children:a.a.oneOfType([a.a.arrayOf(a.a.node),a.a.node]),removeEcho:a.a.func.isRequired,style:a.a.any,active:a.a.bool,echoes:a.a.arrayOf(Ee).isRequired,popover:Te});var kr=Object(f.connect)((e=>T(T({},e.echoes),{},{active:e.keypad.active,popover:e.gestures.popover})),(e=>({removeEcho:t=>{e((e=>({type:"RemoveEcho",animationId:e}))(t))}})),null,{forwardRef:!0})(wr);function Cr(e){var{tintColor:t,type:r}=e;if("Geometry"===r)return l.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.57584 7.09442C7.92723 6.92984 8.3421 6.98339 8.64018 7.23179L26.6402 22.2318C26.9636 22.5013 27.0836 22.9446 26.9403 23.3404C26.7969 23.7363 26.421 24 26 24H8C7.44772 24 7 23.5523 7 23V8.00001C7 7.61199 7.22446 7.259 7.57584 7.09442ZM9 10.1351V17H13C13.5523 17 14 17.4477 14 18V22H23.238L9 10.1351ZM12 22V19H9V22H12Z",fill:t}));if("Operators"===r)return l.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29 6H30V7H29V6ZM27 6C27 4.89543 27.8954 4 29 4H30C31.1046 4 32 4.89543 32 6V7C32 8.10457 31.1046 9 30 9H29C27.8954 9 27 8.10457 27 7V6ZM11.1318 6.50386C11.3098 6.19229 11.6411 6 12 6H14C14.5523 6 15 6.44772 15 7C15 7.55228 14.5523 8 14 8H12.5803L8.86824 14.4961C8.68527 14.8163 8.34091 15.0098 7.97225 14.9996C7.6036 14.9894 7.2705 14.7771 7.10557 14.4472L5.10557 10.4472C4.85858 9.95324 5.05881 9.35256 5.55279 9.10557C6.04676 8.85858 6.64744 9.05881 6.89443 9.55279L8.0588 11.8815L11.1318 6.50386ZM7.70676 16.2925C8.09748 16.6829 8.09779 17.316 7.70745 17.7068C7.28543 18.1292 6.84383 18.7303 6.51157 19.3658C6.17039 20.0184 6 20.601 6 21C6 21.3789 6.17235 21.9897 6.51638 22.6649C6.85315 23.3259 7.28488 23.9121 7.66786 24.2557C8.07892 24.6246 8.11314 25.2568 7.74429 25.6679C7.37544 26.0789 6.7432 26.1131 6.33214 25.7443C5.7161 25.1915 5.14783 24.3844 4.73434 23.5728C4.32813 22.7755 3.99999 21.8345 4 21C4.00001 20.1391 4.3301 19.2217 4.73917 18.4392C5.15715 17.6397 5.71554 16.8708 6.29255 16.2932C6.68288 15.9025 7.31605 15.9022 7.70676 16.2925ZM11.2932 16.2925C11.684 15.9022 12.3171 15.9025 12.7075 16.2932C13.2845 16.8708 13.8428 17.6397 14.2608 18.4392C14.6699 19.2217 15 20.1391 15 21C15 21.8345 14.6719 22.7755 14.2657 23.5728C13.8522 24.3844 13.2839 25.1915 12.6679 25.7443C12.2568 26.1131 11.6246 26.0789 11.2557 25.6679C10.8869 25.2568 10.9211 24.6246 11.3321 24.2557C11.7151 23.9121 12.1469 23.3259 12.4836 22.6649C12.8276 21.9897 13 21.3789 13 21C13 20.601 12.8296 20.0184 12.4884 19.3658C12.1562 18.7303 11.7146 18.1292 11.2925 17.7068C10.9022 17.316 10.9025 16.6829 11.2932 16.2925ZM27.9363 17.6489C28.1302 18.166 27.8682 18.7424 27.3511 18.9363L21.848 21L27.3511 23.0637C27.8682 23.2576 28.1302 23.834 27.9363 24.3511C27.7424 24.8682 27.166 25.1302 26.6489 24.9363L18.6489 21.9363C18.2586 21.79 18 21.4168 18 21C18 20.5832 18.2586 20.21 18.6489 20.0637L26.6489 17.0637C27.166 16.8698 27.7424 17.1318 27.9363 17.6489ZM21 8V13H24V8H21ZM20 6C19.4477 6 19 6.44772 19 7V14C19 14.5523 19.4477 15 20 15H25C25.5523 15 26 14.5523 26 14V7C26 6.44772 25.5523 6 25 6H20Z",fill:t}));if("Numbers"===r)return l.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M10.4123 19.5794V21.0004H4.71434V19.5794H6.73034V14.0214C6.73034 13.9001 6.73267 13.7764 6.73734 13.6504C6.742 13.5244 6.749 13.3961 6.75834 13.2654L5.42834 14.3714C5.335 14.4414 5.244 14.4858 5.15534 14.5044C5.06667 14.5231 4.98267 14.5254 4.90334 14.5114C4.824 14.4928 4.754 14.4648 4.69334 14.4274C4.63267 14.3854 4.586 14.3434 4.55334 14.3014L3.94434 13.4824L7.06634 10.8364H8.65534V19.5794H10.4123ZM18.7924 19.2294C19.0024 19.2294 19.1658 19.2878 19.2824 19.4044C19.4038 19.5211 19.4644 19.6751 19.4644 19.8664V21.0004H12.4224V20.3704C12.4224 20.2491 12.4481 20.1184 12.4994 19.9784C12.5508 19.8338 12.6371 19.7031 12.7584 19.5864L15.7684 16.5694C16.0251 16.3128 16.2514 16.0678 16.4474 15.8344C16.6434 15.5964 16.8068 15.3654 16.9374 15.1414C17.0681 14.9128 17.1661 14.6818 17.2314 14.4484C17.2968 14.2151 17.3294 13.9701 17.3294 13.7134C17.3294 13.2608 17.2128 12.9178 16.9794 12.6844C16.7461 12.4464 16.4171 12.3274 15.9924 12.3274C15.8058 12.3274 15.6331 12.3554 15.4744 12.4114C15.3204 12.4628 15.1804 12.5351 15.0544 12.6284C14.9331 12.7218 14.8281 12.8314 14.7394 12.9574C14.6508 13.0834 14.5854 13.2211 14.5434 13.3704C14.4594 13.6038 14.3451 13.7601 14.2004 13.8394C14.0604 13.9141 13.8598 13.9304 13.5984 13.8884L12.5764 13.7064C12.6511 13.2118 12.7911 12.7778 12.9964 12.4044C13.2018 12.0311 13.4584 11.7208 13.7664 11.4734C14.0744 11.2261 14.4268 11.0418 14.8234 10.9204C15.2201 10.7944 15.6471 10.7314 16.1044 10.7314C16.5851 10.7314 17.0214 10.8038 17.4134 10.9484C17.8101 11.0884 18.1484 11.2868 18.4284 11.5434C18.7084 11.7954 18.9254 12.1011 19.0794 12.4604C19.2334 12.8198 19.3104 13.2164 19.3104 13.6504C19.3104 14.0238 19.2568 14.3691 19.1494 14.6864C19.0421 15.0038 18.8951 15.3071 18.7084 15.5964C18.5264 15.8811 18.3141 16.1588 18.0714 16.4294C17.8288 16.7001 17.5721 16.9731 17.3014 17.2484L15.1454 19.4534C15.3834 19.3834 15.6191 19.3298 15.8524 19.2924C16.0858 19.2504 16.3051 19.2294 16.5104 19.2294H18.7924ZM21.4535 13.7064C21.5282 13.2118 21.6682 12.7778 21.8735 12.4044C22.0789 12.0311 22.3355 11.7208 22.6435 11.4734C22.9515 11.2261 23.3015 11.0418 23.6935 10.9204C24.0902 10.7944 24.5172 10.7314 24.9745 10.7314C25.4599 10.7314 25.8939 10.8014 26.2765 10.9414C26.6639 11.0768 26.9905 11.2634 27.2565 11.5014C27.5225 11.7394 27.7255 12.0171 27.8655 12.3344C28.0102 12.6518 28.0825 12.9924 28.0825 13.3564C28.0825 13.6784 28.0475 13.9631 27.9775 14.2104C27.9122 14.4531 27.8119 14.6654 27.6765 14.8474C27.5459 15.0294 27.3825 15.1834 27.1865 15.3094C26.9952 15.4354 26.7735 15.5404 26.5215 15.6244C27.6882 16.0071 28.2715 16.7841 28.2715 17.9554C28.2715 18.4734 28.1759 18.9308 27.9845 19.3274C27.7932 19.7194 27.5365 20.0484 27.2145 20.3144C26.8925 20.5804 26.5169 20.7811 26.0875 20.9164C25.6629 21.0471 25.2172 21.1124 24.7505 21.1124C24.2559 21.1124 23.8195 21.0564 23.4415 20.9444C23.0635 20.8324 22.7299 20.6644 22.4405 20.4404C22.1559 20.2164 21.9109 19.9364 21.7055 19.6004C21.5002 19.2598 21.3205 18.8631 21.1665 18.4104L22.0205 18.0604C22.2445 17.9671 22.4522 17.9414 22.6435 17.9834C22.8395 18.0254 22.9795 18.1281 23.0635 18.2914C23.1569 18.4688 23.2549 18.6321 23.3575 18.7814C23.4649 18.9308 23.5839 19.0614 23.7145 19.1734C23.8452 19.2808 23.9922 19.3648 24.1555 19.4254C24.3235 19.4861 24.5149 19.5164 24.7295 19.5164C25.0002 19.5164 25.2359 19.4721 25.4365 19.3834C25.6372 19.2948 25.8052 19.1804 25.9405 19.0404C26.0759 18.8958 26.1762 18.7348 26.2415 18.5574C26.3115 18.3754 26.3465 18.1958 26.3465 18.0184C26.3465 17.7851 26.3255 17.5751 26.2835 17.3884C26.2415 17.1971 26.1435 17.0361 25.9895 16.9054C25.8402 16.7701 25.6162 16.6674 25.3175 16.5974C25.0235 16.5228 24.6222 16.4854 24.1135 16.4854V15.1274C24.5382 15.1274 24.8859 15.0924 25.1565 15.0224C25.4272 14.9524 25.6395 14.8544 25.7935 14.7284C25.9475 14.6024 26.0525 14.4508 26.1085 14.2734C26.1692 14.0961 26.1995 13.9024 26.1995 13.6924C26.1995 13.2491 26.0829 12.9108 25.8495 12.6774C25.6209 12.4441 25.2942 12.3274 24.8695 12.3274C24.6829 12.3274 24.5102 12.3554 24.3515 12.4114C24.1975 12.4628 24.0575 12.5351 23.9315 12.6284C23.8102 12.7218 23.7052 12.8314 23.6165 12.9574C23.5279 13.0834 23.4625 13.2211 23.4205 13.3704C23.3319 13.6038 23.2175 13.7601 23.0775 13.8394C22.9375 13.9141 22.7345 13.9304 22.4685 13.8884L21.4535 13.7064Z",fill:t}));throw new Error("Invalid icon type")}var Er=s.StyleSheet.create({base:{display:"flex",width:44,height:38,boxSizing:"border-box",borderRadius:3,border:"1px solid transparent",marginRight:1,marginLeft:1},hovered:{background:"linear-gradient(0deg, rgba(24, 101, 242, 0.32), rgba(24, 101, 242, 0.32)), ".concat(n.default.white),border:"1px solid #1865F2"},pressed:{background:"#1B50B3"},focused:{outline:"none",border:"2px solid ".concat(n.default.blue)},innerBox:{boxSizing:"border-box",border:"1px solid transparent",borderRadius:2,display:"flex",flex:1,justifyContent:"center",alignItems:"center"},innerBoxPressed:{border:"1px solid ".concat(n.default.white)},activeIndicator:{position:"absolute",boxSizing:"border-box",bottom:3,width:36,height:3,marginLeft:3}});class Sr extends l.Component{render(){var{onClick:e,itemType:t,itemState:r}=this.props;return l.createElement(k.default,{onClick:e,disabled:"disabled"===r},(e=>{var{hovered:i,focused:s,pressed:o}=e,a=function(e,t,r,i){return"disabled"===e?n.default.offBlack64:i?n.default.white:"active"===e||t?n.default.blue:n.default.offBlack64}(r,i,0,o);return l.createElement(w.View,{style:[Er.base,"disabled"!==r&&i&&Er.hovered,s&&Er.focused,o&&Er.pressed]},l.createElement(w.View,{style:[Er.innerBox,o&&Er.innerBoxPressed]},l.createElement(Cr,{type:t,tintColor:a})),"active"===r&&l.createElement(w.View,{style:[Er.activeIndicator,{backgroundColor:a}]}))}))}}var Tr=s.StyleSheet.create({tabbar:{display:"flex",flexDirection:"row",background:n.default.offWhite,paddingTop:2,paddingBottom:2,borderTop:"1px solid ".concat(n.default.offBlack50),borderBottom:"1px solid ".concat(n.default.offBlack50)}});class Mr extends l.Component{constructor(){super(...arguments),M(this,"state",{selectedItem:0})}render(){var{items:e,onSelect:t}=this.props;return l.createElement(w.View,{style:Tr.tabbar},e.map(((e,r)=>l.createElement(Sr,{key:"tabbar-item-".concat(r),itemState:r===this.state.selectedItem?"active":"inactive",itemType:e,onClick:()=>{this.setState({selectedItem:r}),t(e)}}))))}}var{column:_r,row:Ar,fullWidth:Ir}=it;class Or extends l.Component{constructor(){super(...arguments),M(this,"state",{selectedPage:"Numbers"})}render(){var{leftPage:e,paginationEnabled:t,rightPage:r}=this.props,{selectedPage:n}=this.state;return t?l.createElement(kr,{style:[_r,Nr.keypad]},l.createElement(Mr,{items:["Numbers","Operators"],onSelect:e=>{this.setState({selectedPage:e})}}),l.createElement(P,{style:Nr.borderTop},"Numbers"===n&&r,"Operators"===n&&e)):l.createElement(kr,{style:Nr.keypad},l.createElement(P,{style:Ar},l.createElement(P,{style:Ir},e),l.createElement(P,{style:[Nr.borderLeft,Ir]},r)))}}M(Or,"propTypes",{currentPage:a.a.oneOf([0,1]).isRequired,leftPage:a.a.node.isRequired,paginationEnabled:a.a.bool.isRequired,rightPage:a.a.node.isRequired});var Nr=s.StyleSheet.create({keypad:{backgroundColor:F},borderTop:{borderTop:"".concat(1,"px ").concat(H," ")+"".concat(q)},borderLeft:{borderLeft:"".concat(1,"px ").concat(H," ")+"".concat(q),boxSizing:"content-box"}}),Pr=Object(f.connect)((e=>({paginationEnabled:e.layout.paginationEnabled})),null,null,{forwardRef:!0})(Or),{row:Rr,column:Lr,oneColumn:Fr,fullWidth:Dr,roundedTopLeft:zr,roundedTopRight:Br}=it;class qr extends l.Component{render(){var e,{currentPage:t,cursorContext:r,dynamicJumpOut:n,extraKeys:i,roundTopLeft:s,roundTopRight:o}=this.props;if(n)switch(r){case ce:e=te.JUMP_OUT_PARENTHESES;break;case pe:e=te.JUMP_OUT_EXPONENT;break;case ue:e=te.JUMP_OUT_BASE;break;case fe:e=te.JUMP_INTO_NUMERATOR;break;case de:e=te.JUMP_OUT_NUMERATOR;break;case me:e=te.JUMP_OUT_DENOMINATOR;break;default:e=te.DISMISS}else e=te.DISMISS;var a=[Rr,Dr,Hr.rightPage,o&&Br],h=l.createElement(P,{style:a},l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.NUM_7,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_4,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_1,borders:K.BOTTOM}),l.createElement(dr,{keys:i,borders:K.NONE})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.NUM_8,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_5,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_2,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_0,borders:K.LEFT})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.NUM_9,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_6,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_3,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.DECIMAL,borders:K.LEFT})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.DIVIDE,borders:K.LEFT}),l.createElement(pr,{keyConfig:te.TIMES,borders:K.LEFT}),l.createElement(pr,{keyConfig:te.MINUS,borders:K.LEFT}),l.createElement(pr,{keyConfig:te.PLUS,borders:K.LEFT})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.FRAC,style:o&&Br}),l.createElement(pr,{keyConfig:te.CDOT}),l.createElement(pr,{keyConfig:te.BACKSPACE,borders:K.LEFT}),l.createElement(pr,{keyConfig:e,borders:K.LEFT}))),c=[Rr,Dr,Hr.leftPage,s&&zr],p=l.createElement(P,{style:c},l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.EXP_2,borders:K.NONE,style:s&&zr}),l.createElement(pr,{keyConfig:te.SQRT,borders:K.NONE}),l.createElement(pr,{keyConfig:te.LOG,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.SIN,borders:K.NONE})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.EXP_3,borders:K.NONE}),l.createElement(pr,{keyConfig:te.CUBE_ROOT,borders:K.NONE}),l.createElement(pr,{keyConfig:te.LN,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.COS,borders:K.NONE})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.EXP,borders:K.NONE}),l.createElement(pr,{keyConfig:te.RADICAL,borders:K.NONE}),l.createElement(pr,{keyConfig:te.LOG_N,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.TAN,borders:K.NONE})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.GEQ,borders:K.LEFT}),l.createElement(pr,{keyConfig:te.EQUAL,borders:K.LEFT}),l.createElement(pr,{keyConfig:te.LEQ}),l.createElement(pr,{keyConfig:te.LEFT_PAREN,borders:K.LEFT})),l.createElement(P,{style:[Lr,Fr]},l.createElement(pr,{keyConfig:te.GT,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NEQ,borders:K.NONE}),l.createElement(pr,{keyConfig:te.LT,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.RIGHT_PAREN,borders:K.NONE})));return l.createElement(Pr,{currentPage:t,rightPage:h,leftPage:p})}}M(qr,"propTypes",{currentPage:a.a.number.isRequired,cursorContext:Se.isRequired,dynamicJumpOut:a.a.bool,extraKeys:a.a.arrayOf(ye),roundTopLeft:a.a.bool,roundTopRight:a.a.bool}),M(qr,"rows",4),M(qr,"columns",5),M(qr,"maxVisibleRows",4),M(qr,"numPages",2);var Hr=s.StyleSheet.create({rightPage:{backgroundColor:z},leftPage:{backgroundColor:B}}),Ur=Object(f.connect)((e=>({currentPage:e.pager.currentPage,cursorContext:e.input.cursor.context,dynamicJumpOut:!e.layout.navigationPadEnabled})),null,null,{forwardRef:!0})(qr),{row:Wr,roundedTopLeft:jr,roundedTopRight:Gr}=it;class Vr extends l.Component{render(){var e,{cursorContext:t,dynamicJumpOut:r,roundTopLeft:n,roundTopRight:i}=this.props;if(r)switch(t){case ce:e=te.JUMP_OUT_PARENTHESES;break;case pe:e=te.JUMP_OUT_EXPONENT;break;case ue:e=te.JUMP_OUT_BASE;break;case fe:e=te.JUMP_INTO_NUMERATOR;break;case de:e=te.JUMP_OUT_NUMERATOR;break;case me:e=te.JUMP_OUT_DENOMINATOR;break;default:e=te.DISMISS}else e=te.DISMISS;return l.createElement(kr,null,l.createElement(P,{style:Wr},l.createElement(pr,{keyConfig:te.NUM_7,borders:K.NONE,style:n&&jr}),l.createElement(pr,{keyConfig:te.NUM_8,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_9,borders:K.NONE}),l.createElement(pr,{keyConfig:te.FRAC,disabled:t===de||t===me,style:i&&Gr})),l.createElement(P,{style:Wr},l.createElement(pr,{keyConfig:te.NUM_4,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_5,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_6,borders:K.NONE}),l.createElement(pr,{keyConfig:te.PERCENT})),l.createElement(P,{style:Wr},l.createElement(pr,{keyConfig:te.NUM_1,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.NUM_2,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_3,borders:K.BOTTOM}),l.createElement(pr,{keyConfig:te.BACKSPACE,borders:K.LEFT})),l.createElement(P,{style:Wr},l.createElement(pr,{keyConfig:te.NEGATIVE,borders:K.NONE}),l.createElement(pr,{keyConfig:te.NUM_0,borders:K.LEFT}),l.createElement(pr,{keyConfig:te.DECIMAL,borders:K.LEFT}),l.createElement(pr,{keyConfig:e,borders:K.LEFT})))}}M(Vr,"propTypes",{cursorContext:Se.isRequired,dynamicJumpOut:a.a.bool,roundTopLeft:a.a.bool,roundTopRight:a.a.bool}),M(Vr,"rows",4),M(Vr,"columns",4),M(Vr,"maxVisibleRows",5),M(Vr,"numPages",1);var Yr=Object(f.connect)((e=>({cursorContext:e.input.cursor.context,dynamicJumpOut:!e.layout.navigationPadEnabled})),null,null,{forwardRef:!0})(Vr);class Xr{constructor(e){this.options=T({velocityTimeout:100},e),this._events=[]}push(e){this._events.push({x:e,t:E()()})}getVelocity(){var e=this._getEvents();if(e.length<2)return 0;var t=e[e.length-1],r=e[0],n=t.t-r.t;return(t.x-r.x)/n}_getEvents(){var e=E()()-this.options.velocityTimeout,t=this._events.filter((t=>t.t>e));return this._events=[],t}}var Qr={[U.FRACTION]:Yr,[U.EXPRESSION]:Ur},Kr=()=>{var e={keyHandler:null,cursor:{context:he}},t=U.EXPRESSION,r={extraKeys:["x","y",I.THETA,I.PI],keypadType:t,active:!1},n=e=>e-1,i={animateToPosition:!1,currentPage:n(Qr[t].numPages),dx:0,numPages:Qr[t].numPages,pageWidthPx:0,velocityTracker:new Xr},s=e=>new et({swipeEnabled:e},{onSwipeChange:e=>{u.dispatch({type:"OnSwipeChange",dx:e})},onSwipeEnd:e=>{u.dispatch({type:"OnSwipeEnd",dx:e})},onActiveNodesChanged:e=>{u.dispatch({type:"SetActiveNodes",activeNodes:e})},onClick:(e,t,r)=>{u.dispatch(T(T({type:"PressKey",key:e},t),{},{inPopover:r}))}},[],[I.BACKSPACE,I.UP,I.RIGHT,I.DOWN,I.LEFT]),o={popover:null,focus:null,gestureManager:s(Qr[t].numPages>1)},a=0,l={echoes:[]},h={gridDimensions:{numRows:Qr[t].rows,numColumns:Qr[t].columns,numMaxVisibleRows:Qr[t].maxVisibleRows,numPages:Qr[t].numPages},buttonDimensions:{widthPx:48,heightPx:48},pageDimensions:{pageWidthPx:0,pageHeightPx:0},layoutMode:X.FULLSCREEN,paginationEnabled:!1,navigationPadEnabled:!1},c=(e,t)=>{var{pageWidthPx:r,pageHeightPx:n}=e,i=r>n?j:G,s=Math.min(r,n)>600?Y:V,o=s===Y,a=s===V&&i===G;return T(T({},((e,t,r,n)=>{var i,{numColumns:s,numMaxVisibleRows:o,numPages:a}=e,{pageWidthPx:l,pageHeightPx:h}=t,{deviceOrientation:c,deviceType:p}=r,{navigationPadEnabled:u,paginationEnabled:d,toolbarEnabled:m}=n,f=d?s:s*a;if(p===V){var g=c===j,v=(g?h:l/.7339449541284404)-(32+(g?88:64)+(m?60:0)+(d?16:0));i={widthPx:a>1?l/(d?s:s*a):g?64:l/s,heightPx:Math.max(Math.min(v/o,64),48)}}else{if(p!==Y)throw new Error("Invalid device type: "+p);i={widthPx:64,heightPx:64}}var y=(u?1:0)+(d?0:a-1);return{buttonDimensions:i,layoutMode:f*i.widthPx+(u?192:0)+1*y>=l?X.FULLSCREEN:X.COMPACT}})(t,e,{deviceOrientation:i,deviceType:s},{navigationPadEnabled:o,paginationEnabled:a,toolbarEnabled:!0})),{},{navigationPadEnabled:o,paginationEnabled:a})},p=g.combineReducers({input:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SetKeyHandler":return T(T({},t),{},{keyHandler:r.keyHandler});case"PressKey":var n=te[r.key];return n.type!==W.KEYPAD_NAVIGATION?T(T({},t),{},{cursor:t.keyHandler(n.id)}):t;case"SetCursor":return T(T({},t),{},{cursor:r.cursor});default:return t}},keypad:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"DismissKeypad":return T(T({},t),{},{active:!1});case"ActivateKeypad":return T(T({},t),{},{active:!0});case"ConfigureKeypad":return T(T({},t),{},{extraKeys:[]},n.configuration);case"PressKey":var i=te[n.key];return i.id===I.DISMISS?e(t,{type:"DismissKeypad"}):t;default:return t}},pager:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"ConfigureKeypad":var{keypadType:s}=r.configuration,{numPages:o}=Qr[s];return T(T({},t),{},{numPages:o,animateToPosition:!1,currentPage:n(o),dx:0});case"SetPageSize":return T(T({},t),{},{pageWidthPx:r.pageWidthPx});case"PressKey":var a=te[r.key];return a.type===W.VALUE||a.type===W.OPERATOR?e(t,{type:"ResetKeypadPage"}):t;case"ResetKeypadPage":return T(T({},t),{},{animateToPosition:!0,currentPage:n(t.numPages),dx:0});case"PageKeypadRight":var l=Math.min(t.currentPage+1,t.numPages-1);return T(T({},t),{},{animateToPosition:!0,currentPage:l,dx:0});case"PageKeypadLeft":var h=Math.max(t.currentPage-1,0);return T(T({},t),{},{animateToPosition:!0,currentPage:h,dx:0});case"OnSwipeChange":return t.velocityTracker.push(r.dx),T(T({},t),{},{animateToPosition:!1,dx:r.dx});case"OnSwipeEnd":var{pageWidthPx:c,velocityTracker:p}=t,{dx:u}=r,d=p.getVelocity(),m=.1,f=10,g=u<-c/2||d<-m&&u<-f,v=u>c/2||d>m&&u>f;return g?e(t,{type:"PageKeypadRight"}):v?e(t,{type:"PageKeypadLeft"}):T(T({},t),{},{animateToPosition:!0,dx:0});default:return t}},gestures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DismissKeypad":return e.gestureManager.disableEventTracking(),e;case"ActivateKeypad":return e.gestureManager.enableEventTracking(),e;case"SetActiveNodes":return T(T({},e),t.activeNodes);case"ConfigureKeypad":var{keypadType:r}=t.configuration,{numPages:n}=Qr[r],i=n>1;return{popover:null,focus:null,gestureManager:s(i)};default:return e}},echoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PressKey":var r=te[t.key];return r.type===W.VALUE||r.type===W.OPERATOR?T(T({},e),{},{echoes:[...e.echoes,{animationId:""+a++,animationType:t.inPopover?ee.LONG_FADE_ONLY:ee.FADE_ONLY,borders:t.borders,id:r.id,initialBounds:t.initialBounds}]}):e;case"RemoveEcho":var n=e.echoes.filter((e=>e.animationId!==t.animationId));return T(T({},e),{},{echoes:n});default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ConfigureKeypad":var{keypadType:r}=t.configuration,n={numRows:Qr[r].rows,numColumns:Qr[r].columns,numMaxVisibleRows:Qr[r].maxVisibleRows,numPages:Qr[r].numPages};return T(T(T({},e),c(e.pageDimensions,n)),{},{gridDimensions:n});case"SetPageSize":var{pageWidthPx:i,pageHeightPx:s}=t,o={pageWidthPx:i,pageHeightPx:s};return T(T(T({},e),c(o,e.gridDimensions)),{},{pageDimensions:o});default:return e}}}),u=g.createStore(p);return u},{row:$r,column:Zr,centered:Jr,stretch:en,roundedTopLeft:tn}=it;class rn extends l.Component{render(){var{roundTopLeft:e,style:t}=this.props,r=[Zr,Jr,nn.container,e&&tn,...Array.isArray(t)?t:[t]];return l.createElement(P,{style:r},l.createElement(P,{style:[$r,Jr]},l.createElement(pr,{keyConfig:te.UP,borders:K.NONE,style:[nn.navigationKey,nn.topArrow]})),l.createElement(P,{style:[$r,Jr,en]},l.createElement(pr,{keyConfig:te.LEFT,borders:K.NONE,style:[nn.navigationKey,nn.leftArrow]}),l.createElement(P,{style:nn.horizontalSpacer}),l.createElement(pr,{keyConfig:te.RIGHT,borders:K.NONE,style:[nn.navigationKey,nn.rightArrow]})),l.createElement(P,{style:[$r,Jr]},l.createElement(pr,{keyConfig:te.DOWN,borders:K.NONE,style:[nn.navigationKey,nn.bottomArrow]})))}}M(rn,"propTypes",{roundTopLeft:a.a.bool,style:a.a.any});var nn=s.StyleSheet.create({container:{backgroundColor:B,width:192},navigationKey:{borderColor:F,backgroundColor:z,width:48,height:48,boxSizing:"content-box"},topArrow:{borderTopWidth:1,borderLeftWidth:1,borderRightWidth:1,borderTopLeftRadius:4,borderTopRightRadius:4},rightArrow:{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderTopRightRadius:4,borderBottomRightRadius:4},bottomArrow:{borderBottomWidth:1,borderLeftWidth:1,borderRightWidth:1,borderBottomLeftRadius:4,borderBottomRightRadius:4},leftArrow:{borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:1,borderTopLeftRadius:4,borderBottomLeftRadius:4},horizontalSpacer:{background:z,width:48}}),{row:sn,centered:on,fullWidth:an}=it;class ln extends l.Component{constructor(){super(...arguments),M(this,"state",{hasBeenActivated:!1,viewportWidth:"100vw"}),M(this,"_throttleResizeHandler",(()=>{null==this._resizeTimeout&&(this._resizeTimeout=setTimeout((()=>{this._resizeTimeout=null,this._onResize()}),66))})),M(this,"_onResize",(()=>{this.setState({viewportWidth:window.innerWidth}),this.props.onPageSizeChange(window.innerWidth,window.innerHeight)})),M(this,"renderKeypad",(()=>{var{extraKeys:e,keypadType:t,layoutMode:r,navigationPadEnabled:n}=this.props,i={extraKeys:e,roundTopLeft:r===X.COMPACT&&!n,roundTopRight:r===X.COMPACT};switch(t){case U.FRACTION:return l.createElement(Yr,i);case U.EXPRESSION:return l.createElement(Ur,i);default:throw new Error("Invalid keypad type: "+t)}}))}UNSAFE_componentWillMount(){this.props.active&&this.setState({hasBeenActivated:this.props.active})}componentDidMount(){this._onResize(),window.addEventListener("resize",this._throttleResizeHandler),window.addEventListener("orientationchange",this._throttleResizeHandler)}UNSAFE_componentWillReceiveProps(e){!this.state.hasBeenActivated&&e.active&&this.setState({hasBeenActivated:!0})}componentDidUpdate(e){e.active&&!this.props.active&&this.props.onDismiss&&this.props.onDismiss()}componentWillUnmount(){window.removeEventListener("resize",this._throttleResizeHandler),window.removeEventListener("orientationchange",this._throttleResizeHandler)}render(){var{active:e,layoutMode:t,navigationPadEnabled:r,onElementMounted:n,style:i}=this.props,{hasBeenActivated:s}=this.state,o=T(T({},e?cn.active:cn.hidden),e||s?{}:cn.invisible),a=[sn,on,an,hn.keypadContainer,...Array.isArray(i)?i:[i]],h=[sn,hn.keypadBorder,t===X.FULLSCREEN?hn.fullscreen:hn.compact];return l.createElement(P,{style:a,dynamicStyle:o,extraClassName:"keypad-container"},l.createElement(P,{style:h,ref:e=>{!this.hasMounted&&e&&(this.hasMounted=!0,n(e))}},r&&l.createElement(rn,{roundTopLeft:t===X.COMPACT,style:hn.navigationPadContainer}),l.createElement(P,{style:hn.keypadLayout},this.renderKeypad())))}}M(ln,"propTypes",{active:a.a.bool,extraKeys:a.a.arrayOf(ye),keypadType:a.a.oneOf(Object.keys(U)).isRequired,layoutMode:a.a.oneOf(Object.keys(X)).isRequired,navigationPadEnabled:a.a.bool.isRequired,onDismiss:a.a.func,onElementMounted:a.a.func,onPageSizeChange:a.a.func.isRequired,style:a.a.any});var hn=s.StyleSheet.create({keypadContainer:{bottom:0,left:0,right:0,position:"fixed",transition:"".concat(300,"ms ease-out"),transitionProperty:"transform",zIndex:1060},keypadBorder:{boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.1)",borderColor:"rgba(0, 0, 0, 0.2)",borderStyle:"solid"},fullscreen:{borderTopWidth:1},compact:{borderTopRightRadius:4,borderTopLeftRadius:4,borderTopWidth:1,borderRightWidth:1,borderLeftWidth:1},navigationPadContainer:{borderRight:"".concat(1,"px ").concat(H," ")+"".concat(q),boxSizing:"content-box"},keypadLayout:{flexGrow:1,flexBasis:"0%"}}),cn={invisible:{visibility:"hidden"},hidden:{msTransform:"translate3d(0, 100%, 0)",WebkitTransform:"translate3d(0, 100%, 0)",transform:"translate3d(0, 100%, 0)"},active:{msTransform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)"}},pn=Object(f.connect)((e=>T(T({},e.keypad),{},{layoutMode:e.layout.layoutMode,navigationPadEnabled:e.layout.navigationPadEnabled})),(e=>({onPageSizeChange:(t,r)=>{e(((e,t)=>({type:"SetPageSize",pageWidthPx:e,pageHeightPx:t}))(t,r))}})),null,{forwardRef:!0})(ln),un=["onElementMounted"];class dn extends l.Component{constructor(){super(...arguments),M(this,"mounted",void 0),M(this,"store",void 0),M(this,"activate",(()=>{this.store.dispatch({type:"ActivateKeypad"})})),M(this,"dismiss",(()=>{this.store.dispatch({type:"DismissKeypad"})})),M(this,"configure",((e,t)=>{this.store.dispatch((e=>({type:"ConfigureKeypad",configuration:e}))(e)),setTimeout((()=>t&&t()))})),M(this,"setCursor",(e=>{this.store.dispatch((e=>({type:"SetCursor",cursor:e}))(e))})),M(this,"setKeyHandler",(e=>{this.store.dispatch((e=>({type:"SetKeyHandler",keyHandler:e}))(e))})),M(this,"getDOMNode",(()=>c.a.findDOMNode(this)))}UNSAFE_componentWillMount(){this.store=Kr()}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){var e=this.props,{onElementMounted:t}=e,r=A(e,un);return l.createElement(f.Provider,{store:this.store},l.createElement(pn,_({onElementMounted:e=>{var r=T(T({},e),{},{activate:this.activate,dismiss:this.dismiss,configure:this.configure,setCursor:this.setCursor,setKeyHandler:this.setKeyHandler,getDOMNode:this.getDOMNode});t&&t(r)}},r)))}}},HdAV:function(e,t,r){(function(t){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-i)/1e6},n=t.hrtime,i=(r=function(){var e;return 1e9*(e=n())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,r("8oxB"))},"Oy/b":function(e,t,r){var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){},function(e,t,r){"use strict";r.r(t),r(0);var n=function(){function e(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}return e.range=function(t,r){return r?t&&t.loc&&r.loc&&t.loc.lexer===r.loc.lexer?new e(t.loc.lexer,t.loc.start,r.loc.end):null:t&&t.loc},e}(),i=function(){function e(e,t){this.text=void 0,this.loc=void 0,this.text=e,this.loc=t}return e.prototype.range=function(t,r){return new e(r,n.range(this,t))},e}(),s=function e(t,r){this.position=void 0;var n,i="KaTeX parse error: "+t,s=r&&r.loc;if(s&&s.start<=s.end){var o=s.lexer.input;n=s.start;var a=s.end;n===o.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var l=o.slice(n,a).replace(/[^]/g,"$&̲");i+=(n>15?"…"+o.slice(n-15,n):o.slice(0,n))+l+(a+15<o.length?o.slice(a,a+15)+"…":o.slice(a))}var h=new Error(i);return h.name="ParseError",h.__proto__=e.prototype,h.position=n,h};s.prototype.__proto__=Error.prototype;var o=s,a=/([A-Z])/g,l={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},h=/[&><"']/g,c=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},p={contains:function(e,t){return-1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(h,(function(e){return l[e]}))},hyphenate:function(e){return e.replace(a,"-$1").toLowerCase()},getBaseElem:c,isCharacterBox:function(e){var t=c(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return null!=t?t[1]:"_relative"}},u=function(){function e(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,e=e||{},this.displayMode=p.deflt(e.displayMode,!1),this.output=p.deflt(e.output,"htmlAndMathml"),this.leqno=p.deflt(e.leqno,!1),this.fleqn=p.deflt(e.fleqn,!1),this.throwOnError=p.deflt(e.throwOnError,!0),this.errorColor=p.deflt(e.errorColor,"#cc0000"),this.macros=e.macros||{},this.minRuleThickness=Math.max(0,p.deflt(e.minRuleThickness,0)),this.colorIsTextColor=p.deflt(e.colorIsTextColor,!1),this.strict=p.deflt(e.strict,"warn"),this.trust=p.deflt(e.trust,!1),this.maxSize=Math.max(0,p.deflt(e.maxSize,1/0)),this.maxExpand=Math.max(0,p.deflt(e.maxExpand,1e3))}var t=e.prototype;return t.reportNonstrict=function(e,t,r){var n=this.strict;if("function"==typeof n&&(n=n(e,t,r)),n&&"ignore"!==n){if(!0===n||"error"===n)throw new o("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",r);"warn"===n?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]")}},t.useStrictBehavior=function(e,t,r){var n=this.strict;if("function"==typeof n)try{n=n(e,t,r)}catch(e){n="error"}return!(!n||"ignore"===n||!0!==n&&"error"!==n&&("warn"===n?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]"),1)))},t.isTrusted=function(e){e.url&&!e.protocol&&(e.protocol=p.protocolFromUrl(e.url));var t="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(t)},e}(),d=function(){function e(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}var t=e.prototype;return t.sup=function(){return m[f[this.id]]},t.sub=function(){return m[g[this.id]]},t.fracNum=function(){return m[v[this.id]]},t.fracDen=function(){return m[y[this.id]]},t.cramp=function(){return m[b[this.id]]},t.text=function(){return m[x[this.id]]},t.isTight=function(){return this.size>=2},e}(),m=[new d(0,0,!1),new d(1,0,!0),new d(2,1,!1),new d(3,1,!0),new d(4,2,!1),new d(5,2,!0),new d(6,3,!1),new d(7,3,!0)],f=[4,5,4,5,6,7,6,7],g=[5,5,5,5,7,7,7,7],v=[2,3,4,5,6,7,6,7],y=[3,3,5,5,7,7,7,7],b=[1,1,3,3,5,5,7,7],x=[0,1,2,3,2,3,2,3],w={DISPLAY:m[0],TEXT:m[2],SCRIPT:m[4],SCRIPTSCRIPT:m[6]},k=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],C=[];function E(e){for(var t=0;t<C.length;t+=2)if(e>=C[t]&&e<=C[t+1])return!0;return!1}k.forEach((function(e){return e.blocks.forEach((function(e){return C.push.apply(C,e)}))}));var S=80,T={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},M=function(){function e(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var t=e.prototype;return t.hasClass=function(e){return p.contains(this.classes,e)},t.toNode=function(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e},t.toMarkup=function(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e},t.toText=function(){var e=function(e){return e.toText()};return this.children.map(e).join("")},e}(),_=function(e){return e.filter((function(e){return e})).join(" ")},A=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},I=function(e){var t=document.createElement(e);for(var r in t.className=_(this.classes),this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},O=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+p.escape(_(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=p.hyphenate(n)+":"+this.style[n]+";");for(var i in r&&(t+=' style="'+p.escape(r)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(t+=" "+i+'="'+p.escape(this.attributes[i])+'"');t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</"+e+">"},N=function(){function e(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,A.call(this,e,r,n),this.children=t||[]}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.hasClass=function(e){return p.contains(this.classes,e)},t.toNode=function(){return I.call(this,"span")},t.toMarkup=function(){return O.call(this,"span")},e}(),P=function(){function e(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,A.call(this,t,n),this.children=r||[],this.setAttribute("href",e)}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.hasClass=function(e){return p.contains(this.classes,e)},t.toNode=function(){return I.call(this,"a")},t.toMarkup=function(){return O.call(this,"a")},e}(),R=function(){function e(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}var t=e.prototype;return t.hasClass=function(e){return p.contains(this.classes,e)},t.toNode=function(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e},t.toMarkup=function(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=p.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+p.escape(t)+'"'),e+="'/>"},e}(),L={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"},F=function(){function e(e,t,r,n,i,s,o,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=n||0,this.skew=i||0,this.width=s||0,this.classes=o||[],this.style=a||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<k.length;t++)for(var r=k[t],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(e>=i[0]&&e<=i[1])return r.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=L[this.text])}var t=e.prototype;return t.hasClass=function(e){return p.contains(this.classes,e)},t.toNode=function(){var e=document.createTextNode(this.text),t=null;for(var r in this.italic>0&&((t=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((t=t||document.createElement("span")).className=_(this.classes)),this.style)this.style.hasOwnProperty(r)&&((t=t||document.createElement("span")).style[r]=this.style[r]);return t?(t.appendChild(e),t):e},t.toMarkup=function(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=p.escape(_(this.classes)),t+='"');var r="";for(var n in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(r+=p.hyphenate(n)+":"+this.style[n]+";");r&&(e=!0,t+=' style="'+p.escape(r)+'"');var i=p.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i},e}(),D=function(){function e(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e},t.toMarkup=function(){var e="<svg";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>"},e}(),z=function(){function e(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",T[this.pathName]),e},t.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+T[this.pathName]+"'/>"},e}(),B=function(){function e(e){this.attributes=void 0,this.attributes=e||{}}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e},t.toMarkup=function(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+="/>"},e}();function q(e){if(e instanceof F)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var H={"AMS-Regular":{65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473]},"Fraktur-Regular":{33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],163:[0,.69444,0,0,.86853],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],163:[0,.69444,0,0,.76909],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],305:[0,.43056,0,.02778,.32246],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],567:[.19444,.43056,0,.08334,.38403],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333]},"Math-Italic":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"Math-Regular":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"SansSerif-Bold":{33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212]},"Size1-Regular":{40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},U={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},W={Å:"A",Ç:"C",Ð:"D",Þ:"o",å:"a",ç:"c",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function j(e,t,r){if(!H[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),i=H[t][n];if(!i&&e[0]in W&&(n=W[e[0]].charCodeAt(0),i=H[t][n]),i||"text"!==r||E(n)&&(i=H[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var G={},V={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Y={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},X={math:{},text:{}},Q=X;function K(e,t,r,n,i,s){X[e][i]={font:t,group:r,replace:n},s&&n&&(X[e][n]=X[e][i])}var $="math",Z="text",J="main",ee="ams",te="accent-token",re="bin",ne="close",ie="inner",se="mathord",oe="op-token",ae="open",le="punct",he="rel",ce="spacing",pe="textord";K($,J,he,"≡","\\equiv",!0),K($,J,he,"≺","\\prec",!0),K($,J,he,"≻","\\succ",!0),K($,J,he,"∼","\\sim",!0),K($,J,he,"⊥","\\perp"),K($,J,he,"⪯","\\preceq",!0),K($,J,he,"⪰","\\succeq",!0),K($,J,he,"≃","\\simeq",!0),K($,J,he,"∣","\\mid",!0),K($,J,he,"≪","\\ll",!0),K($,J,he,"≫","\\gg",!0),K($,J,he,"≍","\\asymp",!0),K($,J,he,"∥","\\parallel"),K($,J,he,"⋈","\\bowtie",!0),K($,J,he,"⌣","\\smile",!0),K($,J,he,"⊑","\\sqsubseteq",!0),K($,J,he,"⊒","\\sqsupseteq",!0),K($,J,he,"≐","\\doteq",!0),K($,J,he,"⌢","\\frown",!0),K($,J,he,"∋","\\ni",!0),K($,J,he,"∝","\\propto",!0),K($,J,he,"⊢","\\vdash",!0),K($,J,he,"⊣","\\dashv",!0),K($,J,he,"∋","\\owns"),K($,J,le,".","\\ldotp"),K($,J,le,"⋅","\\cdotp"),K($,J,pe,"#","\\#"),K(Z,J,pe,"#","\\#"),K($,J,pe,"&","\\&"),K(Z,J,pe,"&","\\&"),K($,J,pe,"ℵ","\\aleph",!0),K($,J,pe,"∀","\\forall",!0),K($,J,pe,"ℏ","\\hbar",!0),K($,J,pe,"∃","\\exists",!0),K($,J,pe,"∇","\\nabla",!0),K($,J,pe,"♭","\\flat",!0),K($,J,pe,"ℓ","\\ell",!0),K($,J,pe,"♮","\\natural",!0),K($,J,pe,"♣","\\clubsuit",!0),K($,J,pe,"℘","\\wp",!0),K($,J,pe,"♯","\\sharp",!0),K($,J,pe,"♢","\\diamondsuit",!0),K($,J,pe,"ℜ","\\Re",!0),K($,J,pe,"♡","\\heartsuit",!0),K($,J,pe,"ℑ","\\Im",!0),K($,J,pe,"♠","\\spadesuit",!0),K(Z,J,pe,"§","\\S",!0),K(Z,J,pe,"¶","\\P",!0),K($,J,pe,"†","\\dag"),K(Z,J,pe,"†","\\dag"),K(Z,J,pe,"†","\\textdagger"),K($,J,pe,"‡","\\ddag"),K(Z,J,pe,"‡","\\ddag"),K(Z,J,pe,"‡","\\textdaggerdbl"),K($,J,ne,"⎱","\\rmoustache",!0),K($,J,ae,"⎰","\\lmoustache",!0),K($,J,ne,"⟯","\\rgroup",!0),K($,J,ae,"⟮","\\lgroup",!0),K($,J,re,"∓","\\mp",!0),K($,J,re,"⊖","\\ominus",!0),K($,J,re,"⊎","\\uplus",!0),K($,J,re,"⊓","\\sqcap",!0),K($,J,re,"∗","\\ast"),K($,J,re,"⊔","\\sqcup",!0),K($,J,re,"◯","\\bigcirc"),K($,J,re,"∙","\\bullet"),K($,J,re,"‡","\\ddagger"),K($,J,re,"≀","\\wr",!0),K($,J,re,"⨿","\\amalg"),K($,J,re,"&","\\And"),K($,J,he,"⟵","\\longleftarrow",!0),K($,J,he,"⇐","\\Leftarrow",!0),K($,J,he,"⟸","\\Longleftarrow",!0),K($,J,he,"⟶","\\longrightarrow",!0),K($,J,he,"⇒","\\Rightarrow",!0),K($,J,he,"⟹","\\Longrightarrow",!0),K($,J,he,"↔","\\leftrightarrow",!0),K($,J,he,"⟷","\\longleftrightarrow",!0),K($,J,he,"⇔","\\Leftrightarrow",!0),K($,J,he,"⟺","\\Longleftrightarrow",!0),K($,J,he,"↦","\\mapsto",!0),K($,J,he,"⟼","\\longmapsto",!0),K($,J,he,"↗","\\nearrow",!0),K($,J,he,"↩","\\hookleftarrow",!0),K($,J,he,"↪","\\hookrightarrow",!0),K($,J,he,"↘","\\searrow",!0),K($,J,he,"↼","\\leftharpoonup",!0),K($,J,he,"⇀","\\rightharpoonup",!0),K($,J,he,"↙","\\swarrow",!0),K($,J,he,"↽","\\leftharpoondown",!0),K($,J,he,"⇁","\\rightharpoondown",!0),K($,J,he,"↖","\\nwarrow",!0),K($,J,he,"⇌","\\rightleftharpoons",!0),K($,ee,he,"≮","\\nless",!0),K($,ee,he,"","\\@nleqslant"),K($,ee,he,"","\\@nleqq"),K($,ee,he,"⪇","\\lneq",!0),K($,ee,he,"≨","\\lneqq",!0),K($,ee,he,"","\\@lvertneqq"),K($,ee,he,"⋦","\\lnsim",!0),K($,ee,he,"⪉","\\lnapprox",!0),K($,ee,he,"⊀","\\nprec",!0),K($,ee,he,"⋠","\\npreceq",!0),K($,ee,he,"⋨","\\precnsim",!0),K($,ee,he,"⪹","\\precnapprox",!0),K($,ee,he,"≁","\\nsim",!0),K($,ee,he,"","\\@nshortmid"),K($,ee,he,"∤","\\nmid",!0),K($,ee,he,"⊬","\\nvdash",!0),K($,ee,he,"⊭","\\nvDash",!0),K($,ee,he,"⋪","\\ntriangleleft"),K($,ee,he,"⋬","\\ntrianglelefteq",!0),K($,ee,he,"⊊","\\subsetneq",!0),K($,ee,he,"","\\@varsubsetneq"),K($,ee,he,"⫋","\\subsetneqq",!0),K($,ee,he,"","\\@varsubsetneqq"),K($,ee,he,"≯","\\ngtr",!0),K($,ee,he,"","\\@ngeqslant"),K($,ee,he,"","\\@ngeqq"),K($,ee,he,"⪈","\\gneq",!0),K($,ee,he,"≩","\\gneqq",!0),K($,ee,he,"","\\@gvertneqq"),K($,ee,he,"⋧","\\gnsim",!0),K($,ee,he,"⪊","\\gnapprox",!0),K($,ee,he,"⊁","\\nsucc",!0),K($,ee,he,"⋡","\\nsucceq",!0),K($,ee,he,"⋩","\\succnsim",!0),K($,ee,he,"⪺","\\succnapprox",!0),K($,ee,he,"≆","\\ncong",!0),K($,ee,he,"","\\@nshortparallel"),K($,ee,he,"∦","\\nparallel",!0),K($,ee,he,"⊯","\\nVDash",!0),K($,ee,he,"⋫","\\ntriangleright"),K($,ee,he,"⋭","\\ntrianglerighteq",!0),K($,ee,he,"","\\@nsupseteqq"),K($,ee,he,"⊋","\\supsetneq",!0),K($,ee,he,"","\\@varsupsetneq"),K($,ee,he,"⫌","\\supsetneqq",!0),K($,ee,he,"","\\@varsupsetneqq"),K($,ee,he,"⊮","\\nVdash",!0),K($,ee,he,"⪵","\\precneqq",!0),K($,ee,he,"⪶","\\succneqq",!0),K($,ee,he,"","\\@nsubseteqq"),K($,ee,re,"⊴","\\unlhd"),K($,ee,re,"⊵","\\unrhd"),K($,ee,he,"↚","\\nleftarrow",!0),K($,ee,he,"↛","\\nrightarrow",!0),K($,ee,he,"⇍","\\nLeftarrow",!0),K($,ee,he,"⇏","\\nRightarrow",!0),K($,ee,he,"↮","\\nleftrightarrow",!0),K($,ee,he,"⇎","\\nLeftrightarrow",!0),K($,ee,he,"△","\\vartriangle"),K($,ee,pe,"ℏ","\\hslash"),K($,ee,pe,"▽","\\triangledown"),K($,ee,pe,"◊","\\lozenge"),K($,ee,pe,"Ⓢ","\\circledS"),K($,ee,pe,"®","\\circledR"),K(Z,ee,pe,"®","\\circledR"),K($,ee,pe,"∡","\\measuredangle",!0),K($,ee,pe,"∄","\\nexists"),K($,ee,pe,"℧","\\mho"),K($,ee,pe,"Ⅎ","\\Finv",!0),K($,ee,pe,"⅁","\\Game",!0),K($,ee,pe,"‵","\\backprime"),K($,ee,pe,"▲","\\blacktriangle"),K($,ee,pe,"▼","\\blacktriangledown"),K($,ee,pe,"■","\\blacksquare"),K($,ee,pe,"⧫","\\blacklozenge"),K($,ee,pe,"★","\\bigstar"),K($,ee,pe,"∢","\\sphericalangle",!0),K($,ee,pe,"∁","\\complement",!0),K($,ee,pe,"ð","\\eth",!0),K($,ee,pe,"╱","\\diagup"),K($,ee,pe,"╲","\\diagdown"),K($,ee,pe,"□","\\square"),K($,ee,pe,"□","\\Box"),K($,ee,pe,"◊","\\Diamond"),K($,ee,pe,"¥","\\yen",!0),K(Z,ee,pe,"¥","\\yen",!0),K($,ee,pe,"✓","\\checkmark",!0),K(Z,ee,pe,"✓","\\checkmark"),K($,ee,pe,"ℶ","\\beth",!0),K($,ee,pe,"ℸ","\\daleth",!0),K($,ee,pe,"ℷ","\\gimel",!0),K($,ee,pe,"ϝ","\\digamma",!0),K($,ee,pe,"ϰ","\\varkappa"),K($,ee,ae,"┌","\\ulcorner",!0),K($,ee,ne,"┐","\\urcorner",!0),K($,ee,ae,"└","\\llcorner",!0),K($,ee,ne,"┘","\\lrcorner",!0),K($,ee,he,"≦","\\leqq",!0),K($,ee,he,"⩽","\\leqslant",!0),K($,ee,he,"⪕","\\eqslantless",!0),K($,ee,he,"≲","\\lesssim",!0),K($,ee,he,"⪅","\\lessapprox",!0),K($,ee,he,"≊","\\approxeq",!0),K($,ee,re,"⋖","\\lessdot"),K($,ee,he,"⋘","\\lll",!0),K($,ee,he,"≶","\\lessgtr",!0),K($,ee,he,"⋚","\\lesseqgtr",!0),K($,ee,he,"⪋","\\lesseqqgtr",!0),K($,ee,he,"≑","\\doteqdot"),K($,ee,he,"≓","\\risingdotseq",!0),K($,ee,he,"≒","\\fallingdotseq",!0),K($,ee,he,"∽","\\backsim",!0),K($,ee,he,"⋍","\\backsimeq",!0),K($,ee,he,"⫅","\\subseteqq",!0),K($,ee,he,"⋐","\\Subset",!0),K($,ee,he,"⊏","\\sqsubset",!0),K($,ee,he,"≼","\\preccurlyeq",!0),K($,ee,he,"⋞","\\curlyeqprec",!0),K($,ee,he,"≾","\\precsim",!0),K($,ee,he,"⪷","\\precapprox",!0),K($,ee,he,"⊲","\\vartriangleleft"),K($,ee,he,"⊴","\\trianglelefteq"),K($,ee,he,"⊨","\\vDash",!0),K($,ee,he,"⊪","\\Vvdash",!0),K($,ee,he,"⌣","\\smallsmile"),K($,ee,he,"⌢","\\smallfrown"),K($,ee,he,"≏","\\bumpeq",!0),K($,ee,he,"≎","\\Bumpeq",!0),K($,ee,he,"≧","\\geqq",!0),K($,ee,he,"⩾","\\geqslant",!0),K($,ee,he,"⪖","\\eqslantgtr",!0),K($,ee,he,"≳","\\gtrsim",!0),K($,ee,he,"⪆","\\gtrapprox",!0),K($,ee,re,"⋗","\\gtrdot"),K($,ee,he,"⋙","\\ggg",!0),K($,ee,he,"≷","\\gtrless",!0),K($,ee,he,"⋛","\\gtreqless",!0),K($,ee,he,"⪌","\\gtreqqless",!0),K($,ee,he,"≖","\\eqcirc",!0),K($,ee,he,"≗","\\circeq",!0),K($,ee,he,"≜","\\triangleq",!0),K($,ee,he,"∼","\\thicksim"),K($,ee,he,"≈","\\thickapprox"),K($,ee,he,"⫆","\\supseteqq",!0),K($,ee,he,"⋑","\\Supset",!0),K($,ee,he,"⊐","\\sqsupset",!0),K($,ee,he,"≽","\\succcurlyeq",!0),K($,ee,he,"⋟","\\curlyeqsucc",!0),K($,ee,he,"≿","\\succsim",!0),K($,ee,he,"⪸","\\succapprox",!0),K($,ee,he,"⊳","\\vartriangleright"),K($,ee,he,"⊵","\\trianglerighteq"),K($,ee,he,"⊩","\\Vdash",!0),K($,ee,he,"∣","\\shortmid"),K($,ee,he,"∥","\\shortparallel"),K($,ee,he,"≬","\\between",!0),K($,ee,he,"⋔","\\pitchfork",!0),K($,ee,he,"∝","\\varpropto"),K($,ee,he,"◀","\\blacktriangleleft"),K($,ee,he,"∴","\\therefore",!0),K($,ee,he,"∍","\\backepsilon"),K($,ee,he,"▶","\\blacktriangleright"),K($,ee,he,"∵","\\because",!0),K($,ee,he,"⋘","\\llless"),K($,ee,he,"⋙","\\gggtr"),K($,ee,re,"⊲","\\lhd"),K($,ee,re,"⊳","\\rhd"),K($,ee,he,"≂","\\eqsim",!0),K($,J,he,"⋈","\\Join"),K($,ee,he,"≑","\\Doteq",!0),K($,ee,re,"∔","\\dotplus",!0),K($,ee,re,"∖","\\smallsetminus"),K($,ee,re,"⋒","\\Cap",!0),K($,ee,re,"⋓","\\Cup",!0),K($,ee,re,"⩞","\\doublebarwedge",!0),K($,ee,re,"⊟","\\boxminus",!0),K($,ee,re,"⊞","\\boxplus",!0),K($,ee,re,"⋇","\\divideontimes",!0),K($,ee,re,"⋉","\\ltimes",!0),K($,ee,re,"⋊","\\rtimes",!0),K($,ee,re,"⋋","\\leftthreetimes",!0),K($,ee,re,"⋌","\\rightthreetimes",!0),K($,ee,re,"⋏","\\curlywedge",!0),K($,ee,re,"⋎","\\curlyvee",!0),K($,ee,re,"⊝","\\circleddash",!0),K($,ee,re,"⊛","\\circledast",!0),K($,ee,re,"⋅","\\centerdot"),K($,ee,re,"⊺","\\intercal",!0),K($,ee,re,"⋒","\\doublecap"),K($,ee,re,"⋓","\\doublecup"),K($,ee,re,"⊠","\\boxtimes",!0),K($,ee,he,"⇢","\\dashrightarrow",!0),K($,ee,he,"⇠","\\dashleftarrow",!0),K($,ee,he,"⇇","\\leftleftarrows",!0),K($,ee,he,"⇆","\\leftrightarrows",!0),K($,ee,he,"⇚","\\Lleftarrow",!0),K($,ee,he,"↞","\\twoheadleftarrow",!0),K($,ee,he,"↢","\\leftarrowtail",!0),K($,ee,he,"↫","\\looparrowleft",!0),K($,ee,he,"⇋","\\leftrightharpoons",!0),K($,ee,he,"↶","\\curvearrowleft",!0),K($,ee,he,"↺","\\circlearrowleft",!0),K($,ee,he,"↰","\\Lsh",!0),K($,ee,he,"⇈","\\upuparrows",!0),K($,ee,he,"↿","\\upharpoonleft",!0),K($,ee,he,"⇃","\\downharpoonleft",!0),K($,ee,he,"⊸","\\multimap",!0),K($,ee,he,"↭","\\leftrightsquigarrow",!0),K($,ee,he,"⇉","\\rightrightarrows",!0),K($,ee,he,"⇄","\\rightleftarrows",!0),K($,ee,he,"↠","\\twoheadrightarrow",!0),K($,ee,he,"↣","\\rightarrowtail",!0),K($,ee,he,"↬","\\looparrowright",!0),K($,ee,he,"↷","\\curvearrowright",!0),K($,ee,he,"↻","\\circlearrowright",!0),K($,ee,he,"↱","\\Rsh",!0),K($,ee,he,"⇊","\\downdownarrows",!0),K($,ee,he,"↾","\\upharpoonright",!0),K($,ee,he,"⇂","\\downharpoonright",!0),K($,ee,he,"⇝","\\rightsquigarrow",!0),K($,ee,he,"⇝","\\leadsto"),K($,ee,he,"⇛","\\Rrightarrow",!0),K($,ee,he,"↾","\\restriction"),K($,J,pe,"‘","`"),K($,J,pe,"$","\\$"),K(Z,J,pe,"$","\\$"),K(Z,J,pe,"$","\\textdollar"),K($,J,pe,"%","\\%"),K(Z,J,pe,"%","\\%"),K($,J,pe,"_","\\_"),K(Z,J,pe,"_","\\_"),K(Z,J,pe,"_","\\textunderscore"),K($,J,pe,"∠","\\angle",!0),K($,J,pe,"∞","\\infty",!0),K($,J,pe,"′","\\prime"),K($,J,pe,"△","\\triangle"),K($,J,pe,"Γ","\\Gamma",!0),K($,J,pe,"Δ","\\Delta",!0),K($,J,pe,"Θ","\\Theta",!0),K($,J,pe,"Λ","\\Lambda",!0),K($,J,pe,"Ξ","\\Xi",!0),K($,J,pe,"Π","\\Pi",!0),K($,J,pe,"Σ","\\Sigma",!0),K($,J,pe,"Υ","\\Upsilon",!0),K($,J,pe,"Φ","\\Phi",!0),K($,J,pe,"Ψ","\\Psi",!0),K($,J,pe,"Ω","\\Omega",!0),K($,J,pe,"A","Α"),K($,J,pe,"B","Β"),K($,J,pe,"E","Ε"),K($,J,pe,"Z","Ζ"),K($,J,pe,"H","Η"),K($,J,pe,"I","Ι"),K($,J,pe,"K","Κ"),K($,J,pe,"M","Μ"),K($,J,pe,"N","Ν"),K($,J,pe,"O","Ο"),K($,J,pe,"P","Ρ"),K($,J,pe,"T","Τ"),K($,J,pe,"X","Χ"),K($,J,pe,"¬","\\neg",!0),K($,J,pe,"¬","\\lnot"),K($,J,pe,"⊤","\\top"),K($,J,pe,"⊥","\\bot"),K($,J,pe,"∅","\\emptyset"),K($,ee,pe,"∅","\\varnothing"),K($,J,se,"α","\\alpha",!0),K($,J,se,"β","\\beta",!0),K($,J,se,"γ","\\gamma",!0),K($,J,se,"δ","\\delta",!0),K($,J,se,"ϵ","\\epsilon",!0),K($,J,se,"ζ","\\zeta",!0),K($,J,se,"η","\\eta",!0),K($,J,se,"θ","\\theta",!0),K($,J,se,"ι","\\iota",!0),K($,J,se,"κ","\\kappa",!0),K($,J,se,"λ","\\lambda",!0),K($,J,se,"μ","\\mu",!0),K($,J,se,"ν","\\nu",!0),K($,J,se,"ξ","\\xi",!0),K($,J,se,"ο","\\omicron",!0),K($,J,se,"π","\\pi",!0),K($,J,se,"ρ","\\rho",!0),K($,J,se,"σ","\\sigma",!0),K($,J,se,"τ","\\tau",!0),K($,J,se,"υ","\\upsilon",!0),K($,J,se,"ϕ","\\phi",!0),K($,J,se,"χ","\\chi",!0),K($,J,se,"ψ","\\psi",!0),K($,J,se,"ω","\\omega",!0),K($,J,se,"ε","\\varepsilon",!0),K($,J,se,"ϑ","\\vartheta",!0),K($,J,se,"ϖ","\\varpi",!0),K($,J,se,"ϱ","\\varrho",!0),K($,J,se,"ς","\\varsigma",!0),K($,J,se,"φ","\\varphi",!0),K($,J,re,"∗","*"),K($,J,re,"+","+"),K($,J,re,"−","-"),K($,J,re,"⋅","\\cdot",!0),K($,J,re,"∘","\\circ"),K($,J,re,"÷","\\div",!0),K($,J,re,"±","\\pm",!0),K($,J,re,"×","\\times",!0),K($,J,re,"∩","\\cap",!0),K($,J,re,"∪","\\cup",!0),K($,J,re,"∖","\\setminus"),K($,J,re,"∧","\\land"),K($,J,re,"∨","\\lor"),K($,J,re,"∧","\\wedge",!0),K($,J,re,"∨","\\vee",!0),K($,J,pe,"√","\\surd"),K($,J,ae,"(","("),K($,J,ae,"[","["),K($,J,ae,"⟨","\\langle",!0),K($,J,ae,"∣","\\lvert"),K($,J,ae,"∥","\\lVert"),K($,J,ne,")",")"),K($,J,ne,"]","]"),K($,J,ne,"?","?"),K($,J,ne,"!","!"),K($,J,ne,"⟩","\\rangle",!0),K($,J,ne,"∣","\\rvert"),K($,J,ne,"∥","\\rVert"),K($,J,he,"=","="),K($,J,he,"<","<"),K($,J,he,">",">"),K($,J,he,":",":"),K($,J,he,"≈","\\approx",!0),K($,J,he,"≅","\\cong",!0),K($,J,he,"≥","\\ge"),K($,J,he,"≥","\\geq",!0),K($,J,he,"←","\\gets"),K($,J,he,">","\\gt"),K($,J,he,"∈","\\in",!0),K($,J,he,"","\\@not"),K($,J,he,"⊂","\\subset",!0),K($,J,he,"⊃","\\supset",!0),K($,J,he,"⊆","\\subseteq",!0),K($,J,he,"⊇","\\supseteq",!0),K($,ee,he,"⊈","\\nsubseteq",!0),K($,ee,he,"⊉","\\nsupseteq",!0),K($,J,he,"⊨","\\models"),K($,J,he,"←","\\leftarrow",!0),K($,J,he,"≤","\\le"),K($,J,he,"≤","\\leq",!0),K($,J,he,"<","\\lt"),K($,J,he,"→","\\rightarrow",!0),K($,J,he,"→","\\to"),K($,ee,he,"≱","\\ngeq",!0),K($,ee,he,"≰","\\nleq",!0),K($,J,ce," ","\\ "),K($,J,ce," ","~"),K($,J,ce," ","\\space"),K($,J,ce," ","\\nobreakspace"),K(Z,J,ce," ","\\ "),K(Z,J,ce," ","~"),K(Z,J,ce," ","\\space"),K(Z,J,ce," ","\\nobreakspace"),K($,J,ce,null,"\\nobreak"),K($,J,ce,null,"\\allowbreak"),K($,J,le,",",","),K($,J,le,";",";"),K($,ee,re,"⊼","\\barwedge",!0),K($,ee,re,"⊻","\\veebar",!0),K($,J,re,"⊙","\\odot",!0),K($,J,re,"⊕","\\oplus",!0),K($,J,re,"⊗","\\otimes",!0),K($,J,pe,"∂","\\partial",!0),K($,J,re,"⊘","\\oslash",!0),K($,ee,re,"⊚","\\circledcirc",!0),K($,ee,re,"⊡","\\boxdot",!0),K($,J,re,"△","\\bigtriangleup"),K($,J,re,"▽","\\bigtriangledown"),K($,J,re,"†","\\dagger"),K($,J,re,"⋄","\\diamond"),K($,J,re,"⋆","\\star"),K($,J,re,"◃","\\triangleleft"),K($,J,re,"▹","\\triangleright"),K($,J,ae,"{","\\{"),K(Z,J,pe,"{","\\{"),K(Z,J,pe,"{","\\textbraceleft"),K($,J,ne,"}","\\}"),K(Z,J,pe,"}","\\}"),K(Z,J,pe,"}","\\textbraceright"),K($,J,ae,"{","\\lbrace"),K($,J,ne,"}","\\rbrace"),K($,J,ae,"[","\\lbrack"),K(Z,J,pe,"[","\\lbrack"),K($,J,ne,"]","\\rbrack"),K(Z,J,pe,"]","\\rbrack"),K($,J,ae,"(","\\lparen"),K($,J,ne,")","\\rparen"),K(Z,J,pe,"<","\\textless"),K(Z,J,pe,">","\\textgreater"),K($,J,ae,"⌊","\\lfloor",!0),K($,J,ne,"⌋","\\rfloor",!0),K($,J,ae,"⌈","\\lceil",!0),K($,J,ne,"⌉","\\rceil",!0),K($,J,pe,"\\","\\backslash"),K($,J,pe,"∣","|"),K($,J,pe,"∣","\\vert"),K(Z,J,pe,"|","\\textbar"),K($,J,pe,"∥","\\|"),K($,J,pe,"∥","\\Vert"),K(Z,J,pe,"∥","\\textbardbl"),K(Z,J,pe,"~","\\textasciitilde"),K(Z,J,pe,"\\","\\textbackslash"),K(Z,J,pe,"^","\\textasciicircum"),K($,J,he,"↑","\\uparrow",!0),K($,J,he,"⇑","\\Uparrow",!0),K($,J,he,"↓","\\downarrow",!0),K($,J,he,"⇓","\\Downarrow",!0),K($,J,he,"↕","\\updownarrow",!0),K($,J,he,"⇕","\\Updownarrow",!0),K($,J,oe,"∐","\\coprod"),K($,J,oe,"⋁","\\bigvee"),K($,J,oe,"⋀","\\bigwedge"),K($,J,oe,"⨄","\\biguplus"),K($,J,oe,"⋂","\\bigcap"),K($,J,oe,"⋃","\\bigcup"),K($,J,oe,"∫","\\int"),K($,J,oe,"∫","\\intop"),K($,J,oe,"∬","\\iint"),K($,J,oe,"∭","\\iiint"),K($,J,oe,"∏","\\prod"),K($,J,oe,"∑","\\sum"),K($,J,oe,"⨂","\\bigotimes"),K($,J,oe,"⨁","\\bigoplus"),K($,J,oe,"⨀","\\bigodot"),K($,J,oe,"∮","\\oint"),K($,J,oe,"∯","\\oiint"),K($,J,oe,"∰","\\oiiint"),K($,J,oe,"⨆","\\bigsqcup"),K($,J,oe,"∫","\\smallint"),K(Z,J,ie,"…","\\textellipsis"),K($,J,ie,"…","\\mathellipsis"),K(Z,J,ie,"…","\\ldots",!0),K($,J,ie,"…","\\ldots",!0),K($,J,ie,"⋯","\\@cdots",!0),K($,J,ie,"⋱","\\ddots",!0),K($,J,pe,"⋮","\\varvdots"),K($,J,te,"ˊ","\\acute"),K($,J,te,"ˋ","\\grave"),K($,J,te,"¨","\\ddot"),K($,J,te,"~","\\tilde"),K($,J,te,"ˉ","\\bar"),K($,J,te,"˘","\\breve"),K($,J,te,"ˇ","\\check"),K($,J,te,"^","\\hat"),K($,J,te,"⃗","\\vec"),K($,J,te,"˙","\\dot"),K($,J,te,"˚","\\mathring"),K($,J,se,"ı","\\imath",!0),K($,J,se,"ȷ","\\jmath",!0),K(Z,J,pe,"ı","\\i",!0),K(Z,J,pe,"ȷ","\\j",!0),K(Z,J,pe,"ß","\\ss",!0),K(Z,J,pe,"æ","\\ae",!0),K(Z,J,pe,"æ","\\ae",!0),K(Z,J,pe,"œ","\\oe",!0),K(Z,J,pe,"ø","\\o",!0),K(Z,J,pe,"Æ","\\AE",!0),K(Z,J,pe,"Œ","\\OE",!0),K(Z,J,pe,"Ø","\\O",!0),K(Z,J,te,"ˊ","\\'"),K(Z,J,te,"ˋ","\\`"),K(Z,J,te,"ˆ","\\^"),K(Z,J,te,"˜","\\~"),K(Z,J,te,"ˉ","\\="),K(Z,J,te,"˘","\\u"),K(Z,J,te,"˙","\\."),K(Z,J,te,"˚","\\r"),K(Z,J,te,"ˇ","\\v"),K(Z,J,te,"¨",'\\"'),K(Z,J,te,"˝","\\H"),K(Z,J,te,"◯","\\textcircled");var ue={"--":!0,"---":!0,"``":!0,"''":!0};K(Z,J,pe,"–","--"),K(Z,J,pe,"–","\\textendash"),K(Z,J,pe,"—","---"),K(Z,J,pe,"—","\\textemdash"),K(Z,J,pe,"‘","`"),K(Z,J,pe,"‘","\\textquoteleft"),K(Z,J,pe,"’","'"),K(Z,J,pe,"’","\\textquoteright"),K(Z,J,pe,"“","``"),K(Z,J,pe,"“","\\textquotedblleft"),K(Z,J,pe,"”","''"),K(Z,J,pe,"”","\\textquotedblright"),K($,J,pe,"°","\\degree",!0),K(Z,J,pe,"°","\\degree"),K(Z,J,pe,"°","\\textdegree",!0),K($,J,se,"£","\\pounds"),K($,J,se,"£","\\mathsterling",!0),K(Z,J,se,"£","\\pounds"),K(Z,J,se,"£","\\textsterling",!0),K($,ee,pe,"✠","\\maltese"),K(Z,ee,pe,"✠","\\maltese"),K(Z,J,ce," ","\\ "),K(Z,J,ce," "," "),K(Z,J,ce," ","~");for(var de='0123456789/@."',me=0;me<de.length;me++){var fe=de.charAt(me);K($,J,pe,fe,fe)}for(var ge='0123456789!@*()-=+[]<>|";:?/.,',ve=0;ve<ge.length;ve++){var ye=ge.charAt(ve);K(Z,J,pe,ye,ye)}for(var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",xe=0;xe<be.length;xe++){var we=be.charAt(xe);K($,J,se,we,we),K(Z,J,pe,we,we)}K($,ee,pe,"C","ℂ"),K(Z,ee,pe,"C","ℂ"),K($,ee,pe,"H","ℍ"),K(Z,ee,pe,"H","ℍ"),K($,ee,pe,"N","ℕ"),K(Z,ee,pe,"N","ℕ"),K($,ee,pe,"P","ℙ"),K(Z,ee,pe,"P","ℙ"),K($,ee,pe,"Q","ℚ"),K(Z,ee,pe,"Q","ℚ"),K($,ee,pe,"R","ℝ"),K(Z,ee,pe,"R","ℝ"),K($,ee,pe,"Z","ℤ"),K(Z,ee,pe,"Z","ℤ"),K($,J,se,"h","ℎ"),K(Z,J,se,"h","ℎ");for(var ke="",Ce=0;Ce<be.length;Ce++){var Ee=be.charAt(Ce);K($,J,se,Ee,ke=String.fromCharCode(55349,56320+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56372+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56424+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56580+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56736+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56788+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56840+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56944+Ce)),K(Z,J,pe,Ee,ke),Ce<26&&(K($,J,se,Ee,ke=String.fromCharCode(55349,56632+Ce)),K(Z,J,pe,Ee,ke),K($,J,se,Ee,ke=String.fromCharCode(55349,56476+Ce)),K(Z,J,pe,Ee,ke))}K($,J,se,"k",ke=String.fromCharCode(55349,56668)),K(Z,J,pe,"k",ke);for(var Se=0;Se<10;Se++){var Te=Se.toString();K($,J,se,Te,ke=String.fromCharCode(55349,57294+Se)),K(Z,J,pe,Te,ke),K($,J,se,Te,ke=String.fromCharCode(55349,57314+Se)),K(Z,J,pe,Te,ke),K($,J,se,Te,ke=String.fromCharCode(55349,57324+Se)),K(Z,J,pe,Te,ke),K($,J,se,Te,ke=String.fromCharCode(55349,57334+Se)),K(Z,J,pe,Te,ke)}for(var Me="ÇÐÞçþ",_e=0;_e<Me.length;_e++){var Ae=Me.charAt(_e);K($,J,se,Ae,Ae),K(Z,J,pe,Ae,Ae)}K(Z,J,pe,"ð","ð"),K(Z,J,pe,"–","–"),K(Z,J,pe,"—","—"),K(Z,J,pe,"‘","‘"),K(Z,J,pe,"’","’"),K(Z,J,pe,"“","“"),K(Z,J,pe,"”","”");var Ie=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathdefault","textit","Math-Italic"],["mathdefault","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Oe=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ne=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Pe=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Re=function(e,t){return t.size<2?e:Ne[e-1][t.size-1]},Le=function(){function e(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||e.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Pe[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}var t=e.prototype;return t.extend=function(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new e(r)},t.havingStyle=function(e){return this.style===e?this:this.extend({style:e,size:Re(this.textSize,e)})},t.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},t.havingSize=function(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Pe[e-1]})},t.havingBaseStyle=function(t){t=t||this.style.text();var r=Re(e.BASESIZE,t);return this.size===r&&this.textSize===e.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})},t.havingBaseSizing=function(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})},t.withColor=function(e){return this.extend({color:e})},t.withPhantom=function(){return this.extend({phantom:!0})},t.withFont=function(e){return this.extend({font:e})},t.withTextFontFamily=function(e){return this.extend({fontFamily:e,font:""})},t.withTextFontWeight=function(e){return this.extend({fontWeight:e,font:""})},t.withTextFontShape=function(e){return this.extend({fontShape:e,font:""})},t.sizingClasses=function(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]},t.baseSizingClasses=function(){return this.size!==e.BASESIZE?["sizing","reset-size"+this.size,"size"+e.BASESIZE]:[]},t.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!G[t=e>=5?0:e>=3?1:2]){var r=G[t]={cssEmPerMu:U.quad[t]/18};for(var n in U)U.hasOwnProperty(n)&&(r[n]=U[n][t])}return G[t]}(this.size)),this._fontMetrics},t.getColor=function(){return this.phantom?"transparent":this.color},e}();Le.BASESIZE=6;var Fe=Le,De={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},ze={ex:!0,em:!0,mu:!0},Be=function(e){return"string"!=typeof e&&(e=e.unit),e in De||e in ze||"ex"===e},qe=function(e,t){var r;if(e.unit in De)r=De[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)r=t.fontMetrics().cssEmPerMu;else{var n;if(n=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)r=n.fontMetrics().xHeight;else{if("em"!==e.unit)throw new o("Invalid unit: '"+e.unit+"'");r=n.fontMetrics().quad}n!==t&&(r*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},He=["\\imath","ı","\\jmath","ȷ","\\pounds","\\mathsterling","\\textsterling","£"],Ue=function(e,t,r){return Q[r][e]&&Q[r][e].replace&&(e=Q[r][e].replace),{value:e,metrics:j(e,t,r)}},We=function(e,t,r,n,i){var s,o=Ue(e,t,r),a=o.metrics;if(e=o.value,a){var l=a.italic;("text"===r||n&&"mathit"===n.font)&&(l=0),s=new F(e,a.height,a.depth,l,a.skew,a.width,i)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"' and mode '"+r+"'"),s=new F(e,0,0,0,0,0,i);if(n){s.maxFontSize=n.sizeMultiplier,n.style.isTight()&&s.classes.push("mtight");var h=n.getColor();h&&(s.style.color=h)}return s},je=function(e,t){if(_(e.classes)!==_(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var n in t.style)if(t.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;return!0},Ge=function(e){for(var t=0,r=0,n=0,i=0;i<e.children.length;i++){var s=e.children[i];s.height>t&&(t=s.height),s.depth>r&&(r=s.depth),s.maxFontSize>n&&(n=s.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=n},Ve=function(e,t,r,n){var i=new N(e,t,r,n);return Ge(i),i},Ye=function(e,t,r,n){return new N(e,t,r,n)},Xe=function(e){var t=new M(e);return Ge(t),t},Qe=function(e,t,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}return n+"-"+("textbf"===t&&"textit"===r?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},Ke={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},$e={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Ze={fontMap:Ke,makeSymbol:We,mathsym:function(e,t,r,n){return void 0===n&&(n=[]),"boldsymbol"===r.font&&Ue(e,"Main-Bold",t).metrics?We(e,"Main-Bold",t,r,n.concat(["mathbf"])):"\\"===e||"main"===Q[t][e].font?We(e,"Main-Regular",t,r,n):We(e,"AMS-Regular",t,r,n.concat(["amsrm"]))},makeSpan:Ve,makeSvgSpan:Ye,makeLineSpan:function(e,t,r){var n=Ve([e],[],t);return n.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=n.height+"em",n.maxFontSize=1,n},makeAnchor:function(e,t,r,n){var i=new P(e,t,r,n);return Ge(i),i},makeFragment:Xe,wrapFragment:function(e,t){return e instanceof M?Ve([],[e],t):e},makeVList:function(e,t){for(var r=function(e){if("individualShift"===e.positionType){for(var t=e.children,r=[t[0]],n=-t[0].shift-t[0].elem.depth,i=n,s=1;s<t.length;s++){var o=-t[s].shift-i-t[s].elem.depth,a=o-(t[s-1].elem.height+t[s-1].elem.depth);i+=o,r.push({type:"kern",size:a}),r.push(t[s])}return{children:r,depth:n}}var l;if("top"===e.positionType){for(var h=e.positionData,c=0;c<e.children.length;c++){var p=e.children[c];h-="kern"===p.type?p.size:p.elem.height+p.elem.depth}l=h}else if("bottom"===e.positionType)l=-e.positionData;else{var u=e.children[0];if("elem"!==u.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-u.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-u.elem.depth}}return{children:e.children,depth:l}}(e),n=r.children,i=r.depth,s=0,o=0;o<n.length;o++){var a=n[o];if("elem"===a.type){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var h=Ve(["pstrut"],[]);h.style.height=s+"em";for(var c=[],p=i,u=i,d=i,m=0;m<n.length;m++){var f=n[m];if("kern"===f.type)d+=f.size;else{var g=f.elem,v=f.wrapperClasses||[],y=f.wrapperStyle||{},b=Ve(v,[h,g],void 0,y);b.style.top=-s-d-g.depth+"em",f.marginLeft&&(b.style.marginLeft=f.marginLeft),f.marginRight&&(b.style.marginRight=f.marginRight),c.push(b),d+=g.height+g.depth}p=Math.min(p,d),u=Math.max(u,d)}var x,w=Ve(["vlist"],c);if(w.style.height=u+"em",p<0){var k=Ve([],[]),C=Ve(["vlist"],[k]);C.style.height=-p+"em";var E=Ve(["vlist-s"],[new F("​")]);x=[Ve(["vlist-r"],[w,E]),Ve(["vlist-r"],[C])]}else x=[Ve(["vlist-r"],[w])];var S=Ve(["vlist-t"],x);return 2===x.length&&S.classes.push("vlist-t2"),S.height=u,S.depth=-p,S},makeOrd:function(e,t,r){var n,i=e.mode,s=e.text,a=["mord"],l="math"===i||"text"===i&&t.font,h=l?t.font:t.fontFamily;if(55349===s.charCodeAt(0)){var c=function(e,t){var r=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,n="math"===t?0:1;if(119808<=r&&r<120484){var i=Math.floor((r-119808)/26);return[Ie[i][2],Ie[i][n]]}if(120782<=r&&r<=120831){var s=Math.floor((r-120782)/10);return[Oe[s][2],Oe[s][n]]}if(120485===r||120486===r)return[Ie[0][2],Ie[0][n]];if(120486<r&&r<120782)return["",""];throw new o("Unsupported character: "+e)}(s,i),u=c[0],d=c[1];return We(s,u,i,t,a.concat(d))}if(h){var m,f;if("boldsymbol"===h||"mathnormal"===h){var g="boldsymbol"===h?function(e,t,r,n){return Ue(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(s,i):(n=s,p.contains(He,n)?{fontName:"Main-Italic",fontClass:"mathit"}:/[0-9]/.test(n.charAt(0))?{fontName:"Caligraphic-Regular",fontClass:"mathcal"}:{fontName:"Math-Italic",fontClass:"mathdefault"});m=g.fontName,f=[g.fontClass]}else p.contains(He,s)?(m="Main-Italic",f=["mathit"]):l?(m=Ke[h].fontName,f=[h]):(m=Qe(h,t.fontWeight,t.fontShape),f=[h,t.fontWeight,t.fontShape]);if(Ue(s,m,i).metrics)return We(s,m,i,t,a.concat(f));if(ue.hasOwnProperty(s)&&"Typewriter"===m.substr(0,10)){for(var v=[],y=0;y<s.length;y++)v.push(We(s[y],m,i,t,a.concat(f)));return Xe(v)}}if("mathord"===r){var b=function(e,t,r,n){return/[0-9]/.test(e.charAt(0))||p.contains(He,e)?{fontName:"Main-Italic",fontClass:"mathit"}:{fontName:"Math-Italic",fontClass:"mathdefault"}}(s);return We(s,b.fontName,i,t,a.concat([b.fontClass]))}if("textord"===r){var x=Q[i][s]&&Q[i][s].font;if("ams"===x){var w=Qe("amsrm",t.fontWeight,t.fontShape);return We(s,w,i,t,a.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==x&&x){var k=Qe(x,t.fontWeight,t.fontShape);return We(s,k,i,t,a.concat(k,t.fontWeight,t.fontShape))}var C=Qe("textrm",t.fontWeight,t.fontShape);return We(s,C,i,t,a.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")},makeGlue:function(e,t){var r=Ve(["mspace"],[],t),n=qe(e,t);return r.style.marginRight=n+"em",r},staticSvg:function(e,t){var r=$e[e],n=r[0],i=r[1],s=r[2],o=new z(n),a=new D([o],{width:i+"em",height:s+"em",style:"width:"+i+"em",viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=Ye(["overlay"],[a],t);return l.height=s,l.style.height=s+"em",l.style.width=i+"em",l},svgData:$e,tryCombineChars:function(e){for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof F&&n instanceof F&&je(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e}};function Je(e,t){var r=et(e,t);if(!r)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return r}function et(e,t){return e&&e.type===t?e:null}function tt(e,t){var r=function(e,t){return e&&"atom"===e.type&&e.family===t?e:null}(e,t);if(!r)throw new Error('Expected node of type "atom" and family "'+t+'", but got '+(e?"atom"===e.type?"atom of family "+e.family:"node of type "+e.type:String(e)));return r}function rt(e){var t=nt(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function nt(e){return e&&("atom"===e.type||Y.hasOwnProperty(e.type))?e:null}var it={number:3,unit:"mu"},st={number:4,unit:"mu"},ot={number:5,unit:"mu"},at={mord:{mop:it,mbin:st,mrel:ot,minner:it},mop:{mord:it,mop:it,mrel:ot,minner:it},mbin:{mord:st,mop:st,mopen:st,minner:st},mrel:{mord:ot,mop:ot,mopen:ot,minner:ot},mopen:{},mclose:{mop:it,mbin:st,mrel:ot,minner:it},mpunct:{mord:it,mop:it,mrel:ot,mopen:it,mclose:it,mpunct:it,minner:it},minner:{mord:it,mop:it,mbin:st,mrel:ot,mopen:it,mpunct:it,minner:it}},lt={mord:{mop:it},mop:{mord:it,mop:it},mbin:{},mrel:{},mopen:{},mclose:{mop:it},mpunct:{},minner:{mop:it}},ht={},ct={},pt={};function ut(e){for(var t=e.type,r=e.names,n=e.props,i=e.handler,s=e.htmlBuilder,o=e.mathmlBuilder,a={type:t,numArgs:n.numArgs,argTypes:n.argTypes,greediness:void 0===n.greediness?1:n.greediness,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,handler:i},l=0;l<r.length;++l)ht[r[l]]=a;t&&(s&&(ct[t]=s),o&&(pt[t]=o))}function dt(e){ut({type:e.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:e.htmlBuilder,mathmlBuilder:e.mathmlBuilder})}var mt=function(e){var t=et(e,"ordgroup");return t?t.body:[e]},ft=Ze.makeSpan,gt=["leftmost","mbin","mopen","mrel","mop","mpunct"],vt=["rightmost","mrel","mclose","mpunct"],yt={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT},bt={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},xt=function(e,t,r,n){void 0===n&&(n=[null,null]);for(var i=[],s=0;s<e.length;s++){var o=Tt(e[s],t);if(o instanceof M){var a=o.children;i.push.apply(i,a)}else i.push(o)}if(!r)return i;var l=t;if(1===e.length){var h=et(e[0],"sizing")||et(e[0],"styling");h&&("sizing"===h.type?l=t.havingSize(h.size):"styling"===h.type&&(l=t.havingStyle(yt[h.style])))}var c=ft([n[0]||"leftmost"],[],t),u=ft([n[1]||"rightmost"],[],t);return wt(i,(function(e,t){var r=t.classes[0],n=e.classes[0];"mbin"===r&&p.contains(vt,n)?t.classes[0]="mord":"mbin"===n&&p.contains(gt,r)&&(e.classes[0]="mord")}),{node:c},u),wt(i,(function(e,t){var r=Et(t),n=Et(e),i=r&&n?e.hasClass("mtight")?lt[r][n]:at[r][n]:null;if(i)return Ze.makeGlue(i,l)}),{node:c},u),i},wt=function e(t,r,n,i){i&&t.push(i);for(var s=0;s<t.length;s++){var o=t[s],a=kt(o);if(a)e(a.children,r,n);else if("mspace"!==o.classes[0]){var l=r(o,n.node);l&&(n.insertAfter?n.insertAfter(l):(t.unshift(l),s++)),n.node=o,n.insertAfter=function(e){return function(r){t.splice(e+1,0,r),s++}}(s)}}i&&t.pop()},kt=function(e){return e instanceof M||e instanceof P?e:null},Ct=function e(t,r){var n=kt(t);if(n){var i=n.children;if(i.length){if("right"===r)return e(i[i.length-1],"right");if("left"===r)return e(i[0],"left")}}return t},Et=function(e,t){return e?(t&&(e=Ct(e,t)),bt[e.classes[0]]||null):null},St=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return ft(t.concat(r))},Tt=function(e,t,r){if(!e)return ft();if(ct[e.type]){var n=ct[e.type](e,t);if(r&&t.size!==r.size){n=ft(t.sizingClasses(r),[n],t);var i=t.sizeMultiplier/r.sizeMultiplier;n.height*=i,n.depth*=i}return n}throw new o("Got group of unknown type: '"+e.type+"'")};function Mt(e,t){var r=ft(["base"],e,t),n=ft(["strut"]);return n.style.height=r.height+r.depth+"em",n.style.verticalAlign=-r.depth+"em",r.children.unshift(n),r}function _t(e,t){var r=null;1===e.length&&"tag"===e[0].type&&(r=e[0].tag,e=e[0].body);for(var n,i=xt(e,t,!0),s=[],o=[],a=0;a<i.length;a++)if(o.push(i[a]),i[a].hasClass("mbin")||i[a].hasClass("mrel")||i[a].hasClass("allowbreak")){for(var l=!1;a<i.length-1&&i[a+1].hasClass("mspace")&&!i[a+1].hasClass("newline");)a++,o.push(i[a]),i[a].hasClass("nobreak")&&(l=!0);l||(s.push(Mt(o,t)),o=[])}else i[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(Mt(o,t)),o=[]),s.push(i[a]));o.length>0&&s.push(Mt(o,t)),r&&((n=Mt(xt(r,t,!0))).classes=["tag"],s.push(n));var h=ft(["katex-html"],s);if(h.setAttribute("aria-hidden","true"),n){var c=n.children[0];c.style.height=h.height+h.depth+"em",c.style.verticalAlign=-h.depth+"em"}return h}function At(e){return new M(e)}var It=function(){function e(e,t){this.type=void 0,this.attributes=void 0,this.children=void 0,this.type=e,this.attributes={},this.children=t||[]}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.getAttribute=function(e){return this.attributes[e]},t.toNode=function(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e},t.toMarkup=function(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=p.escape(this.attributes[t]),e+='"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">"},t.toText=function(){return this.children.map((function(e){return e.toText()})).join("")},e}(),Ot=function(){function e(e){this.text=void 0,this.text=e}var t=e.prototype;return t.toNode=function(){return document.createTextNode(this.text)},t.toMarkup=function(){return p.escape(this.toText())},t.toText=function(){return this.text},e}(),Nt={MathNode:It,TextNode:Ot,SpaceNode:function(){function e(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":e>=-.05556&&e<=-.05555?" ⁣":e>=-.1667&&e<=-.1666?" ⁣":e>=-.2223&&e<=-.2222?" ⁣":e>=-.2778&&e<=-.2777?" ⁣":null}var t=e.prototype;return t.toNode=function(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",this.width+"em"),e},t.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},t.toText=function(){return this.character?this.character:" "},e}(),newDocumentFragment:At},Pt=function(e,t,r){return!Q[t][e]||!Q[t][e].replace||55349===e.charCodeAt(0)||ue.hasOwnProperty(e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.substr(4,2)||r.font&&"tt"===r.font.substr(4,2))||(e=Q[t][e].replace),new Nt.TextNode(e)},Rt=function(e){return 1===e.length?e[0]:new Nt.MathNode("mrow",e)},Lt=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var r=t.font;if(!r||"mathnormal"===r)return null;var n=e.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"bold-italic";if("mathbf"===r)return"bold";if("mathbb"===r)return"double-struck";if("mathfrak"===r)return"fraktur";if("mathscr"===r||"mathcal"===r)return"script";if("mathsf"===r)return"sans-serif";if("mathtt"===r)return"monospace";var i=e.text;return p.contains(["\\imath","\\jmath"],i)?null:(Q[n][i]&&Q[n][i].replace&&(i=Q[n][i].replace),j(i,Ze.fontMap[r].fontName,n)?Ze.fontMap[r].variant:null)},Ft=function(e,t,r){if(1===e.length){var n=zt(e[0],t);return r&&n instanceof It&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var i,s=[],o=0;o<e.length;o++){var a=zt(e[o],t);if(a instanceof It&&i instanceof It){if("mtext"===a.type&&"mtext"===i.type&&a.getAttribute("mathvariant")===i.getAttribute("mathvariant")){var l;(l=i.children).push.apply(l,a.children);continue}if("mn"===a.type&&"mn"===i.type){var h;(h=i.children).push.apply(h,a.children);continue}if("mi"===a.type&&1===a.children.length&&"mn"===i.type){var c=a.children[0];if(c instanceof Ot&&"."===c.text){var p;(p=i.children).push.apply(p,a.children);continue}}else if("mi"===i.type&&1===i.children.length){var u=i.children[0];if(u instanceof Ot&&"̸"===u.text&&("mo"===a.type||"mi"===a.type||"mn"===a.type)){var d=a.children[0];d instanceof Ot&&d.text.length>0&&(d.text=d.text.slice(0,1)+"̸"+d.text.slice(1),s.pop())}}}s.push(a),i=a}return s},Dt=function(e,t,r){return Rt(Ft(e,t,r))},zt=function(e,t){if(!e)return new Nt.MathNode("mrow");if(pt[e.type])return pt[e.type](e,t);throw new o("Got group of unknown type: '"+e.type+"'")};function Bt(e,t,r,n){var i,s=Ft(e,r);i=1===s.length&&s[0]instanceof It&&p.contains(["mrow","mtable"],s[0].type)?s[0]:new Nt.MathNode("mrow",s);var o=new Nt.MathNode("annotation",[new Nt.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var a=new Nt.MathNode("semantics",[i,o]),l=new Nt.MathNode("math",[a]);l.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML");var h=n?"katex":"katex-mathml";return Ze.makeSpan([h],[l])}var qt=function(e){return new Fe({style:e.displayMode?w.DISPLAY:w.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Ht=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=Ze.makeSpan(r,[e])}return e},Ut=function(e,t,r){var n,i=qt(r);if("mathml"===r.output)return Bt(e,t,i,!0);if("html"===r.output){var s=_t(e,i);n=Ze.makeSpan(["katex"],[s])}else{var o=Bt(e,t,i,!1),a=_t(e,i);n=Ze.makeSpan(["katex"],[o,a])}return Ht(n,r)},Wt={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋"},jt={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Gt=function(e,t,r,n){var i,s=e.height+e.depth+2*r;if(/fbox|color/.test(t)){if(i=Ze.makeSpan(["stretchy",t],[],n),"fbox"===t){var o=n.color&&n.getColor();o&&(i.style.borderColor=o)}}else{var a=[];/^[bx]cancel$/.test(t)&&a.push(new B({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&a.push(new B({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new D(a,{width:"100%",height:s+"em"});i=Ze.makeSvgSpan([],[l],n)}return i.height=s,i.style.height=s+"em",i},Vt=function(e){var t=new Nt.MathNode("mo",[new Nt.TextNode(Wt[e.substr(1)])]);return t.setAttribute("stretchy","true"),t},Yt=function(e,t){var r=function(){var r=4e5,n=e.label.substr(1);if(p.contains(["widehat","widecheck","widetilde","utilde"],n)){var i,s,o,a="ordgroup"===(m=e.base).type?m.body.length:1;if(a>5)"widehat"===n||"widecheck"===n?(i=420,r=2364,o=.42,s=n+"4"):(i=312,r=2340,o=.34,s="tilde4");else{var l=[1,1,2,2,3,3][a];"widehat"===n||"widecheck"===n?(r=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],o=[0,.24,.3,.3,.36,.42][l],s=n+l):(r=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],o=[0,.26,.286,.3,.306,.34][l],s="tilde"+l)}var h=new z(s),c=new D([h],{width:"100%",height:o+"em",viewBox:"0 0 "+r+" "+i,preserveAspectRatio:"none"});return{span:Ze.makeSvgSpan([],[c],t),minWidth:0,height:o}}var u,d,m,f=[],g=jt[n],v=g[0],y=g[1],b=g[2],x=b/1e3,w=v.length;if(1===w)u=["hide-tail"],d=[g[3]];else if(2===w)u=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else{if(3!==w)throw new Error("Correct katexImagesData or update code here to support\n                    "+w+" children.");u=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"]}for(var k=0;k<w;k++){var C=new z(v[k]),E=new D([C],{width:"400em",height:x+"em",viewBox:"0 0 "+r+" "+b,preserveAspectRatio:d[k]+" slice"}),S=Ze.makeSvgSpan([u[k]],[E],t);if(1===w)return{span:S,minWidth:y,height:x};S.style.height=x+"em",f.push(S)}return{span:Ze.makeSpan(["stretchy"],f,t),minWidth:y,height:x}}(),n=r.span,i=r.minWidth,s=r.height;return n.height=s,n.style.height=s+"em",i>0&&(n.style.minWidth=i+"em"),n},Xt=function(e,t){var r,n,i,s=et(e,"supsub");s?(r=(n=Je(s.base,"accent")).base,s.base=r,i=function(e){if(e instanceof N)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(Tt(s,t)),s.base=n):r=(n=Je(e,"accent")).base;var o=Tt(r,t.havingCrampedStyle()),a=0;if(n.isShifty&&p.isCharacterBox(r)){var l=p.getBaseElem(r);a=q(Tt(l,t.havingCrampedStyle())).skew}var h,c=Math.min(o.height,t.fontMetrics().xHeight);if(n.isStretchy)h=Yt(n,t),h=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+2*a+"em)",marginLeft:2*a+"em"}:void 0}]},t);else{var u,d;"\\vec"===n.label?(u=Ze.staticSvg("vec",t),d=Ze.svgData.vec[1]):((u=q(u=Ze.makeOrd({mode:n.mode,text:n.label},t,"textord"))).italic=0,d=u.width),h=Ze.makeSpan(["accent-body"],[u]);var m="\\textcircled"===n.label;m&&(h.classes.push("accent-full"),c=o.height);var f=a;m||(f-=d/2),h.style.left=f+"em","\\textcircled"===n.label&&(h.style.top=".2em"),h=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-c},{type:"elem",elem:h}]},t)}var g=Ze.makeSpan(["mord","accent"],[h],t);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},Qt=function(e,t){var r=e.isStretchy?Vt(e.label):new Nt.MathNode("mo",[Pt(e.label,e.mode)]),n=new Nt.MathNode("mover",[zt(e.base,t),r]);return n.setAttribute("accent","true"),n},Kt=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((function(e){return"\\"+e})).join("|"));ut({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(e,t){var r=t[0],n=!Kt.test(e.funcName),i=!n||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:Xt,mathmlBuilder:Qt}),ut({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!1},handler:function(e,t){var r=t[0];return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:Xt,mathmlBuilder:Qt}),ut({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:function(e,t){var r=Tt(e.base,t),n=Yt(e,t),i="\\utilde"===e.label?.12:0,s=Ze.makeVList({positionType:"bottom",positionData:n.height+i,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},t);return Ze.makeSpan(["mord","accentunder"],[s],t)},mathmlBuilder:function(e,t){var r=Vt(e.label),n=new Nt.MathNode("munder",[zt(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var $t=function(e){var t=new Nt.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};ut({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],props:{numArgs:1,numOptionalArgs:1},handler:function(e,t,r){var n=e.parser,i=e.funcName;return{type:"xArrow",mode:n.mode,label:i,body:t[0],below:r[0]}},htmlBuilder:function(e,t){var r,n=t.style,i=t.havingStyle(n.sup()),s=Ze.wrapFragment(Tt(e.body,i,t),t);s.classes.push("x-arrow-pad"),e.below&&(i=t.havingStyle(n.sub()),(r=Ze.wrapFragment(Tt(e.below,i,t),t)).classes.push("x-arrow-pad"));var o,a=Yt(e,t),l=-t.fontMetrics().axisHeight+.5*a.height,h=-t.fontMetrics().axisHeight-.5*a.height-.111;if((s.depth>.25||"\\xleftequilibrium"===e.label)&&(h-=s.depth),r){var c=-t.fontMetrics().axisHeight+r.height+.5*a.height+.111;o=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:h},{type:"elem",elem:a,shift:l},{type:"elem",elem:r,shift:c}]},t)}else o=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:h},{type:"elem",elem:a,shift:l}]},t);return o.children[0].children[0].children[1].classes.push("svg-align"),Ze.makeSpan(["mrel","x-arrow"],[o],t)},mathmlBuilder:function(e,t){var r,n=Vt(e.label);if(e.body){var i=$t(zt(e.body,t));if(e.below){var s=$t(zt(e.below,t));r=new Nt.MathNode("munderover",[n,s,i])}else r=new Nt.MathNode("mover",[n,i])}else if(e.below){var o=$t(zt(e.below,t));r=new Nt.MathNode("munder",[n,o])}else r=$t(),r=new Nt.MathNode("mover",[n,r]);return r}}),ut({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){for(var r=e.parser,n=Je(t[0],"ordgroup").body,i="",s=0;s<n.length;s++)i+=Je(n[s],"textord").text;var a=parseInt(i);if(isNaN(a))throw new o("\\@char has non-numeric argument "+i);return{type:"textord",mode:r.mode,text:String.fromCharCode(a)}}});var Zt=function(e,t){var r=xt(e.body,t.withColor(e.color),!1);return Ze.makeFragment(r)},Jt=function(e,t){var r=Ft(e.body,t.withColor(e.color)),n=new Nt.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};ut({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},handler:function(e,t){var r=e.parser,n=Je(t[0],"color-token").color,i=t[1];return{type:"color",mode:r.mode,color:n,body:mt(i)}},htmlBuilder:Zt,mathmlBuilder:Jt}),ut({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,greediness:3,argTypes:["color"]},handler:function(e,t){var r=e.parser,n=e.breakOnTokenText,i=Je(t[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var s=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:s}},htmlBuilder:Zt,mathmlBuilder:Jt}),ut({type:"cr",names:["\\cr","\\newline"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(e,t,r){var n=e.parser,i=e.funcName,s=r[0],o="\\cr"===i,a=!1;return o||(a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode")),{type:"cr",mode:n.mode,newLine:a,newRow:o,size:s&&Je(s,"size").value}},htmlBuilder:function(e,t){if(e.newRow)throw new o("\\cr valid only within a tabular/array environment");var r=Ze.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=qe(e.size,t)+"em")),r},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",qe(e.size,t)+"em")),r}});var er=function(e,t,r){var n=j(Q.math[e]&&Q.math[e].replace||e,t,r);if(!n)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return n},tr=function(e,t,r,n){var i=r.havingBaseStyle(t),s=Ze.makeSpan(n.concat(i.sizingClasses(r)),[e],r),o=i.sizeMultiplier/r.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=i.sizeMultiplier,s},rr=function(e,t,r){var n=t.havingBaseStyle(r),i=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=i+"em",e.height-=i,e.depth+=i},nr=function(e,t,r,n,i,s){var o=function(e,t,r,n){return Ze.makeSymbol(e,"Size"+t+"-Regular",r,n)}(e,t,i,n),a=tr(Ze.makeSpan(["delimsizing","size"+t],[o],n),w.TEXT,n,s);return r&&rr(a,n,w.TEXT),a},ir=function(e,t,r){var n;return n="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:Ze.makeSpan(["delimsizinginner",n],[Ze.makeSpan([],[Ze.makeSymbol(e,t,r)])])}},sr={type:"kern",size:-.005},or=function(e,t,r,n,i,s){var o,a,l,h;o=l=h=e,a=null;var c="Size1-Regular";"\\uparrow"===e?l=h="⏐":"\\Uparrow"===e?l=h="‖":"\\downarrow"===e?o=l="⏐":"\\Downarrow"===e?o=l="‖":"\\updownarrow"===e?(o="\\uparrow",l="⏐",h="\\downarrow"):"\\Updownarrow"===e?(o="\\Uparrow",l="‖",h="\\Downarrow"):"["===e||"\\lbrack"===e?(o="⎡",l="⎢",h="⎣",c="Size4-Regular"):"]"===e||"\\rbrack"===e?(o="⎤",l="⎥",h="⎦",c="Size4-Regular"):"\\lfloor"===e||"⌊"===e?(l=o="⎢",h="⎣",c="Size4-Regular"):"\\lceil"===e||"⌈"===e?(o="⎡",l=h="⎢",c="Size4-Regular"):"\\rfloor"===e||"⌋"===e?(l=o="⎥",h="⎦",c="Size4-Regular"):"\\rceil"===e||"⌉"===e?(o="⎤",l=h="⎥",c="Size4-Regular"):"("===e||"\\lparen"===e?(o="⎛",l="⎜",h="⎝",c="Size4-Regular"):")"===e||"\\rparen"===e?(o="⎞",l="⎟",h="⎠",c="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(o="⎧",a="⎨",h="⎩",l="⎪",c="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="⎫",a="⎬",h="⎭",l="⎪",c="Size4-Regular"):"\\lgroup"===e||"⟮"===e?(o="⎧",h="⎩",l="⎪",c="Size4-Regular"):"\\rgroup"===e||"⟯"===e?(o="⎫",h="⎭",l="⎪",c="Size4-Regular"):"\\lmoustache"===e||"⎰"===e?(o="⎧",h="⎭",l="⎪",c="Size4-Regular"):"\\rmoustache"!==e&&"⎱"!==e||(o="⎫",h="⎩",l="⎪",c="Size4-Regular");var p=er(o,c,i),u=p.height+p.depth,d=er(l,c,i),m=d.height+d.depth,f=er(h,c,i),g=f.height+f.depth,v=0,y=1;if(null!==a){var b=er(a,c,i);v=b.height+b.depth,y=2}var x=u+g+v,k=Math.max(0,Math.ceil((t-x)/(y*m))),C=x+k*y*m,E=n.fontMetrics().axisHeight;r&&(E*=n.sizeMultiplier);var S=C/2-E,T=.005*(k+1)-m,M=[];if(M.push(ir(h,c,i)),null===a)for(var _=0;_<k;_++)M.push(sr),M.push(ir(l,c,i));else{for(var A=0;A<k;A++)M.push(sr),M.push(ir(l,c,i));M.push({type:"kern",size:T}),M.push(ir(l,c,i)),M.push(sr),M.push(ir(a,c,i));for(var I=0;I<k;I++)M.push(sr),M.push(ir(l,c,i))}M.push({type:"kern",size:T}),M.push(ir(l,c,i)),M.push(sr),M.push(ir(o,c,i));var O=n.havingBaseStyle(w.TEXT),N=Ze.makeVList({positionType:"bottom",positionData:S,children:M},O);return tr(Ze.makeSpan(["delimsizing","mult"],[N],O),w.TEXT,n,s)},ar=.08,lr=function(e,t,r,n,i){var s=function(e,t,r){t*=1e3;var n="";switch(e){case"sqrtMain":n=function(e,t){return"M95,"+(622+e+t)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,S);break;case"sqrtSize1":n=function(e,t){return"M263,"+(601+e+t)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,S);break;case"sqrtSize2":n=function(e,t){return"M983 "+(10+e+t)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,S);break;case"sqrtSize3":n=function(e,t){return"M424,"+(2398+e+t)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+t+"\nh400000v"+(40+e)+"h-400000z"}(t,S);break;case"sqrtSize4":n=function(e,t){return"M473,"+(2713+e+t)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"}(t,S);break;case"sqrtTall":n=function(e,t,r){return"M702 "+(e+t)+"H400000"+(40+e)+"\nH742v"+(r-54-t-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+t+"H400000v"+(40+e)+"H742z"}(t,S,r)}return n}(e,n,r),o=new z(e,s),a=new D([o],{width:"400em",height:t+"em",viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Ze.makeSvgSpan(["hide-tail"],[a],i)},hr=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],cr=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],pr=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],ur=[0,1.2,1.8,2.4,3],dr=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],mr=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"stack"}],fr=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],gr=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},vr=function(e,t,r,n){for(var i=Math.min(2,3-n.style.size);i<r.length&&"stack"!==r[i].type;i++){var s=er(e,gr(r[i]),"math"),o=s.height+s.depth;if("small"===r[i].type&&(o*=n.havingBaseStyle(r[i].style).sizeMultiplier),o>t)return r[i]}return r[r.length-1]},yr=function(e,t,r,n,i,s){var o;"<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),o=p.contains(pr,e)?dr:p.contains(hr,e)?fr:mr;var a=vr(e,t,o,n);return"small"===a.type?function(e,t,r,n,i,s){var o=Ze.makeSymbol(e,"Main-Regular",i,n),a=tr(o,t,n,s);return r&&rr(a,n,t),a}(e,a.style,r,n,i,s):"large"===a.type?nr(e,a.size,r,n,i,s):or(e,t,r,n,i,s)},br=function(e,t){var r,n,i=t.havingBaseSizing(),s=vr("\\surd",e*i.sizeMultiplier,fr,i),o=i.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,h=0,c=0;return"small"===s.type?(e<1?o=1:e<1.4&&(o=.7),h=(1+a)/o,(r=lr("sqrtMain",l=(1+a+ar)/o,c=1e3+1e3*a+80,a,t)).style.minWidth="0.853em",n=.833/o):"large"===s.type?(c=1080*ur[s.size],h=(ur[s.size]+a)/o,l=(ur[s.size]+a+ar)/o,(r=lr("sqrtSize"+s.size,l,c,a,t)).style.minWidth="1.02em",n=1/o):(l=e+a+ar,h=e+a,c=Math.floor(1e3*e+a)+80,(r=lr("sqrtTall",l,c,a,t)).style.minWidth="0.742em",n=1.056),r.height=h,r.style.height=l+"em",{span:r,advanceWidth:n,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*o}},xr=function(e,t,r,n,i){if("<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),p.contains(hr,e)||p.contains(pr,e))return nr(e,t,!1,r,n,i);if(p.contains(cr,e))return or(e,ur[t],!1,r,n,i);throw new o("Illegal delimiter: '"+e+"'")},wr=yr,kr=function(e,t,r,n,i,s){var o=n.fontMetrics().axisHeight*n.sizeMultiplier,a=5/n.fontMetrics().ptPerEm,l=Math.max(t-o,r+o),h=Math.max(l/500*901,2*l-a);return yr(e,h,!0,n,i,s)},Cr={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Er=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Sr(e,t){var r=nt(e);if(r&&p.contains(Er,r.text))return r;throw new o("Invalid delimiter: '"+(r?r.text:JSON.stringify(e))+"' after '"+t.funcName+"'",e)}function Tr(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ut({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1},handler:function(e,t){var r=Sr(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Cr[e.funcName].size,mclass:Cr[e.funcName].mclass,delim:r.text}},htmlBuilder:function(e,t){return"."===e.delim?Ze.makeSpan([e.mclass]):xr(e.delim,e.size,t,e.mode,[e.mclass])},mathmlBuilder:function(e){var t=[];"."!==e.delim&&t.push(Pt(e.delim,e.mode));var r=new Nt.MathNode("mo",t);return"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r}}),ut({type:"leftright-right",names:["\\right"],props:{numArgs:1},handler:function(e,t){var r=e.parser.gullet.macros.get("\\current@color");if(r&&"string"!=typeof r)throw new o("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Sr(t[0],e).text,color:r}}}),ut({type:"leftright",names:["\\left"],props:{numArgs:1},handler:function(e,t){var r=Sr(t[0],e),n=e.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=Je(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:s.delim,rightColor:s.color}},htmlBuilder:function(e,t){Tr(e);for(var r,n,i=xt(e.body,t,!0,["mopen","mclose"]),s=0,o=0,a=!1,l=0;l<i.length;l++)i[l].isMiddle?a=!0:(s=Math.max(i[l].height,s),o=Math.max(i[l].depth,o));if(s*=t.sizeMultiplier,o*=t.sizeMultiplier,r="."===e.left?St(t,["mopen"]):kr(e.left,s,o,t,e.mode,["mopen"]),i.unshift(r),a)for(var h=1;h<i.length;h++){var c=i[h].isMiddle;c&&(i[h]=kr(c.delim,s,o,c.options,e.mode,[]))}if("."===e.right)n=St(t,["mclose"]);else{var p=e.rightColor?t.withColor(e.rightColor):t;n=kr(e.right,s,o,p,e.mode,["mclose"])}return i.push(n),Ze.makeSpan(["minner"],i,t)},mathmlBuilder:function(e,t){Tr(e);var r=Ft(e.body,t);if("."!==e.left){var n=new Nt.MathNode("mo",[Pt(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if("."!==e.right){var i=new Nt.MathNode("mo",[Pt(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),r.push(i)}return Rt(r)}}),ut({type:"middle",names:["\\middle"],props:{numArgs:1},handler:function(e,t){var r=Sr(t[0],e);if(!e.parser.leftrightDepth)throw new o("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:function(e,t){var r;if("."===e.delim)r=St(t,[]);else{r=xr(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:function(e,t){var r="\\vert"===e.delim||"|"===e.delim?Pt("|","text"):Pt(e.delim,e.mode),n=new Nt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var Mr=function(e,t){var r,n,i=Ze.wrapFragment(Tt(e.body,t),t),s=e.label.substr(1),o=t.sizeMultiplier,a=0,l=p.isCharacterBox(e.body);if("sout"===s)(r=Ze.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/o,a=-.5*t.fontMetrics().xHeight;else{/cancel/.test(s)?l||i.classes.push("cancel-pad"):i.classes.push("boxpad");var h=0,c=0;/box/.test(s)?(c=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),h=t.fontMetrics().fboxsep+("colorbox"===s?0:c)):h=l?.2:0,r=Gt(i,s,h,t),/fbox|boxed|fcolorbox/.test(s)&&(r.style.borderStyle="solid",r.style.borderWidth=c+"em"),a=i.depth+h,e.backgroundColor&&(r.style.backgroundColor=e.backgroundColor,e.borderColor&&(r.style.borderColor=e.borderColor))}return n=e.backgroundColor?Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:a},{type:"elem",elem:i,shift:0}]},t):Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:r,shift:a,wrapperClasses:/cancel/.test(s)?["svg-align"]:[]}]},t),/cancel/.test(s)&&(n.height=i.height,n.depth=i.depth),/cancel/.test(s)&&!l?Ze.makeSpan(["mord","cancel-lap"],[n],t):Ze.makeSpan(["mord"],[n],t)},_r=function(e,t){var r=0,n=new Nt.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[zt(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};ut({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","text"]},handler:function(e,t,r){var n=e.parser,i=e.funcName,s=Je(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:Mr,mathmlBuilder:_r}),ut({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,greediness:3,argTypes:["color","color","text"]},handler:function(e,t,r){var n=e.parser,i=e.funcName,s=Je(t[0],"color-token").color,o=Je(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:Mr,mathmlBuilder:_r}),ut({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(e,t){return{type:"enclose",mode:e.parser.mode,label:"\\fbox",body:t[0]}}}),ut({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout"],props:{numArgs:1},handler:function(e,t,r){var n=e.parser,i=e.funcName,s=t[0];return{type:"enclose",mode:n.mode,label:i,body:s}},htmlBuilder:Mr,mathmlBuilder:_r});var Ar={};function Ir(e){for(var t=e.type,r=e.names,n=e.props,i=e.handler,s=e.htmlBuilder,o=e.mathmlBuilder,a={type:t,numArgs:n.numArgs||0,greediness:1,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<r.length;++l)Ar[r[l]]=a;s&&(ct[t]=s),o&&(pt[t]=o)}function Or(e){var t=[];e.consumeSpaces();for(var r=e.fetch().text;"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}function Nr(e,t,r){var n=t.hskipBeforeAndAfter,i=t.addJot,s=t.cols,a=t.arraystretch,l=t.colSeparationType;if(e.gullet.beginGroup(),e.gullet.macros.set("\\\\","\\cr"),!a){var h=e.gullet.expandMacroAsText("\\arraystretch");if(null==h)a=1;else if(!(a=parseFloat(h))||a<0)throw new o("Invalid \\arraystretch: "+h)}e.gullet.beginGroup();var c=[],p=[c],u=[],d=[];for(d.push(Or(e));;){var m=e.parseExpression(!1,"\\cr");e.gullet.endGroup(),e.gullet.beginGroup(),m={type:"ordgroup",mode:e.mode,body:m},r&&(m={type:"styling",mode:e.mode,style:r,body:[m]}),c.push(m);var f=e.fetch().text;if("&"===f)e.consume();else{if("\\end"===f){1===c.length&&"styling"===m.type&&0===m.body[0].body.length&&p.pop(),d.length<p.length+1&&d.push([]);break}if("\\cr"!==f)throw new o("Expected & or \\\\ or \\cr or \\end",e.nextToken);var g=Je(e.parseFunction(),"cr");u.push(g.size),d.push(Or(e)),c=[],p.push(c)}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:a,body:p,cols:s,rowGaps:u,hskipBeforeAndAfter:n,hLinesBeforeRow:d,colSeparationType:l}}function Pr(e){return"d"===e.substr(0,1)?"display":"text"}var Rr=function(e,t){var r,n,i=e.body.length,s=e.hLinesBeforeRow,a=0,l=new Array(i),h=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,d=5*u;e.colSeparationType&&"small"===e.colSeparationType&&(d=t.havingStyle(w.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var m=12*u,f=3*u,g=e.arraystretch*m,v=.7*g,y=.3*g,b=0;function x(e){for(var t=0;t<e.length;++t)t>0&&(b+=.25),h.push({pos:b,isDashed:e[t]})}for(x(s[0]),r=0;r<e.body.length;++r){var k=e.body[r],C=v,E=y;a<k.length&&(a=k.length);var S=new Array(k.length);for(n=0;n<k.length;++n){var T=Tt(k[n],t);E<T.depth&&(E=T.depth),C<T.height&&(C=T.height),S[n]=T}var M=e.rowGaps[r],_=0;M&&(_=qe(M,t))>0&&(E<(_+=y)&&(E=_),_=0),e.addJot&&(E+=f),S.height=C,S.depth=E,b+=C,S.pos=b,b+=E+_,l[r]=S,x(s[r+1])}var A,I,O=b/2+t.fontMetrics().axisHeight,N=e.cols||[],P=[];for(n=0,I=0;n<a||I<N.length;++n,++I){for(var R=N[I]||{},L=!0;"separator"===R.type;){if(L||((A=Ze.makeSpan(["arraycolsep"],[])).style.width=t.fontMetrics().doubleRuleSep+"em",P.push(A)),"|"!==R.separator&&":"!==R.separator)throw new o("Invalid separator type: "+R.separator);var F="|"===R.separator?"solid":"dashed",D=Ze.makeSpan(["vertical-separator"],[],t);D.style.height=b+"em",D.style.borderRightWidth=c+"em",D.style.borderRightStyle=F,D.style.margin="0 -"+c/2+"em",D.style.verticalAlign=-(b-O)+"em",P.push(D),R=N[++I]||{},L=!1}if(!(n>=a)){var z=void 0;(n>0||e.hskipBeforeAndAfter)&&0!==(z=p.deflt(R.pregap,d))&&((A=Ze.makeSpan(["arraycolsep"],[])).style.width=z+"em",P.push(A));var B=[];for(r=0;r<i;++r){var q=l[r],H=q[n];if(H){var U=q.pos-O;H.depth=q.depth,H.height=q.height,B.push({type:"elem",elem:H,shift:U})}}B=Ze.makeVList({positionType:"individualShift",children:B},t),B=Ze.makeSpan(["col-align-"+(R.align||"c")],[B]),P.push(B),(n<a-1||e.hskipBeforeAndAfter)&&0!==(z=p.deflt(R.postgap,d))&&((A=Ze.makeSpan(["arraycolsep"],[])).style.width=z+"em",P.push(A))}}if(l=Ze.makeSpan(["mtable"],P),h.length>0){for(var W=Ze.makeLineSpan("hline",t,c),j=Ze.makeLineSpan("hdashline",t,c),G=[{type:"elem",elem:l,shift:0}];h.length>0;){var V=h.pop(),Y=V.pos-O;V.isDashed?G.push({type:"elem",elem:j,shift:Y}):G.push({type:"elem",elem:W,shift:Y})}l=Ze.makeVList({positionType:"individualShift",children:G},t)}return Ze.makeSpan(["mord"],[l],t)},Lr={c:"center ",l:"left ",r:"right "},Fr=function(e,t){var r=new Nt.MathNode("mtable",e.body.map((function(e){return new Nt.MathNode("mtr",e.map((function(e){return new Nt.MathNode("mtd",[zt(e,t)])})))}))),n=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);r.setAttribute("rowspacing",n+"em");var i="",s="";if(e.cols){var o=e.cols,a="",l=!1,h=0,c=o.length;"separator"===o[0].type&&(i+="top ",h=1),"separator"===o[o.length-1].type&&(i+="bottom ",c-=1);for(var p=h;p<c;p++)"align"===o[p].type?(s+=Lr[o[p].align],l&&(a+="none "),l=!0):"separator"===o[p].type&&l&&(a+="|"===o[p].separator?"solid ":"dashed ",l=!1);r.setAttribute("columnalign",s.trim()),/[sd]/.test(a)&&r.setAttribute("columnlines",a.trim())}if("align"===e.colSeparationType){for(var u=e.cols||[],d="",m=1;m<u.length;m++)d+=m%2?"0em ":"1em ";r.setAttribute("columnspacing",d.trim())}else"alignat"===e.colSeparationType?r.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?r.setAttribute("columnspacing","0.2778em"):r.setAttribute("columnspacing","1em");var f="",g=e.hLinesBeforeRow;i+=g[0].length>0?"left ":"",i+=g[g.length-1].length>0?"right ":"";for(var v=1;v<g.length-1;v++)f+=0===g[v].length?"none ":g[v][0]?"dashed ":"solid ";return/[sd]/.test(f)&&r.setAttribute("rowlines",f.trim()),""!==i&&(r=new Nt.MathNode("menclose",[r])).setAttribute("notation",i.trim()),e.arraystretch&&e.arraystretch<1&&(r=new Nt.MathNode("mstyle",[r])).setAttribute("scriptlevel","1"),r},Dr=function(e,t){var r,n=[],i=Nr(e.parser,{cols:n,addJot:!0},"display"),s=0,a={type:"ordgroup",mode:e.mode,body:[]},l=et(t[0],"ordgroup");if(l){for(var h="",c=0;c<l.body.length;c++)h+=Je(l.body[c],"textord").text;r=Number(h),s=2*r}var p=!s;i.body.forEach((function(e){for(var t=1;t<e.length;t+=2){var n=Je(e[t],"styling");Je(n.body[0],"ordgroup").body.unshift(a)}if(p)s<e.length&&(s=e.length);else{var i=e.length/2;if(r<i)throw new o("Too many math in a row: expected "+r+", but got "+i,e[0])}}));for(var u=0;u<s;++u){var d="r",m=0;u%2==1?d="l":u>0&&p&&(m=1),n[u]={type:"align",align:d,pregap:m,postgap:0}}return i.colSeparationType=p?"align":"alignat",i};Ir({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(e,t){var r={cols:(nt(t[0])?[t[0]]:Je(t[0],"ordgroup").body).map((function(e){var t=rt(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new o("Unknown column alignment: "+t,e)})),hskipBeforeAndAfter:!0};return Nr(e.parser,r,Pr(e.envName))},htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],props:{numArgs:0},handler:function(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName],r=Nr(e.parser,{hskipBeforeAndAfter:!1},Pr(e.envName));return t?{type:"leftright",mode:e.mode,body:[r],left:t[0],right:t[1],rightColor:void 0}:r},htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(e){var t=Nr(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["subarray"],props:{numArgs:1},handler:function(e,t){var r=(nt(t[0])?[t[0]]:Je(t[0],"ordgroup").body).map((function(e){var t=rt(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new o("Unknown column alignment: "+t,e)}));if(r.length>1)throw new o("{subarray} can contain only one column");var n={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=Nr(e.parser,n,"script")).body[0].length>1)throw new o("{subarray} can contain only one column");return n},htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["cases","dcases"],props:{numArgs:0},handler:function(e){var t=Nr(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Pr(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:"\\{",right:".",rightColor:void 0}},htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["aligned"],props:{numArgs:0},handler:Dr,htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["gathered"],props:{numArgs:0},handler:function(e){return Nr(e.parser,{cols:[{type:"align",align:"c"}],addJot:!0},"display")},htmlBuilder:Rr,mathmlBuilder:Fr}),Ir({type:"array",names:["alignedat"],props:{numArgs:1},handler:Dr,htmlBuilder:Rr,mathmlBuilder:Fr}),ut({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(e,t){throw new o(e.funcName+" valid only within array environment")}});var zr=Ar;ut({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];if("ordgroup"!==i.type)throw new o("Invalid environment name",i);for(var s="",a=0;a<i.body.length;++a)s+=Je(i.body[a],"textord").text;if("\\begin"===n){if(!zr.hasOwnProperty(s))throw new o("No such environment: "+s,i);var l=zr[s],h=r.parseArguments("\\begin{"+s+"}",l),c=h.args,p=h.optArgs,u={mode:r.mode,envName:s,parser:r},d=l.handler(u,c,p);r.expect("\\end",!1);var m=r.nextToken,f=Je(r.parseFunction(),"environment");if(f.name!==s)throw new o("Mismatch: \\begin{"+s+"} matched by \\end{"+f.name+"}",m);return d}return{type:"environment",mode:r.mode,name:s,nameGroup:i}}});var Br=Ze.makeSpan;function qr(e,t){var r=xt(e.body,t,!0);return Br([e.mclass],r,t)}function Hr(e,t){var r,n=Ft(e.body,t);return"minner"===e.mclass?Nt.newDocumentFragment(n):("mord"===e.mclass?e.isCharacterBox?(r=n[0]).type="mi":r=new Nt.MathNode("mi",n):(e.isCharacterBox?(r=n[0]).type="mo":r=new Nt.MathNode("mo",n),"mbin"===e.mclass?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):"mopen"!==e.mclass&&"mclose"!==e.mclass||(r.attributes.lspace="0em",r.attributes.rspace="0em")),r)}ut({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.substr(5),body:mt(i),isCharacterBox:p.isCharacterBox(i)}},htmlBuilder:qr,mathmlBuilder:Hr});var Ur=function(e){var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};ut({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(e,t){return{type:"mclass",mode:e.parser.mode,mclass:Ur(t[0]),body:[t[1]],isCharacterBox:p.isCharacterBox(t[1])}}}),ut({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(e,t){var r,n=e.parser,i=e.funcName,s=t[1],o=t[0];r="\\stackrel"!==i?Ur(s):"mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:mt(s)},l={type:"supsub",mode:o.mode,base:a,sup:"\\underset"===i?null:o,sub:"\\underset"===i?o:null};return{type:"mclass",mode:n.mode,mclass:r,body:[l],isCharacterBox:p.isCharacterBox(l)}},htmlBuilder:qr,mathmlBuilder:Hr});var Wr=function(e,t){var r=e.font,n=t.withFont(r);return Tt(e.body,n)},jr=function(e,t){var r=e.font,n=t.withFont(r);return zt(e.body,n)},Gr={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ut({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,greediness:2},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0],s=n;return s in Gr&&(s=Gr[s]),{type:"font",mode:r.mode,font:s.slice(1),body:i}},htmlBuilder:Wr,mathmlBuilder:jr}),ut({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1,greediness:2},handler:function(e,t){var r=e.parser,n=t[0],i=p.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Ur(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}}),ut({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it"],props:{numArgs:0,allowedInText:!0},handler:function(e,t){var r=e.parser,n=e.funcName,i=e.breakOnTokenText,s=r.mode,o=r.parseExpression(!0,i);return{type:"font",mode:s,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:Wr,mathmlBuilder:jr});var Vr=function(e,t){var r=t;return"display"===e?r=r.id>=w.SCRIPT.id?r.text():w.DISPLAY:"text"===e&&r.size===w.DISPLAY.size?r=w.TEXT:"script"===e?r=w.SCRIPT:"scriptscript"===e&&(r=w.SCRIPTSCRIPT),r},Yr=function(e,t){var r,n=Vr(e.size,t.style),i=n.fracNum(),s=n.fracDen();r=t.havingStyle(i);var o=Tt(e.numer,r,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}r=t.havingStyle(s);var h,c,p,u,d,m,f,g,v,y,b=Tt(e.denom,r,t);if(e.hasBarLine?(e.barSize?(c=qe(e.barSize,t),h=Ze.makeLineSpan("frac-line",t,c)):h=Ze.makeLineSpan("frac-line",t),c=h.height,p=h.height):(h=null,c=0,p=t.fontMetrics().defaultRuleThickness),n.size===w.DISPLAY.size||"display"===e.size?(u=t.fontMetrics().num1,d=c>0?3*p:7*p,m=t.fontMetrics().denom1):(c>0?(u=t.fontMetrics().num2,d=p):(u=t.fontMetrics().num3,d=3*p),m=t.fontMetrics().denom2),h){var x=t.fontMetrics().axisHeight;u-o.depth-(x+.5*c)<d&&(u+=d-(u-o.depth-(x+.5*c))),x-.5*c-(b.height-m)<d&&(m+=d-(x-.5*c-(b.height-m)));var k=-(x-.5*c);f=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:m},{type:"elem",elem:h,shift:k},{type:"elem",elem:o,shift:-u}]},t)}else{var C=u-o.depth-(b.height-m);C<d&&(u+=.5*(d-C),m+=.5*(d-C)),f=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:m},{type:"elem",elem:o,shift:-u}]},t)}return r=t.havingStyle(n),f.height*=r.sizeMultiplier/t.sizeMultiplier,f.depth*=r.sizeMultiplier/t.sizeMultiplier,g=n.size===w.DISPLAY.size?t.fontMetrics().delim1:t.fontMetrics().delim2,v=null==e.leftDelim?St(t,["mopen"]):wr(e.leftDelim,g,!0,t.havingStyle(n),e.mode,["mopen"]),y=e.continued?Ze.makeSpan([]):null==e.rightDelim?St(t,["mclose"]):wr(e.rightDelim,g,!0,t.havingStyle(n),e.mode,["mclose"]),Ze.makeSpan(["mord"].concat(r.sizingClasses(t)),[v,Ze.makeSpan(["mfrac"],[f]),y],t)},Xr=function(e,t){var r=new Nt.MathNode("mfrac",[zt(e.numer,t),zt(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var n=qe(e.barSize,t);r.setAttribute("linethickness",n+"em")}}else r.setAttribute("linethickness","0px");var i=Vr(e.size,t.style);if(i.size!==t.style.size){r=new Nt.MathNode("mstyle",[r]);var s=i.size===w.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",s),r.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var o=[];if(null!=e.leftDelim){var a=new Nt.MathNode("mo",[new Nt.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(r),null!=e.rightDelim){var l=new Nt.MathNode("mo",[new Nt.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return Rt(o)}return r};ut({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,greediness:2},handler:function(e,t){var r,n=e.parser,i=e.funcName,s=t[0],o=t[1],a=null,l=null,h="auto";switch(i){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,a="(",l=")";break;case"\\\\bracefrac":r=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":r=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\cfrac":case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text"}return{type:"genfrac",mode:n.mode,continued:"\\cfrac"===i,numer:s,denom:o,hasBarLine:r,leftDelim:a,rightDelim:l,size:h,barSize:null}},htmlBuilder:Yr,mathmlBuilder:Xr}),ut({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(e){var t,r=e.parser,n=e.funcName,i=e.token;switch(n){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:t,token:i}}});var Qr=["display","text","script","scriptscript"],Kr=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};ut({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,greediness:6,argTypes:["math","math","size","text","math","math"]},handler:function(e,t){var r=e.parser,n=t[4],i=t[5],s=et(t[0],"atom");s&&(s=tt(t[0],"open"));var o=s?Kr(s.text):null,a=et(t[1],"atom");a&&(a=tt(t[1],"close"));var l,h=a?Kr(a.text):null,c=Je(t[2],"size"),p=null;l=!!c.isBlank||(p=c.value).number>0;var u="auto",d=et(t[3],"ordgroup");if(d){if(d.body.length>0){var m=Je(d.body[0],"textord");u=Qr[Number(m.text)]}}else d=Je(t[3],"textord"),u=Qr[Number(d.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:l,barSize:p,leftDelim:o,rightDelim:h,size:u}},htmlBuilder:Yr,mathmlBuilder:Xr}),ut({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(e,t){var r=e.parser,n=(e.funcName,e.token);return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Je(t[0],"size").value,token:n}}}),ut({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(e,t){var r=e.parser,n=(e.funcName,t[0]),i=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Je(t[1],"infix").size),s=t[2],o=i.number>0;return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:o,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Yr,mathmlBuilder:Xr});var $r=function(e,t){var r,n,i=t.style,s=et(e,"supsub");s?(r=s.sup?Tt(s.sup,t.havingStyle(i.sup()),t):Tt(s.sub,t.havingStyle(i.sub()),t),n=Je(s.base,"horizBrace")):n=Je(e,"horizBrace");var o,a=Tt(n.base,t.havingBaseStyle(w.DISPLAY)),l=Yt(n,t);if(n.isOver?(o=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:l}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(o=Ze.makeVList({positionType:"bottom",positionData:a.depth+.1+l.height,children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[0].classes.push("svg-align"),r){var h=Ze.makeSpan(["mord",n.isOver?"mover":"munder"],[o],t);o=n.isOver?Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:r}]},t):Ze.makeVList({positionType:"bottom",positionData:h.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:h}]},t)}return Ze.makeSpan(["mord",n.isOver?"mover":"munder"],[o],t)};ut({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(e,t){var r=e.parser,n=e.funcName;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:$r,mathmlBuilder:function(e,t){var r=Vt(e.label);return new Nt.MathNode(e.isOver?"mover":"munder",[zt(e.base,t),r])}}),ut({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(e,t){var r=e.parser,n=t[1],i=Je(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:mt(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:function(e,t){var r=xt(e.body,t,!1);return Ze.makeAnchor(e.href,[],r,t)},mathmlBuilder:function(e,t){var r=Dt(e.body,t);return r instanceof It||(r=new It("mrow",[r])),r.setAttribute("href",e.href),r}}),ut({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(e,t){var r=e.parser,n=Je(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<n.length;s++){var o=n[s];"~"===o&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:mt(a)}}}),ut({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(e,t){return{type:"htmlmathml",mode:e.parser.mode,html:mt(t[0]),mathml:mt(t[1])}},htmlBuilder:function(e,t){var r=xt(e.html,t,!1);return Ze.makeFragment(r)},mathmlBuilder:function(e,t){return Dt(e.mathml,t)}});var Zr=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new o("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!Be(r))throw new o("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};ut({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(e,t,r){var n=e.parser,i={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},l="";if(r[0])for(var h=Je(r[0],"raw").string.split(","),c=0;c<h.length;c++){var p=h[c].split("=");if(2===p.length){var u=p[1].trim();switch(p[0].trim()){case"alt":l=u;break;case"width":i=Zr(u);break;case"height":s=Zr(u);break;case"totalheight":a=Zr(u);break;default:throw new o("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var d=Je(t[0],"url").url;return""===l&&(l=(l=(l=d).replace(/^.*[\\/]/,"")).substring(0,l.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:n.mode,alt:l,width:i,height:s,totalheight:a,src:d}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(e,t){var r=qe(e.height,t),n=0;e.totalheight.number>0&&(n=qe(e.totalheight,t)-r,n=Number(n.toFixed(2)));var i=0;e.width.number>0&&(i=qe(e.width,t));var s={height:r+n+"em"};i>0&&(s.width=i+"em"),n>0&&(s.verticalAlign=-n+"em");var o=new R(e.src,e.alt,s);return o.height=r,o.depth=n,o},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=qe(e.height,t),i=0;if(e.totalheight.number>0&&(i=(i=qe(e.totalheight,t)-n).toFixed(2),r.setAttribute("valign","-"+i+"em")),r.setAttribute("height",n+i+"em"),e.width.number>0){var s=qe(e.width,t);r.setAttribute("width",s+"em")}return r.setAttribute("src",e.src),r}}),ut({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],allowedInText:!0},handler:function(e,t){var r=e.parser,n=e.funcName,i=Je(t[0],"size");if(r.settings.strict){var s="m"===n[1],o="mu"===i.value.unit;s?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+i.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder:function(e,t){return Ze.makeGlue(e.dimension,t)},mathmlBuilder:function(e,t){var r=qe(e.dimension,t);return new Nt.SpaceNode(r)}}),ut({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:function(e,t){var r;"clap"===e.alignment?(r=Ze.makeSpan([],[Tt(e.body,t)]),r=Ze.makeSpan(["inner"],[r],t)):r=Ze.makeSpan(["inner"],[Tt(e.body,t)]);var n=Ze.makeSpan(["fix"],[]),i=Ze.makeSpan([e.alignment],[r,n],t),s=Ze.makeSpan(["strut"]);return s.style.height=i.height+i.depth+"em",s.style.verticalAlign=-i.depth+"em",i.children.unshift(s),i=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},t),Ze.makeSpan(["mord"],[i],t)},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mpadded",[zt(e.body,t)]);if("rlap"!==e.alignment){var n="llap"===e.alignment?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}}),ut({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(e,t){var r=e.funcName,n=e.parser,i=n.mode;n.switchMode("math");var s="\\("===r?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:o}}}),ut({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(e,t){throw new o("Mismatched "+e.funcName)}});var Jr=function(e,t){switch(t.style.size){case w.DISPLAY.size:return e.display;case w.TEXT.size:return e.text;case w.SCRIPT.size:return e.script;case w.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};ut({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4},handler:function(e,t){return{type:"mathchoice",mode:e.parser.mode,display:mt(t[0]),text:mt(t[1]),script:mt(t[2]),scriptscript:mt(t[3])}},htmlBuilder:function(e,t){var r=Jr(e,t),n=xt(r,t,!1);return Ze.makeFragment(n)},mathmlBuilder:function(e,t){var r=Jr(e,t);return Dt(r,t)}});var en=function(e,t,r,n,i,s,o){var a,l,h;if(e=Ze.makeSpan([],[e]),t){var c=Tt(t,n.havingStyle(i.sup()),n);l={elem:c,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-c.depth)}}if(r){var p=Tt(r,n.havingStyle(i.sub()),n);a={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}if(l&&a){var u=n.fontMetrics().bigOpSpacing5+a.elem.height+a.elem.depth+a.kern+e.depth+o;h=Ze.makeVList({positionType:"bottom",positionData:u,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:-s+"em"},{type:"kern",size:a.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(a){var d=e.height-o;h=Ze.makeVList({positionType:"top",positionData:d,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:-s+"em"},{type:"kern",size:a.kern},{type:"elem",elem:e}]},n)}else{if(!l)return e;var m=e.depth+o;h=Ze.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}return Ze.makeSpan(["mop","op-limits"],[h],n)},tn=["\\smallint"],rn=function(e,t){var r,n,i,s=!1,o=et(e,"supsub");o?(r=o.sup,n=o.sub,i=Je(o.base,"op"),s=!0):i=Je(e,"op");var a,l=t.style,h=!1;if(l.size===w.DISPLAY.size&&i.symbol&&!p.contains(tn,i.name)&&(h=!0),i.symbol){var c=h?"Size2-Regular":"Size1-Regular",u="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(u=i.name.substr(1),i.name="oiint"===u?"\\iint":"\\iiint"),a=Ze.makeSymbol(i.name,c,"math",t,["mop","op-symbol",h?"large-op":"small-op"]),u.length>0){var d=a.italic,m=Ze.staticSvg(u+"Size"+(h?"2":"1"),t);a=Ze.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:m,shift:h?.08:0}]},t),i.name="\\"+u,a.classes.unshift("mop"),a.italic=d}}else if(i.body){var f=xt(i.body,t,!0);1===f.length&&f[0]instanceof F?(a=f[0]).classes[0]="mop":a=Ze.makeSpan(["mop"],Ze.tryCombineChars(f),t)}else{for(var g=[],v=1;v<i.name.length;v++)g.push(Ze.mathsym(i.name[v],i.mode,t));a=Ze.makeSpan(["mop"],g,t)}var y=0,b=0;return(a instanceof F||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(y=(a.height-a.depth)/2-t.fontMetrics().axisHeight,b=a.italic),s?en(a,r,n,t,l,b,y):(y&&(a.style.position="relative",a.style.top=y+"em"),a)},nn=function(e,t){var r;if(e.symbol)r=new It("mo",[Pt(e.name,e.mode)]),p.contains(tn,e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new It("mo",Ft(e.body,t));else{r=new It("mi",[new Ot(e.name.slice(1))]);var n=new It("mo",[Pt("⁡","text")]);r=e.parentIsSupSub?new It("mo",[r,n]):At([r,n])}return r},sn={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};ut({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(e,t){var r=e.parser,n=e.funcName;return 1===n.length&&(n=sn[n]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:rn,mathmlBuilder:nn}),ut({type:"op",names:["\\mathop"],props:{numArgs:1},handler:function(e,t){var r=e.parser,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:mt(n)}},htmlBuilder:rn,mathmlBuilder:nn});var on={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};ut({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(e){var t=e.parser,r=e.funcName;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:rn,mathmlBuilder:nn}),ut({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(e){var t=e.parser,r=e.funcName;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:rn,mathmlBuilder:nn}),ut({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(e){var t=e.parser,r=e.funcName;return 1===r.length&&(r=on[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:rn,mathmlBuilder:nn});var an=function(e,t){var r,n,i,s,o=!1,a=et(e,"supsub");if(a?(r=a.sup,n=a.sub,i=Je(a.base,"operatorname"),o=!0):i=Je(e,"operatorname"),i.body.length>0){for(var l=i.body.map((function(e){var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e})),h=xt(l,t.withFont("mathrm"),!0),c=0;c<h.length;c++){var p=h[c];p instanceof F&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Ze.makeSpan(["mop"],h,t)}else s=Ze.makeSpan(["mop"],[],t);return o?en(s,r,n,t,t.style,0,0):s};function ln(e,t,r){for(var n=xt(e,t,!1),i=t.sizeMultiplier/r.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,t.sizingClasses(r)):n[s].classes[o+1]==="reset-size"+t.size&&(n[s].classes[o+1]="reset-size"+r.size),n[s].height*=i,n[s].depth*=i}return Ze.makeFragment(n)}ut({type:"operatorname",names:["\\operatorname","\\operatorname*"],props:{numArgs:1},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];return{type:"operatorname",mode:r.mode,body:mt(i),alwaysHandleSupSub:"\\operatorname*"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:an,mathmlBuilder:function(e,t){for(var r=Ft(e.body,t.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var s=r[i];if(s instanceof Nt.SpaceNode);else if(s instanceof Nt.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=s.children[0];1===s.children.length&&o instanceof Nt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var a=r.map((function(e){return e.toText()})).join("");r=[new Nt.TextNode(a)]}var l=new Nt.MathNode("mi",r);l.setAttribute("mathvariant","normal");var h=new Nt.MathNode("mo",[Pt("⁡","text")]);return e.parentIsSupSub?new Nt.MathNode("mo",[l,h]):Nt.newDocumentFragment([l,h])}}),dt({type:"ordgroup",htmlBuilder:function(e,t){return e.semisimple?Ze.makeFragment(xt(e.body,t,!1)):Ze.makeSpan(["mord"],xt(e.body,t,!0),t)},mathmlBuilder:function(e,t){return Dt(e.body,t,!0)}}),ut({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(e,t){var r=e.parser,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder:function(e,t){var r=Tt(e.body,t.havingCrampedStyle()),n=Ze.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,s=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},t);return Ze.makeSpan(["mord","overline"],[s],t)},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mo",[new Nt.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new Nt.MathNode("mover",[zt(e.body,t),r]);return n.setAttribute("accent","true"),n}}),ut({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var r=e.parser,n=t[0];return{type:"phantom",mode:r.mode,body:mt(n)}},htmlBuilder:function(e,t){var r=xt(e.body,t.withPhantom(),!1);return Ze.makeFragment(r)},mathmlBuilder:function(e,t){var r=Ft(e.body,t);return new Nt.MathNode("mphantom",r)}}),ut({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var r=e.parser,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:function(e,t){var r=Ze.makeSpan([],[Tt(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),Ze.makeSpan(["mord"],[r],t)},mathmlBuilder:function(e,t){var r=Ft(mt(e.body),t),n=new Nt.MathNode("mphantom",r),i=new Nt.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),ut({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var r=e.parser,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:function(e,t){var r=Ze.makeSpan(["inner"],[Tt(e.body,t.withPhantom())]),n=Ze.makeSpan(["fix"],[]);return Ze.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:function(e,t){var r=Ft(mt(e.body),t),n=new Nt.MathNode("mphantom",r),i=new Nt.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}}),ut({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(e,t){var r=e.parser,n=Je(t[0],"size").value,i=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder:function(e,t){var r=Tt(e.body,t),n=qe(e.dy,t);return Ze.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mpadded",[zt(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}}),ut({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(e,t,r){var n=e.parser,i=r[0],s=Je(t[0],"size"),o=Je(t[1],"size");return{type:"rule",mode:n.mode,shift:i&&Je(i,"size").value,width:s.value,height:o.value}},htmlBuilder:function(e,t){var r=Ze.makeSpan(["mord","rule"],[],t),n=qe(e.width,t),i=qe(e.height,t),s=e.shift?qe(e.shift,t):0;return r.style.borderRightWidth=n+"em",r.style.borderTopWidth=i+"em",r.style.bottom=s+"em",r.width=n,r.height=i+s,r.depth=-s,r.maxFontSize=1.125*i*t.sizeMultiplier,r},mathmlBuilder:function(e,t){var r=qe(e.width,t),n=qe(e.height,t),i=e.shift?qe(e.shift,t):0,s=t.color&&t.getColor()||"black",o=new Nt.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",r+"em"),o.setAttribute("height",n+"em");var a=new Nt.MathNode("mpadded",[o]);return i>=0?a.setAttribute("height","+"+i+"em"):(a.setAttribute("height",i+"em"),a.setAttribute("depth","+"+-i+"em")),a.setAttribute("voffset",i+"em"),a}});var hn=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];ut({type:"sizing",names:hn,props:{numArgs:0,allowedInText:!0},handler:function(e,t){var r=e.breakOnTokenText,n=e.funcName,i=e.parser,s=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:hn.indexOf(n)+1,body:s}},htmlBuilder:function(e,t){var r=t.havingSize(e.size);return ln(e.body,r,t)},mathmlBuilder:function(e,t){var r=t.havingSize(e.size),n=Ft(e.body,r),i=new Nt.MathNode("mstyle",n);return i.setAttribute("mathsize",r.sizeMultiplier+"em"),i}}),ut({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(e,t,r){var n=e.parser,i=!1,s=!1,o=r[0]&&Je(r[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l)if("t"===(a=o.body[l].text))i=!0;else{if("b"!==a){i=!1,s=!1;break}s=!0}else i=!0,s=!0;var h=t[0];return{type:"smash",mode:n.mode,body:h,smashHeight:i,smashDepth:s}},htmlBuilder:function(e,t){var r=Ze.makeSpan([],[Tt(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var s=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return Ze.makeSpan(["mord"],[s],t)},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mpadded",[zt(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),ut({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(e,t,r){var n=e.parser,i=r[0],s=t[0];return{type:"sqrt",mode:n.mode,body:s,index:i}},htmlBuilder:function(e,t){var r=Tt(e.body,t.havingCrampedStyle());0===r.height&&(r.height=t.fontMetrics().xHeight),r=Ze.wrapFragment(r,t);var n=t.fontMetrics().defaultRuleThickness,i=n;t.style.id<w.TEXT.id&&(i=t.fontMetrics().xHeight);var s=n+i/4,o=r.height+r.depth+s+n,a=br(o,t),l=a.span,h=a.ruleWidth,c=a.advanceWidth,p=l.height-h;p>r.height+r.depth+s&&(s=(s+p-r.height-r.depth)/2);var u=l.height-r.height-s-h;r.style.paddingLeft=c+"em";var d=Ze.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+u)},{type:"elem",elem:l},{type:"kern",size:h}]},t);if(e.index){var m=t.havingStyle(w.SCRIPTSCRIPT),f=Tt(e.index,m,t),g=.6*(d.height-d.depth),v=Ze.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:f}]},t),y=Ze.makeSpan(["root"],[v]);return Ze.makeSpan(["mord","sqrt"],[y,d],t)}return Ze.makeSpan(["mord","sqrt"],[d],t)},mathmlBuilder:function(e,t){var r=e.body,n=e.index;return n?new Nt.MathNode("mroot",[zt(r,t),zt(n,t)]):new Nt.MathNode("msqrt",[zt(r,t)])}});var cn={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT};ut({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0},handler:function(e,t){var r=e.breakOnTokenText,n=e.funcName,i=e.parser,s=i.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder:function(e,t){var r=cn[e.style],n=t.havingStyle(r).withFont("");return ln(e.body,n,t)},mathmlBuilder:function(e,t){var r=cn[e.style],n=t.havingStyle(r),i=Ft(e.body,n),s=new Nt.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}}),dt({type:"supsub",htmlBuilder:function(e,t){var r=function(e,t){var r=e.base;return r?"op"===r.type?r.limits&&(t.style.size===w.DISPLAY.size||r.alwaysHandleSupSub)?rn:null:"operatorname"===r.type?r.alwaysHandleSupSub&&(t.style.size===w.DISPLAY.size||r.limits)?an:null:"accent"===r.type?p.isCharacterBox(r.base)?Xt:null:"horizBrace"===r.type&&!e.sub===r.isOver?$r:null:null}(e,t);if(r)return r(e,t);var n,i,s,o=e.base,a=e.sup,l=e.sub,h=Tt(o,t),c=t.fontMetrics(),u=0,d=0,m=o&&p.isCharacterBox(o);if(a){var f=t.havingStyle(t.style.sup());n=Tt(a,f,t),m||(u=h.height-f.fontMetrics().supDrop*f.sizeMultiplier/t.sizeMultiplier)}if(l){var g=t.havingStyle(t.style.sub());i=Tt(l,g,t),m||(d=h.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}s=t.style===w.DISPLAY?c.sup1:t.style.cramped?c.sup3:c.sup2;var v,y=t.sizeMultiplier,b=.5/c.ptPerEm/y+"em",x=null;if(i){var k=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(h instanceof F||k)&&(x=-h.italic+"em")}if(n&&i){u=Math.max(u,s,n.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var C=4*c.defaultRuleThickness;if(u-n.depth-(i.height-d)<C){d=C-(u-n.depth)+i.height;var E=.8*c.xHeight-(u-n.depth);E>0&&(u+=E,d-=E)}var S=[{type:"elem",elem:i,shift:d,marginRight:b,marginLeft:x},{type:"elem",elem:n,shift:-u,marginRight:b}];v=Ze.makeVList({positionType:"individualShift",children:S},t)}else if(i){d=Math.max(d,c.sub1,i.height-.8*c.xHeight);var T=[{type:"elem",elem:i,marginLeft:x,marginRight:b}];v=Ze.makeVList({positionType:"shift",positionData:d,children:T},t)}else{if(!n)throw new Error("supsub must have either sup or sub.");u=Math.max(u,s,n.depth+.25*c.xHeight),v=Ze.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:n,marginRight:b}]},t)}var M=Et(h,"right")||"mord";return Ze.makeSpan([M],[h,Ze.makeSpan(["msupsub"],[v])],t)},mathmlBuilder:function(e,t){var r,n=!1,i=et(e.base,"horizBrace");i&&!!e.sup===i.isOver&&(n=!0,r=i.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var s,o=[zt(e.base,t)];if(e.sub&&o.push(zt(e.sub,t)),e.sup&&o.push(zt(e.sup,t)),n)s=r?"mover":"munder";else if(e.sub)if(e.sup){var a=e.base;s=a&&"op"===a.type&&a.limits&&t.style===w.DISPLAY||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(t.style===w.DISPLAY||a.limits)?"munderover":"msubsup"}else{var l=e.base;s=l&&"op"===l.type&&l.limits&&(t.style===w.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===w.DISPLAY)?"munder":"msub"}else{var h=e.base;s=h&&"op"===h.type&&h.limits&&(t.style===w.DISPLAY||h.alwaysHandleSupSub)||h&&"operatorname"===h.type&&h.alwaysHandleSupSub&&(h.limits||t.style===w.DISPLAY)?"mover":"msup"}return new Nt.MathNode(s,o)}}),dt({type:"atom",htmlBuilder:function(e,t){return Ze.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mo",[Pt(e.text,e.mode)]);if("bin"===e.family){var n=Lt(e,t);"bold-italic"===n&&r.setAttribute("mathvariant",n)}else"punct"===e.family?r.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||r.setAttribute("stretchy","false");return r}});var pn={mi:"italic",mn:"normal",mtext:"normal"};dt({type:"mathord",htmlBuilder:function(e,t){return Ze.makeOrd(e,t,"mathord")},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mi",[Pt(e.text,e.mode,t)]),n=Lt(e,t)||"italic";return n!==pn[r.type]&&r.setAttribute("mathvariant",n),r}}),dt({type:"textord",htmlBuilder:function(e,t){return Ze.makeOrd(e,t,"textord")},mathmlBuilder:function(e,t){var r,n=Pt(e.text,e.mode,t),i=Lt(e,t)||"normal";return r="text"===e.mode?new Nt.MathNode("mtext",[n]):/[0-9]/.test(e.text)?new Nt.MathNode("mn",[n]):"\\prime"===e.text?new Nt.MathNode("mo",[n]):new Nt.MathNode("mi",[n]),i!==pn[r.type]&&r.setAttribute("mathvariant",i),r}});var un={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},dn={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};dt({type:"spacing",htmlBuilder:function(e,t){if(dn.hasOwnProperty(e.text)){var r=dn[e.text].className||"";if("text"===e.mode){var n=Ze.makeOrd(e,t,"textord");return n.classes.push(r),n}return Ze.makeSpan(["mspace",r],[Ze.mathsym(e.text,e.mode,t)],t)}if(un.hasOwnProperty(e.text))return Ze.makeSpan(["mspace",un[e.text]],[],t);throw new o('Unknown type of space "'+e.text+'"')},mathmlBuilder:function(e,t){if(!dn.hasOwnProperty(e.text)){if(un.hasOwnProperty(e.text))return new Nt.MathNode("mspace");throw new o('Unknown type of space "'+e.text+'"')}return new Nt.MathNode("mtext",[new Nt.TextNode(" ")])}});var mn=function(){var e=new Nt.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};dt({type:"tag",mathmlBuilder:function(e,t){var r=new Nt.MathNode("mtable",[new Nt.MathNode("mtr",[mn(),new Nt.MathNode("mtd",[Dt(e.body,t)]),mn(),new Nt.MathNode("mtd",[Dt(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var fn={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},gn={"\\textbf":"textbf","\\textmd":"textmd"},vn={"\\textit":"textit","\\textup":"textup"},yn=function(e,t){var r=e.font;return r?fn[r]?t.withTextFontFamily(fn[r]):gn[r]?t.withTextFontWeight(gn[r]):t.withTextFontShape(vn[r]):t};ut({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0},handler:function(e,t){var r=e.parser,n=e.funcName,i=t[0];return{type:"text",mode:r.mode,body:mt(i),font:n}},htmlBuilder:function(e,t){var r=yn(e,t),n=xt(e.body,r,!0);return Ze.makeSpan(["mord","text"],Ze.tryCombineChars(n),r)},mathmlBuilder:function(e,t){var r=yn(e,t);return Dt(e.body,r)}}),ut({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){return{type:"underline",mode:e.parser.mode,body:t[0]}},htmlBuilder:function(e,t){var r=Tt(e.body,t),n=Ze.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,s=Ze.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},t);return Ze.makeSpan(["mord","underline"],[s],t)},mathmlBuilder:function(e,t){var r=new Nt.MathNode("mo",[new Nt.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new Nt.MathNode("munder",[zt(e.body,t),r]);return n.setAttribute("accentunder","true"),n}}),ut({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(e,t,r){throw new o("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(e,t){for(var r=bn(e),n=[],i=t.havingStyle(t.style.text()),s=0;s<r.length;s++){var o=r[s];"~"===o&&(o="\\textasciitilde"),n.push(Ze.makeSymbol(o,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return Ze.makeSpan(["mord","text"].concat(i.sizingClasses(t)),Ze.tryCombineChars(n),i)},mathmlBuilder:function(e,t){var r=new Nt.TextNode(bn(e)),n=new Nt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var bn=function(e){return e.body.replace(/ /g,e.star?"␣":" ")},xn=ht,wn=new RegExp("^(\\\\[a-zA-Z@]+)[ \r\n\t]*$"),kn=new RegExp("[̀-ͯ]+$"),Cn=function(){function e(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp("([ \r\n\t]+)|([!-\\[\\]-‧‪-퟿豈-￿][̀-ͯ]*|[\ud800-\udbff][\udc00-\udfff][̀-ͯ]*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|\\\\operatorname\\*|\\\\[a-zA-Z@]+[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14}}var t=e.prototype;return t.setCatcode=function(e,t){this.catcodes[e]=t},t.lex=function(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new i("EOF",new n(this,t,t));var r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new o("Unexpected character: '"+e[t]+"'",new i(e[t],new n(this,t,t+1)));var s=r[2]||" ";if(14===this.catcodes[s]){var a=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===a?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}var l=s.match(wn);return l&&(s=l[1]),new i(s,new n(this,t,this.tokenRegex.lastIndex))},e}(),En=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}var t=e.prototype;return t.beginGroup=function(){this.undefStack.push({})},t.endGroup=function(){if(0===this.undefStack.length)throw new o("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?delete this.current[t]:this.current[t]=e[t])},t.has=function(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)},t.get=function(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]},t.set=function(e,t,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}this.current[e]=t},e}(),Sn={},Tn=Sn;function Mn(e,t){Sn[e]=t}Mn("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),Mn("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),Mn("\\@ifnextchar",(function(e){var t=e.consumeArgs(3),r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),Mn("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Mn("\\TextOrMath",(function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));var _n={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Mn("\\char",(function(e){var t,r=e.popToken(),n="";if("'"===r.text)t=8,r=e.popToken();else if('"'===r.text)t=16,r=e.popToken();else if("`"===r.text)if("\\"===(r=e.popToken()).text[0])n=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new o("\\char` missing argument");n=r.text.charCodeAt(0)}else t=10;if(t){if(null==(n=_n[r.text])||n>=t)throw new o("Invalid base-"+t+" digit "+r.text);for(var i;null!=(i=_n[e.future().text])&&i<t;)n*=t,n+=i,e.popToken()}return"\\@char{"+n+"}"}));var An=function(e,t){var r=e.consumeArgs(1)[0];if(1!==r.length)throw new o("\\gdef's first argument must be a macro name");var n=r[0].text,i=0;for(r=e.consumeArgs(1)[0];1===r.length&&"#"===r[0].text;){if(1!==(r=e.consumeArgs(1)[0]).length)throw new o('Invalid argument number length "'+r.length+'"');if(!/^[1-9]$/.test(r[0].text))throw new o('Invalid argument number "'+r[0].text+'"');if(i++,parseInt(r[0].text)!==i)throw new o('Argument number "'+r[0].text+'" out of order');r=e.consumeArgs(1)[0]}return e.macros.set(n,{tokens:r,numArgs:i},t),""};Mn("\\gdef",(function(e){return An(e,!0)})),Mn("\\def",(function(e){return An(e,!1)})),Mn("\\global",(function(e){var t=e.consumeArgs(1)[0];if(1!==t.length)throw new o("Invalid command after \\global");var r=t[0].text;if("\\def"===r)return An(e,!0);throw new o("Invalid command '"+r+"' after \\global")}));var In=function(e,t,r){var n=e.consumeArgs(1)[0];if(1!==n.length)throw new o("\\newcommand's first argument must be a macro name");var i=n[0].text,s=e.isDefined(i);if(s&&!t)throw new o("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!s&&!r)throw new o("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var a=0;if(1===(n=e.consumeArgs(1)[0]).length&&"["===n[0].text){for(var l="",h=e.expandNextToken();"]"!==h.text&&"EOF"!==h.text;)l+=h.text,h=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new o("Invalid number of arguments: "+l);a=parseInt(l),n=e.consumeArgs(1)[0]}return e.macros.set(i,{tokens:n,numArgs:a}),""};Mn("\\newcommand",(function(e){return In(e,!1,!0)})),Mn("\\renewcommand",(function(e){return In(e,!0,!1)})),Mn("\\providecommand",(function(e){return In(e,!0,!0)})),Mn("\\bgroup","{"),Mn("\\egroup","}"),Mn("\\lq","`"),Mn("\\rq","'"),Mn("\\aa","\\r a"),Mn("\\AA","\\r A"),Mn("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),Mn("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Mn("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),Mn("ℬ","\\mathscr{B}"),Mn("ℰ","\\mathscr{E}"),Mn("ℱ","\\mathscr{F}"),Mn("ℋ","\\mathscr{H}"),Mn("ℐ","\\mathscr{I}"),Mn("ℒ","\\mathscr{L}"),Mn("ℳ","\\mathscr{M}"),Mn("ℛ","\\mathscr{R}"),Mn("ℭ","\\mathfrak{C}"),Mn("ℌ","\\mathfrak{H}"),Mn("ℨ","\\mathfrak{Z}"),Mn("\\Bbbk","\\Bbb{k}"),Mn("·","\\cdotp"),Mn("\\llap","\\mathllap{\\textrm{#1}}"),Mn("\\rlap","\\mathrlap{\\textrm{#1}}"),Mn("\\clap","\\mathclap{\\textrm{#1}}"),Mn("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Mn("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),Mn("\\ne","\\neq"),Mn("≠","\\neq"),Mn("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),Mn("∉","\\notin"),Mn("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),Mn("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),Mn("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),Mn("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),Mn("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),Mn("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),Mn("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),Mn("⟂","\\perp"),Mn("‼","\\mathclose{!\\mkern-0.8mu!}"),Mn("∌","\\notni"),Mn("⌜","\\ulcorner"),Mn("⌝","\\urcorner"),Mn("⌞","\\llcorner"),Mn("⌟","\\lrcorner"),Mn("©","\\copyright"),Mn("®","\\textregistered"),Mn("️","\\textregistered"),Mn("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Mn("⋮","\\vdots"),Mn("\\varGamma","\\mathit{\\Gamma}"),Mn("\\varDelta","\\mathit{\\Delta}"),Mn("\\varTheta","\\mathit{\\Theta}"),Mn("\\varLambda","\\mathit{\\Lambda}"),Mn("\\varXi","\\mathit{\\Xi}"),Mn("\\varPi","\\mathit{\\Pi}"),Mn("\\varSigma","\\mathit{\\Sigma}"),Mn("\\varUpsilon","\\mathit{\\Upsilon}"),Mn("\\varPhi","\\mathit{\\Phi}"),Mn("\\varPsi","\\mathit{\\Psi}"),Mn("\\varOmega","\\mathit{\\Omega}"),Mn("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Mn("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Mn("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Mn("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Mn("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Mn("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var On={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Mn("\\dots",(function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in On?t=On[r]:("\\not"===r.substr(0,4)||r in Q.math&&p.contains(["bin","rel"],Q.math[r].group))&&(t="\\dotsb"),t}));var Nn={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Mn("\\dotso",(function(e){return e.future().text in Nn?"\\ldots\\,":"\\ldots"})),Mn("\\dotsc",(function(e){var t=e.future().text;return t in Nn&&","!==t?"\\ldots\\,":"\\ldots"})),Mn("\\cdots",(function(e){return e.future().text in Nn?"\\@cdots\\,":"\\@cdots"})),Mn("\\dotsb","\\cdots"),Mn("\\dotsm","\\cdots"),Mn("\\dotsi","\\!\\cdots"),Mn("\\dotsx","\\ldots\\,"),Mn("\\DOTSI","\\relax"),Mn("\\DOTSB","\\relax"),Mn("\\DOTSX","\\relax"),Mn("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Mn("\\,","\\tmspace+{3mu}{.1667em}"),Mn("\\thinspace","\\,"),Mn("\\>","\\mskip{4mu}"),Mn("\\:","\\tmspace+{4mu}{.2222em}"),Mn("\\medspace","\\:"),Mn("\\;","\\tmspace+{5mu}{.2777em}"),Mn("\\thickspace","\\;"),Mn("\\!","\\tmspace-{3mu}{.1667em}"),Mn("\\negthinspace","\\!"),Mn("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Mn("\\negthickspace","\\tmspace-{5mu}{.277em}"),Mn("\\enspace","\\kern.5em "),Mn("\\enskip","\\hskip.5em\\relax"),Mn("\\quad","\\hskip1em\\relax"),Mn("\\qquad","\\hskip2em\\relax"),Mn("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Mn("\\tag@paren","\\tag@literal{({#1})}"),Mn("\\tag@literal",(function(e){if(e.macros.get("\\df@tag"))throw new o("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),Mn("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Mn("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Mn("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Mn("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Mn("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),Mn("\\\\","\\newline"),Mn("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Pn=H["Main-Regular"]["T".charCodeAt(0)][1]-.7*H["Main-Regular"]["A".charCodeAt(0)][1]+"em";Mn("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Pn+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),Mn("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Pn+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),Mn("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Mn("\\@hspace","\\hskip #1\\relax"),Mn("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Mn("\\ordinarycolon",":"),Mn("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Mn("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Mn("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Mn("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Mn("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Mn("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Mn("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Mn("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Mn("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Mn("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Mn("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Mn("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Mn("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Mn("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Mn("∷","\\dblcolon"),Mn("∹","\\eqcolon"),Mn("≔","\\coloneqq"),Mn("≕","\\eqqcolon"),Mn("⩴","\\Coloneqq"),Mn("\\ratio","\\vcentcolon"),Mn("\\coloncolon","\\dblcolon"),Mn("\\colonequals","\\coloneqq"),Mn("\\coloncolonequals","\\Coloneqq"),Mn("\\equalscolon","\\eqqcolon"),Mn("\\equalscoloncolon","\\Eqqcolon"),Mn("\\colonminus","\\coloneq"),Mn("\\coloncolonminus","\\Coloneq"),Mn("\\minuscolon","\\eqcolon"),Mn("\\minuscoloncolon","\\Eqcolon"),Mn("\\coloncolonapprox","\\Colonapprox"),Mn("\\coloncolonsim","\\Colonsim"),Mn("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Mn("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Mn("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Mn("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Mn("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),Mn("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Mn("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Mn("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),Mn("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),Mn("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),Mn("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),Mn("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),Mn("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),Mn("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),Mn("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),Mn("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),Mn("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),Mn("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),Mn("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),Mn("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),Mn("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),Mn("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),Mn("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),Mn("⟦","\\llbracket"),Mn("⟧","\\rrbracket"),Mn("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),Mn("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),Mn("⦃","\\lBrace"),Mn("⦄","\\rBrace"),Mn("\\darr","\\downarrow"),Mn("\\dArr","\\Downarrow"),Mn("\\Darr","\\Downarrow"),Mn("\\lang","\\langle"),Mn("\\rang","\\rangle"),Mn("\\uarr","\\uparrow"),Mn("\\uArr","\\Uparrow"),Mn("\\Uarr","\\Uparrow"),Mn("\\N","\\mathbb{N}"),Mn("\\R","\\mathbb{R}"),Mn("\\Z","\\mathbb{Z}"),Mn("\\alef","\\aleph"),Mn("\\alefsym","\\aleph"),Mn("\\Alpha","\\mathrm{A}"),Mn("\\Beta","\\mathrm{B}"),Mn("\\bull","\\bullet"),Mn("\\Chi","\\mathrm{X}"),Mn("\\clubs","\\clubsuit"),Mn("\\cnums","\\mathbb{C}"),Mn("\\Complex","\\mathbb{C}"),Mn("\\Dagger","\\ddagger"),Mn("\\diamonds","\\diamondsuit"),Mn("\\empty","\\emptyset"),Mn("\\Epsilon","\\mathrm{E}"),Mn("\\Eta","\\mathrm{H}"),Mn("\\exist","\\exists"),Mn("\\harr","\\leftrightarrow"),Mn("\\hArr","\\Leftrightarrow"),Mn("\\Harr","\\Leftrightarrow"),Mn("\\hearts","\\heartsuit"),Mn("\\image","\\Im"),Mn("\\infin","\\infty"),Mn("\\Iota","\\mathrm{I}"),Mn("\\isin","\\in"),Mn("\\Kappa","\\mathrm{K}"),Mn("\\larr","\\leftarrow"),Mn("\\lArr","\\Leftarrow"),Mn("\\Larr","\\Leftarrow"),Mn("\\lrarr","\\leftrightarrow"),Mn("\\lrArr","\\Leftrightarrow"),Mn("\\Lrarr","\\Leftrightarrow"),Mn("\\Mu","\\mathrm{M}"),Mn("\\natnums","\\mathbb{N}"),Mn("\\Nu","\\mathrm{N}"),Mn("\\Omicron","\\mathrm{O}"),Mn("\\plusmn","\\pm"),Mn("\\rarr","\\rightarrow"),Mn("\\rArr","\\Rightarrow"),Mn("\\Rarr","\\Rightarrow"),Mn("\\real","\\Re"),Mn("\\reals","\\mathbb{R}"),Mn("\\Reals","\\mathbb{R}"),Mn("\\Rho","\\mathrm{P}"),Mn("\\sdot","\\cdot"),Mn("\\sect","\\S"),Mn("\\spades","\\spadesuit"),Mn("\\sub","\\subset"),Mn("\\sube","\\subseteq"),Mn("\\supe","\\supseteq"),Mn("\\Tau","\\mathrm{T}"),Mn("\\thetasym","\\vartheta"),Mn("\\weierp","\\wp"),Mn("\\Zeta","\\mathrm{Z}"),Mn("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Mn("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Mn("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Mn("\\blue","\\textcolor{##6495ed}{#1}"),Mn("\\orange","\\textcolor{##ffa500}{#1}"),Mn("\\pink","\\textcolor{##ff00af}{#1}"),Mn("\\red","\\textcolor{##df0030}{#1}"),Mn("\\green","\\textcolor{##28ae7b}{#1}"),Mn("\\gray","\\textcolor{gray}{#1}"),Mn("\\purple","\\textcolor{##9d38bd}{#1}"),Mn("\\blueA","\\textcolor{##ccfaff}{#1}"),Mn("\\blueB","\\textcolor{##80f6ff}{#1}"),Mn("\\blueC","\\textcolor{##63d9ea}{#1}"),Mn("\\blueD","\\textcolor{##11accd}{#1}"),Mn("\\blueE","\\textcolor{##0c7f99}{#1}"),Mn("\\tealA","\\textcolor{##94fff5}{#1}"),Mn("\\tealB","\\textcolor{##26edd5}{#1}"),Mn("\\tealC","\\textcolor{##01d1c1}{#1}"),Mn("\\tealD","\\textcolor{##01a995}{#1}"),Mn("\\tealE","\\textcolor{##208170}{#1}"),Mn("\\greenA","\\textcolor{##b6ffb0}{#1}"),Mn("\\greenB","\\textcolor{##8af281}{#1}"),Mn("\\greenC","\\textcolor{##74cf70}{#1}"),Mn("\\greenD","\\textcolor{##1fab54}{#1}"),Mn("\\greenE","\\textcolor{##0d923f}{#1}"),Mn("\\goldA","\\textcolor{##ffd0a9}{#1}"),Mn("\\goldB","\\textcolor{##ffbb71}{#1}"),Mn("\\goldC","\\textcolor{##ff9c39}{#1}"),Mn("\\goldD","\\textcolor{##e07d10}{#1}"),Mn("\\goldE","\\textcolor{##a75a05}{#1}"),Mn("\\redA","\\textcolor{##fca9a9}{#1}"),Mn("\\redB","\\textcolor{##ff8482}{#1}"),Mn("\\redC","\\textcolor{##f9685d}{#1}"),Mn("\\redD","\\textcolor{##e84d39}{#1}"),Mn("\\redE","\\textcolor{##bc2612}{#1}"),Mn("\\maroonA","\\textcolor{##ffbde0}{#1}"),Mn("\\maroonB","\\textcolor{##ff92c6}{#1}"),Mn("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Mn("\\maroonD","\\textcolor{##ca337c}{#1}"),Mn("\\maroonE","\\textcolor{##9e034e}{#1}"),Mn("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Mn("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Mn("\\purpleC","\\textcolor{##aa87ff}{#1}"),Mn("\\purpleD","\\textcolor{##7854ab}{#1}"),Mn("\\purpleE","\\textcolor{##543b78}{#1}"),Mn("\\mintA","\\textcolor{##f5f9e8}{#1}"),Mn("\\mintB","\\textcolor{##edf2df}{#1}"),Mn("\\mintC","\\textcolor{##e0e5cc}{#1}"),Mn("\\grayA","\\textcolor{##f6f7f7}{#1}"),Mn("\\grayB","\\textcolor{##f0f1f2}{#1}"),Mn("\\grayC","\\textcolor{##e3e5e6}{#1}"),Mn("\\grayD","\\textcolor{##d6d8da}{#1}"),Mn("\\grayE","\\textcolor{##babec2}{#1}"),Mn("\\grayF","\\textcolor{##888d93}{#1}"),Mn("\\grayG","\\textcolor{##626569}{#1}"),Mn("\\grayH","\\textcolor{##3b3e40}{#1}"),Mn("\\grayI","\\textcolor{##21242c}{#1}"),Mn("\\kaBlue","\\textcolor{##314453}{#1}"),Mn("\\kaGreen","\\textcolor{##71B307}{#1}");var Rn={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Ln=function(){function e(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new En(Tn,t.macros),this.mode=r,this.stack=[]}var t=e.prototype;return t.feed=function(e){this.lexer=new Cn(e,this.settings)},t.switchMode=function(e){this.mode=e},t.beginGroup=function(){this.macros.beginGroup()},t.endGroup=function(){this.macros.endGroup()},t.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},t.popToken=function(){return this.future(),this.stack.pop()},t.pushToken=function(e){this.stack.push(e)},t.pushTokens=function(e){var t;(t=this.stack).push.apply(t,e)},t.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},t.consumeArgs=function(e){for(var t=[],r=0;r<e;++r){this.consumeSpaces();var n=this.popToken();if("{"===n.text){for(var i=[],s=1;0!==s;){var a=this.popToken();if(i.push(a),"{"===a.text)++s;else if("}"===a.text)--s;else if("EOF"===a.text)throw new o("End of input in macro argument",n)}i.pop(),i.reverse(),t[r]=i}else{if("EOF"===n.text)throw new o("End of input expecting macro argument");t[r]=[n]}}return t},t.expandOnce=function(){var e=this.popToken(),t=e.text,r=this._getExpansion(t);if(null==r)return this.pushToken(e),e;if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new o("Too many expansions: infinite loop or need to increase maxExpand setting");var n=r.tokens;if(r.numArgs)for(var i=this.consumeArgs(r.numArgs),s=(n=n.slice()).length-1;s>=0;--s){var a=n[s];if("#"===a.text){if(0===s)throw new o("Incomplete placeholder at end of macro body",a);if("#"===(a=n[--s]).text)n.splice(s+1,1);else{if(!/^[1-9]$/.test(a.text))throw new o("Not a valid argument number",a);var l;(l=n).splice.apply(l,[s,2].concat(i[+a.text-1]))}}}return this.pushTokens(n),n},t.expandAfterFuture=function(){return this.expandOnce(),this.future()},t.expandNextToken=function(){for(;;){var e=this.expandOnce();if(e instanceof i){if("\\relax"!==e.text)return this.stack.pop();this.stack.pop()}}throw new Error},t.expandMacro=function(e){if(this.macros.get(e)){var t=[],r=this.stack.length;for(this.pushToken(new i(e));this.stack.length>r;)this.expandOnce()instanceof i&&t.push(this.stack.pop());return t}},t.expandMacroAsText=function(e){var t=this.expandMacro(e);return t?t.map((function(e){return e.text})).join(""):t},t._getExpansion=function(e){var t=this.macros.get(e);if(null==t)return t;var r="function"==typeof t?t(this):t;if("string"==typeof r){var n=0;if(-1!==r.indexOf("#"))for(var i=r.replace(/##/g,"");-1!==i.indexOf("#"+(n+1));)++n;for(var s=new Cn(r,this.settings),o=[],a=s.lex();"EOF"!==a.text;)o.push(a),a=s.lex();return o.reverse(),{tokens:o,numArgs:n}}return r},t.isDefined=function(e){return this.macros.has(e)||xn.hasOwnProperty(e)||Q.math.hasOwnProperty(e)||Q.text.hasOwnProperty(e)||Rn.hasOwnProperty(e)},e}(),Fn={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"}},Dn={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",č:"č",ĉ:"ĉ",ċ:"ċ",ď:"ď",ḋ:"ḋ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ĺ:"ĺ",ľ:"ľ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ď:"Ď",Ḋ:"Ḋ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ĺ:"Ĺ",Ľ:"Ľ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ť:"Ť",Ṫ:"Ṫ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"},zn=function(){function e(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ln(e,t,this.mode),this.settings=t,this.leftrightDepth=0}var t=e.prototype;return t.expect=function(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new o("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()},t.consume=function(){this.nextToken=null},t.fetch=function(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},t.switchMode=function(e){this.mode=e,this.gullet.switchMode(e)},t.parse=function(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");var e=this.parseExpression(!1);return this.expect("EOF"),this.gullet.endGroup(),e},t.parseExpression=function(t,r){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var i=this.fetch();if(-1!==e.endOfExpression.indexOf(i.text))break;if(r&&i.text===r)break;if(t&&xn[i.text]&&xn[i.text].infix)break;var s=this.parseAtom(r);if(!s)break;n.push(s)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)},t.handleInfixNodes=function(e){for(var t,r=-1,n=0;n<e.length;n++){var i=et(e[n],"infix");if(i){if(-1!==r)throw new o("only one infix operator per group",i.token);r=n,t=i.replaceWith}}if(-1!==r&&t){var s,a,l=e.slice(0,r),h=e.slice(r+1);return s=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},a=1===h.length&&"ordgroup"===h[0].type?h[0]:{type:"ordgroup",mode:this.mode,body:h},["\\\\abovefrac"===t?this.callFunction(t,[s,e[r],a],[]):this.callFunction(t,[s,a],[])]}return e},t.handleSupSubscript=function(t){var r=this.fetch(),n=r.text;this.consume();var i=this.parseGroup(t,!1,e.SUPSUB_GREEDINESS,void 0,void 0,!0);if(!i)throw new o("Expected group after '"+n+"'",r);return i},t.formatUnsupportedCmd=function(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}},t.parseAtom=function(e){var t,r,n=this.parseGroup("atom",!1,null,e);if("text"===this.mode)return n;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){var s=et(n,"op");if(s){var a="\\limits"===i.text;s.limits=a,s.alwaysHandleSupSub=!0}else{if(!(s=et(n,"operatorname"))||!s.alwaysHandleSupSub)throw new o("Limit controls must follow a math operator",i);var l="\\limits"===i.text;s.limits=l}this.consume()}else if("^"===i.text){if(t)throw new o("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(r)throw new o("Double subscript",i);r=this.handleSupSubscript("subscript")}else{if("'"!==i.text)break;if(t)throw new o("Double superscript",i);var h={type:"textord",mode:this.mode,text:"\\prime"},c=[h];for(this.consume();"'"===this.fetch().text;)c.push(h),this.consume();"^"===this.fetch().text&&c.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:c}}}return t||r?{type:"supsub",mode:this.mode,base:n,sup:t,sub:r}:n},t.parseFunction=function(e,t,r){var n=this.fetch(),i=n.text,s=xn[i];if(!s)return null;if(this.consume(),null!=r&&s.greediness<=r)throw new o("Got function '"+i+"' with no arguments"+(t?" as "+t:""),n);if("text"===this.mode&&!s.allowedInText)throw new o("Can't use function '"+i+"' in text mode",n);if("math"===this.mode&&!1===s.allowedInMath)throw new o("Can't use function '"+i+"' in math mode",n);var a=this.parseArguments(i,s),l=a.args,h=a.optArgs;return this.callFunction(i,l,h,n,e)},t.callFunction=function(e,t,r,n,i){var s={funcName:e,parser:this,token:n,breakOnTokenText:i},a=xn[e];if(a&&a.handler)return a.handler(s,t,r);throw new o("No function handler for "+e)},t.parseArguments=function(e,t){var r=t.numArgs+t.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var n=t.greediness,i=[],s=[],a=0;a<r;a++){var l=t.argTypes&&t.argTypes[a],h=a<t.numOptionalArgs,c=a>0&&!h||0===a&&!h&&"math"===this.mode,p=this.parseGroupOfType("argument to '"+e+"'",l,h,n,c);if(!p){if(h){s.push(null);continue}throw new o("Expected group after '"+e+"'",this.fetch())}(h?s:i).push(p)}return{args:i,optArgs:s}},t.parseGroupOfType=function(e,t,r,n,i){switch(t){case"color":return i&&this.consumeSpaces(),this.parseColorGroup(r);case"size":return i&&this.consumeSpaces(),this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r,i);case"math":case"text":return this.parseGroup(e,r,n,void 0,t,i);case"hbox":var s=this.parseGroup(e,r,n,void 0,"text",i);return s?{type:"styling",mode:s.mode,body:[s],style:"text"}:s;case"raw":if(i&&this.consumeSpaces(),r&&"{"===this.fetch().text)return null;var a=this.parseStringGroup("raw",r,!0);if(a)return{type:"raw",mode:"text",string:a.text};throw new o("Expected raw group",this.fetch());case"original":case null:case void 0:return this.parseGroup(e,r,n,void 0,void 0,i);default:throw new o("Unknown group type as "+e,this.fetch())}},t.consumeSpaces=function(){for(;" "===this.fetch().text;)this.consume()},t.parseStringGroup=function(e,t,r){var n=t?"[":"{",i=t?"]":"}",s=this.fetch();if(s.text!==n){if(t)return null;if(r&&"EOF"!==s.text&&/[^{}[\]]/.test(s.text))return this.consume(),s}var a=this.mode;this.mode="text",this.expect(n);for(var l,h="",c=this.fetch(),p=0,u=c;(l=this.fetch()).text!==i||r&&p>0;){switch(l.text){case"EOF":throw new o("Unexpected end of input in "+e,c.range(u,h));case n:p++;break;case i:p--}h+=(u=l).text,this.consume()}return this.expect(i),this.mode=a,c.range(u,h)},t.parseRegexGroup=function(e,t){var r=this.mode;this.mode="text";for(var n,i=this.fetch(),s=i,a="";"EOF"!==(n=this.fetch()).text&&e.test(a+n.text);)a+=(s=n).text,this.consume();if(""===a)throw new o("Invalid "+t+": '"+i.text+"'",i);return this.mode=r,i.range(s,a)},t.parseColorGroup=function(e){var t=this.parseStringGroup("color",e);if(!t)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new o("Invalid color: '"+t.text+"'",t);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}},t.parseSizeGroup=function(e){var t,r=!1;if(!(t=e||"{"===this.fetch().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new o("Invalid size: '"+t.text+"'",t);var i={number:+(n[1]+n[2]),unit:n[3]};if(!Be(i))throw new o("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:r}},t.parseUrlGroup=function(e,t){this.gullet.lexer.setCatcode("%",13);var r=this.parseStringGroup("url",e,!0);if(this.gullet.lexer.setCatcode("%",14),!r)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}},t.parseGroup=function(t,r,i,s,a,l){var h=this.mode;a&&this.switchMode(a),l&&this.consumeSpaces();var c,p=this.fetch(),u=p.text;if(r?"["===u:"{"===u||"\\begingroup"===u){this.consume();var d=e.endOfGroup[u];this.gullet.beginGroup();var m=this.parseExpression(!1,d),f=this.fetch();this.expect(d),this.gullet.endGroup(),c={type:"ordgroup",mode:this.mode,loc:n.range(p,f),body:m,semisimple:"\\begingroup"===u||void 0}}else if(r)c=null;else if(null==(c=this.parseFunction(s,t,i)||this.parseSymbol())&&"\\"===u[0]&&!Rn.hasOwnProperty(u)){if(this.settings.throwOnError)throw new o("Undefined control sequence: "+u,p);c=this.formatUnsupportedCmd(u),this.consume()}return a&&this.switchMode(h),c},t.formLigatures=function(e){for(var t=e.length-1,r=0;r<t;++r){var i=e[r],s=i.text;"-"===s&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:n.range(i,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:n.range(i,e[r+1]),text:"--"}),t-=1)),"'"!==s&&"`"!==s||e[r+1].text!==s||(e.splice(r,2,{type:"textord",mode:"text",loc:n.range(i,e[r+1]),text:s+s}),t-=1)}},t.parseSymbol=function(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),i="*"===r.charAt(0);if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new o("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:i}}Dn.hasOwnProperty(t[0])&&!Q[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Dn[t[0]]+t.substr(1));var s,a=kn.exec(t);if(a&&("i"===(t=t.substring(0,a.index))?t="ı":"j"===t&&(t="ȷ")),Q[this.mode][t]){this.settings.strict&&"math"===this.mode&&Me.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var l,h=Q[this.mode][t].group,c=n.range(e);if(V.hasOwnProperty(h)){var p=h;l={type:"atom",mode:this.mode,family:p,loc:c,text:t}}else l={type:h,mode:this.mode,loc:c,text:t};s=l}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(E(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),s={type:"textord",mode:"text",loc:n.range(e),text:t}}if(this.consume(),a)for(var u=0;u<a[0].length;u++){var d=a[0][u];if(!Fn[d])throw new o("Unknown accent ' "+d+"'",e);var m=Fn[d][this.mode];if(!m)throw new o("Accent "+d+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:n.range(e),label:m,isStretchy:!1,isShifty:!0,base:s}}return s},e}();zn.endOfExpression=["}","\\endgroup","\\end","\\right","&"],zn.endOfGroup={"[":"]","{":"}","\\begingroup":"\\endgroup"},zn.SUPSUB_GREEDINESS=1;var Bn=function(e,t){if(!("string"==typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new zn(e,t);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new o("\\tag works only in display equations");r.gullet.feed("\\df@tag"),n=[{type:"tag",mode:"text",body:n,tag:r.parse()}]}return n},qn=function(e,t,r){t.textContent="";var n=Un(e,r).toNode();t.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),qn=function(){throw new o("KaTeX doesn't work in quirks mode.")});var Hn=function(e,t,r){if(r.throwOnError||!(e instanceof o))throw e;var n=Ze.makeSpan(["katex-error"],[new F(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},Un=function(e,t){var r=new u(t);try{var n=Bn(e,r);return Ut(n,e,r)}catch(t){return Hn(t,e,r)}},Wn={version:"0.11.1",render:qn,renderToString:function(e,t){return Un(e,t).toMarkup()},ParseError:o,__parse:function(e,t){var r=new u(t);return Bn(e,r)},__renderToDomTree:Un,__renderToHTMLTree:function(e,t){var r=new u(t);try{return function(e,t,r){var n=_t(e,qt(r)),i=Ze.makeSpan(["katex"],[n]);return Ht(i,r)}(Bn(e,r),0,r)}catch(t){return Hn(t,e,r)}},__setFontMetrics:function(e,t){H[e]=t},__defineSymbol:K,__defineMacro:Mn,__domTree:{Span:N,Anchor:P,SymbolNode:F,SvgNode:D,PathNode:z,LineNode:B}};t.default=Wn}]).default},e.exports=n()},nqLt:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",NotAllowed:"NotAllowed",TransientService:"TransientService",Service:"Service"});class s extends Error{constructor(e,t,r){super(e),n(this,"kind",void 0),n(this,"metadata",void 0),this.kind=t,this.metadata=null==r?void 0:r.metadata}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return he})),r.d(t,"c",(function(){return le})),r.d(t,"d",(function(){return ue})),r.d(t,"e",(function(){return pe}));class h{static parse(e){return new c(e).parse()}match(e){throw new s("Selector subclasses must implement match()",i.NotAllowed)}toString(){return"Unknown selector class"}}class c{constructor(e){l(this,"tokens",void 0),l(this,"tokenIndex",void 0),e=e.trim().replace(/\s+/g," "),this.tokens=e.match(c.TOKENS)||[],this.tokenIndex=0}nextToken(){return this.tokens[this.tokenIndex]||""}consume(){this.tokenIndex++}isIdentifier(){var e=this.tokens[this.tokenIndex][0];return e>="a"&&e<="z"||e>="A"&&e<="Z"}skipSpace(){for(;" "===this.nextToken();)this.consume()}parse(){var e=this.parseTreeSelector(),t=this.nextToken();if(!t)return e;for(var r=[e];t;){if(","!==t)throw new p("Expected comma");this.consume(),r.push(this.parseTreeSelector()),t=this.nextToken()}return new u(r)}parseTreeSelector(){this.skipSpace();for(var e=this.parseNodeSelector();;){var t=this.nextToken();if(!t||","===t)break;if(" "===t)this.consume(),e=new g(e,this.parseNodeSelector());else if(">"===t)this.consume(),e=new v(e,this.parseNodeSelector());else if("+"===t)this.consume(),e=new y(e,this.parseNodeSelector());else{if("~"!==t)throw new p("Unexpected token: "+t);this.consume(),e=new b(e,this.parseNodeSelector())}}return e}parseNodeSelector(){this.skipSpace();var e=this.nextToken();if("*"===e)return this.consume(),new d;if(this.isIdentifier())return this.consume(),new m(e);throw new p("Expected node type")}}l(c,"TOKENS",void 0),c.TOKENS=/([a-zA-Z][\w-]*)|(\d+)|[^\s]|(\s(?=[a-zA-Z\*]))/g;class p extends Error{constructor(e){super(e)}}class u extends h{constructor(e){super(),l(this,"selectors",void 0),this.selectors=e}match(e){for(var t=0;t<this.selectors.length;t++){var r=this.selectors[t].match(e);if(r)return r}return null}toString(){for(var e="",t=0;t<this.selectors.length;t++)e+=t>0?", ":"",e+=this.selectors[t].toString();return e}}class d extends h{match(e){return[e.currentNode()]}toString(){return"*"}}class m extends h{constructor(e){super(),l(this,"type",void 0),this.type=e}match(e){var t=e.currentNode();return t.type===this.type?[t]:null}toString(){return this.type}}class f extends h{constructor(e,t){super(),l(this,"left",void 0),l(this,"right",void 0),this.left=e,this.right=t}}class g extends f{constructor(e,t){super(e,t)}match(e){var t=this.right.match(e);if(t)for(e=e.clone();e.hasParent();){e.goToParent();var r=this.left.match(e);if(r)return r.concat(t)}return null}toString(){return this.left.toString()+" "+this.right.toString()}}class v extends f{constructor(e,t){super(e,t)}match(e){var t=this.right.match(e);if(t&&e.hasParent()){(e=e.clone()).goToParent();var r=this.left.match(e);if(r)return r.concat(t)}return null}toString(){return this.left.toString()+" > "+this.right.toString()}}class y extends f{constructor(e,t){super(e,t)}match(e){var t=this.right.match(e);if(t&&e.hasPreviousSibling()){(e=e.clone()).goToPreviousSibling();var r=this.left.match(e);if(r)return r.concat(t)}return null}toString(){return this.left.toString()+" + "+this.right.toString()}}class b extends f{constructor(e,t){super(e,t)}match(e){var t=this.right.match(e);if(t)for(e=e.clone();e.hasPreviousSibling();){e.goToPreviousSibling();var r=this.left.match(e);if(r)return r.concat(t)}return null}toString(){return this.left.toString()+" ~ "+this.right.toString()}}class x{constructor(e,t,r,n,o,a){var h=this;if(l(this,"name",void 0),l(this,"severity",void 0),l(this,"selector",void 0),l(this,"pattern",void 0),l(this,"lint",void 0),l(this,"applies",void 0),l(this,"message",void 0),!r&&!n)throw new s("Lint rules must have a selector or pattern",i.InvalidInput,{metadata:{name:e}});this.name=e||"unnamed rule",this.severity=t||x.Severity.BULK_WARNING,this.selector=r||x.DEFAULT_SELECTOR,this.pattern=n||null,"function"==typeof o?(this.lint=o,this.message=null):(this.lint=function(){return h._defaultLintFunction(...arguments)},this.message=o),this.applies=a||function(){return!0}}static makeRule(e){return new x(e.name,e.severity,e.selector?h.parse(e.selector):null,x.makePattern(e.pattern),e.lint||e.message,e.applies)}check(e,t,r,n){var i,s=this.selector.match(t);if(!s)return null;if(!(i=this.pattern?r.match(this.pattern):x.FakePatternMatch(r,r,0)))return null;try{var o=this.lint(t,r,s,i,n);return o?"string"==typeof o?{rule:this.name,severity:this.severity,message:o,start:0,end:r.length}:{rule:this.name,severity:this.severity,message:o.message,start:o.start,end:o.end}:null}catch(e){return{rule:"lint-rule-failure",message:"Exception in rule ".concat(this.name,": ").concat(e.message,"\nStack trace:\n").concat(e.stack),start:0,end:r.length}}}_defaultLintFunction(e,t,r,n,i){return{message:this.message||"",start:n.index,end:n.index+n[0].length}}static makePattern(e){if(!e)return null;if(e instanceof RegExp)return e;if("/"===e[0]){var t=e.lastIndexOf("/"),r=e.substring(1,t),n=e.substring(t+1);return new RegExp(r,n)}return new RegExp(e)}static FakePatternMatch(e,t,r){var n=[t];return n.index=r,n.input=e,n}}l(x,"DEFAULT_SELECTOR",void 0),l(x,"Severity",{ERROR:1,WARNING:2,GUIDELINE:3,BULK_WARNING:4}),x.DEFAULT_SELECTOR=h.parse("text");var w=/\/\/([^\/]+)/;var k=x.makeRule({name:"absolute-url",severity:x.Severity.GUIDELINE,selector:"link, image",lint:function(e,t,r,n){var i=function(e){if(!e)return"";var t=e.match(w);return t?t[1]:""}(r[0].target);if("khanacademy.org"===i||i.endsWith(".khanacademy.org"))return"Don't use absolute URLs:\nWhen linking to KA content or images, omit the\nhttps://www.khanacademy.org URL prefix.\nUse a relative URL beginning with / instead."}}),C=x.makeRule({name:"blockquoted-math",severity:x.Severity.WARNING,selector:"blockQuote math, blockQuote blockMath",message:"Blockquoted math:\nmath should not be indented."}),E=x.makeRule({name:"blockquoted-widget",severity:x.Severity.WARNING,selector:"blockQuote widget",message:"Blockquoted widget:\nwidgets should not be indented."}),S=x.makeRule({name:"double-spacing-after-terminal",severity:x.Severity.BULK_WARNING,selector:"paragraph",pattern:/[.!\?] {2}/i,message:"Use a single space after a sentence-ending period, or\nany other kind of terminal punctuation."}),T=x.makeRule({name:"extra-content-spacing",selector:"paragraph",pattern:/\s+$/,applies:function(e){return"article"===e.contentType},message:"No extra whitespace at the end of content blocks."}),M=x.makeRule({name:"heading-level-1",severity:x.Severity.WARNING,selector:"heading",lint:function(e,t,r,n){if(1===r[0].level)return"Don't use level-1 headings:\nBegin headings with two or more # characters."}}),_=x.makeRule({name:"heading-level-skip",severity:x.Severity.WARNING,selector:"heading ~ heading",lint:function(e,t,r,n){var i=r[1],s=r[0];if(i.level>s.level+1)return"Skipped heading level:\nthis heading is level ".concat(i.level," but\nthe previous heading was level ").concat(s.level)}}),A=x.makeRule({name:"heading-sentence-case",severity:x.Severity.GUIDELINE,selector:"heading",pattern:/^\W*[a-z]/,message:"First letter is lowercase:\nthe first letter of a heading should be capitalized."}),I={and:!0,nor:!0,but:!0,the:!0,for:!0};var O=x.makeRule({name:"heading-title-case",severity:x.Severity.GUIDELINE,selector:"heading",pattern:/[^\s:]\s+[A-Z]+[a-z]/,locale:"en",lint:function(e,t,r,n){var i=t.trim().split(/\s+/);if(i.shift(),(i=i.filter((e=>e.length>2&&!I.hasOwnProperty(e)))).length>=3&&i.every((e=>{return(t=e[0])===t.toUpperCase();var t})))return"Title-case heading:\nThis heading appears to be in title-case, but should be sentence-case.\nOnly capitalize the first letter and proper nouns."}}),N=x.makeRule({name:"image-alt-text",severity:x.Severity.WARNING,selector:"image",lint:function(e,t,r,n){var i=r[0];return i.alt&&i.alt.trim()?i.alt.length<8?"Images should have alt text:\nfor accessibility, all images should have descriptive alt text.\nThis image's alt text is only ".concat(i.alt.length," characters long."):void 0:"Images should have alt text:\nfor accessibility, all images should have alt text.\nSpecify alt text inside square brackets after the !."}}),P=x.makeRule({name:"image-in-table",severity:x.Severity.BULK_WARNING,selector:"table image",message:"Image in table:\ndo not put images inside of tables."}),R=x.makeRule({name:"image-spaces-around-urls",severity:x.Severity.ERROR,selector:"image",lint:function(e,t,r,n,i){var s=r[0].target;if(i&&i.content){var o=i.content.indexOf(s);if(-1===o)return;if("("!==i.content[o-1]||")"!==i.content[o+s.length])return"Whitespace before or after image url:\nFor images, don't include any space or newlines after '(' or before ')'.\nWhitespace in image URLs causes translation difficulties."}}}),L=x.makeRule({name:"image-widget",severity:x.Severity.WARNING,selector:"widget",lint:function(e,t,r,n,i){if("image"===e.currentNode().widgetType){var s=i&&i.widgets&&i.widgets[e.currentNode().id];if(s){var o=s.options.alt;return o?o.trim().length<8?"Images should have alt text:\nfor accessibility, all images should have descriptive alt text.\nThis image's alt text is only ".concat(o.trim().length," characters long."):s.options.caption&&s.options.caption.match(/[^\\]\$/)?"No math in image captions:\nDon't include math expressions in image captions.":void 0:'Images should have alt text:\nfor accessibility, all images should have a text description.\nAdd a description in the "Alt Text" box of the image widget.'}}}}),F=x.makeRule({name:"link-click-here",severity:x.Severity.WARNING,selector:"link",pattern:/click here/i,message:'Inappropriate link text:\nDo not use the words "click here" in links.'}),D=x.makeRule({name:"long-paragraph",severity:x.Severity.GUIDELINE,selector:"paragraph",pattern:/^.{501,}/,lint:function(e,t,r,n){return"Paragraph too long:\nThis paragraph is ".concat(t.length," characters long.\nShorten it to 500 characters or fewer.")}}),z=x.makeRule({name:"math-adjacent",severity:x.Severity.WARNING,selector:"blockMath+blockMath",message:"Adjacent math blocks:\ncombine the blocks between \\begin{align} and \\end{align}"}),B=x.makeRule({name:"math-align-extra-break",severity:x.Severity.WARNING,selector:"blockMath",pattern:/(\\{2,})\s*\\end{align}/,message:"Extra space at end of block:\nDon't end an align block with backslashes"}),q=x.makeRule({name:"math-align-linebreaks",severity:x.Severity.WARNING,selector:"blockMath",pattern:/\\begin{align}[\s\S]*\\\\[\s\S]+\\end{align}/,lint:function(e,t,r,n){for(var i=n[0];i.length;){var s=i.indexOf("\\\\");if(-1===s)return null;var o=(i=i.substring(s+2)).match(/^\s*\\\\\s*(?!\\\\)/);if(!o)return"Use four backslashes between lines of an align block";i=i.substring(o[0].length)}}}),H=x.makeRule({name:"math-empty",severity:x.Severity.WARNING,selector:"math, blockMath",pattern:/^$/,message:"Empty math: don't use $$ in your markdown."}),U=x.makeRule({name:"math-font-size",severity:x.Severity.GUIDELINE,selector:"math, blockMath",pattern:/\\(tiny|Tiny|small|large|Large|LARGE|huge|Huge|scriptsize|normalsize)\s*{/,message:"Math font size:\nDon't change the default font size with \\Large{} or similar commands"}),W=x.makeRule({name:"math-frac",severity:x.Severity.GUIDELINE,selector:"math, blockMath",pattern:/\\frac[ {]/,message:"Use \\dfrac instead of \\frac in your math expressions."}),j=x.makeRule({name:"math-nested",severity:x.Severity.ERROR,selector:"math, blockMath",pattern:/\\text{[^$}]*\$[^$}]*\$[^}]*}/,message:"Nested math:\nDon't nest math expressions inside \\text{} blocks"}),G=x.makeRule({name:"math-starts-with-space",severity:x.Severity.GUIDELINE,selector:"math, blockMath",pattern:/^\s*(~|\\qquad|\\quad|\\,|\\;|\\:|\\ |\\!|\\enspace|\\phantom)/,message:"Math starts with space:\nmath should not be indented. Do not begin math expressions with\nLaTeX space commands like ~, \\;, \\quad, or \\phantom"}),V=x.makeRule({name:"math-text-empty",severity:x.Severity.WARNING,selector:"math, blockMath",pattern:/\\text{\s*}/,message:"Empty \\text{} block in math expression"}),Y=x.makeRule({name:"math-without-dollars",severity:x.Severity.GUIDELINE,pattern:/\\\w+{[^}]*}|{|}/,message:"This looks like LaTeX:\ndid you mean to put it inside dollar signs?"}),X=x.makeRule({name:"nested-lists",severity:x.Severity.WARNING,selector:"list list",message:"Nested lists:\nnested lists are hard to read on mobile devices;\ndo not use additional indentation."}),Q=x.makeRule({name:"profanity",pattern:/\b(shit|piss|fuck|cunt|cocksucker|motherfucker|tits)\b/i,message:"Avoid profanity"}),K=x.makeRule({name:"table-missing-cells",severity:x.Severity.WARNING,selector:"table",lint:function(e,t,r,n){for(var i=r[0],s=i.header.length,o=i.cells.map((e=>e.length)),a=0;a<o.length;a++)if(o[a]!==s)return"Table rows don't match header:\nThe table header has ".concat(s," cells, but\nRow ").concat(a+1," has ").concat(o[a]," cells.")}}),$=x.makeRule({name:"unbalanced-code-delimiters",severity:x.Severity.ERROR,pattern:/[`~]+/,message:"Unbalanced code delimiters:\ncode blocks should begin and end with the same type and number of delimiters"}),Z=[k,C,E,S,T,M,_,A,O,N,P,F,D,z,B,q,H,U,W,j,G,V,X,K,x.makeRule({name:"unescaped-dollar",severity:x.Severity.ERROR,selector:"unescapedDollar",message:"Unescaped dollar sign:\nDollar signs must appear in pairs or be escaped as \\$"}),x.makeRule({name:"widget-in-table",severity:x.Severity.BULK_WARNING,selector:"table widget",message:"Widget in table:\ndo not put widgets inside of tables."}),Q,Y,$,R,L];class J{constructor(e){l(this,"root",void 0),this.root=e}static isNode(e){return e&&"object"==typeof e&&"string"==typeof e.type}static isTextNode(e){return J.isNode(e)&&"text"===e.type&&"string"==typeof e.content}traverse(e){this._traverse(this.root,new ee(this.root),e)}_traverse(e,t,r){var n="";if(J.isNode(e)){var i=e;t._containers.push(i),t._ancestors.push(i),"string"==typeof i.content&&(n=i.content),Object.keys(i).forEach((e=>{if("type"!==e){var s=i[e];s&&"object"==typeof s&&(t._indexes.push(e),n+=this._traverse(s,t,r),t._indexes.pop())}})),t._currentNode=t._ancestors.pop(),t._containers.pop(),r(i,t,n)}else if(Array.isArray(e)){var s=e;t._containers.push(s);for(var o=0;o<s.length;)t._indexes.push(o),n+=this._traverse(s[o],t,r),o=t._indexes.pop()+1;t._containers.pop()}return n}}class ee{constructor(e){l(this,"root",void 0),l(this,"_currentNode",void 0),l(this,"_containers",void 0),l(this,"_indexes",void 0),l(this,"_ancestors",void 0),this.root=e,this._currentNode=null,this._containers=new te,this._indexes=new te,this._ancestors=new te}currentNode(){return this._currentNode||this.root}parent(){return this._ancestors.top()}ancestors(){return this._ancestors.values()}nextSibling(){var e=this._containers.top();if(!e||!Array.isArray(e))return null;var t=this._indexes.top();return e.length>t+1?e[t+1]:null}previousSibling(){var e=this._containers.top();if(!e||!Array.isArray(e))return null;var t=this._indexes.top();return t>0?e[t-1]:null}removeNextSibling(){var e=this._containers.top();if(e&&Array.isArray(e)){var t=this._indexes.top();if(e.length>t+1)return e.splice(t+1,1)[0]}return null}replace(){var e=this._containers.top();if(!e)throw new s("Can't replace the root of the tree",i.Internal);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(Array.isArray(e)){var o=this._indexes.top();e.splice(o,1,...r),this._indexes.pop(),this._indexes.push(o+r.length-1)}else{var a=this._indexes.top();0===r.length?delete e[a]:1===r.length?e[a]=r[0]:e[a]=r}}hasPreviousSibling(){return Array.isArray(this._containers.top())&&this._indexes.top()>0}goToPreviousSibling(){if(!this.hasPreviousSibling())throw new s("goToPreviousSibling(): node has no previous sibling",i.Internal);this._currentNode=this.previousSibling();var e=this._indexes.pop();this._indexes.push(e-1)}hasParent(){return 0!==this._ancestors.size()}goToParent(){if(!this.hasParent())throw new s("goToParent(): node has no ancestor",i.NotAllowed);for(this._currentNode=this._ancestors.pop();this._containers.size()&&this._containers.top()[this._indexes.top()]!==this._currentNode;)this._containers.pop(),this._indexes.pop()}clone(){var e=new ee(this.root);return e._currentNode=this._currentNode,e._containers=this._containers.clone(),e._indexes=this._indexes.clone(),e._ancestors=this._ancestors.clone(),e}equals(e){return this.root===e.root&&this._currentNode===e._currentNode&&this._containers.equals(e._containers)&&this._indexes.equals(e._indexes)&&this._ancestors.equals(e._ancestors)}}class te{constructor(e){l(this,"stack",void 0),this.stack=e?e.slice(0):[]}push(e){this.stack.push(e)}pop(){return this.stack.pop()}top(){return this.stack[this.stack.length-1]}values(){return this.stack.slice(0)}size(){return this.stack.length}toString(){return this.stack.toString()}clone(){return new te(this.stack)}equals(e){if(!e||!e.stack||e.stack.length!==this.stack.length)return!1;for(var t=0;t<this.stack.length;t++)if(this.stack[t]!==e.stack[t])return!1;return!0}}var re={exports:{}};var ne,ie,se,oe;
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ae(){if(ie)return ne;ie=1;return ne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}re.exports=function(){if(oe)return se;oe=1;var e=ae();function t(){}function r(){}return r.resetWarningCache=t,se=function(){function n(t,r,n,i,s,o){if(o!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function i(){return n}n.isRequired=n;var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s}}()();var le=re.exports.shape({contentType:re.exports.string,highlightLint:re.exports.bool,paths:re.exports.arrayOf(re.exports.string),stack:re.exports.arrayOf(re.exports.string)}),he={contentType:"",highlightLint:!1,paths:[],stack:[]},ce=Z.filter((e=>e.severity<x.Severity.BULK_WARNING));function pe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce,i=[],s=new J(e);s.traverse(((e,t,r)=>{if(J.isTextNode(e))for(var n=t.nextSibling();J.isTextNode(n);)e.content+=n.content,t.removeNextSibling(),n=t.nextSibling()}));var o=[],l=!1;return s.traverse(((e,s,h)=>{var c=[],p=n.filter((e=>e.applies(t))),u=[...t.stack];u.push(e.type);var d=a(a({},t),{},{stack:u.join(".")});if(p.forEach((t=>{var n=t.check(e,s,h,d);n&&((n.start||n.end)&&(n.target=h.substring(n.start,n.end)),i.push(n),r&&c.push(n))})),r&&("table"===e.type?(o.length&&c.push(...o),l=!1,o=[]):l||(l=s.ancestors().some((e=>"table"===e.type))),l&&c.length&&o.push(...c),c.length))if(c.sort(((e,t)=>e.severity-t.severity)),"text"!==e.type||c.length>1)s.replace({type:"lint",content:e,message:c.map((e=>e.message)).join("\n\n"),ruleName:c[0].rule,blockHighlight:d.blockHighlight,insideTable:l,severity:c[0].severity});else{var m=e.content,f=c[0],g=f.start||0,v=f.end||m.length,y=m.substring(0,g),b=m.substring(g,v),x=m.substring(v),w=[];y&&w.push({type:"text",content:y}),w.push({type:"lint",content:{type:"text",content:b},message:f.message,ruleName:f.rule,insideTable:l,severity:f.severity}),x&&w.push({type:"text",content:x}),s.replace(...w)}})),i}function ue(e,t){var r=e.stack||[];return a(a({},e),{},{stack:r.concat(t)})}},rELt:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return z})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return O}));var n=r("5pch"),i=r.n(n),s=function(){var e=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},t=[1,11],r=[1,9],n=[8,17],i=[6,11],s=[6,11,13,17],o={trace:function(){},yy:{},symbols_:{error:2,unitvalue:3,magnitude:4,unit:5,EOF:6,float:7,POW:8,int:9,multatoms:10,DIV:11,expatom:12,MUL:13,atom:14,"^":15,nat:16,ATOM:17,FLOAT:18,NAT:19,NEG:20,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:"POW",11:"DIV",13:"MUL",15:"^",17:"ATOM",18:"FLOAT",19:"NAT",20:"NEG"},productions_:[0,[3,3],[3,2],[4,3],[4,1],[5,3],[5,1],[10,3],[10,2],[10,1],[12,3],[12,1],[14,1],[7,1],[7,1],[16,1],[9,2],[9,1]],performAction:function(e,t,r,n,i,s,o){var a=s.length-1;switch(i){case 1:return{type:"unitMagnitude",magnitude:s[a-2],unit:s[a-1]};case 2:return{type:"unitStandalone",unit:s[a-1]};case 3:this.$=s[a-2]+"e"+s[a];break;case 4:case 13:case 14:case 15:case 17:this.$=s[a];break;case 5:this.$={num:s[a-2],denom:s[a]};break;case 6:this.$={num:s[a],denom:null};break;case 7:this.$=[s[a-2]].concat(s[a]);break;case 8:this.$=[s[a-1]].concat(s[a]);break;case 9:this.$=[s[a]];break;case 10:this.$={name:s[a-2],pow:s[a]};break;case 11:this.$={name:s[a],pow:1};break;case 12:this.$=e;break;case 16:this.$="-"+s[a]}},table:[{3:1,4:2,5:3,7:4,10:5,12:8,14:10,16:7,17:t,18:[1,6],19:r},{1:[3]},{5:12,10:5,12:8,14:10,17:t},{6:[1,13]},{8:[1,14],17:[2,4]},{6:[2,6],11:[1,15]},e(n,[2,13]),e(n,[2,14]),e(i,[2,9],{12:8,14:10,10:17,13:[1,16],17:t}),e([6,8,11,13,17],[2,15]),e(s,[2,11],{15:[1,18]}),e([6,11,13,15,17],[2,12]),{6:[1,19]},{1:[2,2]},{9:20,19:[1,22],20:[1,21]},{10:23,12:8,14:10,17:t},{10:24,12:8,14:10,17:t},e(i,[2,8]),{16:25,19:r},{1:[2,1]},{17:[2,3]},{19:[1,26]},{17:[2,17]},{6:[2,5]},e(i,[2,7]),e(s,[2,10]),{17:[2,16]}],defaultActions:{13:[2,2],19:[2,1],20:[2,3],22:[2,17],23:[2,5],26:[2,16]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],s=this.table,o="",a=0,l=0,h=2,c=1,p=i.slice.call(arguments,1),u=Object.create(this.lexer),d={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(d.yy[m]=this.yy[m]);u.setInput(e,d.yy),d.yy.lexer=u,d.yy.parser=this,void 0===u.yylloc&&(u.yylloc={});var f=u.yylloc;i.push(f);var g=u.options&&u.options.ranges;function v(){var e;return"number"!=typeof(e=u.lex()||c)&&(e=t.symbols_[e]||e),e}"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,b,x,w,k,C,E,S,T={};;){if(b=r[r.length-1],this.defaultActions[b]?x=this.defaultActions[b]:(null==y&&(y=v()),x=s[b]&&s[b][y]),void 0===x||!x.length||!x[0]){var M="";for(k in S=[],s[b])this.terminals_[k]&&k>h&&S.push("'"+this.terminals_[k]+"'");M=u.showPosition?"Parse error on line "+(a+1)+":\n"+u.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(a+1)+": Unexpected "+(y==c?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(M,{text:u.match,token:this.terminals_[y]||y,line:u.yylineno,loc:f,expected:S})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+y);switch(x[0]){case 1:r.push(y),n.push(u.yytext),i.push(u.yylloc),r.push(x[1]),y=null,l=u.yyleng,o=u.yytext,a=u.yylineno,f=u.yylloc;break;case 2:if(C=this.productions_[x[1]][1],T.$=n[n.length-C],T._$={first_line:i[i.length-(C||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(C||1)].first_column,last_column:i[i.length-1].last_column},g&&(T._$.range=[i[i.length-(C||1)].range[0],i[i.length-1].range[1]]),void 0!==(w=this.performAction.apply(T,[o,l,a,d.yy,x[1],n,i].concat(p))))return w;C&&(r=r.slice(0,-1*C*2),n=n.slice(0,-1*C),i=i.slice(0,-1*C)),r.push(this.productions_[x[1]][0]),n.push(T.$),i.push(T._$),E=s[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},a={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in i)this[s]=i[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;s<i.length;s++)if((r=this._input.match(this.rules[i[s]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,i[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,n){switch(r){case 0:return 11;case 1:return"(";case 2:return")";case 3:return 8;case 4:return 15;case 5:return 13;case 6:return 18;case 7:return 19;case 8:return 20;case 9:case 10:case 11:return 17;case 12:break;case 13:return 6}},rules:[/^(?:\/)/,/^(?:\()/,/^(?:\))/,/^(?:(\*|x|\u00d7|\u2219|\u22c5|\u00b7)\s*10\s*\^)/,/^(?:\^)/,/^(?:\*)/,/^(?:[0-9]+\.[0-9]+)/,/^(?:[0-9]+)/,/^(?:-)/,/^(?:\u00b0( ?)[cCfF])/,/^(?:fl\.? oz\.?)/,/^(?:[\u00b5]?([A-Za-z-]+|[\u2103\u2109\u212b]))/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function l(){this.yy={}}return o.lexer=a,l.prototype=o,o.Parser=l,new l}(),o=s,a=function(){var e=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},t=[1,7],r=[1,17],n=[1,13],i=[1,14],s=[1,15],o=[1,32],a=[1,22],l=[1,23],h=[1,24],c=[1,25],p=[1,26],u=[1,33],d=[1,27],m=[1,28],f=[1,29],g=[1,30],v=[1,20],y=[1,36],b=[1,37],x=[5,6,8,10,33,35,41,43,45],w=[1,39],k=[1,40],C=[5,6,8,10,12,14,16,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],E=[10,16,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],S=[5,6,8,10,12,14,16,18,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],T={trace:function(){},yy:{},symbols_:{error:2,equation:3,expression:4,SIGN:5,EOF:6,additive:7,"+":8,multiplicative:9,"-":10,triglog:11,"*":12,negative:13,"/":14,trig:15,TRIG:16,trigfunc:17,"^":18,TRIGINV:19,logbase:20,ln:21,log:22,_:23,subscriptable:24,power:25,primitive:26,variable:27,VAR:28,CONST:29,INT:30,FLOAT:31,"{":32,"}":33,"(":34,")":35,function:36,FUNC:37,invocation:38,sqrt:39,"[":40,"]":41,abs:42,"|":43,"LEFT|":44,"RIGHT|":45,FRAC:46,$accept:0,$end:1},terminals_:{2:"error",5:"SIGN",6:"EOF",8:"+",10:"-",12:"*",14:"/",16:"TRIG",18:"^",19:"TRIGINV",21:"ln",22:"log",23:"_",28:"VAR",29:"CONST",30:"INT",31:"FLOAT",32:"{",33:"}",34:"(",35:")",37:"FUNC",39:"sqrt",40:"[",41:"]",42:"abs",43:"|",44:"LEFT|",45:"RIGHT|",46:"FRAC"},productions_:[0,[3,4],[3,2],[3,1],[4,1],[7,3],[7,3],[7,1],[9,2],[9,3],[9,3],[9,1],[13,2],[13,1],[15,1],[17,1],[17,3],[17,1],[20,1],[20,1],[20,3],[11,2],[11,2],[11,1],[25,3],[25,1],[27,1],[24,3],[24,1],[24,1],[24,1],[24,1],[24,3],[24,3],[36,1],[38,4],[38,4],[38,7],[38,4],[38,3],[38,3],[38,4],[26,1],[26,1],[26,7]],performAction:function(e,t,r,n,i,s,o){var a=s.length-1;switch(i){case 1:return new n.Eq(s[a-3],s[a-2],s[a-1]);case 2:return s[a-1];case 3:return new n.Add([]);case 4:case 7:case 11:case 13:case 15:case 20:case 23:case 25:case 42:case 43:this.$=s[a];break;case 5:this.$=n.Add.createOrAppend(s[a-2],s[a]);break;case 6:this.$=n.Add.createOrAppend(s[a-2],n.Mul.handleNegative(s[a],"subtract"));break;case 8:this.$=n.Mul.fold(n.Mul.createOrAppend(s[a-1],s[a]));break;case 9:this.$=n.Mul.fold(n.Mul.createOrAppend(s[a-2],s[a]));break;case 10:this.$=n.Mul.fold(n.Mul.handleDivide(s[a-2],s[a]));break;case 12:this.$=n.Mul.handleNegative(s[a]);break;case 14:case 17:this.$=[e];break;case 16:this.$=s[a-2].concat(s[a]);break;case 18:this.$=n.Log.natural();break;case 19:this.$=n.Log.common();break;case 21:this.$=n.Trig.create(s[a-1],s[a]);break;case 22:this.$=n.Log.create(s[a-1],s[a]);break;case 24:this.$=new n.Pow(s[a-2],s[a]);break;case 26:case 34:this.$=e;break;case 27:this.$=new n.Var(s[a-2],s[a]);break;case 28:this.$=new n.Var(s[a]);break;case 29:this.$=new n.Const(e.toLowerCase());break;case 30:this.$=n.Int.create(Number(e));break;case 31:this.$=n.Float.create(Number(e));break;case 32:this.$=s[a-1].completeParse();break;case 33:this.$=s[a-1].completeParse().addHint("parens");break;case 35:case 36:this.$=n.Pow.sqrt(s[a-1]);break;case 37:this.$=new n.Pow.nthroot(s[a-1],s[a-4]);break;case 38:case 39:case 40:this.$=new n.Abs(s[a-1]);break;case 41:this.$=new n.Func(s[a-3],s[a-1]);break;case 44:this.$=n.Mul.handleDivide(s[a-4],s[a-1])}},table:[{3:1,4:2,6:[1,3],7:4,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{1:[3]},{5:[1,34],6:[1,35]},{1:[2,3]},e([5,6],[2,4],{8:y,10:b}),e(x,[2,7],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:w,14:k,16:r,19:n,21:i,22:s,28:o,29:a,30:l,31:h,32:c,34:p,37:u,39:d,42:m,44:g,46:v}),e(C,[2,11]),{10:t,11:8,13:41,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},e(C,[2,13]),{10:t,11:8,13:42,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{10:t,11:8,13:43,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},e(C,[2,23]),e(E,[2,15],{18:[1,44]}),e(E,[2,17]),e(E,[2,18]),e(E,[2,19],{23:[1,45]}),e(C,[2,25],{18:[1,46]}),e([10,16,18,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],[2,14]),e(S,[2,42]),e(S,[2,43]),{32:[1,47]},e(S,[2,28],{23:[1,48]}),e(S,[2,29]),e(S,[2,30]),e(S,[2,31]),{7:49,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:50,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{32:[1,52],34:[1,51],40:[1,53]},{34:[1,54]},{7:55,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:56,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{34:[1,57]},e([5,6,8,10,12,14,16,18,19,21,22,23,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],[2,26]),{34:[2,34]},{4:58,7:4,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{1:[2,2]},{9:59,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{9:60,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},e(C,[2,8]),{10:t,11:8,13:61,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{10:t,11:8,13:62,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},e(C,[2,12]),e(C,[2,21]),e(C,[2,22]),{10:t,11:8,13:63,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{24:64,27:21,28:o,29:a,30:l,31:h,32:c,34:p},{10:t,11:8,13:65,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:66,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{24:67,27:21,28:o,29:a,30:l,31:h,32:c,34:p},{8:y,10:b,33:[1,68]},{8:y,10:b,35:[1,69]},{7:70,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:71,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:72,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:73,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{8:y,10:b,43:[1,74]},{8:y,10:b,45:[1,75]},{7:76,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{6:[1,77]},e(x,[2,5],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:w,14:k,16:r,19:n,21:i,22:s,28:o,29:a,30:l,31:h,32:c,34:p,37:u,39:d,42:m,44:g,46:v}),e(x,[2,6],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:w,14:k,16:r,19:n,21:i,22:s,28:o,29:a,30:l,31:h,32:c,34:p,37:u,39:d,42:m,44:g,46:v}),e(C,[2,9]),e(C,[2,10]),e(E,[2,16]),e(E,[2,20]),e(C,[2,24]),{8:y,10:b,33:[1,78]},e(S,[2,27]),e(S,[2,32]),e(S,[2,33]),{8:y,10:b,35:[1,79]},{8:y,10:b,33:[1,80]},{8:y,10:b,41:[1,81]},{8:y,10:b,35:[1,82]},e(S,[2,39]),e(S,[2,40]),{8:y,10:b,35:[1,83]},{1:[2,1]},{32:[1,84]},e(S,[2,35]),e(S,[2,36]),{32:[1,85]},e(S,[2,38]),e(S,[2,41]),{7:86,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{7:87,9:5,10:t,11:8,13:6,15:12,16:r,17:9,19:n,20:10,21:i,22:s,24:18,25:11,26:16,27:21,28:o,29:a,30:l,31:h,32:c,34:p,36:31,37:u,38:19,39:d,42:m,43:f,44:g,46:v},{8:y,10:b,33:[1,88]},{8:y,10:b,33:[1,89]},e(S,[2,44]),e(S,[2,37])],defaultActions:{3:[2,3],33:[2,34],35:[2,2],77:[2,1]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],s=this.table,o="",a=0,l=0,h=2,c=1,p=i.slice.call(arguments,1),u=Object.create(this.lexer),d={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(d.yy[m]=this.yy[m]);u.setInput(e,d.yy),d.yy.lexer=u,d.yy.parser=this,void 0===u.yylloc&&(u.yylloc={});var f=u.yylloc;i.push(f);var g=u.options&&u.options.ranges;function v(){var e;return"number"!=typeof(e=u.lex()||c)&&(e=t.symbols_[e]||e),e}"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,b,x,w,k,C,E,S,T={};;){if(b=r[r.length-1],this.defaultActions[b]?x=this.defaultActions[b]:(null==y&&(y=v()),x=s[b]&&s[b][y]),void 0===x||!x.length||!x[0]){var M="";for(k in S=[],s[b])this.terminals_[k]&&k>h&&S.push("'"+this.terminals_[k]+"'");M=u.showPosition?"Parse error on line "+(a+1)+":\n"+u.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(a+1)+": Unexpected "+(y==c?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(M,{text:u.match,token:this.terminals_[y]||y,line:u.yylineno,loc:f,expected:S})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+y);switch(x[0]){case 1:r.push(y),n.push(u.yytext),i.push(u.yylloc),r.push(x[1]),y=null,l=u.yyleng,o=u.yytext,a=u.yylineno,f=u.yylloc;break;case 2:if(C=this.productions_[x[1]][1],T.$=n[n.length-C],T._$={first_line:i[i.length-(C||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(C||1)].first_column,last_column:i[i.length-1].last_column},g&&(T._$.range=[i[i.length-(C||1)].range[0],i[i.length-1].range[1]]),void 0!==(w=this.performAction.apply(T,[o,l,a,d.yy,x[1],n,i].concat(p))))return w;C&&(r=r.slice(0,-1*C*2),n=n.slice(0,-1*C),i=i.slice(0,-1*C)),r.push(this.productions_[x[1]][0]),n.push(T.$),i.push(T._$),E=s[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},M={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in i)this[s]=i[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;s<i.length;s++)if((r=this._input.match(this.rules[i[s]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,i[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(e,t,r,n){switch(r){case 0:case 1:case 2:break;case 3:return"INT";case 4:return"FLOAT";case 5:case 15:return"^";case 6:case 7:case 8:case 9:return"*";case 10:case 11:return"/";case 12:case 13:return"-";case 14:return"+";case 16:case 18:return"(";case 17:case 19:return")";case 20:return"[";case 21:return"]";case 22:case 24:return"{";case 23:case 25:return"}";case 26:return"_";case 27:return"|";case 28:return"LEFT|";case 29:return"RIGHT|";case 30:return"!";case 31:return"SIGN";case 32:case 34:case 40:return t.yytext="<=","SIGN";case 33:case 35:case 41:return t.yytext=">=","SIGN";case 36:case 37:case 38:case 39:return t.yytext="<>","SIGN";case 42:case 43:return"FRAC";case 44:return"sqrt";case 45:return"abs";case 46:return"ln";case 47:return"log";case 48:case 49:case 50:case 51:return"TRIG";case 52:return t.yytext="sin","TRIG";case 53:return t.yytext="cos","TRIG";case 54:return t.yytext="tan","TRIG";case 55:return t.yytext="csc","TRIG";case 56:return t.yytext="sec","TRIG";case 57:return t.yytext="cot","TRIG";case 58:return t.yytext="arcsin","TRIG";case 59:return t.yytext="arccos","TRIG";case 60:return t.yytext="arctan","TRIG";case 61:return t.yytext="arccsc","TRIG";case 62:return t.yytext="arcsec","TRIG";case 63:return t.yytext="arccot","TRIG";case 64:case 65:return"TRIGINV";case 66:return t.yytext="sinh","TRIG";case 67:return t.yytext="cosh","TRIG";case 68:case 71:return t.yytext="tanh","TRIG";case 69:return t.yytext="csch","TRIG";case 70:return t.yytext="sech","TRIG";case 72:return"CONST";case 73:case 74:return t.yytext="pi","CONST";case 75:case 78:return"VAR";case 76:case 77:return t.yytext="theta","VAR";case 79:case 80:return t.yytext="phi","VAR";case 81:return e.symbolLexer(t.yytext);case 82:return"EOF";case 83:return"INVALID";case 84:console.log(t.yytext)}},rules:[/^(?:\s+)/,/^(?:\\space)/,/^(?:\\ )/,/^(?:[0-9]+\.?)/,/^(?:([0-9]+)?\.[0-9]+)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\\cdot|·)/,/^(?:\\times|×)/,/^(?:\\ast)/,/^(?:\/)/,/^(?:\\div|÷)/,/^(?:-)/,/^(?:−)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:\\left\()/,/^(?:\\right\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\\left\{)/,/^(?:\\right\})/,/^(?:_)/,/^(?:\|)/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:\!)/,/^(?:<=|>=|<>|<|>|=)/,/^(?:\\le)/,/^(?:\\ge)/,/^(?:\\leq)/,/^(?:\\geq)/,/^(?:=\/=)/,/^(?:\\ne)/,/^(?:\\neq)/,/^(?:≠)/,/^(?:≤)/,/^(?:≥)/,/^(?:\\frac)/,/^(?:\\dfrac)/,/^(?:sqrt|\\sqrt)/,/^(?:abs|\\abs)/,/^(?:ln|\\ln)/,/^(?:log|\\log)/,/^(?:sin|cos|tan)/,/^(?:csc|sec|cot)/,/^(?:sinh|cosh|tanh)/,/^(?:csch|sech|coth)/,/^(?:\\sin)/,/^(?:\\cos)/,/^(?:\\tan)/,/^(?:\\csc)/,/^(?:\\sec)/,/^(?:\\cot)/,/^(?:\\arcsin)/,/^(?:\\arccos)/,/^(?:\\arctan)/,/^(?:\\arccsc)/,/^(?:\\arcsec)/,/^(?:\\arccot)/,/^(?:arcsin|arccos|arctan)/,/^(?:arccsc|arcsec|arccot)/,/^(?:\\sinh)/,/^(?:\\cosh)/,/^(?:\\tanh)/,/^(?:\\csch)/,/^(?:\\sech)/,/^(?:\\coth)/,/^(?:pi)/,/^(?:π)/,/^(?:\\pi)/,/^(?:theta)/,/^(?:θ)/,/^(?:\\theta)/,/^(?:phi)/,/^(?:φ)/,/^(?:\\phi)/,/^(?:[a-zA-Z])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};function _(){this.yy={}}return T.lexer=M,_.prototype=T,T.Parser=_,new _}(),l=function(){throw new Error("Abstract method - must override for expr: "+this.print())},h=function(e){throw new Error(e)},c=function(e){return e!=e};function p(){}function u(){}function d(){this.terms=1===arguments.length?arguments[0]:i.a.toArray(arguments)}function m(){this.terms=1===arguments.length?arguments[0]:i.a.toArray(arguments)}function f(e,t){this.base=e,this.exp=t}function g(e,t){this.base=e,this.power=t}function v(e,t){this.type=e,this.arg=t}function y(e){this.arg=e}function b(e,t,r){this.left=e,this.type=t,this.right=r}function x(){}function w(e,t){this.symbol=e,this.arg=t}function k(e,t){this.symbol=e,this.subscript=t}function C(e){this.symbol=e}function E(){}function S(e,t){var r=e,n=t;n<0&&(r=-r,n=-n),this.n=r,this.d=n}function T(e){this.n=e}function M(e){this.n=e}i.a.extend(p.prototype,{func:l,args:l,construct:function(e){var t=new this.func;return this.func.apply(t,e),t},recurse:function(e){var t=Array.prototype.slice.call(arguments,1),r=i.a.map(this.args(),(function(r){return i.a.isString(r)?r:r[e].apply(r,t)}));return this.construct(r)},eval:l,codegen:l,compile:function(){var e=this.codegen();try{return new Function("vars","return "+e+";")}catch(t){throw new Error("Function did not compile: "+e)}},print:l,tex:l,asTex:function(e){e=e||{},i.a.defaults(e,{display:!0,dynamic:!0,times:!1});var t=this.tex();return e.display&&(t="\\displaystyle "+t),e.dynamic&&(t=(t=t.replace(/\(/g,"\\left(")).replace(/\)/g,"\\right)")),e.times&&(t=t.replace(/\\cdot/g,"\\times")),t},name:function(){return this.func.name?this.func.name:this.func.toString().match(/^function\s*([^\s(]+)/)[1]},repr:function(){return this.name()+"("+i.a.map(this.args(),(function(e){return i.a.isString(e)?e:e.repr()})).join(",")+")"},strip:function(){return this.recurse("strip")},normalize:function(){return this.recurse("normalize")},expand:function(){return this.recurse("expand")},factor:function(e){return this.recurse("factor",e)},collect:function(e){return this.recurse("collect",e)},equals:function(e){return this.normalize().print()===e.normalize().print()},simplify:function(e){e=i.a.extend({once:!1},e);var t=this.factor(e),r=t.collect(e);t.equals(r)&&(r=this.collect(e));var n=r.expand(e),s=n.collect(e);n.equals(s)&&(s=r.collect(e));var o=s;return e.once||this.equals(o)?o:o.simplify(e)},isSimplified:function(){return this.equals(this.simplify())},exprArgs:function(){return i.a.filter(this.args(),(function(e){return e instanceof p}))},getVars:function(e){return i.a.uniq(i.a.flatten(i.a.invoke(this.exprArgs(),"getVars",e))).sort()},getConsts:function(){return i.a.uniq(i.a.flatten(i.a.invoke(this.exprArgs(),"getConsts"))).sort()},getUnits:function(){return i.a.flatten(i.a.invoke(this.exprArgs(),"getUnits"))},is:function(e){return this instanceof e},has:function(e){return this instanceof e||i.a.any(this.exprArgs(),(function(t){return t.has(e)}))},raiseToThe:function(e){return new f(this,e)},isSubtract:function(){return!1},isDivide:function(){return!1},isRoot:function(){return!1},needsExplicitMul:function(){return this.args()[0].needsExplicitMul()},sameVars:function(e){var t=this.getVars(),r=e.getVars(),n=function(e,t){return!i.a.difference(e,t).length},s=function(e){return i.a.uniq(i.a.invoke(e,"toLowerCase")).sort()};return{equal:n(t,r),equalIgnoringCase:n(s(t),s(r))}},compare:function(e){if(e instanceof b)return!1;var t=i.a.union(this.getVars(!0),e.getVars(!0)),r=function(e,t){var r=function(e,t){return Math.abs(e)<1||Math.abs(t)<1?Math.abs(e-t):Math.abs(1-e/t)}(e,t);return e===t||c(e)&&c(t)||r<Math.pow(10,-9)};if(!t.length&&!this.has(A)&&!e.has(A))return r(this.eval(),e.eval());var n=this.collect(),s=e.collect(),o=this.getUnits(),a=e.getUnits();if(!i.a.isEqual(o,a))return!1;for(var l=0;l<12;l++){var h,p={},u=Math.pow(10,1+Math.floor(3*l/12)),d=l%2==0;if(i.a.each(t,(function(e){var t,r;p[e]=d?(r=u-(t=-u),Math.random()*r+t):i.a.random(-u,u)})),n.has(w)||s.has(w)||n.has(A)||s.has(A)){var m=n.partialEval(p),f=s.partialEval(p);h=m.simplify().equals(f.simplify())}else{h=r(m=n.eval(p),f=s.eval(p))}if(!h)return!1}return!0},partialEval:function(e){return this instanceof A?this:this.has(w)?this instanceof w?new w(this.symbol,this.arg.partialEval(e)):this.recurse("partialEval",e):new M(this.eval(e).toFixed(9)).collect()},sameForm:function(e){return this.strip().equals(e.strip())},findGCD:function(e){return this.equals(e)?e:E.One},getDenominator:function(){return E.One},asMul:function(){return new m(E.One,this)},isPositive:l,isNegative:function(){return!1},asPositiveFactor:function(){return this.isPositive()?this:E.One},addHint:function(e){if(!e)return this;var t=this.construct(this.args());return t.hints=i.a.clone(this.hints),t.hints[e]=!0,t},hints:{parens:!1},asExpr:function(){return this},completeParse:function(){return this.recurse("completeParse")},abs:l,negate:function(){return new m(E.Neg,this)}}),u.prototype=new p,i.a.extend(u.prototype,{args:function(){return this.terms},normalize:function(){var e=i.a.sortBy(i.a.invoke(this.terms,"normalize"),(function(e){return e.print()}));return new this.func(e)},expand:function(){return this.recurse("expand").flatten()},partition:function(){var e=i.a.groupBy(this.terms,(function(e){return e instanceof E})),t=e[!0]||[],r=e[!1]||[];return[new this.func(t),new this.func(r)]},flatten:function(){var e=this,t=i.a.reject(this.terms,(function(t){return t.equals(e.identity)}));if(0===t.length)return e.identity;if(1===t.length)return t[0];var r=i.a.groupBy(t,(function(t){return t instanceof e.func})),n=r[!0]||[],s=(r[!1]||[]).concat(i.a.flatten(i.a.pluck(n,"terms"),!0));return new e.func(s)},identity:void 0,reduce:l,isPositive:function(){var e=i.a.invoke(this.terms,"collect");return i.a.all(i.a.invoke(e,"isPositive"))},replace:function(e,t){var r;r=e instanceof p?i.a.indexOf(this.terms,e):e;var n=[];i.a.isArray(t)?n=t:t&&(n=[t]);var s=this.terms.slice(0,r).concat(n).concat(this.terms.slice(r+1));return new this.func(s)},remove:function(e){return this.replace(e)},getDenominator:function(){return new m(i.a.invoke(this.terms,"getDenominator")).flatten()}}),d.prototype=new u,i.a.extend(d.prototype,{func:d,eval:function(e,t){return i.a.reduce(this.terms,(function(r,n){return r+n.eval(e,t)}),0)},codegen:function(){return i.a.map(this.terms,(function(e){return"("+e.codegen()+")"})).join(" + ")||"0"},print:function(){return i.a.invoke(this.terms,"print").join("+")},tex:function(){var e="";return i.a.each(this.terms,(function(t){!e||t.isSubtract()?e+=t.tex():e+="+"+t.tex()})),e},collect:function(e){var t=i.a.invoke(this.terms,"collect",e),r=[];i.a.each(t,(function(t){if(t instanceof m){var n=t.partition();r.push([n[1].flatten(),n[0].reduce(e)])}else t instanceof E?r.push([E.One,t]):r.push([t,E.One])}));var n=i.a.groupBy(r,(function(e){return e[0].normalize().print()})),s=i.a.compact(i.a.map(n,(function(t){var r=t[0][0];return new m(new d(i.a.zip.apply(i.a,t)[1]).reduce(e),r).collect(e)})));return new d(s).flatten()},factor:function(e){e=i.a.extend({keepNegative:!1},e);var t,r=i.a.invoke(this.terms,"collect");t=r[0]instanceof m?r[0].terms:[r[0]],i.a.each(i.a.rest(this.terms),(function(e){t=i.a.map(t,(function(t){return e.findGCD(t)}))})),!e.keepNegative&&this.isNegative()&&t.push(E.Neg),t=new m(t).flatten().collect();var n=i.a.map(r,(function(e){return m.handleDivide(e,t).simplify()}));return n=new d(n).flatten(),m.createOrAppend(t,n).flatten()},reduce:function(e){return i.a.reduce(this.terms,(function(t,r){return t.add(r,e)}),this.identity)},needsExplicitMul:function(){return!1},isNegative:function(){var e=i.a.invoke(this.terms,"collect");return i.a.all(i.a.invoke(e,"isNegative"))},negate:function(){return new d(i.a.invoke(this.terms,"negate"))}}),m.prototype=new u,i.a.extend(m.prototype,{func:m,eval:function(e,t){return i.a.reduce(this.terms,(function(r,n){return r*n.eval(e,t)}),1)},codegen:function(){return i.a.map(this.terms,(function(e){return"("+e.codegen()+")"})).join(" * ")||"0"},print:function(){return i.a.map(this.terms,(function(e){return e instanceof d?"("+e.print()+")":e.print()})).join("*")},getUnits:function(){var e=i()(this.terms).chain().map((function(e){return e.getUnits()})).flatten().value();return e.sort(((e,t)=>e.unit.localeCompare(t.unit))),e},tex:function(){for(var e,t=" \\cdot ",r=i.a.groupBy(this.terms,(function(e){return e.isDivide()?"inverse":e instanceof E?"number":"other"})),n=r.inverse||[],s=r.number||[],o=r.other||[],a="",l=0;l<s.length;l++){if(s[l]instanceof S&&!(s[l]instanceof T)&&o.length>0&&n.length>0){var h=s.slice();h.splice(l,1);var c=h.concat(n).concat(o);return s[l].tex()+new m(c).tex()}}if(0===(s=i.a.compact(i.a.map(s,(function(e){var t=e instanceof S&&!(e instanceof T),r=!e.hints.fraction||n.length>0;if(t&&r){n.push(new f(new T(e.d),E.Div));var s=new T(e.n);return s.hints=e.hints,i.a.any(e.hints)?s:null}return e})))).length&&1===o.length)e=o[0].tex();else{var p="";i.a.each(s,(function(e){e.hints.subtract&&e.hints.entered?(a+="-",p+=(p?t:"")+e.abs().tex()):e instanceof T&&-1===e.n&&(e.hints.negate||e.hints.subtract)?a+="-":p+=(p?t:"")+e.tex()})),i.a.each(o,(function(e){e.needsExplicitMul()?p+=(p?t:"")+e.tex():p+=e instanceof d?"("+e.tex()+")":e.tex()})),e=p||"1"}if(n.length){var u=new m(i.a.invoke(n,"asDivide")).flatten().tex();return a+"\\frac{"+e+"}{"+u+"}"}return a+e},strip:function(){return new m(i.a.map(this.terms,(function(e){return e instanceof E?e.abs():e.strip()}))).flatten()},expand:function(){var e=function(e){return e instanceof d},t=function(e){return e instanceof f&&e.exp.isNegative()},r=this.recurse("expand").flatten(),n=i.a.any(r.terms,e),s=i.a.any(r.terms,(function(r){return t(r)&&e(r.base)}));if(!n&&!s)return r;var o=i.a.groupBy(r.terms,t),a=o[!1]||[],l=o[!0]||[];if(n){var h=i.a.groupBy(a,e),c=h[!0]||[],p=h[!1]||[],u=i.a.reduce(c,(function(e,t){return i.a.reduce(e,(function(e,r){return e.concat(i.a.map(t.terms,(function(e){return r.concat(e)})))}),[])}),[[]]);a=[new d(i.a.map(u,(function(e){return new m(p.concat(e)).flatten()})))]}s&&(l=[new f(new m(i.a.invoke(l,"getDenominator")).flatten().expand(),E.Div)]);return new m(a.concat(l)).flatten()},factor:function(e){var t=this.recurse("factor",e).flatten();if(!(t instanceof m))return t;var r=i.a.groupBy(t.terms,(function(e){return e instanceof S})),n=i.a.reduce(r[!0],(function(e,t){return{n:e.n*t.n,d:e.d*t.d}}),{n:1,d:1});return n=1===n.d?new T(n.n):new S(n.n,n.d),new m((r[!1]||[]).concat(n)).flatten()},collect:function(e){var t=this.recurse("collect",e).partition(),r=t[0].reduce(e);if(0===r.eval())return E.Zero;var n=t[1].flatten();if(!(n instanceof m))return new m(r,n).flatten();n=n.terms;var s=[];i.a.each(n,(function(e){e instanceof f?s.push([e.base,e.exp]):s.push([e,E.One])}));var o=i.a.groupBy(s,(function(e){return e[0].normalize().print()})),a=i.a.compact(i.a.map(o,(function(t){var r=t[0][0],n=new d(i.a.zip.apply(i.a,t)[1]).collect(e);return n instanceof E&&0===n.eval()?null:[r,n]}))),l=(s=i.a.groupBy(a,(function(e){return e[0]instanceof v&&e[0].isBasic()?"trig":e[0]instanceof g?"log":"expr"}))).trig||[],h=s.log||[],c=s.expr||[];if(l.length>1){var p=i.a.groupBy(l,(function(e){return e[0].arg.normalize().print()}));l=[],i.a.each(p,(function(t){var r=t[0][0].arg,n={sin:E.Zero,cos:E.Zero};i.a.each(t,(function(e){n[e[0].type]=e[1]})),m.handleNegative(n.sin).collect(e).equals(n.cos)&&(n=n.cos.isNegative()?{tan:n.sin}:{cot:n.cos}),i.a.each(n,(function(e,t){l.push([new v(t,r),e])}))}))}if(h.length>1){var u=i.a.groupBy(h,(function(e){return e[0].base.normalize().print()}));h=[],i.a.each(u,(function(t){2===t.length&&m.handleNegative(t[0][1]).collect(e).equals(t[1][1])?t[0][1].isNegative()?h.push([new g(t[0][0].power,t[1][0].power),t[1][1]]):h.push([new g(t[1][0].power,t[0][0].power),t[0][1]]):h=h.concat(t)}))}s=l.concat(h).concat(c);var y=i.a.map(s,(function(t){return new f(t[0],t[1]).collect(e)}));return new m([r].concat(y)).flatten()},isSubtract:function(){return i.a.any(this.terms,(function(e){return e instanceof E&&e.hints.subtract}))},factorIn:function(e){var t=this.partition()[0].terms,r=t.length&&i.a.all(t,(function(e){return e.n>0}));if(r){var n=t[0].negate();return n.hints=t[0].hints,this.replace(t[0],n.addHint(e))}return new m([E.negativeOne(e)].concat(this.terms))},factorOut:function(){var e=!1,t=i.a.compact(i.a.map(this.terms,(function(t,r,n){return!e&&t instanceof E&&t.hints.divide?(e=!0,-1!==t.n?t.negate():null):t})));return 1===t.length?t[0]:new m(t)},reduce:function(e){return i.a.reduce(this.terms,(function(t,r){return t.mul(r,e)}),this.identity)},findGCD:function(e){return new m(i.a.invoke(this.terms,"findGCD",e)).flatten()},asMul:function(){return this},asPositiveFactor:function(){return this.isPositive()?this:new m(i.a.invoke(this.collect().terms,"asPositiveFactor")).flatten()},isNegative:function(){return i.a.any(i.a.invoke(this.collect().terms,"isNegative"))},fold:function(){return m.fold(this)},negate:function(){var e=function(e){return e instanceof E};if(i.a.any(this.terms,e)){var t=i.a.find(this.terms,e);return this.replace(t,t.negate())}return new m([E.Neg].concat(this.terms))}}),i.a.each([d,m],(function(e){i.a.extend(e,{createOrAppend:function(t,r){return t instanceof e?new e(t.terms.concat(r)):new e(t,r)}})})),i.a.extend(m,{handleNegative:function(e,t){if(e instanceof E&&e.n>0){var r=e.negate();return r.hints=e.hints,r.addHint(t)}return e instanceof m?e.factorIn(t):new m(E.negativeOne(t),e)},handleDivide:function(e,t){if(t instanceof m){var r=m.handleDivide(e,t.terms[0]),n=new m(i.a.rest(t.terms)).flatten();return m.handleDivide(r,n)}var s=function(e){return e instanceof T};if(s(t)&&e instanceof m&&i.a.any(e.terms,s)){var o=e.terms.slice().reverse(),a=i.a.find(o,(function(e){return e instanceof S}));if(!s(a))return new m(e.terms.concat([new S(1,t.n).addHint("fraction")]));var l=new S(a.n,t.n);return l.hints=a.hints,a===o[0]&&(l=l.addHint("fraction")),a.n<0&&t.n<0?(l.d=-l.d,e.replace(a,[E.Neg,l])):e.replace(a,l)}var h=function(e,t){if(t instanceof T){if(e instanceof T)return e.n<0&&t.n<0?[E.Neg,new S(e.n,-t.n).addHint("fraction")]:[new S(e.n,t.n).addHint("fraction")];var r=new S(1,t.eval());return t.eval()<0?[e,r.addHint("negate")]:[e,r]}var n;if(t instanceof v&&t.exp){var i=t.exp;t.exp=void 0,t=new f(t,i)}return n=t instanceof f?new f(t.base,m.handleNegative(t.exp,"divide")):new f(t,E.Div),e instanceof T&&1===e.n?[n]:[e,n]};if(e instanceof m){var c=h(i.a.last(e.terms),t);return new m(i.a.initial(e.terms).concat(c))}return new m(c=h(e,t)).flatten()},fold:function(e){if(e instanceof m){var t=i.a.find(i.a.initial(e.terms),(function(e){return(e instanceof v||e instanceof g)&&e.hints.open})),r=i.a.indexOf(e.terms,t);if(t){var n,s=i.a.last(e.terms);if(!(t.hints.parens||s.hints.parens||s.has(v)||s.has(g)))return n=t instanceof v?v.create([t.type,t.exp],m.createOrAppend(t.arg,s).fold()):g.create(t.base,m.createOrAppend(t.power,s).fold()),0===r?n:new m(e.terms.slice(0,r).concat(n)).fold();t.hints.open=!1}var o=e.partition()[0].terms,a=function(e){return e.n>0},l=function(e){return-1===e.n&&e.hints.negate};if(o.length>1&&i.a.some(o,l)&&i.a.some(o,a)&&i.a.every(o,(function(e){return a(e)||l(e)}))){var h=i.a.indexOf(e.terms,i.a.find(e.terms,l)),c=i.a.indexOf(e.terms,i.a.find(e.terms,a));if(h<c)return e.replace(c,e.terms[c].negate()).remove(h)}}return e}}),f.prototype=new p,i.a.extend(f.prototype,{func:f,args:function(){return[this.base,this.exp]},eval:function(e,t){var r=this.base.eval(e,t),n=this.exp.eval(e,t);if(r<0){var i=this.exp.simplify();if(i instanceof M){var s=i.n,o=(s-s.toFixed()).toString().length-2,a=Math.pow(10,o);i=new S(s*a,a).simplify()}if(i instanceof S)if(Math.abs(i.d)%2==1)return(Math.abs(i.n)%2==1?-1:1)*Math.pow(-1*r,n)}return Math.pow(r,n)},getUnits:function(){return this.base.getUnits().map(function(e){return{unit:e.unit,pow:e.pow*this.exp.n}}.bind(this))},codegen:function(){return"Math.pow("+this.base.codegen()+", "+this.exp.codegen()+")"},print:function(){var e=this.base.print();return(this.base instanceof u||this.base instanceof f)&&(e="("+e+")"),e+"^("+this.exp.print()+")"},tex:function(){if(this.isDivide())return"\\frac{1}{"+this.asDivide().tex()+"}";if(this.isRoot())return 1!==this.exp.n&&h("Node marked with hint 'root' does not have exponent of form 1/x."),2===this.exp.d?"\\sqrt{"+this.base.tex()+"}":"\\sqrt["+this.exp.d+"]{"+this.base.tex()+"}";if(this.base instanceof v&&!this.base.isInverse()&&this.exp instanceof E&&this.exp.isSimple()&&this.exp.eval()>=0){var e=this.base.tex({split:!0});return e[0]+"^{"+this.exp.tex()+"}"+e[1]}var t=this.base.tex();return this.base instanceof u||this.base instanceof f||this.base instanceof E&&!this.base.isSimple()?t="("+t+")":(this.base instanceof v||this.base instanceof g)&&(t="["+t+"]"),t+"^{"+this.exp.tex()+"}"},needsExplicitMul:function(){return!this.isRoot()&&this.base.needsExplicitMul()},expand:function(){var e=this.recurse("expand");if(e.base instanceof m)return new m(i.a.map(e.base.terms,(function(t){return new f(t,e.exp)}))).expand();if(e.base instanceof d&&e.exp instanceof T&&e.exp.abs().eval()>1){for(var t=e.exp.eval()>0,r=e.exp.abs().eval(),n=function(e){return t?e:new f(e,E.Div)},s={1:e.base},o=2;o<=r;o*=2){var a=new m(s[o/2],s[o/2]);s[o]=a.expand().collect()}if(i.a.has(s,r))return n(s[r]);var l=i.a.map(r.toString(2).split(""),(function(e,t,r){return Number(e)*Math.pow(2,r.length-t-1)}));return l=i.a.without(l,0),n(a=new m(i.a.pick(s,l)).expand().collect())}return e.exp instanceof d?new m(i.a.map(e.exp.terms,(function(t){return new f(e.base,t).expand()}))).expand():e},factor:function(){var e=this.recurse("factor");return e.base instanceof m?new m(i.a.map(e.base.terms,(function(t){return t instanceof T&&e.exp.equals(E.Div)?new S(1,t.n):new f(t,e.exp)}))):e},collect:function(e){if(this.base instanceof f)return new f(this.base.base,s=m.createOrAppend(this.base.exp,this.exp)).collect(e);var t=this.recurse("collect",e),r=function(e){return e instanceof g&&e.base.equals(t.base)};if(t.exp instanceof E&&0===t.exp.eval())return E.One;if(t.exp instanceof E&&1===t.exp.eval())return t.base;if(r(t.exp))return t.exp.power;if(t.exp instanceof m&&i.a.any(t.exp.terms,r)){var n=i.a.find(t.exp.terms,r);return new f(n.power,s=t.exp.remove(n).flatten()).collect(e)}if(t.base instanceof E&&t.exp instanceof E){if(e&&e.preciseFloats){var s=t.exp.asRational(),o=t.base.getDecimalPlaces();if(new f(t.base,new S(1,s.d)).collect().getDecimalPlaces()>o){var a=new f(t.base,new T(s.n)).collect();return new f(a,new S(1,s.d))}}return t.base.raiseToThe(t.exp,e)}return t},isDivide:function(){var e=function(e){return e instanceof E&&e.hints.divide};return e(this.exp)||this.exp instanceof m&&i.a.any(this.exp.terms,e)},asDivide:function(){if(this.exp instanceof E){if(-1===this.exp.eval())return this.base;var e=this.exp.negate();return e.hints=i.a.clone(this.exp.hints),e.hints.divide=!1,new f(this.base,e)}if(this.exp instanceof m)return new f(this.base,this.exp.factorOut());h("called asDivide() on an Expr that wasn't a Num or Mul")},isRoot:function(){return this.exp instanceof S&&this.exp.hints.root},isSquaredTrig:function(){return this.base instanceof v&&!this.base.isInverse()&&this.exp instanceof E&&2===this.exp.eval()},getDenominator:function(){if(this.exp instanceof E&&-1===this.exp.eval())return m.createOrAppend(this.base,this.base.getDenominator()).flatten();if(this.exp.isNegative()){var e=new f(this.base,m.handleNegative(this.exp).collect());return m.createOrAppend(e,e.collect().getDenominator()).flatten()}return this.base instanceof E?new f(this.base.getDenominator(),this.exp).collect():E.One},findGCD:function(e){var t,r;if(e instanceof f?(t=e.base,r=e.exp):(t=e,r=E.One),this.base.equals(t)){if(this.exp.equals(r))return this;if(this.exp instanceof E&&r instanceof E)return new f(this.base,E.min(this.exp,r)).collect();if(this.exp instanceof E||r instanceof E)return E.One;var n=this.exp.asMul().partition(),i=r.asMul().partition();if(n[1].equals(i[1]))return new f(t,new m(E.min(n[0].reduce(),i[0].reduce()),n[1].flatten()).flatten()).collect()}return E.One},isPositive:function(){if(this.base.isPositive())return!0;var e=this.exp.simplify();return e instanceof T&&e.eval()%2==0},asPositiveFactor:function(){if(this.isPositive())return this;var e=this.exp.simplify();if(e instanceof T){var t=e.eval();if(t>2)return new f(this.base,new T(t-1));if(t<-2)return new f(this.base,new T(t+1))}return E.One}}),i.a.extend(f,{sqrt:function(e){return new f(e,E.Sqrt)},nthroot:function(e,t){return new f(e,m.fold(m.handleDivide(new T(1),t)).addHint("root"))}}),g.prototype=new p,i.a.extend(g.prototype,{func:g,args:function(){return[this.base,this.power]},eval:function(e,t){return Math.log(this.power.eval(e,t))/Math.log(this.base.eval(e,t))},codegen:function(){return"(Math.log("+this.power.codegen()+") / Math.log("+this.base.codegen()+"))"},print:function(){var e="("+this.power.print()+")";return this.isNatural()?"ln"+e:"log_("+this.base.print()+") "+e},tex:function(){var e="("+this.power.tex()+")";return this.isNatural()?"\\ln"+e:"\\log_{"+this.base.tex()+"}"+e},collect:function(e){var t=this.recurse("collect",e);return t.power instanceof E&&1===t.power.eval()?E.Zero:t.base.equals(t.power)?E.One:t.power instanceof f&&t.power.base.equals(t.base)?t.power.exp:t},expand:function(){var e=this.recurse("expand");return e.power instanceof m?new d(i.a.map(e.power.terms,(function(t){return new g(e.base,t).expand()}))):e.power instanceof f?new m(e.power.exp,new g(e.base,e.power.base).expand()).flatten():e.isNatural()?e:m.handleDivide(new g(C.e,e.power),new g(C.e,e.base))},hints:i.a.extend(g.prototype.hints,{open:!1}),isPositive:function(){var e=this.collect();return e.base instanceof E&&e.power instanceof E&&this.eval()>0},needsExplicitMul:function(){return!1},isNatural:function(){return this.base.equals(C.e)}}),i.a.extend(g,{natural:function(){return C.e},common:function(){return E.Ten},create:function(e,t){var r=new g(e,t);return t.hints.parens||(r=r.addHint("open")),r}}),v.prototype=new p,i.a.extend(v.prototype,{func:v,args:function(){return[this.type,this.arg]},functions:{sin:{eval:Math.sin,codegen:"Math.sin((",tex:"\\sin",expand:function(){return this}},cos:{eval:Math.cos,codegen:"Math.cos((",tex:"\\cos",expand:function(){return this}},tan:{eval:Math.tan,codegen:"Math.tan((",tex:"\\tan",expand:function(){return m.handleDivide(v.sin(this.arg),v.cos(this.arg))}},csc:{eval:function(e){return 1/Math.sin(e)},codegen:"(1/Math.sin(",tex:"\\csc",expand:function(){return m.handleDivide(E.One,v.sin(this.arg))}},sec:{eval:function(e){return 1/Math.cos(e)},codegen:"(1/Math.cos(",tex:"\\sec",expand:function(){return m.handleDivide(E.One,v.cos(this.arg))}},cot:{eval:function(e){return 1/Math.tan(e)},codegen:"(1/Math.tan(",tex:"\\cot",expand:function(){return m.handleDivide(v.cos(this.arg),v.sin(this.arg))}},arcsin:{eval:Math.asin,codegen:"Math.asin((",tex:"\\arcsin"},arccos:{eval:Math.acos,codegen:"Math.acos((",tex:"\\arccos"},arctan:{eval:Math.atan,codegen:"Math.atan((",tex:"\\arctan"},arccsc:{eval:function(e){return Math.asin(1/e)},codegen:"Math.asin(1/(",tex:"\\operatorname{arccsc}"},arcsec:{eval:function(e){return Math.acos(1/e)},codegen:"Math.acos(1/(",tex:"\\operatorname{arcsec}"},arccot:{eval:function(e){return Math.atan(1/e)},codegen:"Math.atan(1/(",tex:"\\operatorname{arccot}"},sinh:{eval:function(e){return(Math.exp(e)-Math.exp(-e))/2},codegen:function(e){return"((Math.exp("+e+") - Math.exp(-("+e+"))) / 2)"},tex:"\\sinh",expand:function(){return this}},cosh:{eval:function(e){return(Math.exp(e)+Math.exp(-e))/2},codegen:function(e){return"((Math.exp("+e+") + Math.exp(-("+e+"))) / 2)"},tex:"\\cosh",expand:function(){return this}},tanh:{eval:function(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))},codegen:function(e){return"((Math.exp("+e+") - Math.exp(-("+e+"))) / (Math.exp("+e+") + Math.exp(-("+e+"))))"},tex:"\\tanh",expand:function(){return m.handleDivide(v.sinh(this.arg),v.cosh(this.arg))}},csch:{eval:function(e){return 2/(Math.exp(e)-Math.exp(-e))},codegen:function(e){return"(2 / (Math.exp("+e+") - Math.exp(-("+e+"))))"},tex:"\\csch",expand:function(){return m.handleDivide(E.One,v.sinh(this.arg))}},sech:{eval:function(e){return 2/(Math.exp(e)+Math.exp(-e))},codegen:function(e){return"(2 / (Math.exp("+e+") + Math.exp(-("+e+"))))"},tex:"\\sech",expand:function(){return m.handleDivide(E.One,v.cosh(this.arg))}},coth:{eval:function(e){return(Math.exp(e)+Math.exp(-e))/(Math.exp(e)-Math.exp(-e))},codegen:function(e){return"((Math.exp("+e+") + Math.exp(-("+e+"))) / (Math.exp("+e+") - Math.exp(-("+e+"))))"},tex:"\\coth",expand:function(){return m.handleDivide(v.cosh(this.arg),v.sinh(this.arg))}}},isEven:function(){return i.a.contains(["cos","sec"],this.type)},isInverse:function(){return 0===this.type.indexOf("arc")},isBasic:function(){return i.a.contains(["sin","cos"],this.type)},eval:function(e,t){return(0,this.functions[this.type].eval)(this.arg.eval(e,t))},codegen:function(){var e=this.functions[this.type].codegen;if("function"==typeof e)return e(this.arg.codegen());if("string"==typeof e)return e+this.arg.codegen()+"))";throw new Error("codegen not implemented for "+this.type)},print:function(){return this.type+"("+this.arg.print()+")"},tex:function(e){var t=this.functions[this.type].tex,r="("+this.arg.tex()+")";return e&&e.split?[t,r]:t+r},hints:i.a.extend(v.prototype.hints,{open:!1}),isPositive:function(){return this.collect().arg instanceof E&&this.eval()>0},completeParse:function(){if(this.exp){var e=new f(this,this.exp);return this.exp=void 0,e}return this},needsExplicitMul:function(){return!1},expand:function(){var e=this.recurse("expand");if(e.isInverse())return e;var t=e.functions[e.type].expand;return i.a.bind(t,e)()},collect:function(e){var t,r=this.recurse("collect",e);return!r.isInverse()&&r.arg.isNegative()?(t=r.arg instanceof E?r.arg.abs():m.handleDivide(r.arg,E.Neg).collect(e),r.isEven()?new v(r.type,t):new m(E.Neg,new v(r.type,t))):r}}),i.a.extend(v,{create:function(e,t){var r=e[0],n=e[1];n&&n.equals(E.Neg)&&(r="arc"+r,n=void 0);var i=new v(r,t);return t.hints.parens||(i=i.addHint("open")),n&&(i.exp=n),i},sin:function(e){return new v("sin",e)},cos:function(e){return new v("cos",e)},sinh:function(e){return new v("sinh",e)},cosh:function(e){return new v("cosh",e)}}),y.prototype=new p,i.a.extend(y.prototype,{func:y,args:function(){return[this.arg]},eval:function(e,t){return Math.abs(this.arg.eval(e,t))},codegen:function(){return"Math.abs("+this.arg.codegen()+")"},print:function(){return"abs("+this.arg.print()+")"},tex:function(){return"\\left|"+this.arg.tex()+"\\right|"},collect:function(e){var t=this.recurse("collect",e);if(t.arg.isPositive())return t.arg;if(t.arg instanceof E)return t.arg.abs();if(t.arg instanceof m){var r=i.a.groupBy(t.arg.terms,(function(e){return e.isPositive()?"positive":e instanceof E?"number":"other"})),n=r.positive.concat(i.a.invoke(r.number,"abs"));return r.other.length&&n.push(new y(new m(r.other).flatten())),new m(n).flatten()}return t},expand:function(){var e=this.recurse("expand");return e.arg instanceof m?new m(i.a.map(e.arg.terms,(function(e){return new y(e)}))):e},isPositive:function(){return!0}}),b.prototype=new p,i.a.extend(b.prototype,{func:b,args:function(){return[this.left,this.type,this.right]},needsExplicitMul:function(){return!1},print:function(){return this.left.print()+this.type+this.right.print()},signs:{"=":" = ","<":" < ",">":" > ","<>":" \\ne ","<=":" \\le ",">=":" \\ge "},tex:function(){return this.left.tex()+this.signs[this.type]+this.right.tex()},normalize:function(){var e=this.recurse("normalize");return i.a.contains([">",">="],e.type)?new b(e.right,e.type.replace(">","<"),e.left):e},asExpr:function(e){var t=function(e){return e instanceof E&&e.isSimple()&&0===e.eval()},r=[];this.left instanceof d?r=i.a.clone(this.left.terms):t(this.left)||(r=[this.left]),this.right instanceof d?r=r.concat(this.right.negate().terms):t(this.right)||r.push(this.right.negate());var n=!this.isEquality();r=i.a.invoke(r,"collect",{preciseFloats:!0});for(var s=0;s<r.length;s++){var o=r[s].getDenominator();n&&!o.isPositive()&&(o=o.asPositiveFactor()),o.equals(E.One)||(r=i.a.map(r,(function(e){return m.createOrAppend(e,o).simplify({once:!0,preciseFloats:!0})})))}var a=new d(r).flatten();return e?a:this.divideThrough(a)},divideThrough:function(e){var t=!this.isEquality(),r=e.simplify({once:!0}),n=r.factor({keepNegative:t});if(!(n instanceof m))return e;var s=n.terms,o=i.a.groupBy(s,(function(e){return e instanceof d})),a=o[!0]||[],l=o[!1]||[];if(a.length&&this.isEquality())return new m(a).flatten();var h=l;a.length||(h=i.a.reject(h,(function(e){return!!e.getVars().length}))),t&&(h=i.a.invoke(h,"asPositiveFactor")),h=i.a.reject(h,(function(e){return e.equals(E.One)})),h=i.a.map(h,(function(e){return new f(e,E.Div)}));var c=new m(s.concat(h)).collect();return c.equals(n)?r:c},isEquality:function(){return i.a.contains(["=","<>"],this.type)},compare:function(e){if(!(e instanceof b))return!1;var t=this.normalize(),r=e.normalize();if(t.type!==r.type)return!1;var n=t.divideThrough(t.asExpr(!0).collect()),i=r.divideThrough(r.asExpr(!0).collect());return t.isEquality()?n.compare(i)||n.compare(m.handleNegative(i)):n.compare(i)},sameForm:function(e){var t=this.normalize(),r=e.normalize(),n=t.left.sameForm(r.left)&&t.right.sameForm(r.right);return t.isEquality()?n||t.left.sameForm(r.right)&&t.right.sameForm(r.left):n},isSimplified:function(){var e=this.asExpr(!0),t=this.divideThrough(e).simplify();return e.equals(t)&&this.left.isSimplified()&&this.right.isSimplified()}}),i.a.extend(b.prototype,{solveLinearEquationForVariable:function(e){var t=this.asExpr();if(!t.is(d)||2!==t.terms.length)throw new Error("Can only handle linear equations of the form a + bx (= 0)");var r,n,s;return(s=t.terms[0]).has(k)&&i.a.contains(s.getVars(),e.symbol)?(r=m.handleNegative(t.terms[1]),n=m.handleDivide(t.terms[0],e)):(r=m.handleNegative(t.terms[0]),n=m.handleDivide(t.terms[1],e)),m.handleDivide(r,n).simplify()}}),x.prototype=new p,i.a.extend(x.prototype,{needsExplicitMul:function(){return!1},findGCD:function(e){return e instanceof x||e instanceof E?this.equals(e)?this:E.One:e.findGCD(this)}}),w.prototype=new x,i.a.extend(w.prototype,{func:w,args:function(){return[this.symbol,this.arg]},print:function(){return this.symbol+"("+this.arg.print()+")"},tex:function(){return this.symbol+"("+this.arg.tex()+")"},eval:function(e,t){var r=this.arg,n=e[this.symbol],s=i.a.extend(i.a.clone(e),{x:r.eval(e,t)}),o=_(n,t);return o.parsed?o.expr.eval(s,t):o},codegen:function(){return'vars["'+this.symbol+'"]('+this.arg.codegen()+")"},getUnits:function(){return this.arg.getUnits()},getVars:function(e){return e?this.arg.getVars():i.a.union(this.arg.getVars(),[this.symbol]).sort()},getConsts:function(){return this.arg.getConsts()}}),k.prototype=new x,i.a.extend(k.prototype,{func:k,args:function(){return[this.symbol,this.subscript]},exprArgs:function(){return[]},recurse:function(){return this},print:function(){var e="";return this.subscript&&(e="_("+this.subscript.print()+")"),this.symbol+e},prettyPrint:function(){var e=this.subscript;return e&&(e instanceof E||e instanceof x)?this.symbol+"_"+e.print():this.print()},tex:function(){var e="";return this.subscript&&(e="_{"+this.subscript.tex()+"}"),(this.symbol.length>1?"\\":"")+this.symbol+e},repr:function(){return"Var("+this.print()+")"},eval:function(e,t){return e[this.prettyPrint()]},codegen:function(){return'vars["'+this.prettyPrint()+'"]'},getVars:function(){return[this.prettyPrint()]},isPositive:function(){return!1}}),C.prototype=new x,i.a.extend(C.prototype,{func:C,args:function(){return[this.symbol]},recurse:function(){return this},eval:function(e,t){return"pi"===this.symbol?Math.PI:"e"===this.symbol?Math.E:void 0},codegen:function(){return"pi"===this.symbol?"Math.PI":"e"===this.symbol?"Math.E":void 0},print:function(){return this.symbol},tex:function(){return"pi"===this.symbol?"\\pi ":"e"===this.symbol?"e":void 0},isPositive:function(){return this.eval()>0},abs:function(){return this.eval()>0?this:m.handleNegative(this)},getConsts:function(){return[this.print()]}}),C.e=new C("e"),C.pi=new C("pi"),E.prototype=new p,i.a.extend(E.prototype,{repr:function(){return this.print()},strip:function(){return this.abs()},recurse:function(){return this},codegen:function(){return this.print()},add:l,mul:l,negate:l,isSubtract:function(){return this.hints.subtract},abs:l,needsExplicitMul:function(){return!0},findGCD:l,isPositive:function(){return this.eval()>0},isNegative:function(){return this.eval()<0},asPositiveFactor:function(){return this.isPositive()?this:this.abs()},hints:i.a.extend(E.prototype.hints,{negate:!1,subtract:!1,divide:!1,root:!1,fraction:!1,entered:!1}),isSimple:l,getDecimalPlaces:function(){var e=(""+this.n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},asRational:l}),S.prototype=new E,i.a.extend(S.prototype,{func:S,args:function(){return[this.n,this.d]},eval:function(){return this.n/this.d},print:function(){return this.n.toString()+"/"+this.d.toString()},tex:function(){var e="\\frac{"+Math.abs(this.n).toString()+"}{"+this.d.toString()+"}";return this.n<0?"-"+e:e},add:function(e,t){return e instanceof S?new S(this.n*e.d+this.d*e.n,this.d*e.d).collect():e.add(this,t)},mul:function(e,t){return e instanceof S?new S(this.n*e.n,this.d*e.d).collect():e.mul(this,t)},collect:function(){var e=E.findGCD(this.n,this.d),t=this.n/e,r=this.d/e;return 1===r?new T(t):new S(t,r)},negate:function(){return new S(-this.n,this.d)},abs:function(){return new S(Math.abs(this.n),this.d)},findGCD:function(e){return e instanceof S?new S(E.findGCD(this.n*e.d,e.n*this.d),this.d*e.d).collect():e instanceof T?new S(E.findGCD(this.n,e.n),this.d):e.findGCD(this)},raiseToThe:function(e){if(e instanceof T){var t=e.eval()>0,r=e.abs().eval(),n=Math.pow(this.n,r),i=Math.pow(this.d,r);return t?new S(n,i).collect():new S(i,n).collect()}return new M(this.eval()).raiseToThe(e)},getDenominator:function(){return new T(this.d)},isSimple:function(){return!1},asRational:function(){return this}}),T.prototype=new S(0,1),i.a.extend(T.prototype,{func:T,args:function(){return[this.n]},print:function(){return this.n.toString()},tex:function(){return this.n.toString()},negate:function(){return new T(-this.n)},abs:function(){return new T(Math.abs(this.n))},isSimple:function(){return!0},findGCD:function(e){return e instanceof T?new T(E.findGCD(this.n,e.n)):e.findGCD(this)}}),i.a.extend(T,{create:function(e){return new T(e).addHint("entered")}}),M.prototype=new E,i.a.extend(M.prototype,{func:M,args:function(){return[this.n]},eval:function(){return this.n},print:function(){return this.n.toString()},tex:function(){return this.n.toString()},add:function(e,t){return t&&t.preciseFloats?M.toDecimalPlaces(this.n+e.eval(),Math.max(this.getDecimalPlaces(),e.getDecimalPlaces())):new M(this.n+e.eval()).collect()},mul:function(e,t){return t&&t.preciseFloats?M.toDecimalPlaces(this.n*e.eval(),this.getDecimalPlaces()+e.getDecimalPlaces()):new M(this.n*e.eval()).collect()},collect:function(){return this},negate:function(){return new M(-this.n)},abs:function(){return new M(Math.abs(this.n))},findGCD:function(e){return e instanceof E?new M(E.findGCD(this.eval(),e.eval())).collect():e.findGCD(this)},raiseToThe:function(e,t){return t&&t.preciseFloats&&e instanceof T&&e.n>1?M.toDecimalPlaces(new f(this,e).eval(),this.getDecimalPlaces()*e.n):new M(new f(this,e).eval()).collect()},asRational:function(){var e=this.n.toString().split(".");return 1===e.length?new S(this.n,1):new S(Number(e.join("")),Math.pow(10,e[1].length)).collect()},getDenominator:function(){return this.asRational().getDenominator()},isSimple:function(){return!0}}),i.a.extend(M,{create:function(e){return new M(e).addHint("entered")},toDecimalPlaces:function(e,t){return new M(+e.toFixed(Math.min(t,20))).collect()}}),i.a.extend(E,{negativeOne:function(e){return"subtract"===e?E.Sub:"divide"===e?E.Div:E.Neg},findGCD:function(e,t){var r;if(e=Math.abs(e),t=Math.abs(t),e!==Math.floor(e)||t!==Math.floor(t))return 1;for(;t;)r=e%t,e=t,t=r;return e},min:function(){return i.a.min(i.a.toArray(arguments),(function(e){return e.eval()}))},max:function(){return i.a.max(i.a.toArray(arguments),(function(e){return e.eval()}))}}),E.Neg=new T(-1).addHint("negate"),E.Sub=new T(-1).addHint("subtract"),E.Div=new T(-1).addHint("divide"),E.Sqrt=new S(1,2).addHint("root"),E.Zero=new T(0),E.One=new T(1),E.Ten=new T(10),d.prototype.identity=E.Zero,m.prototype.identity=E.One;a.yy={Add:d,Mul:m,Pow:f,Log:g,Trig:v,Eq:b,Abs:y,Func:w,Const:C,Var:k,Int:T,Float:M,parseError:function(e,t){throw new Error(t.loc.first_column)},constants:["e"],symbolLexer:function(e){return i.a.contains(a.yy.constants,e)?"CONST":i.a.contains(a.yy.functions,e)?"FUNC":"VAR"}};var _=function(e,t){try{return t&&t.functions?a.yy.functions=i.a.without(t.functions,"i"):a.yy.functions=[],t&&t.decimal_separator&&(e=e.split(t.decimal_separator).join(".")),{parsed:!0,expr:a.parse(e).completeParse()}}catch(e){return{parsed:!1,error:e.message}}};function A(e){this.symbol=e}A.prototype=new x;var I=function(e){if(i()(N).has(e)||i()(D).has(e))return new A(e);var t=i()(i()(P).keys()).find((function(t){return new RegExp("^"+t).test(e)}));if(t){var r=e.replace(new RegExp("^"+t),"");if(i()(N).has(r)||D[r]&&D[r].prefixes===R)return new m(P[t],new A(r));throw new Error(r+" does not allow prefixes")}return new A(e)},O=function(e){try{var t=o.parse(e),r=[];i()(t.unit.num).each((function(e){r.push(new f(I(e.name),new T(e.pow)))})),i()(t.unit.denom).each((function(e){r.push(new f(I(e.name),new T(-1*e.pow)))}));var n=new m(r).flatten();return"unitMagnitude"===t.type?{parsed:!0,unit:n,expr:new m([new M(+t.magnitude)].concat(r)),coefficient:t.magnitude,type:t.type}:{parsed:!0,unit:n,type:t.type}}catch(e){return{parsed:!1,error:e.message}}};i.a.extend(A.prototype,{func:A,args:function(){return[this.symbol]},recurse:function(){return this},eval:function(e,t){return 1},getUnits:function(){return[{unit:this.symbol,pow:1}]},codegen:function(){return"1"},print:function(){return this.symbol},tex:function(){return this.symbol},collect:function(e){if(i()(N).has(this.symbol))return this;if(i()(D).has(this.symbol))return D[this.symbol].conversion;throw new Error("could not understand unit: "+this.symbol)}});var N={m:new A("m"),g:new A("g"),s:new A("s"),A:new A("A"),K:new A("K"),mol:new A("mol"),cd:new A("cd")},P={a:new f(new T(10),new T(-18)),f:new f(new T(10),new T(-15)),p:new f(new T(10),new T(-12)),n:new f(new T(10),new T(-9)),u:new f(new T(10),new T(-6)),m:new f(new T(10),new T(-3)),c:new f(new T(10),new T(-2)),d:new f(new T(10),new T(-1)),da:new T(10),h:new f(new T(10),new T(2)),k:new f(new T(10),new T(3)),M:new f(new T(10),new T(6)),G:new f(new T(10),new T(9)),T:new f(new T(10),new T(12)),P:new f(new T(10),new T(15)),E:new f(new T(10),new T(18)),hella:new f(new T(10),new T(27))},R={},L={},F=function(e,t){var r=e.split("|"),n=r[0].trim(),i=r[1].trim(),s=E.One;""!==n&&(s=_(n).expr);var o=i.split("/"),a=[s];return o[0]&&o[0].split(" ").filter((function(e){return""!==e})).map((function(e){a.push(new A(e))})),o[1]&&o[1].split(" ").filter((function(e){return""!==e})).map((function(e){a.push(new f(new A(e),E.Div))})),{conversion:new m(a),prefixes:t}},D={Da:F("1.6605388628 x 10^-24 | g",R),u:F("| Da",L),meter:F("| m",L),meters:F("| m",L),in:F("254 / 10000 | m",L),ft:F("3048  / 10000 | m",L),yd:F("9144  / 10000 | m",L),mi:F("1609344 / 1000 | m",L),ly:F("9.4607 x 10^15 | m",L),nmi:F("1852 | m",L),Å:F("10^-10 | m",L),pc:F("3.0857 x 10^16 | m",L),min:F("60 | s",L),hr:F("3600 | s",L),sec:F("| s",L),day:F("86400 | s",L),wk:F("604800 | s",L),fortnight:F("14 | day",L),shake:F("10^-8 | s",L),olympiad:F("126200000 | s",L),"°C":F("1 | K",L),"°F":F("5/9 | K",L),"°R":F("5/9 | K",L),e:F("1.6021765314 x 10^-19 | C",L),c:F("299792458 | m / s",L),kn:F("514/1000 | m / s",L),kt:F("| kn",L),knot:F("| kn",L),J:F("| N m",R),BTU:F("1060 | J",L),cal:F("4184 / 1000 | J",R),eV:F("1.602176514 x 10^-19 | J",R),erg:F("10^−7 | J",R),W:F("| J / s",R),"H-e":F("80 | W",L),N:F("1000 | g m / s s",R),lb:F("4448221615 / 1000000000 | N",L),dyn:F("10^-5 | N",L),Pa:F("1 | N / m m m",R),bar:F("10^5 | Pa",R),"㏔":F("1/1000 | bar",L),"㍴":F("| bar",L),atm:F("101325 | Pa",L),Torr:F("1/760 | atm",L),mmHg:F("| Torr",L),ha:F("10^4 | m m",L),b:F("10^−28 | m m",R),barn:F("| b",R),acre:F("4046.87 | m m",L),skilodge:F("10^-31 | m m",L),outhouse:F("10^-34 | m m",L),shed:F("10^-52 | m m",L),L:F("1/1000 | m m m",R),gal:F("3785/1000 | L",R),cup:F("1/16 | gal",L),qt:F("1/4 | gal",L),quart:F("| qt",L),p:F("1/8 | gal",L),pt:F("| p",L),pint:F("| p",L),"fl oz":F("1/8 | cup",L),"fl. oz.":F("1/8 | cup",L),tbsp:F("1/16 | cup",L),tsp:F("1/3 | tbsp",L),rev:F("2 pi | rad",L),deg:F("180 pi | rad",L),"°":F("| deg",L),arcminute:F("1/60 | deg",L),arcsec:F("1/3600 | deg",L),Hu:F("1000 | dB",R),dozen:F("12 |",L),mol:F("6.0221412927 x 10^23 |",R),"%":F("1/100 |",L),percent:F("| %",L),ppm:F("1/1000000 |",L),V:F("1000 | g m m / s s C",R),C:F("| A s",R),ampere:F("| A",L),Ω:F("| V / A",R),ohm:F("| Ω",L),F:F("| C / V",R),H:F("| ohm s",R),T:F("1000 | g / C s",R),Wb:F("1000 | g m m / C s",R),lm:F("pi x 10^4 | cd / m m",L),lx:F("| lm / m m",L),nit:F("| cd / m m",L),sb:F("10^4 | cd / m m",L),stilb:F("1 | sb",L),apostilb:F("1 / pi x 10^(-4) | sb",L),blondel:F("| apostilb",L),asb:F("| apostilb",L),la:F("| lm",L),Lb:F("| lm",L),sk:F("10^-7 | lm",L),skot:F("| sk",L),bril:F("10^-11 | lm",L),Hz:F("| / s",R)},z=(E.Zero,E.One,function(e,t,r){var n={form:!1,simplify:!1};r=void 0!==r?i.a.extend(n,r):n;var s,o=e.sameVars(t);return o.equal?e.compare(t)?r.form&&!e.sameForm(t)?{equal:!1,message:"Your answer is not in the correct form."}:r.simplify&&!e.isSimplified()?{equal:!1,message:"Your answer is not fully expanded and simplified."}:{equal:!0,message:null}:{equal:!1,message:null}:(s=o.equalIgnoringCase?"Check your variables; one or more are using the wrong case (upper or lower).":"Check your variables; you may have used the wrong letter for one or more of them.",{equal:!1,wrongVariableCase:o.equalIgnoringCase,wrongVariableNames:!o.equalIgnoringCase,message:s})})},wW9L:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"ApiOptions",(function(){return J})),r.d(t,"ArrowPicker",(function(){return Jm})),r.d(t,"ArticleRenderer",(function(){return qm})),r.d(t,"BaseRadio",(function(){return qa})),r.d(t,"Categorizer",(function(){return $a})),r.d(t,"Changeable",(function(){return Hs})),r.d(t,"ClassNames",(function(){return ee})),r.d(t,"ColorPicker",(function(){return rf})),r.d(t,"DashPicker",(function(){return nf})),r.d(t,"Dependencies",(function(){return se})),r.d(t,"EditorJsonify",(function(){return jf})),r.d(t,"ElementContainer",(function(){return sf})),r.d(t,"Errors",(function(){return oe})),r.d(t,"Expression",(function(){return js})),r.d(t,"GrapherUtil",(function(){return sh})),r.d(t,"GrapherWidget",(function(){return uh})),r.d(t,"HintRenderer",(function(){return Hm})),r.d(t,"HintsRenderer",(function(){return Wm})),r.d(t,"InputNumber",(function(){return eo})),r.d(t,"InteractiveGraphWidget",(function(){return mc})),r.d(t,"ItemRenderer",(function(){return Vm})),r.d(t,"JiptParagraphs",(function(){return pi})),r.d(t,"KeypadContext",(function(){return ff})),r.d(t,"KhanColors",(function(){return Et})),r.d(t,"KhanMath",(function(){return he})),r.d(t,"LoadingContext",(function(){return Xm})),r.d(t,"Log",(function(){return ae})),r.d(t,"MatrixWidget",(function(){return xp})),r.d(t,"MultiItems",(function(){return Rf})),r.d(t,"NumericInput",(function(){return oo})),r.d(t,"PerseusError",(function(){return le})),r.d(t,"PerseusMarkdown",(function(){return Ci})),r.d(t,"PlotterWidget",(function(){return pd})),r.d(t,"Radio",(function(){return Va})),r.d(t,"Renderer",(function(){return ss})),r.d(t,"ServerItemRenderer",(function(){return Zm})),r.d(t,"SizingUtils",(function(){return Ii})),r.d(t,"TableWidget",(function(){return Vd})),r.d(t,"TransformerWidget",(function(){return mm})),r.d(t,"Util",(function(){return Pe})),r.d(t,"WIDGET_PROP_BLACKLIST",(function(){return Ls})),r.d(t,"WidgetJsonifyDeprecated",(function(){return ao})),r.d(t,"Widgets",(function(){return $i})),r.d(t,"apiVersion",(function(){return Gf})),r.d(t,"buildEmptyItemTreeForShape",(function(){return Mf})),r.d(t,"buildMapper",(function(){return Sf})),r.d(t,"components",(function(){return df})),r.d(t,"constants",(function(){return mf})),r.d(t,"displaySigFigs",(function(){return ym})),r.d(t,"globalConstants",(function(){return Ko})),r.d(t,"globalStyles",(function(){return ta})),r.d(t,"icons",(function(){return Hr})),r.d(t,"init",(function(){return Lm})),r.d(t,"interactiveSizes",(function(){return ht})),r.d(t,"isItemRenderableByVersion",(function(){return zf})),r.d(t,"itemDataVersion",(function(){return Vf})),r.d(t,"itemToTree",(function(){return Af})),r.d(t,"itemVersion",(function(){return Dm})),r.d(t,"mediaQueries",(function(){return bo})),r.d(t,"preprocessTex",(function(){return Si})),r.d(t,"registerAllWidgetsForTesting",(function(){return Wf})),r.d(t,"shapes",(function(){return wf})),r.d(t,"traverse",(function(){return yf})),r.d(t,"violatingWidgets",(function(){return Uf})),r.d(t,"widgets",(function(){return Fm}));var n=r("rELt"),i=r("DGHZ"),s=r("nqLt"),o=r("8jAt"),a=r("TSYQ"),l=r.n(a),h=r("q1tI"),c=r("5pch"),p=r.n(c),u=r("17x9"),d=r.n(u),m=r("96rG"),f=r.n(m),g=r("i8i4"),v=r.n(g),y=r("832m"),b=r("fhzG"),x=r.n(b),w=r("JoRC"),k=r("RhDl"),C=r("mR6N"),E=r("BWOr"),S=r.n(E),T=r("Pwnf"),M=r("Vxy9"),_=(r("Wr5T"),r("JimW")),A=r("gE8/"),I=r("6RhW"),O=r("vwLt"),N=r("wa3X"),P=r("9/5/"),R=r.n(P),L=r("K7le"),F=r("yhei"),D=r("JasB"),z=r("SGU3"),B={major:11,minor:0},q={major:0,minor:1};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,i)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(this,arguments)}function V(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Y=e=>{var{path:t,width:r,height:n,style:i={},title:s}=e;return h.createElement("svg",{role:"img","aria-hidden":!s,style:U({verticalAlign:"middle"},i),width:"".concat(r/n,"em"),height:"1em",viewBox:"0 0 ".concat(r," ").concat(n)},!!s&&h.createElement("title",null,s),h.createElement("path",{d:t,fill:"currentColor"}))};Y.propTypes={path:d.a.string.isRequired,height:d.a.number.isRequired,width:d.a.number.isRequired,style:d.a.object,title:d.a.string};var X={};function Q(e){if(!X[e]){var t=f()("<span>").text(e).appendTo("body");X[e]=t.width()+5,t.remove()}return X[e]}class K extends h.Component{constructor(){super(...arguments),j(this,"state",{items:this.props.options.concat("")}),j(this,"onChange",((e,t)=>{var r=p.a.clone(this.state.items);r[e]=t.target.value,e===r.length-1&&(r=r.concat("")),this.setState({items:r}),this.props.onChange(p.a.compact(r))})),j(this,"onKeyDown",((e,t)=>{var r=t.nativeEvent.keyCode;if(8===r&&""===this.state.items[e]){t.preventDefault();var n=p.a.clone(this.state.items),i=0===e?0:e-1;e!==n.length-1||0!==e&&""===n[i]?(n.splice(e,1),this.setState({items:n},(function(){v.a.findDOMNode(this.refs["input_"+i]).focus()}))):v.a.findDOMNode(this.refs["input_"+i]).focus()}else if(8===r&&1===this.state.items[e].length&&e===this.state.items.length-2){t.preventDefault();var s=p.a.clone(this.state.items);s.splice(e,1),this.setState({items:s}),this.props.onChange(p.a.compact(s))}else if(13===r){t.preventDefault();var o=p.a.clone(this.state.items),a=e+1;e===o.length-2?v.a.findDOMNode(this.refs["input_"+a]).focus():(o.splice(a,0,""),this.setState({items:o},(function(){v.a.findDOMNode(this.refs["input_"+a]).focus()})))}}))}UNSAFE_componentWillReceiveProps(e){this.setState({items:e.options.concat("")})}render(){var e=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),t=p.a.map(this.state.items,(function(e,t){return h.createElement("li",{key:t},h.createElement("input",{ref:"input_"+t,type:"text",value:e,onChange:this.onChange.bind(this,t),onKeyDown:this.onKeyDown.bind(this,t),style:{width:Q(e)}}))}),this);return h.createElement("ul",{className:e},t)}}j(K,"propTypes",{options:d.a.array,layout:d.a.string,onChange:d.a.func.isRequired}),j(K,"defaultProps",{options:[],layout:"horizontal"});var $=[];class Z extends h.Component{render(){return h.createElement("div",null,this.props.showTitle&&h.createElement("div",{style:{fontSize:14}},"Tags:"),h.createElement(K,{options:this.props.value||$,layout:"vertical",onChange:this.props.onChange}))}}j(Z,"propTypes",{value:d.a.arrayOf(d.a.string),onChange:d.a.func.isRequired,showTitle:d.a.bool.isRequired}),j(Z,"defaultProps",{value:$,showTitle:!0});var J={propTypes:d.a.shape({isArticle:d.a.bool.isRequired,satStyling:d.a.bool.isRequired,onInputError:d.a.func.isRequired,onFocusChange:d.a.func.isRequired,staticRender:d.a.bool.isRequired,GroupMetadataEditor:d.a.func.isRequired,showAlignmentOptions:d.a.bool.isRequired,readOnly:d.a.bool.isRequired,answerableCallback:d.a.func,getAnotherHint:d.a.func,interactionCallback:d.a.func,groupAnnotator:d.a.func.isRequired,imagePlaceholder:d.a.node,widgetPlaceholder:d.a.node,baseElements:d.a.shape({Link:d.a.func}),imagePreloader:d.a.func,trackInteraction:d.a.func,customKeypad:d.a.bool,nativeKeypadProxy:d.a.func,isMobile:d.a.bool,setDrawingAreaAvailable:d.a.func,useDraftEditor:d.a.bool,styling:d.a.shape({radioStyleVersion:d.a.oneOf(["intermediate","final"])}),hintProgressColor:d.a.string,canScrollPage:d.a.bool,inModal:d.a.bool,crossOutEnabled:d.a.bool,editorChangeDelay:d.a.number}).isRequired,defaults:{isArticle:!1,isMobile:!1,satStyling:!1,onInputError:function(){},onFocusChange:function(){},staticRender:!1,GroupMetadataEditor:Z,showAlignmentOptions:!1,readOnly:!1,groupAnnotator:function(){return null},baseElements:{Link:e=>h.createElement("a",e)},setDrawingAreaAvailable:function(){},useDraftEditor:!1,styling:{radioStyleVersion:"final"},canScrollPage:!1,inModal:!1,crossOutEnabled:!1,editorChangeDelay:0}},ee={RENDERER:"perseus-renderer",TWO_COLUMN_RENDERER:"perseus-renderer-two-columns",RESPONSIVE_RENDERER:"perseus-renderer-responsive",INPUT:"perseus-input",FOCUSED:"perseus-focused",RADIO:{OPTION:"perseus-radio-option",SELECTED:"perseus-radio-selected",OPTION_CONTENT:"perseus-radio-option-content"},INTERACTIVE:"perseus-interactive",CORRECT:"perseus-correct",INCORRECT:"perseus-incorrect",UNANSWERED:"perseus-unanswered",MOBILE:"perseus-mobile"},te={assetStatuses:{},setAssetStatus:(e,t)=>{}},re=h.createContext(te),ne=null,ie=()=>{if(ne)return ne;throw new Error(["Perseus has not been provided required dependencies.","setDependencies(dependencies) must be called first.","Make sure Perseus is being imported from javascript/perseus/perseus.js."].join("\n"))},se=Object.freeze({__proto__:null,setDependencies:e=>{ne=e},getDependencies:ie}),oe=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",NotAllowed:"NotAllowed",TransientService:"TransientService",Service:"Service"}),ae={log:(e,t)=>{ie().Log.log(e,t)},error:(e,t,r)=>{ie().Log.error(e,t,r)}};class le extends Error{constructor(e,t,r){super(e),j(this,"kind",void 0),j(this,"metadata",void 0),this.kind=t,this.metadata=null==r?void 0:r.metadata}}var he={cleanMath:function(e){return"string"==typeof e?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return 0===e?e:e<0?-he.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*he.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){var r=[].slice.call(arguments,1);return he.getGCD(e,he.getGCD(...r))}var n;for(e=Math.abs(e),t=Math.abs(t);t;)n=e%t,e=t,t=n;return e},getLCM:function(e,t){if(arguments.length>2){var r=[].slice.call(arguments,1);return he.getLCM(e,he.getLCM(...r))}return Math.abs(e*t)/he.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!f.a.grep(he.primes,(function(t,r){return Math.abs(t-e)<=.5})).length;if(e<=1||e>2&&e%2==0)return!1;for(var t=3,r=Math.sqrt(e);t<=r;t+=2)if(e%t==0)return!1;return!0},getPrimeFactorization:function(e){if(1===e)return[];if(he.isPrime(e))return[e];for(var t=Math.sqrt(e),r=2;r<=t;r++)if(e%r==0)return f.a.merge(he.getPrimeFactorization(r),he.getPrimeFactorization(e/r))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){var r=Math.pow(10,e).toFixed(5);return Math.round((t*r).toFixed(5))/r},toFixedApprox:function(e,t){var r=e.toFixed(t);return y.b.equal(+r,e)?r:"\\approx "+r},roundToApprox:function(e,t){var r=he.roundTo(t,e);return y.b.equal(r,e)?String(r):he.toFixedApprox(e,t)},toFraction:function(e,t){if(null==t&&(t=Math.pow(2,-46)),e<0||e>1){var r=e%1;r+=r<0?1:0;var n=he.toFraction(r,t);return n[0]+=Math.round(e-r)*n[1],n}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];for(var i=0,s=1,o=1,a=1,l=1,h=2;;){if(Math.abs(Number(l/h)-e)<=t)return[l,h];l/h<e?(i=l,s=h):(o=l,a=h),l=i+o,h=s+a}},getNumericFormat:function(e){if((e=(e=f.a.trim(e)).replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1")).match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";var t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(null==e)return"";if(0===e)return"0";if("percent"===t)return 100*e+"%";if("pi"===t){var r=y.b.toFraction(e/Math.PI),n=Math.abs(r[0]),i=r[1];if(y.b.isInteger(n)){return(e<0?"-":"")+(1===n?"":n)+"π"+(1===i?"":"/"+i)}}if(p()(["proper","improper","mixed","fraction"]).contains(t)){var s=y.b.toFraction(e),o=Math.abs(s[0]),a=s[1],l=e<0?"-":"";if(1===a)return l+o;if("mixed"===t){var h=o%a,c=(o-h)/a;return l+(c?c+" ":"")+h+"/"+a}return l+o+"/"+a}return String(e)}},ce=Math.pow(2,-42),pe={APPROXIMATED_PI_ERROR:o._("Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>"),EXTRA_SYMBOLS_ERROR:o._("We could not understand your answer. Please check your answer for extra text or symbols."),NEEDS_TO_BE_SIMPLFIED_ERROR:o._("Your answer is almost correct, but it needs to be simplified."),MISSING_PERCENT_ERROR:o._("Your answer is almost correct, but it is missing a <code>\\%</code> at the end."),MULTIPLICATION_SIGN_ERROR:o._("I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign."),WRONG_CASE_ERROR:o._("Your answer includes use of a variable with the wrong case."),WRONG_LETTER_ERROR:o._("Your answer includes a wrong variable letter.")},ue={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,t){var r;t=p.a.extend({simplify:"required",ratio:!1,forms:ue.predicate.defaultForms},t),r=p.a.isArray(t.forms)?t.forms:t.forms.split(/\s*,\s*/),void 0===t.inexact&&(t.maxError=0),t.maxError=+t.maxError+ce,p.a.contains(r,"percent")&&(r=p.a.without(r,"percent")).push("percent");var n=function(e){var r=(e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"")).match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),n=e.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),i=parseInt(e,10);if(r||n){var s,o,a=!0;return r?(s=parseFloat(r[1]),o=parseFloat(r[2])):(s=parseFloat(n[2]),"-"===n[1]&&(s<0&&(a=!1),s=-s),o=parseFloat(n[3])),[{value:s/o,exact:a=a&&o>0&&(t.ratio||1!==o)&&1===he.getGCD(s,o)}]}return isNaN(i)||""+i!==e?[]:[{value:i,exact:!0}]},i={integer:function(e){var t=i.decimal(e),r=i.decimal(e,1);return null!=t[0].value&&t[0].value===r[0].value||null!=t[1].value&&t[1].value===r[1].value?t:[]},proper:function(e){return f.a.map(n(e),(function(e){return Math.abs(e.value)<1?[e]:[]}))},improper:function(e){return f.a.map(n(e),(function(e){return Math.abs(e.value)>=1?[e]:[]}))},pi:function(e){var t,r=[];if(t=(e=e.replace(/\u2212/,"-")).match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))r=[{value:parseFloat(t[1]+"1"),exact:!0}];else if(t=e.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))r=n(t[1]);else if(t=e.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){var s=parseFloat(t[1]+"1"),o=parseFloat(t[2]),a=parseFloat(t[3]),l=parseFloat(t[4]);r=[{value:s*(o+a/l),exact:a<l&&1===he.getGCD(a,l)}]}else if(t=e.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))r=n(t[1]+"/"+t[3]);else if(t=e.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))r=n(t[1]+"1/"+t[3]);else if("0"===e)r=[{value:0,exact:!0}];else{if(!(t=e.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))){r=p.a.reduce(ue.predicate.defaultForms.split(/\s*,\s*/),(function(t,r){return t.concat(i[r](e))}),[]);var h=!1,c=parseFloat(e);if(isNaN(c)||c===parseInt(e))e.match(/\/\s*7/)&&(h=!0);else{var u=Math.PI/12,d=u*Math.round(c/u);Math.abs(c-d)<.01&&(h=!0)}return h&&p.a.each(r,(function(e){e.piApprox=!0})),r}r=i.decimal(t[1])}var m=Math.PI;return e.match(/\\?tau|t|\u03c4/)&&(m=2*Math.PI),e.match(/pau/)&&(m=1.5*Math.PI),f.a.each(r,(function(e,t){t.value*=m})),r},coefficient:function(e){var t=[];return""===(e=e.replace(/\u2212/,"-"))?t=[{value:1,exact:!0}]:"-"===e&&(t=[{value:-1,exact:!0}]),t},log:function(e){var t,r=[];return(t=(e=(e=e.replace(/\u2212/,"-")).replace(/[ \(\)]/g,"")).match(/^log\s*(\S+)\s*$/i))?r=i.decimal(t[1]):"0"===e&&(r=[{value:0,exact:!0}]),r},percent:function(e){e=f.a.trim(e);var t=!1;e.indexOf("%")===e.length-1&&(e=f.a.trim(e.substring(0,e.length-1)),t=!0);var r=i.decimal(e);return f.a.each(r,(function(e,r){r.exact=t,r.value=r.value/100})),r},mixed:function(e){var t=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(t){var r=parseFloat(t[1]+"1"),n=parseFloat(t[2]),i=parseFloat(t[3]),s=parseFloat(t[4]);return[{value:r*(n+i/s),exact:i<s&&1===he.getGCD(i,s)}]}return[]},decimal:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10,n=function(e){var n=(e=f.a.trim(e)).replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),i=e.match(/^0[0,]*,/);if(n&&!i){var s=parseFloat(n[1].replace(/[, ]/g,""));return void 0===t.inexact&&(s=Math.round(s*r)/r),s}},i=function(e){return e=e.replace(/([\.,])/g,(function(e,t){return"."===t?",":"."})),n(e)};return[{value:n(e),exact:!0},{value:i(e),exact:!0}]}};return function(n){var s=null!=t.fallback?""+t.fallback:"",o={empty:""===(n=f.a.trim(n)||s),correct:!1,message:null,guess:n};if(f.a.each(r,(function(r,s){for(var a=i[s](n),l=0,h=a.length;l<h;l++){var c=a[l].value,p=a[l].exact,u=a[l].piApprox;if(e(c,t.maxError))return p||"optional"===t.simplify?(o.correct=!0,o.message=t.message||null,o.empty=!1):"percent"===s?(o.empty=!0,o.message=pe.MISSING_PERCENT_ERROR):("enforced"!==t.simplify&&(o.empty=!0),o.message=pe.NEEDS_TO_BE_SIMPLFIED_ERROR),!1;u&&e(c,Math.abs(.001*c))&&(o.empty=!0,o.message=pe.APPROXIMATED_PI_ERROR)}})),!1===o.correct){var a=!1;if(p.a.each(i,(function(e){p.a.any(e(n),(function(e){return null!=e.value&&!p.a.isNaN(e.value)}))&&(a=!0)})),!a)return o.empty=!0,o.message=pe.EXTRA_SYMBOLS_ERROR,o}return o}}},number:{convertToPredicate:function(e,t){var r=parseFloat(f.a.trim(e));return[function(e,t){return Math.abs(e-r)<t},f.a.extend({},t,{type:"predicate"})]},createValidatorFunctional:function(e,t){return ue.predicate.createValidatorFunctional(...ue.number.convertToPredicate(e,t))}},expression:{parseSolution:function(e,t){var r=n.e(e,t);if(!r.parsed)throw new le("The provided solution ("+e+") didn't parse.",oe.InvalidInput);if(t.simplified&&!r.expr.isSimplified())throw new le("The provided solution ("+e+") isn't fully expanded and simplified.",oe.InvalidInput);return r=r.expr},createValidatorFunctional:function(e,t){return function(r){var i={empty:!1,correct:!1,message:null,guess:r,ungraded:!1};if(!r)return i.empty=!0,i;var s=n.e(r,t);if(!s.parsed)return i.empty=!0,i;"string"==typeof e&&(e=ue.expression.parseSolution(e,t));var o=n.d(s.expr,e,t);if(o.equal)i.correct=!0;else if(o.wrongVariableNames||o.wrongVariableCase)i.ungraded=!0,i.message=o.wrongVariableCase?pe.WRONG_CASE_ERROR:pe.WRONG_LETTER_ERROR,i.suppressAlmostThere=!0;else if(o.message)i.message=o.message;else{var a=n.e(r.replace(/[xX]/g,"*"),t);if(a.parsed){var l=n.d(a.expr,e,t);l.equal?(i.ungraded=!0,i.message=pe.MULTIPLICATION_SIGN_ERROR):l.message&&(i.message=l.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return i}}}},de=!1,me=/^web\+graphie:/,fe=/^file\+graphie:/;var ge=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,ve=new RegExp(ge.source+"$"),ye=function(e){var t=e;return function(){var e=t;return(t=268435455&(e=4294967295&(3042594569^(e=(e=4294967295&((e=(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+374761393+(e<<5)&4294967295)+3550635116^e<<9))+4251993797+(e<<3)&4294967295)^e>>>16)))/268435456}};var be="x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){for(var r,n=[],i=t.lastIndex=0;r=t.exec(e);){var s=r;n.push(e.slice(i,s.index)),n.push(...s.slice(1)),i=s.index+s[0].length}return n.push(e.slice(i)),n};function xe(e,t){var r=e*t,n=e,i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),s=Math.floor(n/i);return r<25?e:r<50?5===s?e:e/2:1===s?e/2:2===s?e/4:5===s?e/5:void 0}function we(e,t){return t/(e[1]-e[0])}function ke(e,t){var r=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10)),n=t/e*r;return n<=.15?r*=10:n<=.35?r*=5:n<=.75&&(r*=2),r}var Ce=(e,t)=>{var r=t[1]-t[0],n=r/e;return n<=10?e:n<=20?2*e:ke(r,10)};var Ee={UNSAFE_componentWillMount:function(){var e={};p.a.each(this.deprecatedProps,(function(t,r){p.a.has(this.props,r)&&p.a.extend(e,t(this.props))}),this),p.a.isEmpty(e)||(p.a.extend(this.props,e),setTimeout(this.props.onChange,0,e))}};function Se(e,t){return"number"==typeof e&&"number"==typeof t?Math.abs(e-t)<1e-9:e===t}var Te={pointerDown:!1,currentTouchIdentifier:null};function Me(e){return _e(e)?Ie(e):e}function _e(e){return me.test(e)||fe.test(e)}function Ae(e){return e.replace(me,"https:").replace(fe,"file:")}function Ie(e){return Ae(e)+".svg"}var Oe={getWordBeforeCursor:function(e){var t=e.value,r=e.selectionStart-1,n=Math.max(t.lastIndexOf("\n",r),t.lastIndexOf(" ",r))+1;return{string:t.substring(n,r+1),pos:{start:n,end:r}}},moveCursor:function(e,t){e.selectionStart=t,e.selectionEnd=t}},Ne=ye(4294967295&(new Date).getTime()),Pe={inputPathsEqual:function(e,t){return null==e||null==t?null==e==(null==t):e.length===t.length&&e.every(((e,r)=>t[r]===e))},nestedMap:function e(t,r,n){return Array.isArray(t)?p.a.map(t,(function(t){return e(t,r)})):r.call(n,t)},rWidgetRule:ge,rTypeFromWidgetId:/^([a-z-]+) ([0-9]+)$/,rWidgetParts:ve,snowman:"☃",noScore:{type:"points",earned:0,total:0,message:null},seededRNG:ye,shuffle:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=p.a.clone(e);if(!i.length||p.a.all(i,(function(e){return p.a.isEqual(e,i[0])})))return i;r="function"==typeof t?t:ye(t);do{for(var s=i.length;s>0;s--){var o=Math.floor(r()*s),a=i[o];i[o]=i[s-1],i[s-1]=a}}while(n&&p.a.isEqual(e,i));return i},split:be,combineScores:function(e,t){var r;if("points"===e.type&&"points"===t.type)return r=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"points",earned:e.earned+t.earned,total:e.total+t.total,message:r};if("points"===e.type&&"invalid"===t.type)return t;if("invalid"===e.type&&"points"===t.type)return e;if("invalid"===e.type&&"invalid"===t.type)return{type:"invalid",message:r=e.message&&t.message&&e.message!==t.message?null:e.message||t.message};throw new le("PerseusScore with unknown type encountered",oe.InvalidInput,{metadata:{scoreA:JSON.stringify(e),scoreB:JSON.stringify(t)}})},keScoreFromPerseusScore:function(e,t,r){if("points"===e.type)return{empty:!1,correct:e.earned>=e.total,message:e.message,guess:t,state:r};if("invalid"===e.type)return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:t,state:r};throw new le("Invalid score type: "+e.type,oe.InvalidInput,{metadata:{score:JSON.stringify(e),guess:JSON.stringify(t),state:JSON.stringify(r)}})},firstNumericalParse:function(e){var t;return ue.predicate.createValidatorFunctional((function(e){return t=e,!0}),{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"})(e),t},stringArrayOfSize:function(e){return p()(e).times((function(){return""}))},gridDimensionConfig:function(e,t,r,n){var i=we(t,r);return{scale:i,tickStep:e/n,unityLabel:e*i>30}},getGridStep:function(e,t,r){return p()(2).times((function(n){var i=we(e[n],r);return xe(t[n],i)}))},snapStepFromGridStep:function(e){return[e[0]/2,e[1]/2]},scaleFromExtent:we,tickStepFromExtent:function(e,t){var r=e[1]-e[0];return ke(r,(15<r&&r<=20?23:r>100||r<5?10:16)*(t/500))},gridStepFromTickStep:xe,tickStepFromNumTicks:ke,constrainedTickStepsFromTickSteps:function(e,t){return[Ce(e[0],t[0]),Ce(e[1],t[1])]},DeprecationMixin:Ee,eq:Se,deepEq:function e(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}return!Array.isArray(t)&&!Array.isArray(r)&&("function"==typeof t&&"function"==typeof r?Se(t,r):"function"!=typeof t&&"function"!=typeof r&&("object"==typeof t&&"object"==typeof r&&t&&r?t===r||p.a.all(t,(function(t,n){return e(r[n],t)}))&&p.a.all(r,(function(r,n){return e(t[n],r)})):!("object"==typeof t&&t||"object"==typeof r&&r)&&Se(t,r)))},parseQueryString:function(e){e=e||window.location.search.substring(1);for(var t,r={},n=/\+/g,i=/([^&=]+)=?([^&]*)/g,s=function(e){return decodeURIComponent(e.replace(n," "))};t=i.exec(e);){var o=t;r[s(o[1])]=s(o[2])}return r},updateQueryString:function(e,t,r){r=encodeURIComponent(r);var n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+r+"$2"):e+i+t+"="+r},strongEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")},widgetShouldHighlight:function(e){if(!e)return!1;switch(e.type){case"measurer":case"protractor":return!0;default:return!1}},scoreIsEmpty:function(e){return"invalid"===e.type&&(!e.message||0===e.message.length)},touchHandlers:Te,resetTouchHandlers:function(){Object.assign(Te,{pointerDown:!1,currentTouchIdentifier:null})},extractPointerLocation:function(e){var t;if(Te.pointerDown){if(null!=Te.currentTouchIdentifier)for(var r=e.changedTouches?e.changedTouches.length:0,n=0;n<r;n++)e.changedTouches[n].identifier===Te.currentTouchIdentifier&&(t=e.changedTouches[n]);else t=e;var i="touchend"===e.type||"touchcancel"===e.type;t&&i&&(Te.pointerDown=!1,Te.currentTouchIdentifier=null)}else Te.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],Te.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}},supportsPassiveEvents:()=>{try{var e=Object.defineProperty({},"passive",{get:function(){de=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}return de},captureScratchpadTouchStart:function(e){e.stopPropagation()},getImageSize:function(e,t){var r=new Image;r.onload=function(){var e;0===r.width&&0===r.height?(null===(e=document.body)||void 0===e||e.appendChild(r),p.a.defer((function(){var e;t(r.clientWidth,r.clientHeight),null===(e=document.body)||void 0===e||e.removeChild(r)}))):t(r.width,r.height)},r.src=Me(e)},getRealImageUrl:Me,isLabeledSVG:_e,getBaseUrl:Ae,getSvgUrl:Ie,getDataUrl:function(e){return Ae(e)+"-data.json"},textarea:Oe,unescapeMathMode:e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e,random:Ne};function Re(e,t){var r=window.scrollX,n=window.scrollY,i=document.querySelector("meta[name=viewport]");i?i.setAttribute("content",e):f()("head").append('<meta name="viewport" content="'.concat(e,'">')),document.body.style.opacity=.9999,setTimeout((()=>{document.body.style.opacity=1,window.scrollTo(r,n),t&&setTimeout(t,0)}),0)}function Le(){}function Fe(e,t){this._fullHeight=this._fullWidth=this._overlay=null,this._targetImage=e,this._enableMobilePinch=t,this._$body=f()(document.body)}f.a.fn.emulateTransitionEnd=function(e){var t=!1,r=this;f()(this).one("bsTransitionEnd",(function(){t=!0}));return setTimeout((function(){t||f()(r).trigger(f.a.support.transition.end)}),e),this},f()((function(){f.a.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var r in t)if(void 0!==e.style[r])return{end:t[r]};return!1}(),f.a.support.transition&&(f.a.event.special.bsTransitionEnd={bindType:f.a.support.transition.end,delegateType:f.a.support.transition.end,handle:function(e){if(f()(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})),Le.prototype._initialize=function(e){this._$document||(this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=f()(document),this._$window=f()(window),this._$body=f()(document.body),this._boundClick=f.a.proxy(this._clickHandler,this),this._enableMobilePinch=e)},Le.prototype.handleZoomClick=function(e,t){this._initialize(t);var r=e.target;if(r&&"IMG"===r.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.src,"_blank"):void(!t&&r.width>=window.innerWidth-Fe.getOffset()||(this._activeZoomClose(!0),t?Re("width=device-width, initial-scale=1, minimum-scale=1",(()=>this._zoom(r))):this._zoom(r),t||(this._$window.on("scroll.zoom",f.a.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",f.a.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",f.a.proxy(this._touchStart,this))),document.addEventListener("click",this._boundClick,!0),e.stopPropagation()))},Le.prototype._zoom=function(e){this._activeZoom=new Fe(e,this._enableMobilePinch),this._activeZoom.zoomImage()},Le.prototype._activeZoomClose=function(e){this._activeZoom&&(e?(this._activeZoom.dispose(),this._disposeActiveZoom()):Re("width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1",(()=>{this._activeZoom&&(this._activeZoom.close(),this._disposeActiveZoom())})))},Le.prototype._disposeActiveZoom=function(){this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null},Le.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=window.scrollY);var t=this._initialScrollPosition-window.scrollY;Math.abs(t)>=40&&this._activeZoomClose()},Le.prototype._keyHandler=function(e){27===e.keyCode&&this._activeZoomClose()},Le.prototype._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),this._activeZoomClose()},Le.prototype._touchStart=function(e){this._initialTouchPosition=e.originalEvent.touches[0].pageY,f()(e.target).on("touchmove.zoom",f.a.proxy(this._touchMove,this))},Le.prototype._touchMove=function(e){Math.abs(e.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),f()(e.target).off("touchmove.zoom"))},Fe._OFFSET=80,Fe._MAX_WIDTH=2560,Fe._MAX_HEIGHT=4096,Fe.getOffset=function(e){return e?0:Fe._OFFSET},Fe.prototype.getOffset=function(){return Fe.getOffset(this._enableMobilePinch)},Fe.prototype.zoomImage=function(){var e=document.createElement("img"),t=f()(e);e.onload=function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width);var r=this._imageOffset=f()(this._targetImage).offset(),n=this._left=r.left-f()(window).scrollLeft(),i=this._top=r.top-f()(window).scrollTop();t.css({left:n,top:i,width:this._targetImage.width,height:this._targetImage.height}),this._zoomOriginal()}.bind(this),e.src=this._targetImage.src,this.$zoomedImage=t},Fe.prototype._zoomOriginal=function(){var e,t,r;this.$zoomedImage.addClass("zoom-img").attr("data-action","zoom-out"),f()(this._targetImage).css("visibility","hidden"),this._backdrop=document.createElement("div"),this._backdrop.className="zoom-backdrop",null===(e=document.body)||void 0===e||e.appendChild(this._backdrop),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",null===(t=document.body)||void 0===t||t.appendChild(this._overlay),null===(r=this._overlay)||void 0===r||r.appendChild(this.$zoomedImage[0]),this._calculateZoom(),this._triggerAnimation()},Fe.prototype._calculateZoom=function(){var e=this._fullWidth,t=this._fullHeight,r=window.innerHeight-this.getOffset(),n=window.innerWidth-this.getOffset(),i=e/this._targetImage.width,s=e/t,o=n/r;this._imgScaleFactor=e<n&&t<r?i:s<o?r/t*i:n/(null!=e?e:0)*i},Fe.prototype._triggerAnimation=function(){var e=f()(window).scrollTop()+window.innerHeight/2,t=f()(window).scrollLeft()+window.innerWidth/2,r=this._imgScaleFactor,n=this._imageOffset.top+this._targetImage.height/2,i=this._imageOffset.left+this._targetImage.width/2;this._translateY=(e-n)/r,this._translateX=(t-i)/r,this._zoomedInTransformString="\n        scale(".concat(r,")\n        translate3d(").concat(this._translateX,"px, ").concat(this._translateY,"px, 0)\n    "),this.$zoomedImage.css({transform:this._zoomedInTransformString}).addClass("zoom-transition").one(f.a.support.transition.end,f.a.proxy(this._onZoomInFinish,this)).emulateTransitionEnd(300),this._$body.addClass("zoom-overlay-open")},Fe.prototype._onZoomInFinish=function(){var e=this._targetImage.height*this._imgScaleFactor,t=this._targetImage.width*this._imgScaleFactor,r=0,n=0,i=0,s=0,o=0,a=0;t<window.innerWidth?(r="50%",i=-t/2):o=(t-window.innerWidth)/2,e<window.innerHeight?(n="50%",s=-e/2):a=(e-window.innerHeight)/2,this.$zoomedImage.css({height:e,left:r,marginLeft:i,marginTop:s,top:n,transform:"",width:t}).removeClass("zoom-transition"),f()(this._overlay).scrollLeft(o).scrollTop(a)},Fe.prototype.close=function(){this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),this.$zoomedImage.css({height:this._targetImage.height,left:this._left,marginLeft:0,marginTop:0,top:this._top,transform:this._zoomedInTransformString,width:this._targetImage.width}).removeClass("zoom-transition"),f()(this._overlay).scrollLeft(0).scrollTop(0),setTimeout((()=>{this.$zoomedImage.css({transform:"scale(1)"}).addClass("zoom-transition").one(f.a.support.transition.end,f.a.proxy(this.dispose,this)).emulateTransitionEnd(300)}),10)},Fe.prototype.dispose=function(){this.$zoomedImage&&this.$zoomedImage[0].parentNode&&(this.$zoomedImage.remove(),this.$zoomedImage=null,this._overlay.parentNode.removeChild(this._overlay),this._backdrop.parentNode.removeChild(this._backdrop),this._$body.removeClass("zoom-overlay-transitioning")),f()(this._targetImage).css("visibility","visible"),this._targetImage.focus()};var De=new Le,ze="'Proxima Nova',sans-serif",Be="'Proxima Nova Semibold',sans-serif",qe="#71B307",He="#AAAAAA",Ue="#FFFFFF",We="#F6F7F7",je="#F0F1F2",Ge="#D6D8DA",Ve="#BABEC2",Ye="#888D93",Xe="#21242c",Qe="#F86700",Ke="#F9F9F9",$e="#0084CE",Ze="#E4F3F9",Je="#D0EDF4",et="#009900",tt="#00CC00",rt="#E4F7E4",nt="#990000",it="#CC5252",st="#F2EBEB",ot=16,at=-16,lt=16,ht={defaultBoxSize:400,defaultBoxSizeSmall:288},ct="#f86700",pt="#df5c00",ut="#c75300",dt="#be2612",mt="#BABEC2",ft=Object.freeze({__proto__:null,baseFontFamily:ze,boldFontFamily:Be,green:"#76A005",kaGreen:qe,blue:"#1C758A",gray:"#AAAAAA",red:"#FFBABA",grayLight:He,grayLighter:"#DDDDDD",learnstormBlue:"#4898FC",white:Ue,gray98:"#FAFAFA",gray97:We,gray95:je,gray90:"#E3E5E6",gray85:Ge,gray76:Ve,gray68:Ye,gray41:"#626569",gray25:"#3B3e40",gray17:Xe,black:"#000000",warning1:Qe,warning3:"#C75300",pureSmMin:"568px",pureMdMin:"768px",pureLgMin:"1024px",pureXlMin:"1280px",pureXsMax:"567px",pureSmMax:"767px",pureMdMax:"1023px",pureLgMax:"1279px",tableBackgroundAccent:Ke,gtpBlue:"#4c00ff",gtpIncorrectColor:"#babec2",gtpCorrectColor:"#ffbe26",satBlue:$e,satSelectedBackgroundColor:Ze,satActiveBackgroundColor:Je,satCorrectColor:et,satCorrectBorderColor:tt,satCorrectBackgroundColor:rt,satIncorrectColor:nt,satIncorrectBorderColor:it,satIncorrectBackgroundColor:st,zIndexScratchPad:1,zIndexAboveScratchpad:2,zIndexInteractiveComponent:3,zIndexCurrentlyDragging:4,zIndexCalculator:5,phoneMargin:ot,negativePhoneMargin:at,hintBorderWidth:4,baseUnitPx:lt,interactiveSizes:ht,circleSize:24,radioMarginWidth:2,warningColor:ct,warningColorHover:pt,warningColorActive:ut,publishBlockingErrorColor:dt,radioBorderColor:mt,checkedColor:"#71B307",articleMaxWidthInPx:688,articleMaxWidthTableInPx:512}),gt=x()({displayName:"FixedToResponsive",propTypes:{width:d.a.number.isRequired,height:d.a.number.isRequired,className:d.a.string,constrainHeight:d.a.bool,allowFullBleed:d.a.bool},getDefaultProps:function(){return{className:"",constrainHeight:!1,allowFullBleed:!1}},getInitialState:function(){return{viewportHeight:null,viewportWidth:null}},componentDidMount:function(){this._isMounted=!0,window.innerHeight<480?setTimeout(this._cacheViewportSize,800):this._cacheViewportSize()},componentWillUnmount:function(){this._isMounted=!1},_cacheViewportSize:function(){this._isMounted&&this.setState({viewportHeight:Math.max(480,window.innerHeight),viewportWidth:window.innerWidth})},render:function(){var e=this.props.width/this.props.height,t=h.createElement("div",{style:{paddingBottom:100*(1/e).toFixed(4)+"%"}}),{width:r,height:n}=this.props;if(this.props.constrainHeight&&this.state.viewportHeight){var i=2/3*this.state.viewportHeight;this.props.height>=i&&(n=i,r=i*e)}var s={maxWidth:r,maxHeight:n},o=l()("fixed-to-responsive",this.props.className),a=h.createElement("div",{className:o,style:s},t,this.props.children);return this.props.allowFullBleed&&this.state.viewportWidth&&r>=this.state.viewportWidth?h.createElement("div",{style:{marginLeft:at,marginRight:at}},a):a}});function vt(e,t){return e+":"+t}var yt={_fireEvent:function(e,t,r){p.a.invoke(e,"call",this,t,r)},_applyConstraints:function(e,t,r){var n=!1;return p.a.reduce(this.state.constraints,((e,i)=>{if(!1===e)return!1;if(n)return e;var s=i.call(this,e,t,U({onSkipRemaining:()=>{n=!0}},r));if(!1===s)return!1;if(y.c.is(s,2))return s;if(!0===s||null==s)return e;throw new le("Constraint returned invalid result: "+s,oe.Internal)}),e,this)},draw:function(){var e=this.cloneState();yt._fireEvent.call(this,this.state.draw,e,this.prevState),this.prevState=e},listen:function(e,t,r){this._listenerMap=this._listenerMap||{};var n=vt(e,t),i=this._listenerMap[n]=this._listenerMap[n]||this.state[e].length;this.state[e][i]=r},unlisten:function(e,t){this._listenerMap=this._listenerMap||{};var r=vt(e,t),n=this._listenerMap[r];if(void 0!==n){this.state[e].splice(n,1),delete this._listenerMap[r];var i=p.a.keys(this._listenerMap);p.a.each(i,(function(t){(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>n&&this._listenerMap[t]--}),this)}}},bt=null;var xt=null;var wt={assert:function(e,t){if(!e)throw new le("Assertion Error"+(t?": "+t:""),oe.Internal)},createGettersFor:function(e,t){p.a.each(p.a.keys(t),(function(t){void 0===e.prototype[t]&&(e.prototype[t]=function(){return this.state[t]})}))},addMovableHelperMethodsTo:function(e){p.a.each(yt,(function(t,r){void 0===e.prototype[r]&&(e.prototype[r]=t)}))},arrayify:function(e){return null==e?[]:p.a.isArray(e)?p.a.filter(p.a.flatten(e),p.a.identity):[e]},normalizeOptions:function(e,t){var r=p.a.clone(t);return p.a.each(e,(function(e){var n=t[e];if(void 0!==n){var i=wt.arrayify(n);r[e]=i}})),r},getPrefixedTransform:function(){var e,t;return bt=bt||(e=document.createElement("div"),t=null,p.a.each(["transform","msTransform","MozTransform","WebkitTransform","OTransform"],(function(r){void 0!==e.style[r]&&(t=r)})),t)},getCanUse3dTransform:function(){var e,t;return null==xt&&(e=document.createElement("div"),t=wt.getPrefixedTransform(),e.style[t]="translateZ(0px)",xt=!!e.style[t]),xt}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;function kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ct={exports:{}};
/*!
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */!function(){var e;function t(){if(t.is(arguments[0],A)){for(var e=arguments[0],r=qe[u](t,e.splice(0,3+t.is(e[0],M))),n=r.set(),s=0,o=e[b];s<o;s++){var l=e[s]||{};i[a](l.type)&&n[N](r[l.type]().attr(l))}return n}return qe[u](t,arguments)}e="".trim?function(e,t,r){e.setAttribute(t,String(r).trim())}:function(e,t,r){e.setAttribute(t,String(r))},t.version="1.5.2";var r,n=/[, ]+/,i={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},s=/\{(\d+)\}/g,o="prototype",a="hasOwnProperty",l=document,h=window,c={was:Object[o][a].call(h,"Raphael"),is:h.Raphael},p=function(){this.customAttributes={}},u="apply",d="createTouch"in l,m="",f=" ",g=String,v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(f),y={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},b="length",x=g[o].toLowerCase,w=Math,k=w.max,C=w.min,E=w.abs,S=w.pow,T=w.PI,M="number",_="string",A="array",I="fill",O=Object[o].toString,N="push",P=/^url\(['"]?([^\)]+?)['"]?\)$/i,R=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,L={NaN:1,Infinity:1,"-Infinity":1},F=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,D=w.round,z=parseFloat,B=parseInt,q=" progid:DXImageTransform.Microsoft",H=g[o].toUpperCase,U={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},W={along:"along",blur:M,"clip-rect":"csv",cx:M,cy:M,fill:"colour","fill-opacity":M,"font-size":M,height:M,opacity:M,path:"path",r:M,rotation:"csv",rx:M,ry:M,scale:"csv",stroke:"colour","stroke-opacity":M,"stroke-width":M,translation:"csv",width:M,x:M,y:M},j="replace",G=/^(from|to|\d+%?)$/,V=/\s*,\s*/,Y={hs:1,rg:1},X=/,?([achlmqrstvxz]),?/gi,Q=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,K=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,$=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,Z=function(e,t){return e.key-t.key};if(t.type=h.SVGAngle||l.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var J,ee=l.createElement("div");if(ee.innerHTML='<v:shape adj="1"/>',(J=ee.firstChild).style.behavior="url(#default#VML)",!J||"object"!=typeof J.adj)return t.type=null;ee=null}function te(){for(var e=[],t=0;t<32;t++)e[t]=(~~(16*w.random())).toString(16);return e[12]=4,e[16]=(3&e[16]|8).toString(16),"r-"+e.join("")}t.svg=!(t.vml="VML"==t.type),p[o]=t[o],r=p[o],t._id=0,t._oid=0,t.fn={},t.is=function(e,t){return"finite"==(t=x.call(t))?!L[a](+e):"null"==t&&null===e||t==typeof e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||O.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,r,n,i,s,o){if(null==s){var a=e-n,l=r-i;return a||l?(180*(a<0)+180*w.atan(-l/-a)/T+360)%360:0}return t.angle(e,r,s,o)-t.angle(n,i,s,o)},t.rad=function(e){return e%360*T/180},t.deg=function(e){return 180*e/T%360},t.snapTo=function(e,r,n){if(n=t.is(n,"finite")?n:10,t.is(e,A)){for(var i=e.length;i--;)if(E(e[i]-r)<=n)return e[i]}else{var s=r%(e=+e);if(s<n)return r-s;if(s>e-n)return r-s+e}return r},t.setWindow=function(e){l=(h=e).document};var re=function(e){if(t.vml){var r,n=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),r=i.body}catch(e){r=createPopup().document.body}var s=r.createTextRange();re=oe((function(e){try{r.style.color=g(e)[j](n,m);var t=s.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(e){return"none"}}))}else{var o=l.createElement("i");o.title="Raphaël Colour Picker",o.style.display="none",l.body.appendChild(o),re=oe((function(e){return o.style.color=e,l.defaultView.getComputedStyle(o,m).getPropertyValue("color")}))}return re(e)},ne=function(){return"hsb("+[this.h,this.s,this.b]+")"},ie=function(){return"hsl("+[this.h,this.s,this.l]+")"},se=function(){return this.hex};function oe(e,t,r){return function n(){var i=Array[o].slice.call(arguments,0),s=i.join("►"),l=n.cache=n.cache||{},h=n.count=n.count||[];return l[a](s)||(h[b]>=1e3&&delete l[h.shift()],h[N](s),l[s]=e[u](t,i)),r?r(l[s]):l[s]}}t.hsb2rgb=function(e,r,n,i){return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,r=e.s,i=(e=e.h).o),t.hsl2rgb(e,r,n/2,i)},t.hsl2rgb=function(e,r,n,i){t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,r=e.s,e=e.h),(e>1||r>1||n>1)&&(e/=360,r/=100,n/=100);var s,o,a,l={},h=["r","g","b"];if(r){o=2*n-(s=n<.5?n*(1+r):n+r-n*r);for(var c=0;c<3;c++)(a=e+1/3*-(c-1))<0&&a++,a>1&&a--,l[h[c]]=6*a<1?o+6*(s-o)*a:2*a<1?s:3*a<2?o+(s-o)*(2/3-a)*6:o}else l={r:n,g:n,b:n};return l.r*=255,l.g*=255,l.b*=255,l.hex="#"+(16777216|l.b|l.g<<8|l.r<<16).toString(16).slice(1),t.is(i,"finite")&&(l.opacity=i),l.toString=se,l},t.rgb2hsb=function(e,r,n){if(null==r&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,r=e.g,e=e.r),null==r&&t.is(e,_)){var i=t.getRGB(e);e=i.r,r=i.g,n=i.b}(e>1||r>1||n>1)&&(e/=255,r/=255,n/=255);var s,o=k(e,r,n),a=C(e,r,n);if(a==o)return{h:0,s:0,b:o,toString:ne};var l=o-a;return s=e==o?(r-n)/l:r==o?2+(n-e)/l:4+(e-r)/l,(s/=6)<0&&s++,s>1&&s--,{h:s,s:l/o,b:o,toString:ne}},t.rgb2hsl=function(e,r,n){if(null==r&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,r=e.g,e=e.r),null==r&&t.is(e,_)){var i=t.getRGB(e);e=i.r,r=i.g,n=i.b}(e>1||r>1||n>1)&&(e/=255,r/=255,n/=255);var s,o,a=k(e,r,n),l=C(e,r,n),h=(a+l)/2;if(l==a)o={h:0,s:0,l:h};else{var c=a-l;s=e==a?(r-n)/c:r==a?2+(n-e)/c:4+(e-r)/c,(s/=6)<0&&s++,s>1&&s--,o={h:s,s:h<.5?c/(a+l):c/(2-a-l),l:h}}return o.toString=ie,o},t._path2string=function(){return this.join(",")[j](X,"$1")},t.getRGB=oe((function(e){if(!e||(e=g(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none"};!Y[a](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=re(e));var r,n,i,s,o,l,h=e.match(R);return h?(h[2]&&(i=B(h[2].substring(5),16),n=B(h[2].substring(3,5),16),r=B(h[2].substring(1,3),16)),h[3]&&(i=B((o=h[3].charAt(3))+o,16),n=B((o=h[3].charAt(2))+o,16),r=B((o=h[3].charAt(1))+o,16)),h[4]&&(l=h[4].split(V),r=z(l[0]),"%"==l[0].slice(-1)&&(r*=2.55),n=z(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),i=z(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(s=z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),h[5]?(l=h[5].split(V),r=z(l[0]),"%"==l[0].slice(-1)&&(r*=2.55),n=z(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),i=z(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(r/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(s=z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),t.hsb2rgb(r,n,i,s)):h[6]?(l=h[6].split(V),r=z(l[0]),"%"==l[0].slice(-1)&&(r*=2.55),n=z(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),i=z(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(r/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(s=z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),t.hsl2rgb(r,n,i,s)):((h={r,g:n,b:i}).hex="#"+(16777216|i|n<<8|r<<16).toString(16).slice(1),t.is(s,"finite")&&(h.opacity=s),h)):{r:-1,g:-1,b:-1,hex:"none",error:1}}),t),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},r=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),r.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=oe((function(e){if(!e)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[];return t.is(e,A)&&t.is(e[0],A)&&(n=le(e)),n[b]||g(e)[j](Q,(function(e,t,i){var s=[],o=x.call(t);for(i[j](K,(function(e,t){t&&s[N](+t)})),"m"==o&&s[b]>2&&(n[N]([t].concat(s.splice(0,2))),o="l",t="m"==t?"l":"L");s[b]>=r[o]&&(n[N]([t].concat(s.splice(0,r[o]))),r[o]););})),n.toString=t._path2string,n})),t.findDotsAtSegment=function(e,t,r,n,i,s,o,a,l){var h=1-l,c=S(h,3)*e+3*S(h,2)*l*r+3*h*l*l*i+S(l,3)*o,p=S(h,3)*t+3*S(h,2)*l*n+3*h*l*l*s+S(l,3)*a,u=e+2*l*(r-e)+l*l*(i-2*r+e),d=t+2*l*(n-t)+l*l*(s-2*n+t),m=r+2*l*(i-r)+l*l*(o-2*i+r),f=n+2*l*(s-n)+l*l*(a-2*s+n),g=(1-l)*e+l*r,v=(1-l)*t+l*n,y=(1-l)*i+l*o,b=(1-l)*s+l*a,x=90-180*w.atan((u-m)/(d-f))/T;return(u>m||d<f)&&(x+=180),{x:c,y:p,m:{x:u,y:d},n:{x:m,y:f},start:{x:g,y:v},end:{x:y,y:b},alpha:x}};var ae=oe((function(e){if(!e)return{x:0,y:0,width:0,height:0};for(var t,r=0,n=0,i=[],s=[],o=0,a=(e=ge(e))[b];o<a;o++)if("M"==(t=e[o])[0])r=t[1],n=t[2],i[N](r),s[N](n);else{var l=fe(r,n,t[1],t[2],t[3],t[4],t[5],t[6]);i=i.concat(l.min.x,l.max.x),s=s.concat(l.min.y,l.max.y),r=t[5],n=t[6]}var h=C[u](0,i),c=C[u](0,s);return{x:h,y:c,width:k[u](0,i)-h,height:k[u](0,s)-c}})),le=function(e){var r=[];t.is(e,A)&&t.is(e&&e[0],A)||(e=t.parsePathString(e));for(var n=0,i=e[b];n<i;n++){r[n]=[];for(var s=0,o=e[n][b];s<o;s++)r[n][s]=e[n][s]}return r.toString=t._path2string,r},he=oe((function(e){t.is(e,A)&&t.is(e&&e[0],A)||(e=t.parsePathString(e));var r=[],n=0,i=0,s=0,o=0,a=0;"M"==e[0][0]&&(s=n=e[0][1],o=i=e[0][2],a++,r[N](["M",n,i]));for(var l=a,h=e[b];l<h;l++){var c=r[l]=[],p=e[l];if(p[0]!=x.call(p[0]))switch(c[0]=x.call(p[0]),c[0]){case"a":c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=+(p[6]-n).toFixed(3),c[7]=+(p[7]-i).toFixed(3);break;case"v":c[1]=+(p[1]-i).toFixed(3);break;case"m":s=p[1],o=p[2];default:for(var u=1,d=p[b];u<d;u++)c[u]=+(p[u]-(u%2?n:i)).toFixed(3)}else{c=r[l]=[],"m"==p[0]&&(s=p[1]+n,o=p[2]+i);for(var m=0,f=p[b];m<f;m++)r[l][m]=p[m]}var g=r[l][b];switch(r[l][0]){case"z":n=s,i=o;break;case"h":n+=+r[l][g-1];break;case"v":i+=+r[l][g-1];break;default:n+=+r[l][g-2],i+=+r[l][g-1]}}return r.toString=t._path2string,r}),0,le),ce=oe((function(e){t.is(e,A)&&t.is(e&&e[0],A)||(e=t.parsePathString(e));var r=[],n=0,i=0,s=0,o=0,a=0;"M"==e[0][0]&&(s=n=+e[0][1],o=i=+e[0][2],a++,r[0]=["M",n,i]);for(var l=a,h=e[b];l<h;l++){var c=r[l]=[],p=e[l];if(p[0]!=H.call(p[0]))switch(c[0]=H.call(p[0]),c[0]){case"A":c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=+(p[6]+n),c[7]=+(p[7]+i);break;case"V":c[1]=+p[1]+i;break;case"H":c[1]=+p[1]+n;break;case"M":s=+p[1]+n,o=+p[2]+i;default:for(var u=1,d=p[b];u<d;u++)c[u]=+p[u]+(u%2?n:i)}else for(var m=0,f=p[b];m<f;m++)r[l][m]=p[m];switch(c[0]){case"Z":n=s,i=o;break;case"H":n=c[1];break;case"V":i=c[1];break;case"M":s=r[l][r[l][b]-2],o=r[l][r[l][b]-1];default:n=r[l][r[l][b]-2],i=r[l][r[l][b]-1]}}return r.toString=t._path2string,r}),null,le),pe=function(e,t,r,n){return[e,t,r,n,r,n]},ue=function(e,t,r,n,i,s){var o=1/3,a=2/3;return[o*e+a*r,o*t+a*n,o*i+a*r,o*s+a*n,i,s]},de=function e(t,r,n,i,s,o,a,l,h,c){var p,u=120*T/180,d=T/180*(+s||0),m=[],f=oe((function(e,t,r){return{x:e*w.cos(r)-t*w.sin(r),y:e*w.sin(r)+t*w.cos(r)}}));if(c)_=c[0],A=c[1],S=c[2],M=c[3];else{t=(p=f(t,r,-d)).x,r=p.y;var g=(t-(l=(p=f(l,h,-d)).x))/2,v=(r-(h=p.y))/2,y=g*g/(n*n)+v*v/(i*i);y>1&&(n*=y=w.sqrt(y),i*=y);var x=n*n,k=i*i,C=(o==a?-1:1)*w.sqrt(E((x*k-x*v*v-k*g*g)/(x*v*v+k*g*g))),S=C*n*v/i+(t+l)/2,M=C*-i*g/n+(r+h)/2,_=w.asin(((r-M)/i).toFixed(9)),A=w.asin(((h-M)/i).toFixed(9));(_=t<S?T-_:_)<0&&(_=2*T+_),(A=l<S?T-A:A)<0&&(A=2*T+A),a&&_>A&&(_-=2*T),!a&&A>_&&(A-=2*T)}var I=A-_;if(E(I)>u){var O=A,N=l,P=h;A=_+u*(a&&A>_?1:-1),m=e(l=S+n*w.cos(A),h=M+i*w.sin(A),n,i,s,0,a,N,P,[A,O,S,M])}I=A-_;var R=w.cos(_),L=w.sin(_),F=w.cos(A),D=w.sin(A),z=w.tan(I/4),B=4/3*n*z,q=4/3*i*z,H=[t,r],U=[t+B*L,r-q*R],W=[l+B*D,h-q*F],j=[l,h];if(U[0]=2*H[0]-U[0],U[1]=2*H[1]-U[1],c)return[U,W,j].concat(m);for(var G=[],V=0,Y=(m=[U,W,j].concat(m).join().split(","))[b];V<Y;V++)G[V]=V%2?f(m[V-1],m[V],d).y:f(m[V],m[V+1],d).x;return G},me=function(e,t,r,n,i,s,o,a,l){var h=1-l;return{x:S(h,3)*e+3*S(h,2)*l*r+3*h*l*l*i+S(l,3)*o,y:S(h,3)*t+3*S(h,2)*l*n+3*h*l*l*s+S(l,3)*a}},fe=oe((function(e,t,r,n,i,s,o,a){var l,h=i-2*r+e-(o-2*i+r),c=2*(r-e)-2*(i-r),p=e-r,d=(-c+w.sqrt(c*c-4*h*p))/2/h,m=(-c-w.sqrt(c*c-4*h*p))/2/h,f=[t,a],g=[e,o];return E(d)>"1e12"&&(d=.5),E(m)>"1e12"&&(m=.5),d>0&&d<1&&(l=me(e,t,r,n,i,s,o,a,d),g[N](l.x),f[N](l.y)),m>0&&m<1&&(l=me(e,t,r,n,i,s,o,a,m),g[N](l.x),f[N](l.y)),h=s-2*n+t-(a-2*s+n),p=t-n,d=(-(c=2*(n-t)-2*(s-n))+w.sqrt(c*c-4*h*p))/2/h,m=(-c-w.sqrt(c*c-4*h*p))/2/h,E(d)>"1e12"&&(d=.5),E(m)>"1e12"&&(m=.5),d>0&&d<1&&(l=me(e,t,r,n,i,s,o,a,d),g[N](l.x),f[N](l.y)),m>0&&m<1&&(l=me(e,t,r,n,i,s,o,a,m),g[N](l.x),f[N](l.y)),{min:{x:C[u](0,g),y:C[u](0,f)},max:{x:k[u](0,g),y:k[u](0,f)}}})),ge=oe((function(e,t){for(var r=ce(e),n=t&&ce(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(e,t){if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(de[u](0,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(ue(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(ue(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(pe(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(pe(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(pe(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(pe(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t][b]>7){e[t].shift();for(var i=e[t];i[b];)e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),c=k(r[b],n&&n[b]||0)}},l=function(e,t,i,s,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",s.x,s.y]),i.bx=0,i.by=0,i.x=e[o][1],i.y=e[o][2],c=k(r[b],n&&n[b]||0))},h=0,c=k(r[b],n&&n[b]||0);h<c;h++){r[h]=o(r[h],i),a(r,h),n&&(n[h]=o(n[h],s)),n&&a(n,h),l(r,n,i,s,h),l(n,r,s,i,h);var p=r[h],d=n&&n[h],m=p[b],f=n&&d[b];i.x=p[m-2],i.y=p[m-1],i.bx=z(p[m-4])||i.x,i.by=z(p[m-3])||i.y,s.bx=n&&(z(d[f-4])||s.x),s.by=n&&(z(d[f-3])||s.y),s.x=n&&d[f-2],s.y=n&&d[f-1]}return n?[r,n]:r}),null,le),ve=oe((function(e){for(var r=[],n=0,i=e[b];n<i;n++){var s={},o=e[n].match(/^([^:]*):?([\d\.]*)/);if(s.color=t.getRGB(o[1]),s.color.error)return null;s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),r[N](s)}for(n=1,i=r[b]-1;n<i;n++)if(!r[n].offset){for(var a=z(r[n-1].offset||0),l=0,h=n+1;h<i;h++)if(r[h].offset){l=r[h].offset;break}l||(l=100,h=i);for(var c=((l=z(l))-a)/(h-n+1);n<h;n++)a+=c,r[n].offset=a+"%"}return r})),ye=function(e,r,n,i){var s;return t.is(e,_)||t.is(e,"object")?(s=t.is(e,_)?l.getElementById(e):e).tagName?null==r?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:r,height:n}:void 0:{container:1,x:e,y:r,width:n,height:i}},be=function e(t,r){var n=this;for(var i in r)if(r[a](i)&&!(i in t))switch(typeof r[i]){case"function":!function(e){t[i]=t===n?e:function(){return e[u](n,arguments)}}(r[i]);break;case"object":t[i]=t[i]||{},e.call(this,t[i],r[i]);break;default:t[i]=r[i]}},xe=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},we=function(e,t){t.top!==e&&(xe(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},ke=function(e,t){t.bottom!==e&&(xe(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},Ce=function(e,t,r){xe(e,r),t==r.top&&(r.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Ee=function(e,t,r){xe(e,r),t==r.bottom&&(r.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Se=function(e){return function(){throw new Error("Raphaël: you are calling to method “"+e+"” of removed object")}};if(t.pathToRelative=he,t.svg){r.svgns="http://www.w3.org/2000/svg",r.xlink="http://www.w3.org/1999/xlink",D=function(e){return+e+.5*(~~e===e)};var Te=function(t,n){if(!n)return(t=l.createElementNS(r.svgns,t)).style.webkitTapHighlightColor="rgba(0,0,0,0)",t;for(var i in n)n[a](i)&&e(t,i,g(n[i]))};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var Me=function(e,t){var r=Te("path");t.canvas&&t.canvas.appendChild(r);var n=new Ne(r,t);return n.type="path",Ie(n,{fill:"none",stroke:"#000",path:e}),n},_e=function(e,t,r){var n="linear",i=.5,s=.5,o=e.style;if(t=(t=g(t)[j]($,(function(e,t,r){if(n="radial",t&&r){i=z(t);var o=2*((s=z(r))>.5)-1;S(i-.5,2)+S(s-.5,2)>.25&&(s=w.sqrt(.25-S(i-.5,2))*o+.5)&&.5!=s&&(s=s.toFixed(5)-1e-5*o)}return m}))).split(/\s*\-\s*/),"linear"==n){var a=t.shift();if(a=-z(a),isNaN(a))return null;var h=[0,0,w.cos(a*T/180),w.sin(a*T/180)],c=1/(k(E(h[2]),E(h[3]))||1);h[2]*=c,h[3]*=c,h[2]<0&&(h[0]=-h[2],h[2]=0),h[3]<0&&(h[1]=-h[3],h[3]=0)}var p=ve(t);if(!p)return null;var u=e.getAttribute(I);(u=u.match(/^url\(#(.*)\)$/))&&r.defs.removeChild(l.getElementById(u[1]));var d=Te(n+"Gradient");d.id=te(),Te(d,"radial"==n?{fx:i,fy:s}:{x1:h[0],y1:h[1],x2:h[2],y2:h[3]}),r.defs.appendChild(d);for(var f=0,v=p[b];f<v;f++){var y=Te("stop");Te(y,{offset:p[f].offset?p[f].offset:f?"100%":"0%","stop-color":p[f].color||"#fff"}),d.appendChild(y)}return Te(e,{fill:"url(#"+d.id+")",opacity:1,"fill-opacity":1}),o.fill=m,o.opacity=1,o.fillOpacity=1,1},Ae=function(e){var r=e.getBBox();Te(e.pattern,{patternTransform:t.format("translate({0},{1})",r.x,r.y)})},Ie=function(r,i){var s={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},o=r.node,h=r.attrs,c=r.rotate(),p=function(e,t){if(t=s[x.call(t)]){for(var r=e.attrs["stroke-width"]||"1",n={round:r,square:r,butt:0}[e.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,a=[],l=t[b];l--;)a[l]=t[l]*r+(l%2?1:-1)*n;Te(o,{"stroke-dasharray":a.join(",")})}};i[a]("rotation")&&(c=i.rotation);var u=g(c).split(n);for(var d in u.length-1?(u[1]=+u[1],u[2]=+u[2]):u=null,z(c)&&r.rotate(0,!0),i)if(i[a](d)){if(!U[a](d))continue;var v=i[d];switch(h[d]=v,d){case"blur":r.blur(v);break;case"rotation":r.rotate(v,!0);break;case"href":case"title":case"target":var y=o.parentNode;if("a"!=x.call(y.tagName)){var w=Te("a");y.insertBefore(w,o),w.appendChild(o),y=w}"target"==d&&"blank"==v?y.setAttributeNS(r.paper.xlink,"show","new"):y.setAttributeNS(r.paper.xlink,d,v);break;case"cursor":o.style.cursor=v;break;case"clip-rect":var k=g(v).split(n);if(4==k[b]){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var C=Te("clipPath"),E=Te("rect");C.id=te(),Te(E,{x:k[0],y:k[1],width:k[2],height:k[3]}),C.appendChild(E),r.paper.defs.appendChild(C),Te(o,{"clip-path":"url(#"+C.id+")"}),r.clip=E}if(!v){var S=l.getElementById(o.getAttribute("clip-path")[j](/(^url\(#|\)$)/g,m));S&&S.parentNode.removeChild(S),Te(o,{"clip-path":m}),delete r.clip}break;case"path":"path"==r.type&&Te(o,{d:v?h.path=ce(v):"M0,0"});break;case"width":if(e(o,d,v),!h.fx)break;d="x",v=h.x;case"x":h.fx&&(v=-h.x-(h.width||0));case"rx":if("rx"==d&&"rect"==r.type)break;case"cx":u&&("x"==d||"cx"==d)&&(u[1]+=v-h[d]),e(o,d,v),r.pattern&&Ae(r);break;case"height":if(e(o,d,v),!h.fy)break;d="y",v=h.y;case"y":h.fy&&(v=-h.y-(h.height||0));case"ry":if("ry"==d&&"rect"==r.type)break;case"cy":u&&("y"==d||"cy"==d)&&(u[2]+=v-h[d]),e(o,d,v),r.pattern&&Ae(r);break;case"r":"rect"==r.type?Te(o,{rx:v,ry:v}):e(o,d,v);break;case"src":"image"==r.type&&o.setAttributeNS(r.paper.xlink,"href",v);break;case"stroke-width":o.style.strokeWidth=v,e(o,d,v),h["stroke-dasharray"]&&p(r,h["stroke-dasharray"]);break;case"stroke-dasharray":p(r,v);break;case"translation":var T=g(v).split(n);T[0]=+T[0]||0,T[1]=+T[1]||0,u&&(u[1]+=T[0],u[2]+=T[1]),gt.call(r,T[0],T[1]);break;case"scale":T=g(v).split(n),r.scale(+T[0]||1,+T[1]||+T[0]||1,isNaN(z(T[2]))?null:+T[2],isNaN(z(T[3]))?null:+T[3]);break;case I:var M=g(v).match(P);if(M){C=Te("pattern");var _=Te("image");C.id=te(),Te(C,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Te(_,{x:0,y:0}),_.setAttributeNS(r.paper.xlink,"href",M[1]),C.appendChild(_);var A=l.createElement("img");A.style.cssText="position:absolute;left:-9999em;top-9999em",A.onload=function(){Te(C,{width:this.offsetWidth,height:this.offsetHeight}),Te(_,{width:this.offsetWidth,height:this.offsetHeight}),l.body.removeChild(this),r.paper.safari()},l.body.appendChild(A),A.src=M[1],r.paper.defs.appendChild(C),o.style.fill="url(#"+C.id+")",Te(o,{fill:"url(#"+C.id+")"}),r.pattern=C,r.pattern&&Ae(r);break}var O=t.getRGB(v);if(O.error){if(({circle:1,ellipse:1}[a](r.type)||"r"!=g(v).charAt())&&_e(o,v,r.paper)){h.gradient=v,h.fill="none";break}}else delete i.gradient,delete h.gradient,!t.is(h.opacity,"undefined")&&t.is(i.opacity,"undefined")&&Te(o,{opacity:h.opacity}),!t.is(h["fill-opacity"],"undefined")&&t.is(i["fill-opacity"],"undefined")&&Te(o,{"fill-opacity":h["fill-opacity"]});O[a]("opacity")&&Te(o,{"fill-opacity":O.opacity>1?O.opacity/100:O.opacity});case"stroke":O=t.getRGB(v),e(o,d,O.hex),"stroke"==d&&O[a]("opacity")&&Te(o,{"stroke-opacity":O.opacity>1?O.opacity/100:O.opacity});break;case"gradient":({circle:1,ellipse:1}[a](r.type)||"r"!=g(v).charAt())&&_e(o,v,r.paper);break;case"opacity":h.gradient&&!h[a]("stroke-opacity")&&Te(o,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(h.gradient){var N=l.getElementById(o.getAttribute(I)[j](/^url\(#|\)$/g,m));if(N){var R=N.getElementsByTagName("stop");e(R[R[b]-1],"stop-opacity",v)}break}default:"font-size"==d&&(v=B(v,10)+"px");var L=d[j](/(\-.)/g,(function(e){return H.call(e.substring(1))}));o.style[L]=v,e(o,d,v)}}Oe(r,i),u?r.rotate(u.join(f)):z(c)&&r.rotate(c,!0)},Oe=function(e,r){if("text"==e.type&&(r[a]("text")||r[a]("font")||r[a]("font-size")||r[a]("x")||r[a]("y"))){var n=e.attrs,i=e.node,s=i.firstChild?B(l.defaultView.getComputedStyle(i.firstChild,m).getPropertyValue("font-size"),10):10;if(r[a]("text")){for(n.text=r.text;i.firstChild;)i.removeChild(i.firstChild);for(var o=g(r.text).split("\n"),h=0,c=o[b];h<c;h++)if(o[h]){var p=Te("tspan");h&&Te(p,{dy:1.2*s,x:n.x}),p.appendChild(l.createTextNode(o[h])),i.appendChild(p)}}else for(h=0,c=(o=i.getElementsByTagName("tspan"))[b];h<c;h++)h&&Te(o[h],{dy:1.2*s,x:n.x});Te(i,{y:n.y});var u=e.getBBox(),d=n.y-(u.y+u.height/2);d&&t.is(d,"finite")&&Te(i,{y:n.y+d})}},Ne=function(e,r){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.paper=r,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},Pe=Ne[o];Ne[o].rotate=function(e,r,i){if(this.removed)return this;if(null==e)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(f):this._.rt.deg;var s=this.getBBox();return(e=g(e).split(n))[b]-1&&(r=z(e[1]),i=z(e[2])),e=z(e[0]),null!=r&&!1!==r?this._.rt.deg=e:this._.rt.deg+=e,null==i&&(r=null),this._.rt.cx=r,this._.rt.cy=i,r=null==r?s.x+s.width/2:r,i=null==i?s.y+s.height/2:i,this._.rt.deg?(this.transformations[0]=t.format("rotate({0} {1} {2})",this._.rt.deg,r,i),this.clip&&Te(this.clip,{transform:t.format("rotate({0} {1} {2})",-this._.rt.deg,r,i)})):(this.transformations[0]=m,this.clip&&Te(this.clip,{transform:m})),Te(this.node,{transform:this.transformations.join(f)}),this},Ne[o].hide=function(){return!this.removed&&(this.node.style.display="none"),this},Ne[o].show=function(){return!this.removed&&(this.node.style.display=""),this},Ne[o].remove=function(){if(!this.removed){for(var e in xe(this,this.paper),this.node.parentNode.removeChild(this.node),this)delete this[e];this.removed=!0}},Ne[o].getBBox=function(){if(this.removed)return this;if("path"==this.type)return ae(this.attrs.path);if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(e){}finally{t=t||{}}if("text"==this.type){t={x:t.x,y:1/0,width:0,height:0};for(var r=0,n=this.node.getNumberOfChars();r<n;r++){var i=this.node.getExtentOfChar(r);i.y<t.y&&(t.y=i.y),i.y+i.height-t.y>t.height&&(t.height=i.y+i.height-t.y),i.x+i.width-t.x>t.width&&(t.width=i.x+i.width-t.x)}}return e&&this.hide(),t},Ne[o].attr=function(e,r){if(this.removed)return this;if(null==e){var n={};for(var i in this.attrs)this.attrs[a](i)&&(n[i]=this.attrs[i]);return this._.rt.deg&&(n.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(n.scale=this.scale()),n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n}if(null==r&&t.is(e,_))return"translation"==e?gt.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==I&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(null==r&&t.is(e,A)){for(var s={},o=0,l=e.length;o<l;o++)s[e[o]]=this.attr(e[o]);return s}if(null!=r){var h={};h[e]=r}else null!=e&&t.is(e,"object")&&(h=e);for(var c in this.paper.customAttributes)if(this.paper.customAttributes[a](c)&&h[a](c)&&t.is(this.paper.customAttributes[c],"function")){var p=this.paper.customAttributes[c].apply(this,[].concat(h[c]));for(var u in this.attrs[c]=h[c],p)p[a](u)&&(h[u]=p[u])}return Ie(this,h),this},Ne[o].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&we(this,e),this},Ne[o].toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),ke(this,this.paper),this.paper),this},Ne[o].insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode.appendChild(this.node),Ce(this,e,this.paper),this},Ne[o].insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),Ee(this,e,this.paper),this},Ne[o].blur=function(e){var t=this;if(0!=+e){var r=Te("filter"),n=Te("feGaussianBlur");t.attrs.blur=e,r.id=te(),Te(n,{stdDeviation:+e||1.5}),r.appendChild(n),t.paper.defs.appendChild(r),t._blur=r,Te(t.node,{filter:"url(#"+r.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter")};var Re=function(e,t,r,n){var i=Te("circle");e.canvas&&e.canvas.appendChild(i);var s=new Ne(i,e);return s.attrs={cx:t,cy:r,r:n,fill:"none",stroke:"#000"},s.type="circle",Te(i,s.attrs),s},Le=function(e,t,r,n,i,s){var o=Te("rect");e.canvas&&e.canvas.appendChild(o);var a=new Ne(o,e);return a.attrs={x:t,y:r,width:n,height:i,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},a.type="rect",Te(o,a.attrs),a},Fe=function(e,t,r,n,i){var s=Te("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new Ne(s,e);return o.attrs={cx:t,cy:r,rx:n,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",Te(s,o.attrs),o},De=function(e,t,r,n,i,s){var o=Te("image");Te(o,{x:r,y:n,width:i,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(e.xlink,"href",t),e.canvas&&e.canvas.appendChild(o);var a=new Ne(o,e);return a.attrs={x:r,y:n,width:i,height:s,src:t},a.type="image",a},ze=function(e,t,r,n){var i=Te("text");Te(i,{x:t,y:r,"text-anchor":"middle"}),e.canvas&&e.canvas.appendChild(i);var s=new Ne(i,e);return s.attrs={x:t,y:r,"text-anchor":"middle",text:n,font:U.font,stroke:"none",fill:"#000"},s.type="text",Ie(s,s.attrs),s},Be=function(t,r){return this.width=t||this.width,this.height=r||this.height,e(this.canvas,"width",this.width),e(this.canvas,"height",this.height),this},qe=function(){var e=ye[u](0,arguments),r=e&&e.container,n=e.x,i=e.y,s=e.width,o=e.height;if(!r)throw new Error("SVG container not found.");var a=Te("svg");return n=n||0,i=i||0,Te(a,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:s=s||512,height:o=o||342}),1==r?(a.style.cssText="position:absolute;left:"+n+"px;top:"+i+"px",l.body.appendChild(a)):r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),(r=new p).width=s,r.height=o,r.canvas=a,be.call(r,r,t.fn),r.clear(),r};r.clear=function(){for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=Te("desc")).appendChild(l.createTextNode("Created with Raphaël")),e.appendChild(this.desc),e.appendChild(this.defs=Te("defs"))},r.remove=function(){for(var e in this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[e]=Se(e)}}if(t.vml){var He,Ue={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},We=/([clmz]),?([^clmz]*)/gi,je=/ progid:\S+Blur\([^\)]+\)/g,Ge=/-?[^,\s-]+/g,Ve="1000 1000",Ye=10,Xe={path:1,rect:1};function wt(e,r,n,i,s){return s?t.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+s,r,n-2*s,s,-s,i-2*s,2*s-n,2*s-i):t.format("M{0},{1}l{2},0,0,{3},{4},0z",e,r,n,i,-n)}t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},Me=function(e,t){var r=He("group");r.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",r.coordsize=t.coordsize,r.coordorigin=t.coordorigin;var n=He("shape"),i=n.style;i.width=t.width+"px",i.height=t.height+"px",n.coordsize=Ve,n.coordorigin=t.coordorigin,r.appendChild(n);var s=new Ne(n,r,t),o={fill:"none",stroke:"#000"};return e&&(o.path=e),s.type="path",s.path=[],s.Path=m,Ie(s,o),t.canvas.appendChild(r),s},Ie=function(e,r){e.attrs=e.attrs||{};var i,s=e.node,o=e.attrs,h=s.style,c=(r.x!=o.x||r.y!=o.y||r.width!=o.width||r.height!=o.height||r.r!=o.r)&&"rect"==e.type,p=e;for(var u in r)r[a](u)&&(o[u]=r[u]);if(c&&(o.path=wt(o.x,o.y,o.width,o.height,o.r),e.X=o.x,e.Y=o.y,e.W=o.width,e.H=o.height),r.href&&(s.href=r.href),r.title&&(s.title=r.title),r.target&&(s.target=r.target),r.cursor&&(h.cursor=r.cursor),"blur"in r&&e.blur(r.blur),(r.path&&"path"==e.type||c)&&(s.path=function(e){var t=/[ahqstv]/gi,r=ce;if(g(e).match(t)&&(r=ge),t=/[clmz]/g,r==ce&&!g(e).match(t)){var n=g(e)[j](We,(function(e,t,r){var n=[],i="m"==x.call(t),s=Ue[t];return r[j](Ge,(function(e){i&&2==n[b]&&(s+=n+Ue["m"==t?"l":"L"],n=[]),n[N](D(e*Ye))})),s+n}));return n}var i,s,o=r(e);n=[];for(var a=0,l=o[b];a<l;a++){i=o[a],"z"==(s=x.call(o[a][0]))&&(s="x");for(var h=1,c=i[b];h<c;h++)s+=D(i[h]*Ye)+(h!=c-1?",":m);n[N](s)}return n.join(f)}(o.path)),null!=r.rotation&&e.rotate(r.rotation,!0),r.translation&&(i=g(r.translation).split(n),gt.call(e,i[0],i[1]),null!=e._.rt.cx&&(e._.rt.cx+=+i[0],e._.rt.cy+=+i[1],e.setBox(e.attrs,i[0],i[1]))),r.scale&&(i=g(r.scale).split(n),e.scale(+i[0]||1,+i[1]||+i[0]||1,+i[2]||null,+i[3]||null)),"clip-rect"in r){var d=g(r["clip-rect"]).split(n);if(4==d[b]){d[2]=+d[2]+ +d[0],d[3]=+d[3]+ +d[1];var v=s.clipRect||l.createElement("div"),y=v.style,w=s.parentNode;y.clip=t.format("rect({1}px {2}px {3}px {0}px)",d),s.clipRect||(y.position="absolute",y.top=0,y.left=0,y.width=e.paper.width+"px",y.height=e.paper.height+"px",w.parentNode.insertBefore(v,w),v.appendChild(w),s.clipRect=v)}r["clip-rect"]||s.clipRect&&(s.clipRect.style.clip=m)}if("image"==e.type&&r.src&&(s.src=r.src),"image"==e.type&&r.opacity&&(s.filterOpacity=q+".Alpha(opacity="+100*r.opacity+")",h.filter=(s.filterMatrix||m)+(s.filterOpacity||m)),r.font&&(h.font=r.font),r["font-family"]&&(h.fontFamily='"'+r["font-family"].split(",")[0][j](/^['"]+|['"]+$/g,m)+'"'),r["font-size"]&&(h.fontSize=r["font-size"]),r["font-weight"]&&(h.fontWeight=r["font-weight"]),r["font-style"]&&(h.fontStyle=r["font-style"]),null!=r.opacity||null!=r["stroke-width"]||null!=r.fill||null!=r.stroke||null!=r["stroke-width"]||null!=r["stroke-opacity"]||null!=r["fill-opacity"]||null!=r["stroke-dasharray"]||null!=r["stroke-miterlimit"]||null!=r["stroke-linejoin"]||null!=r["stroke-linecap"]){var E=(s=e.shape||s).getElementsByTagName(I)&&s.getElementsByTagName(I)[0],S=!1;if(!E&&(S=E=He(I)),"fill-opacity"in r||"opacity"in r){var T=((+o["fill-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+t.getRGB(r.fill).o+1||2)-1);T=C(k(T,0),1),E.opacity=T}if(r.fill&&(E.on=!0),null!=E.on&&"none"!=r.fill||(E.on=!1),E.on&&r.fill){var M=r.fill.match(P);M?(E.src=M[1],E.type="tile"):(E.color=t.getRGB(r.fill).hex,E.src=m,E.type="solid",t.getRGB(r.fill).error&&(p.type in{circle:1,ellipse:1}||"r"!=g(r.fill).charAt())&&_e(p,r.fill)&&(o.fill="none",o.gradient=r.fill))}S&&s.appendChild(E);var _=s.getElementsByTagName("stroke")&&s.getElementsByTagName("stroke")[0],A=!1;!_&&(A=_=He("stroke")),(r.stroke&&"none"!=r.stroke||r["stroke-width"]||null!=r["stroke-opacity"]||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(_.on=!0),("none"==r.stroke||null==_.on||0==r.stroke||0==r["stroke-width"])&&(_.on=!1);var O=t.getRGB(r.stroke);_.on&&r.stroke&&(_.color=O.hex),T=((+o["stroke-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+O.o+1||2)-1);var R=.75*(z(r["stroke-width"])||1);if(T=C(k(T,0),1),null==r["stroke-width"]&&(R=o["stroke-width"]),r["stroke-width"]&&(_.weight=R),R&&R<1&&(T*=R)&&(_.weight=1),_.opacity=T,r["stroke-linejoin"]&&(_.joinstyle=r["stroke-linejoin"]||"miter"),_.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(_.endcap="butt"==r["stroke-linecap"]?"flat":"square"==r["stroke-linecap"]?"square":"round"),r["stroke-dasharray"]){var L={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};_.dashstyle=L[a](r["stroke-dasharray"])?L[r["stroke-dasharray"]]:m}A&&s.appendChild(_)}if("text"==p.type)switch(h=p.paper.span.style,o.font&&(h.font=o.font),o["font-family"]&&(h.fontFamily=o["font-family"]),o["font-size"]&&(h.fontSize=o["font-size"]),o["font-weight"]&&(h.fontWeight=o["font-weight"]),o["font-style"]&&(h.fontStyle=o["font-style"]),p.node.string&&(p.paper.span.innerHTML=g(p.node.string)[j](/</g,"&#60;")[j](/&/g,"&#38;")[j](/\n/g,"<br>")),p.W=o.w=p.paper.span.offsetWidth,p.H=o.h=p.paper.span.offsetHeight,p.X=o.x,p.Y=o.y+D(p.H/2),o["text-anchor"]){case"start":p.node.style["v-text-align"]="left",p.bbx=D(p.W/2);break;case"end":p.node.style["v-text-align"]="right",p.bbx=-D(p.W/2);break;default:p.node.style["v-text-align"]="center"}},_e=function(e,t){e.attrs=e.attrs||{},e.attrs;var r,n="linear",i=".5 .5";if(e.attrs.gradient=t,t=(t=g(t)[j]($,(function(e,t,r){return n="radial",t&&r&&(t=z(t),r=z(r),S(t-.5,2)+S(r-.5,2)>.25&&(r=w.sqrt(.25-S(t-.5,2))*(2*(r>.5)-1)+.5),i=t+f+r),m}))).split(/\s*\-\s*/),"linear"==n){var s=t.shift();if(s=-z(s),isNaN(s))return null}var o=ve(t);if(!o)return null;if(!(r=(e=e.shape||e.node).getElementsByTagName(I)[0]||He(I)).parentNode&&e.appendChild(r),o[b]){r.on=!0,r.method="none",r.color=o[0].color,r.color2=o[o[b]-1].color;for(var a=[],l=0,h=o[b];l<h;l++)o[l].offset&&a[N](o[l].offset+f+o[l].color);r.colors&&(r.colors.value=a[b]?a.join():"0% "+r.color),"radial"==n?(r.type="gradientradial",r.focus="100%",r.focussize=i,r.focusposition=i):(r.type="gradient",r.angle=(270-s)%360)}return 1},(Pe=(Ne=function(e,r,n){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=r,this.paper=n,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null})[o]).rotate=function(e,t,r){return this.removed?this:null==e?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(f):this._.rt.deg:((e=g(e).split(n))[b]-1&&(t=z(e[1]),r=z(e[2])),e=z(e[0]),null!=t?this._.rt.deg=e:this._.rt.deg+=e,null==r&&(t=null),this._.rt.cx=t,this._.rt.cy=r,this.setBox(this.attrs,t,r),this.Group.style.rotation=this._.rt.deg,this)},Pe.setBox=function(e,t,r){if(this.removed)return this;var n=this.Group.style,i=this.shape&&this.shape.style||this.node.style;for(var s in e=e||{})e[a](s)&&(this.attrs[s]=e[s]);t=t||this._.rt.cx,r=r||this._.rt.cy;var o,l,h,c,p=this.attrs;switch(this.type){case"circle":o=p.cx-p.r,l=p.cy-p.r,h=c=2*p.r;break;case"ellipse":o=p.cx-p.rx,l=p.cy-p.ry,h=2*p.rx,c=2*p.ry;break;case"image":o=+p.x,l=+p.y,h=p.width||0,c=p.height||0;break;case"text":this.textpath.v=["m",D(p.x),", ",D(p.y-2),"l",D(p.x)+1,", ",D(p.y-2)].join(m),o=p.x-D(this.W/2),l=p.y-this.H/2,h=this.W,c=this.H;break;case"rect":case"path":if(this.attrs.path){var u=ae(this.attrs.path);o=u.x,l=u.y,h=u.width,c=u.height}else o=0,l=0,h=this.paper.width,c=this.paper.height;break;default:o=0,l=0,h=this.paper.width,c=this.paper.height}r=null==r?l+c/2:r;var d,f=(t=null==t?o+h/2:t)-this.paper.width/2,g=r-this.paper.height/2;n.left!=(d=f+"px")&&(n.left=d),n.top!=(d=g+"px")&&(n.top=d),this.X=Xe[a](this.type)?-f:o,this.Y=Xe[a](this.type)?-g:l,this.W=h,this.H=c,Xe[a](this.type)?(i.left!=(d=-f*Ye+"px")&&(i.left=d),i.top!=(d=-g*Ye+"px")&&(i.top=d)):"text"==this.type?(i.left!=(d=-f+"px")&&(i.left=d),i.top!=(d=-g+"px")&&(i.top=d)):(n.width!=(d=this.paper.width+"px")&&(n.width=d),n.height!=(d=this.paper.height+"px")&&(n.height=d),i.left!=(d=o-f+"px")&&(i.left=d),i.top!=(d=l-g+"px")&&(i.top=d),i.width!=(d=h+"px")&&(i.width=d),i.height!=(d=c+"px")&&(i.height=d))},Pe.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},Pe.show=function(){return!this.removed&&(this.Group.style.display="block"),this},Pe.getBBox=function(){return this.removed?this:Xe[a](this.type)?ae(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},Pe.remove=function(){if(!this.removed){for(var e in xe(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape),this)delete this[e];this.removed=!0}},Pe.attr=function(e,r){if(this.removed)return this;if(null==e){var n={};for(var i in this.attrs)this.attrs[a](i)&&(n[i]=this.attrs[i]);return this._.rt.deg&&(n.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(n.scale=this.scale()),n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n}if(null==r&&t.is(e,"string"))return"translation"==e?gt.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==I&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&null==r&&t.is(e,A)){var s,o={};for(i=0,s=e[b];i<s;i++)o[e[i]]=this.attr(e[i]);return o}var l;if(null!=r&&((l={})[e]=r),null==r&&t.is(e,"object")&&(l=e),l){for(var h in this.paper.customAttributes)if(this.paper.customAttributes[a](h)&&l[a](h)&&t.is(this.paper.customAttributes[h],"function")){var c=this.paper.customAttributes[h].apply(this,[].concat(l[h]));for(var p in this.attrs[h]=l[h],c)c[a](p)&&(l[p]=c[p])}l.text&&"text"==this.type&&(this.node.string=l.text),Ie(this,l),l.gradient&&({circle:1,ellipse:1}[a](this.type)||"r"!=g(l.gradient).charAt())&&_e(this,l.gradient),(!Xe[a](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},Pe.toFront=function(){return!this.removed&&this.Group.parentNode.appendChild(this.Group),this.paper.top!=this&&we(this,this.paper),this},Pe.toBack=function(){return this.removed||this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),ke(this,this.paper)),this},Pe.insertAfter=function(e){return this.removed||(e.constructor==bt&&(e=e[e.length-1]),e.Group.nextSibling?e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling):e.Group.parentNode.appendChild(this.Group),Ce(this,e,this.paper)),this},Pe.insertBefore=function(e){return this.removed||(e.constructor==bt&&(e=e[0]),e.Group.parentNode.insertBefore(this.Group,e.Group),Ee(this,e,this.paper)),this},Pe.blur=function(e){var r=this.node.runtimeStyle,n=r.filter;n=n.replace(je,m),0!=+e?(this.attrs.blur=e,r.filter=n+f+q+".Blur(pixelradius="+(+e||1.5)+")",r.margin=t.format("-{0}px 0 0 -{0}px",D(+e||1.5))):(r.filter=n,r.margin=0,delete this.attrs.blur)},Re=function(e,t,r,n){var i=He("group"),s=He("oval");s.style,i.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",i.coordsize=Ve,i.coordorigin=e.coordorigin,i.appendChild(s);var o=new Ne(s,i,e);return o.type="circle",Ie(o,{stroke:"#000",fill:"none"}),o.attrs.cx=t,o.attrs.cy=r,o.attrs.r=n,o.setBox({x:t-n,y:r-n,width:2*n,height:2*n}),e.canvas.appendChild(i),o},Le=function(e,t,r,n,i,s){var o=wt(t,r,n,i,s),a=e.path(o),l=a.attrs;return a.X=l.x=t,a.Y=l.y=r,a.W=l.width=n,a.H=l.height=i,l.r=s,l.path=o,a.type="rect",a},Fe=function(e,t,r,n,i){var s=He("group"),o=He("oval");o.style,s.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",s.coordsize=Ve,s.coordorigin=e.coordorigin,s.appendChild(o);var a=new Ne(o,s,e);return a.type="ellipse",Ie(a,{stroke:"#000"}),a.attrs.cx=t,a.attrs.cy=r,a.attrs.rx=n,a.attrs.ry=i,a.setBox({x:t-n,y:r-i,width:2*n,height:2*i}),e.canvas.appendChild(s),a},De=function(e,t,r,n,i,s){var o=He("group"),a=He("image");o.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",o.coordsize=Ve,o.coordorigin=e.coordorigin,a.src=t,o.appendChild(a);var l=new Ne(a,o,e);return l.type="image",l.attrs.src=t,l.attrs.x=r,l.attrs.y=n,l.attrs.w=i,l.attrs.h=s,l.setBox({x:r,y:n,width:i,height:s}),e.canvas.appendChild(o),l},ze=function(e,r,n,i){var s=He("group"),o=He("shape"),a=o.style,l=He("path");l.style;var h=He("textpath");s.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",s.coordsize=Ve,s.coordorigin=e.coordorigin,l.v=t.format("m{0},{1}l{2},{1}",D(10*r),D(10*n),D(10*r)+1),l.textpathok=!0,a.width=e.width,a.height=e.height,h.string=g(i),h.on=!0,o.appendChild(h),o.appendChild(l),s.appendChild(o);var c=new Ne(h,s,e);return c.shape=o,c.textpath=l,c.type="text",c.attrs.text=i,c.attrs.x=r,c.attrs.y=n,c.attrs.w=1,c.attrs.h=1,Ie(c,{font:U.font,stroke:"none",fill:"#000"}),c.setBox(),e.canvas.appendChild(s),c},Be=function(e,t){var r=this.canvas.style;return e==+e&&(e+="px"),t==+t&&(t+="px"),r.width=e,r.height=t,r.clip="rect(0 "+e+" "+t+" 0)",this},l.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!l.namespaces.rvml&&l.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),He=function(e){return l.createElement("<rvml:"+e+' class="rvml">')}}catch(kt){He=function(e){return l.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}qe=function(){var e=ye[u](0,arguments),r=e.container,n=e.height,i=e.width,s=e.x,o=e.y;if(!r)throw new Error("VML container not found.");var a=new p,h=a.canvas=l.createElement("div"),c=h.style;return s=s||0,o=o||0,(i=i||512)==+i&&(i+="px"),(n=n||342)==+n&&(n+="px"),a.width=1e3,a.height=1e3,a.coordsize="10000 10000",a.coordorigin="0 0",a.span=l.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",h.appendChild(a.span),c.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,n),1==r?(l.body.appendChild(h),c.left=s+"px",c.top=o+"px",c.position="absolute"):r.firstChild?r.insertBefore(h,r.firstChild):r.appendChild(h),be.call(a,a,t.fn),a},r.clear=function(){this.canvas.innerHTML=m,this.span=l.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},r.remove=function(){for(var e in this.canvas.parentNode.removeChild(this.canvas),this)this[e]=Se(e);return!0}}var Qe=navigator.userAgent.match(/Version\/(.*?)\s/);"Apple Computer, Inc."==navigator.vendor&&(Qe&&Qe[1]<4||"iP"==navigator.platform.slice(0,2))?r.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});h.setTimeout((function(){e.remove()}))}:r.safari=function(){};for(var Ke=function(){this.returnValue=!1},$e=function(){return this.originalEvent.preventDefault()},Ze=function(){this.cancelBubble=!0},Je=function(){return this.originalEvent.stopPropagation()},et=l.addEventListener?function(e,t,r,n){var i=d&&y[t]?y[t]:t,s=function(i){if(d&&y[a](t))for(var s=0,o=i.targetTouches&&i.targetTouches.length;s<o;s++)if(i.targetTouches[s].target==e){var l=i;(i=i.targetTouches[s]).originalEvent=l,i.preventDefault=$e,i.stopPropagation=Je;break}return r.call(n,i)};return e.addEventListener(i,s,!1),function(){return e.removeEventListener(i,s,!1),!0}}:l.attachEvent?function(e,t,r,n){var i=function(e){return(e=e||h.event).preventDefault=e.preventDefault||Ke,e.stopPropagation=e.stopPropagation||Ze,r.call(n,e)};return e.attachEvent("on"+t,i),function(){return e.detachEvent("on"+t,i),!0}}:void 0,tt=[],rt=function(e){for(var t,r=e.clientX,n=e.clientY,i=l.documentElement.scrollTop||l.body.scrollTop,s=l.documentElement.scrollLeft||l.body.scrollLeft,o=tt.length;o--;){if(t=tt[o],d){for(var a,h=e.touches.length;h--;)if((a=e.touches[h]).identifier==t.el._drag.id){r=a.clientX,n=a.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();r+=s,n+=i,t.move&&t.move.call(t.move_scope||t.el,r-t.el._drag.x,n-t.el._drag.y,r,n,e)}},nt=function e(r){t.unmousemove(rt).unmouseup(e);for(var n,i=tt.length;i--;)(n=tt[i]).el._drag={},n.end&&n.end.call(n.end_scope||n.start_scope||n.move_scope||n.el,r);tt=[]},it=v[b];it--;)!function(e){t[e]=Ne[o][e]=function(r,n){return t.is(r,"function")&&(this.events=this.events||[],this.events.push({name:e,f:r,unbind:et(this.shape||this.node||l,e,r,n||this)})),this},t["un"+e]=Ne[o]["un"+e]=function(t){for(var r=this.events,n=r[b];n--;)if(r[n].name==e&&r[n].f==t)return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(v[it]);function st(){return this.x+f+this.y}Pe.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},Pe.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)},Pe.drag=function(e,r,n,i,s,o){return this._drag={},this.mousedown((function(a){(a.originalEvent||a).preventDefault();var h=l.documentElement.scrollTop||l.body.scrollTop,c=l.documentElement.scrollLeft||l.body.scrollLeft;this._drag.x=a.clientX+c,this._drag.y=a.clientY+h,this._drag.id=a.identifier,r&&r.call(s||i||this,a.clientX+c,a.clientY+h,a),!tt.length&&t.mousemove(rt).mouseup(nt),tt.push({el:this,move:e,end:n,move_scope:i,start_scope:s,end_scope:o})})),this},Pe.undrag=function(e,r,n){for(var i=tt.length;i--;)tt[i].el==this&&tt[i].move==e&&tt[i].end==n&&tt.splice(i++,1);!tt.length&&t.unmousemove(rt).unmouseup(nt)},r.circle=function(e,t,r){return Re(this,e||0,t||0,r||0)},r.rect=function(e,t,r,n,i){return Le(this,e||0,t||0,r||0,n||0,i||0)},r.ellipse=function(e,t,r,n){return Fe(this,e||0,t||0,r||0,n||0)},r.path=function(e){return e&&!t.is(e,_)&&!t.is(e[0],A)&&(e+=m),Me(t.format[u](t,arguments),this)},r.image=function(e,t,r,n,i){return De(this,e||"about:blank",t||0,r||0,n||0,i||0)},r.text=function(e,t,r){return ze(this,e||0,t||0,g(r))},r.set=function(e){return arguments[b]>1&&(e=Array[o].splice.call(arguments,0,arguments[b])),new bt(e)},r.setSize=Be,r.top=r.bottom=null,r.raphael=t,Pe.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},Pe.scale=function(t,r,n,i){if(this.removed)return this;if(null==t&&null==r)return{x:this._.sx,y:this._.sy,toString:st};!+(r=r||t)&&(r=t);var s,o,a=this.attrs;if(0!=t){var l=this.getBBox(),h=l.x+l.width/2,c=l.y+l.height/2,p=E(t/this._.sx),u=E(r/this._.sy);n=+n||0==n?n:h,i=+i||0==i?i:c;var d=this._.sx>0,g=this._.sy>0,v=~~(t/E(t)),y=~~(r/E(r)),x=p*v,w=u*y,k=this.node.style,C=n+E(h-n)*x*(h>n==d?1:-1),S=i+E(c-i)*w*(c>i==g?1:-1),T=t*v>r*y?u:p;switch(this.type){case"rect":case"image":var M=a.width*p,_=a.height*u;this.attr({height:_,r:a.r*T,width:M,x:C-M/2,y:S-_/2});break;case"circle":case"ellipse":this.attr({rx:a.rx*p,ry:a.ry*u,r:a.r*T,cx:C,cy:S});break;case"text":this.attr({x:C,y:S});break;case"path":for(var A=he(a.path),I=!0,O=d?x:p,N=g?w:u,P=0,R=A[b];P<R;P++){var L=A[P],F=H.call(L[0]);if("M"!=F||!I)if(I=!1,"A"==F)L[A[P][b]-2]*=O,L[A[P][b]-1]*=N,L[1]*=p,L[2]*=u,L[5]=+(v+y?!!+L[5]:!+L[5]);else if("H"==F)for(var D=1,z=L[b];D<z;D++)L[D]*=O;else if("V"==F)for(D=1,z=L[b];D<z;D++)L[D]*=N;else for(D=1,z=L[b];D<z;D++)L[D]*=D%2?O:N}var B=ae(A);s=C-B.x-B.width/2,o=S-B.y-B.height/2,A[0][1]+=s,A[0][2]+=o,this.attr({path:A})}!(this.type in{text:1,image:1})||1==v&&1==y?this.transformations?(this.transformations[2]=m,e(this.node,"transform",this.transformations.join(f)),a.fx=0,a.fy=0):(this.node.filterMatrix=m,k.filter=(this.node.filterMatrix||m)+(this.node.filterOpacity||m)):this.transformations?(this.transformations[2]="scale(".concat(v,",",y,")"),e(this.node,"transform",this.transformations.join(f)),s=-1==v?-a.x-(M||0):a.x,o=-1==y?-a.y-(_||0):a.y,this.attr({x:s,y:o}),a.fx=v-1,a.fy=y-1):(this.node.filterMatrix=q+".Matrix(M11=".concat(v,", M12=0, M21=0, M22=",y,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),k.filter=(this.node.filterMatrix||m)+(this.node.filterOpacity||m)),a.scale=[t,r,n,i].join(f),this._.sx=t,this._.sy=r}return this},Pe.clone=function(){if(this.removed)return null;var e=this.attr();return delete e.scale,delete e.translation,this.paper[this.type]().attr(e)};var ot={},at=function e(r,n,i,s,o,a,l,h,c){if(r===i&&n===s&&o===l&&a==h){var p=l-r,u=h-n,d=Math.sqrt(p*p+u*u);if(null==c)return d;var m=c/d;return{start:{x:r,y:n},m:{x:r,y:n},n:{x:l,y:h},end:{x:l,y:h},x:r+m*p,y:n+m*u,alpha:90-180*w.atan(p/u)/T}}var f,g,v=0,y=100,b=[r,n,i,s,o,a,l,h].join(),x=ot[b];(!x&&(ot[b]=x={data:[]}),x.timer&&clearTimeout(x.timer),x.timer=setTimeout((function(){delete ot[b]}),2e3),null!=c)&&(y=10*~~e(r,n,i,s,o,a,l,h));for(var k=0;k<y+1;k++){if(x.data[c]>k?g=x.data[k*y]:(g=t.findDotsAtSegment(r,n,i,s,o,a,l,h,k/y),x.data[k]=g),k&&(v+=S(S(f.x-g.x,2)+S(f.y-g.y,2),.5)),null!=c&&v>=c)return g;f=g}if(null==c)return v},lt=function(e,r){return function(n,i,s){for(var o,a,l,h,c,p="",u={},d=0,m=0,f=(n=ge(n)).length;m<f;m++){if("M"==(l=n[m])[0])o=+l[1],a=+l[2];else{if(d+(h=at(o,a,l[1],l[2],l[3],l[4],l[5],l[6]))>i){if(r&&!u.start){if(p+=["C",(c=at(o,a,l[1],l[2],l[3],l[4],l[5],l[6],i-d)).start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],s)return p;u.start=p,p=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,l[5],l[6]].join(),d+=h,o=+l[5],a=+l[6];continue}if(!e&&!r)return{x:(c=at(o,a,l[1],l[2],l[3],l[4],l[5],l[6],i-d)).x,y:c.y,alpha:c.alpha}}d+=h,o=+l[5],a=+l[6]}p+=l}return u.end=p,(c=e?d:r?u:t.findDotsAtSegment(o,a,l[1],l[2],l[3],l[4],l[5],l[6],1)).alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},ht=lt(1),ct=lt(),pt=lt(0,1);Pe.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():ht(this.attrs.path)},Pe.getPointAtLength=function(e){if("path"==this.type)return ct(this.attrs.path,e)},Pe.getSubpath=function(e,t){if("path"==this.type){if(E(this.getTotalLength()-t)<"1e-6")return pt(this.attrs.path,e).end;var r=pt(this.attrs.path,t,1);return e?pt(r,e).end:r}},t.easing_formulas={linear:function(e){return e},"<":function(e){return S(e,3)},">":function(e){return S(e-1,3)+1},"<>":function(e){return(e*=2)<1?S(e,3)/2:(S(e-=2,3)+2)/2},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){if(0==e||1==e)return e;return S(2,-10*e)*w.sin(2*T*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,r=2.75;return e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375}};var ut=[],dt=function e(){for(var r=+new Date,n=0;n<ut[b];n++){var i=ut[n];if(!i.stop&&!i.el.removed){var s,o=r-i.start,l=i.ms,h=i.easing,c=i.from,p=i.diff,u=i.to,d=i.t,g=i.el,v={};if(o<l){var y=h(o/l);for(var x in c)if(c[a](x)){switch(W[x]){case"along":s=y*l*p[x],u.back&&(s=u.len-s);var w=ct(u[x],s);g.translate(p.sx-p.x||0,p.sy-p.y||0),p.x=w.x,p.y=w.y,g.translate(w.x-p.sx,w.y-p.sy),u.rot&&g.rotate(p.r+w.alpha,w.x,w.y);break;case M:s=+c[x]+y*l*p[x];break;case"colour":s="rgb("+[ft(D(c[x].r+y*l*p[x].r)),ft(D(c[x].g+y*l*p[x].g)),ft(D(c[x].b+y*l*p[x].b))].join(",")+")";break;case"path":s=[];for(var k=0,C=c[x][b];k<C;k++){s[k]=[c[x][k][0]];for(var E=1,S=c[x][k][b];E<S;E++)s[k][E]=+c[x][k][E]+y*l*p[x][k][E];s[k]=s[k].join(f)}s=s.join(f);break;case"csv":switch(x){case"translation":var T=y*l*p[x][0]-d.x,_=y*l*p[x][1]-d.y;d.x+=T,d.y+=_,s=T+f+_;break;case"rotation":s=+c[x][0]+y*l*p[x][0],c[x][1]&&(s+=","+c[x][1]+","+c[x][2]);break;case"scale":s=[+c[x][0]+y*l*p[x][0],+c[x][1]+y*l*p[x][1],2 in u[x]?u[x][2]:m,3 in u[x]?u[x][3]:m].join(f);break;case"clip-rect":for(s=[],k=4;k--;)s[k]=+c[x][k]+y*l*p[x][k]}break;default:var A=[].concat(c[x]);for(s=[],k=g.paper.customAttributes[x].length;k--;)s[k]=+A[k]+y*l*p[x][k]}v[x]=s}g.attr(v),g._run&&g._run.call(g)}else u.along&&(w=ct(u.along,u.len*!u.back),g.translate(p.sx-(p.x||0)+w.x-p.sx,p.sy-(p.y||0)+w.y-p.sy),u.rot&&g.rotate(p.r+w.alpha,w.x,w.y)),(d.x||d.y)&&g.translate(-d.x,-d.y),u.scale&&(u.scale+=m),g.attr(u),ut.splice(n--,1)}}t.svg&&g&&g.paper&&g.paper.safari(),ut[b]&&setTimeout(e)},mt=function(e,r,n,i,s){var o=n-i;r.timeouts.push(setTimeout((function(){t.is(s,"function")&&s.call(r),r.animate(e,o,e.easing)}),i))},ft=function(e){return k(C(e,255),0)},gt=function(e,t){if(null==e)return{x:this._.tx,y:this._.ty,toString:st};switch(this._.tx+=+e,this._.ty+=+t,this.type){case"circle":case"ellipse":this.attr({cx:+e+this.attrs.cx,cy:+t+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+e+this.attrs.x,y:+t+this.attrs.y});break;case"path":var r=he(this.attrs.path);r[0][1]+=+e,r[0][2]+=+t,this.attr({path:r})}return this};function vt(e){return function(r,n,i,s){var o={back:e};return t.is(i,"function")?s=i:o.rot=i,r&&r.constructor==Ne&&(r=r.attrs.path),r&&(o.along=r),this.animate(o,n,s)}}function yt(e,t,r,n,i,s){var o=3*t,a=3*(n-t)-o,l=1-o-a,h=3*r,c=3*(i-r)-h,p=1-h-c;function u(e){return((l*e+a)*e+o)*e}return function(e,t){var r=function(e,t){var r,n,i,s,h,c;for(i=e,c=0;c<8;c++){if(s=u(i)-e,E(s)<t)return i;if(E(h=(3*l*i+2*a)*i+o)<1e-6)break;i-=s/h}if(n=1,(i=e)<(r=0))return r;if(i>n)return n;for(;r<n;){if(s=u(i),E(s-e)<t)return i;e>s?r=i:n=i,i=(n-r)/2+r}return i}(e,t);return((p*r+c)*r+h)*r}(e,1/(200*s))}Pe.animateWith=function(e,t,r,n,i){for(var s=0,o=ut.length;s<o;s++)ut[s].el.id==e.id&&(t.start=ut[s].start);return this.animate(t,r,n,i)},Pe.animateAlong=vt(),Pe.animateAlongBack=vt(1),Pe.onAnimation=function(e){return this._run=e||0,this},Pe.animate=function(e,r,i,s){var o=this;if(o.timeouts=o.timeouts||[],!t.is(i,"function")&&i||(s=i||null),o.removed)return s&&s.call(o),o;var l={},h={},c=!1,p={};for(var u in e)if(e[a](u)&&(W[a](u)||o.paper.customAttributes[a](u)))switch(c=!0,l[u]=o.attr(u),null==l[u]&&(l[u]=U[u]),h[u]=e[u],W[u]){case"along":var d=ht(e[u]),m=ct(e[u],d*!!e.back),f=o.getBBox();p[u]=d/r,p.tx=f.x,p.ty=f.y,p.sx=m.x,p.sy=m.y,h.rot=e.rot,h.back=e.back,h.len=d,e.rot&&(p.r=z(o.rotate())||0);break;case M:p[u]=(h[u]-l[u])/r;break;case"colour":l[u]=t.getRGB(l[u]);var v=t.getRGB(h[u]);p[u]={r:(v.r-l[u].r)/r,g:(v.g-l[u].g)/r,b:(v.b-l[u].b)/r};break;case"path":var y=ge(l[u],h[u]);l[u]=y[0];var x=y[1];p[u]=[];for(var w=0,k=l[u][b];w<k;w++){p[u][w]=[0];for(var C=1,E=l[u][w][b];C<E;C++)p[u][w][C]=(x[w][C]-l[u][w][C])/r}break;case"csv":var S=g(e[u]).split(n),T=g(l[u]).split(n);switch(u){case"translation":l[u]=[0,0],p[u]=[S[0]/r,S[1]/r];break;case"rotation":l[u]=T[1]==S[1]&&T[2]==S[2]?T:[0,S[1],S[2]],p[u]=[(S[0]-l[u][0])/r,0,0];break;case"scale":e[u]=S,l[u]=g(l[u]).split(n),p[u]=[(S[0]-l[u][0])/r,(S[1]-l[u][1])/r,0,0];break;case"clip-rect":for(l[u]=g(l[u]).split(n),p[u]=[],w=4;w--;)p[u][w]=(S[w]-l[u][w])/r}h[u]=S;break;default:for(S=[].concat(e[u]),T=[].concat(l[u]),p[u]=[],w=o.paper.customAttributes[u][b];w--;)p[u][w]=((S[w]||0)-(T[w]||0))/r}if(c){var _=t.easing_formulas[i];if(!_)if((_=g(i).match(F))&&5==_[b]){var A=_;_=function(e){return yt(e,+A[1],+A[2],+A[3],+A[4],r)}}else _=function(e){return e};ut.push({start:e.start||+new Date,ms:r,easing:_,from:l,diff:p,to:h,el:o,t:{x:0,y:0}}),t.is(s,"function")&&(o._ac=setTimeout((function(){s.call(o)}),r)),1==ut[b]&&setTimeout(dt)}else{var I,O=[];for(var N in e)e[a](N)&&G.test(N)&&(u={value:e[N]},"from"==N&&(N=0),"to"==N&&(N=100),u.key=B(N,10),O.push(u));for(O.sort(Z),O[0].key&&O.unshift({key:0,value:o.attrs}),w=0,k=O[b];w<k;w++)mt(O[w].value,o,r/100*O[w].key,r/100*(O[w-1]&&O[w-1].key||0),O[w-1]&&O[w-1].value.callback);(I=O[O[b]-1].value.callback)&&o.timeouts.push(setTimeout((function(){I.call(o)}),r))}return this},Pe.stop=function(){for(var e=0;e<ut.length;e++)ut[e].el.id==this.id&&ut.splice(e--,1);for(e=0,ii=this.timeouts&&this.timeouts.length;e<ii;e++)clearTimeout(this.timeouts[e]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},Pe.translate=function(e,t){return this.attr({translation:e+" "+t})},Pe.toString=function(){return"Raphaël’s object"},t.ae=ut;var bt=function e(t){if(this.items=[],this[b]=0,this.type="set",t)for(var r=0,n=t[b];r<n;r++)!t[r]||t[r].constructor!=Ne&&t[r].constructor!=e||(this[this.items[b]]=this.items[this.items[b]]=t[r],this[b]++)};for(var xt in bt[o][N]=function(){for(var e,t,r=0,n=arguments[b];r<n;r++)!(e=arguments[r])||e.constructor!=Ne&&e.constructor!=bt||(this[t=this.items[b]]=this.items[t]=e,this[b]++);return this},bt[o].pop=function(){return delete this[this[b]--],this.items.pop()},Pe)Pe[a](xt)&&(bt[o][xt]=function(e){return function(){for(var t=0,r=this.items[b];t<r;t++)this.items[t][e][u](this.items[t],arguments);return this}}(xt));bt[o].attr=function(e,r){if(e&&t.is(e,A)&&t.is(e[0],"object"))for(var n=0,i=e[b];n<i;n++)this.items[n].attr(e[n]);else for(var s=0,o=this.items[b];s<o;s++)this.items[s].attr(e,r);return this},bt[o].animate=function(e,r,n,i){(t.is(n,"function")||!n)&&(i=n||null);var s,o,a=this.items[b],l=a,h=this;for(i&&(o=function(){!--a&&i.call(h)}),n=t.is(n,_)?n:o,s=this.items[--l].animate(e,r,n,o);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(s,e,r,n,o);return this},bt[o].insertAfter=function(e){for(var t=this.items[b];t--;)this.items[t].insertAfter(e);return this},bt[o].getBBox=function(){for(var e=[],t=[],r=[],n=[],i=this.items[b];i--;){var s=this.items[i].getBBox();e[N](s.x),t[N](s.y),r[N](s.x+s.width),n[N](s.y+s.height)}return{x:e=C[u](0,e),y:t=C[u](0,t),width:k[u](0,r)-e,height:k[u](0,n)-t}},bt[o].clone=function(e){e=new bt;for(var t=0,r=this.items[b];t<r;t++)e[N](this.items[t].clone());return e},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},r=e.face["font-family"];for(var n in e.face)e.face[a](n)&&(t.face[n]=e.face[n]);if(this.fonts[r]?this.fonts[r][N](t):this.fonts[r]=[t],!e.svg)for(var i in t.face["units-per-em"]=B(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[a](i)){var s=e.glyphs[i];if(t.glyphs[i]={w:s.w,k:{},d:s.d&&"M"+s.d[j](/[mlcxtrv]/g,(function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"}))+"z"},s.k)for(var o in s.k)s[a](o)&&(t.glyphs[i].k[o]=s.k[o])}return e},r.getFont=function(e,r,n,i){if(i=i||"normal",n=n||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,t.fonts){var s,o=t.fonts[e];if(!o){var l=new RegExp("(^|\\s)"+e[j](/[^\w\d\s+!~.:_-]/g,m)+"(\\s|$)","i");for(var h in t.fonts)if(t.fonts[a](h)&&l.test(h)){o=t.fonts[h];break}}if(o)for(var c=0,p=o[b];c<p&&((s=o[c]).face["font-weight"]!=r||s.face["font-style"]!=n&&s.face["font-style"]||s.face["font-stretch"]!=i);c++);return s}},r.print=function(e,r,i,s,o,a,l){a=a||"middle",l=k(C(l||0,1),-1);var h,c=this.set(),p=g(i).split(m),u=0;if(t.is(s,i)&&(s=this.getFont(s)),s){h=(o||16)/s.face["units-per-em"];for(var d=s.face.bbox.split(n),f=+d[0],v=+d[1]+("baseline"==a?d[3]-d[1]+ +s.face.descent:(d[3]-d[1])/2),y=0,x=p[b];y<x;y++){var w=y&&s.glyphs[p[y-1]]||{},E=s.glyphs[p[y]];u+=y?(w.w||s.w)+(w.k&&w.k[p[y]]||0)+s.w*l:0,E&&E.d&&c[N](this.path(E.d).attr({fill:"#000",stroke:"none",translation:[u,0]}))}c.scale(h,h,f,v).translate(e-f,r-v)}return c},t.format=function(e,r){var n=t.is(r,A)?[0].concat(r):arguments;return e&&t.is(e,_)&&n[b]-1&&(e=e[j](s,(function(e,t){return null==n[++t]?m:n[t]}))),e||m},t.ninja=function(){return c.was?h.Raphael=c.is:Raphael=void 0,t},t.el=Pe,t.st=bt[o],Ct.exports=t}();var Et={BLUE:"#6495ED",ORANGE:"#FFA500",PINK:"#FF00AF",GREEN:"#28AE7B",PURPLE:"#9D38BD",RED:"#DF0030",GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",LIGHT_ORANGE:"#EDD19B",LIGHT_PINK:"#ED9BD3",LIGHT_GREEN:"#9BEDCE",LIGHT_PURPLE:"#DA9BED",LIGHT_RED:"#ED9AAC",LIGHT_GRAY:"#ED9B9B",LIGHT_BLACK:"#ED9B9B",GRAY10:"#D6D6D6",GRAY20:"#CDCDCD",GRAY30:"#B3B3B3",GRAY40:"#9A9A9A",GRAY50:"#808080",GRAY60:"#666666",GRAY70:"#4D4D4D",GRAY80:"#333333",GRAY90:"#1A1A1A",BLUE_A:"#CCFAFF",BLUE_B:"#80F6FF",BLUE_C:"#63D9EA",BLUE_D:"#11ACCD",BLUE_E:"#0C7F99",TEAL_A:"#94FFF5",TEAL_B:"#26EDD5",TEAL_C:"#01D1C1",TEAL_D:"#01A995",TEAL_E:"#208170",GREEN_A:"#B6FFB0",GREEN_B:"#8AF281",GREEN_C:"#74CF70",GREEN_D:"#1FAB54",GREEN_E:"#0D923F",GOLD_A:"#FFD0A9",GOLD_B:"#FFBB71",GOLD_C:"#FF9C39",GOLD_D:"#E07D10",GOLD_E:"#A75A05",RED_A:"#FCA9A9",RED_B:"#FF8482",RED_C:"#F9685D",RED_D:"#E84D39",RED_E:"#BC2612",MAROON_A:"#FFBDE0",MAROON_B:"#FF92C6",MAROON_C:"#ED5FA6",MAROON_D:"#CA337C",MAROON_E:"#9E034E",PURPLE_A:"#DDD7FF",PURPLE_B:"#C6B9FC",PURPLE_C:"#AA87FF",PURPLE_D:"#7854AB",PURPLE_E:"#543B78",MINT_A:"#F5F9E8",MINT_B:"#EDF2DF",MINT_C:"#E0E5CC",GRAY_A:"#F6F7F7",GRAY_B:"#F0F1F2",GRAY_C:"#E3E5E6",GRAY_D:"#D6D8DA",GRAY_E:"#BABEC2",GRAY_F:"#888D93",GRAY_G:"#626569",GRAY_H:"#3B3E40",GRAY_I:"#21242C",KA_BLUE:"#314453",KA_GREEN:"#71B307",_BACKGROUND:"#FDFDFD",INTERACTING:"#71B307",INTERACTIVE:"#71B307",DYNAMIC:"#6495ED"};function St(e,t){var r=f()(e).find("."+t);return 0===r.length?f()("<span>").addClass(t).appendTo(f()(e)):r}function Tt(e,t){var r=0;!function n(){e.scrollHeight>18||r>=10?t():(r++,setTimeout(n,100))}()}var Mt,_t,At={processMath:(Mt=function*(e,t,r,n){var i=f()(e);if(null==i.attr("data-math-formula")||r){var s=St(i,"katex-holder"),o=St(i,"mathjax-holder"),a=o.find("script[type='math/tex']")[0];null==t&&(i.attr("data-math-formula")?t=i.attr("data-math-formula"):a&&(t=a.text||a.textContent)),t=null!=t?t+"":"",t=he.cleanMath(t),i.attr("data-math-formula",t);var l=yield ie().getKaTeX();try{if(l.render(t,s[0],{colorIsTextColor:!0}),"mathjax"===i.attr("data-math-type")&&"undefined"!=typeof MathJax){var h=MathJax.Hub.getJaxFor(a);if(h){var c=h.SourceElement();c.previousSibling&&c.previousSibling.className&&h.Remove()}}return i.attr("data-math-type","katex"),void(n&&Tt(e,n))}catch(e){if(ie().logKaTeXError(t,e),e instanceof l.ParseError)throw e}i.attr("data-math-type","mathjax"),a?"text"in a?a.text=t:a.textContent=t:o.append("<script type='math/tex'>"+t.replace(/<\//g,"< /")+"<\/script>"),"undefined"!=typeof MathJax&&(MathJax.Hub.Queue(["Reprocess",MathJax.Hub,o[0]]),n&&MathJax.Hub.Queue((function(){var t=MathJax.Callback((function(){}));return Tt(e,(function(){n(),t()})),t})))}},_t=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=Mt.apply(e,t);function s(e){W(i,r,n,s,o,"next",e)}function o(e){W(i,r,n,s,o,"throw",e)}s(void 0)}))},function(e,t,r,n){return _t.apply(this,arguments)}),cleanupMath:function(e){var t=f()(e);if(t.attr("data-math-formula")){if("undefined"!=typeof MathJax){var r=MathJax.Hub.getJaxFor(t.find("script")[0]);if(r){var n=r.SourceElement();n.previousSibling&&n.previousSibling.className&&r.Remove()}}t.text(t.attr("data-math-formula")),t.attr("data-math-formula",null),t.attr("data-math-type",null)}return e},retrieveMathFormula:function(e){return f()(e).attr("data-math-formula")}},{processMath:It}=At;function Ot(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}var Nt={unscaledSvgPath:function(e){return!0===e[0]?"":f.a.map(e,(function(e,t){return!0===e?"z":(0===t?"M":"L")+e[0]+" "+e[1]})).join("")},getDistance:function(e,t){return y.c.distanceToPoint(e,t)},coordDiff:function(e,t){return p.a.map(t,(function(r,n){return t[n]-e[n]}))},snapCoord:function(e,t){return p.a.map(e,(function(e,r){return he.roundToNearest(t[r],e)}))},findAngle:function(e,t,r){if(void 0===r){var n=e[0]-t[0],i=e[1]-t[1];return n||i?(180+180*Math.atan2(-i,-n)/Math.PI+360)%360:0}return Nt.findAngle(e,r)-Nt.findAngle(t,r)},graphs:{}},Pt=Nt.Graphie=function(){};p.a.extend(Pt.prototype,{cartToPolar:function(e,t){var r=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),n=Math.atan2(e[1],e[0]);return n<0&&(n+=2*Math.PI),t||(n=180*n/Math.PI),[r,n]},polar:Ot});var Rt={center:[-.5,-.5],above:[-.5,-1],"above right":[0,-1],right:[0,-.5],"below right":[0,0],below:[-.5,0],"below left":[-1,0],left:[-1,-.5],"above left":[-1,-1]},Lt={"stroke-width":null};Nt.createGraphie=function(e){var t,r,n=40,i=40;f()(e).css("position","relative");var s=Ct.exports(e);f()(e).children("div").css("position","absolute");var o={"stroke-width":2,fill:"none"},a=function e(t){if("number"==typeof t)return e([t,t]);var r=t[0],s=t[1];return[r*n,s*i]},l=function e(s){if("number"==typeof s)return e([s,s]);var o=s[0],a=s[1];return[(o-t[0])*n,(r[1]-a)*i]},h=function(e,t){var r=f()(e),n=r.data("labelDirection"),[i,s]=t;if(0===i&&0===s&&([i,s]=[1,1],ae.log("Label size was 0x0 in graphie.js; using 1x1 instead")),r.css("visibility",""),"number"==typeof n){var o=Math.cos(n),a=Math.sin(n),l=Math.min(i/2/Math.abs(o),s/2/Math.abs(a));r.css({marginLeft:-i/2+o*l,marginTop:-s/2-a*l})}else{var h=Rt[n||"center"];r.css({marginLeft:Math.round(i*h[0]),marginTop:Math.round(s*h[1])})}},c=function(e,t){return f.a.map(e,(function(e,r){if(!0===e)return"z";var n=t?e:l(e);return(0===r?"M":"L")+he.bound(n[0])+" "+he.bound(n[1])})).join("")},u=function(e,r,n){var i=function(t){return(e*t+r)*t+n};if(0===e){var s=p.a.map(t,(function(e){return[e,i(e)]}));return c(s)}var o=-r/(2*e),a=o+Math.max(Math.abs(o-t[0]),Math.abs(o-t[1])),h=[o,i(o)],u=[a,i(a)],d=[h[0],h[1]-(u[1]-h[1])],m=Math.abs(h[0]-u[0]),f=[h[0]-m,u[1]],g=[h[0]+m,u[1]],v=p.a.map([f,d,g],l),y=p.a.map(p.a.flatten(v),he.bound);return"M"+y[0]+","+y[1]+" Q"+y[2]+","+y[3]+" "+y[4]+","+y[5]},d=function(e,r,n,i){for(var s=Math.abs(Math.PI/(2*r)),o=function(t){return e*Math.sin(r*t-n)+i},a=function(t){return e*r*Math.cos(n-r*t)},h=function(e,t){var r=e+s*t,n=r+s,i=[r,2*r/3+1*n/3,1*r/3+2*n/3,n],h=[o(r),o(r)+a(r)*(n-r)/3,o(n)-a(n)*(n-r)/3,o(n)];return p.a.map(p.a.zip(i,h),l)},c=t[1]-t[0],u=Math.ceil(c/s)+1,d=n/r,m=d-t[0],f=h(d-=s*Math.ceil(m/s),0),g="M"+f[0][0]+","+f[0][1]+" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1],v=1;v<u;v++)g+=" C"+(f=h(d,v))[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1];return g};Nt.svgPath=c;var m=function(e){var o={scale:function(e){"number"==typeof e&&(e=[e,e]),n=e[0],i=e[1],s.setSize((t[1]-t[0])*n,(r[1]-r[0])*i)},clipRect:function(e){var t=e[0],r=e[1];return t[1]+=r[1],{"clip-rect":l(t).concat(a(r)).join(" ")}},strokeWidth:function(e){return{"stroke-width":parseFloat(e)}},rx:function(e){return{rx:a([e,0])[0]}},ry:function(e){return{ry:a([0,e])[1]}},r:function(e){var t=a([e,e]);return{rx:t[0],ry:t[1]}}},h={};return f.a.each(e||{},(function(e,t){var r=o[e];if("function"==typeof r)f.a.extend(h,r(t));else{var n=e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();h[n]=t}})),h},g=function e(t){var r=t.constructor.prototype;if(r===Ct.exports.el){if("path"===t.type&&void 0===t.arrowheadsDrawn){var n=.6+.4*t.attr("stroke-width"),i=t.getTotalLength(),o=s.set(),a=s.path(b.isMobile?"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4":"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),l=t.getPointAtLength(i-.4),h=t.getPointAtLength(i-.75*n),c=180*Math.atan2(l.y-h.y,l.x-h.x)/Math.PI,p=t.attr();delete p.path;var u=t.getSubpath(0,i-.75*n);return(u=s.path(u).attr(p)).arrowheadsDrawn=!0,t.remove(),a.rotate(c,b.isMobile?1e-5:.75,0).scale(n,n,.75,0).translate(h.x,h.y).attr(p).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),a.arrowheadsDrawn=!0,o.push(u),o.push(a),o}}else if(r===Ct.exports.st)for(var d=0,m=t.items.length;d<m;d++)e(t.items[d]);return t},v={circle:function(e,t){return s.ellipse(...l(e).concat(a([t,t])))},rect:function(e,t,r,n){var i=l([e,t+n]),o=a([r,n]),h=s.rect(...i.concat(o));return b.isMobile&&(h.node.style.shapeRendering="crispEdges"),h},ellipse:function(e,t){return s.ellipse(...l(e).concat(a(t)))},fixedEllipse:function(e,t,r,n){var i=l(e),s=a(t),o=2*s[0]*r+n,h=2*s[1]*r+n,c=i[0]-o/2,p=i[1]-h/2,u=document.createElement("div");return f()(u).css({position:"absolute",width:o+"px",height:h+"px",left:c+"px",top:p+"px"}),{wrapper:u,visibleShape:Ct.exports(u,o,h).ellipse(o/2,h/2,s[0],s[1])}},arc:function(e,t,r,n,i){r=(r%360+360)%360,n=(n%360+360)%360;var o=l(e),h=a(t),c=Ot(t,r),p=Ot(t,n),u=l([e[0]+c[0],e[1]+c[1]]),d=l([e[0]+p[0],e[1]+p[1]]),m=((n-r)%360+360)%360>180;return s.path("M"+u.join(" ")+"A"+h.join(" ")+" 0 "+(m?1:0)+" 0 "+d.join(" ")+(i?"L"+o.join(" ")+"z":""))},path:function(e){var t=s.path(c(e));return t.graphiePath=e,t},fixedPath:function(e,t,r){e=p.a.map(e,l),t=t?l(t):null,r=r||c;var n=p.a.min(p.a.pluck(e,0)),i=p.a.max(p.a.pluck(e,0)),s=p.a.min(p.a.pluck(e,1)),o=p.a.max(p.a.pluck(e,1)),a=[4,4],h=[n,s];e=p.a.map(e,(function(e){return y.e.add(y.e.subtract(e,h),y.e.scale(a,.5))}));var u=i-n+a[0],d=o-s+a[1],m=h[0]-a[0]/2,g=h[1]-a[1]/2,v=document.createElement("div");return f()(v).css({position:"absolute",width:u+"px",height:d+"px",left:m+"px",top:g+"px",transformOrigin:t?u/2+t[0]+"px "+(d/2+t[1])+"px":null}),{wrapper:v,visibleShape:Ct.exports(v,u,d).path(r(e))}},scaledPath:function(e){var t=s.path(c(e,!0));return t.graphiePath=e,t},line:function(e,t){var r=this.path([e,t]);return b.isMobile&&(r.node.style.shapeRendering="crispEdges"),r},parabola:function(e,t,r){return s.path(u(e,t,r))},fixedLine:function(e,t,r){var n=[r,r];e=l(e),t=l(t);var i=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];e=y.e.add(y.e.subtract(e,i),y.e.scale(n,.5)),t=y.e.add(y.e.subtract(t,i),y.e.scale(n,.5));var s=i[0]-n[0]/2,o=i[1]-n[1]/2,a=Math.abs(e[0]-t[0])+n[0],h=Math.abs(e[1]-t[1])+n[1],c=document.createElement("div");f()(c).css({position:"absolute",width:a+"px",height:h+"px",left:s+"px",top:o+"px",transformOrigin:e[0]+"px "+e[1]+"px"});var p=Ct.exports(c,a,h),u="M"+e[0]+" "+e[1]+" L"+t[0]+" "+t[1],d=p.path(u);return d.graphiePath=[e,t],{wrapper:c,visibleShape:d}},sinusoid:function(e,t,r,n){return s.path(d(e,t,r,n))},grid:function(e,t){for(var r=o.step||[1,1],n=s.set(),i=r[0]*Math.ceil(e[0]/r[0]);i<=e[1];i+=r[0])n.push(this.line([i,t[0]],[i,t[1]]));for(var a=r[1]*Math.ceil(t[0]/r[1]);a<=t[1];a+=r[1])n.push(this.line([e[0],a],[e[1],a]));return n},label:function(t,r,n,i){i=void 0===i||i;var s=f()("<span>").addClass("graphie-label"),a=o["label-distance"];s.css(f.a.extend({},{position:"absolute",padding:(null!=a?a:7)+"px",color:"black"})).data("labelDirection",n).appendTo(e),s.setPosition=function(e){var t=l(e);s.css({left:t[0],top:t[1]})},s.setPosition(t);var c=s[0];return s.processMath=function(e,t){It(c,e,t,(function(){var e=c.scrollWidth,t=c.scrollHeight;h(c,[e,t])}))},s.processText=function(e){s.html(e);var t=c.scrollWidth,r=c.scrollHeight;h(c,[t,r])},i?s.processMath(r,!1):s.processText(r),s},plotParametric:function(e,t,r,n){n=n||function(e){return[e,0]};var a=e=>Math.abs(e[1])>5e5?[e[0],Math.min(Math.max(e[1],-5e5),5e5)]:e,l=t=>a(e(t)),h=e=>a(n(e));o.strokeLinejoin||(o.strokeLinejoin="round"),o.strokeLinecap||(o.strokeLinecap="round");var c=t[0],p=t[1],u=(p-c)/(o["plot-points"]||800);0===u&&(u=1);for(var d=s.set(),m=[],f=Nt.coordDiff(l(c),h(c)),g=c,v=c;v<=p;v+=u){var y=l(v),b=h(v),x=Nt.coordDiff(y,b);if(x[1]<0!=f[1]<0&&Math.abs(x[1]-f[1])>2*i||isNaN(x[1])){if(r){m.push(y);for(var w=v-u;w>=g;w-=u)m.push(h(w));g=v}d.push(this.path(m)),m=[],r&&m.push(y)}else m.push(y);f=x}if(r)for(var k=p-u;k>=g;k-=u)m.push(h(k));return d.push(this.path(m)),d},plotPolar:function(e,t){var r=t[0],i=t[1];return o["plot-points"]||(o["plot-points"]=2*(i-r)*n),this.plotParametric((function(t){return Ot(e(t),180*t/Math.PI)}),t)},plot:function(e,t,r,i,s){var a=t[0],l=t[1];if(o["plot-points"]||(o["plot-points"]=2*(l-a)*n),r){if(s)throw new le("Can't shade area between functions with swapped axes.",oe.Internal);return this.plotParametric((function(t){return[e(t),t]}),t,i)}if(s){if(i)return this.plotParametric((function(t){return[t,e(t)]}),t,i,(function(e){return[e,s(e)]}));throw new le("fn2 should only be set when 'shade' is True.",oe.Internal)}return this.plotParametric((function(t){return[t,e(t)]}),t,i)},plotPiecewise:function(e,t){var r=s.set(),n=this;return p.a.times(e.length,(function(i){var s=e[i],o=t[i],a=n.plotParametric((function(e){return[e,s(e)]}),o);p.a.each(a,(function(e){r.push(e)}))})),r},plotEndpointCircles:function(e){var t=s.set(),r=this;return p.a.each(e,(function(e,n){t.push(r.circle(e,.15))})),t},plotAsymptotes:function(e,t){for(var r=t[0],n=t[1],a=(n-r)/(o["plot-points"]||800),l=s.set(),h=e(r),c=r;c<=n;c+=a){var p=e(c);p<0!=h<0&&Math.abs(p-h)>2*i&&l.push(this.line([c,i],[c,-i])),h=p}return l}},b=new Pt;return p.a.extend(b,{raphael:s,init:function(o){var a=o.scale||[40,40];if(n=(a="number"==typeof a?[a,a]:a)[0],i=a[1],null==o.range)throw new le("range should be specified in graph init",oe.Internal);t=o.range[0],r=o.range[1];var l=(t[1]-t[0])*n,h=(r[1]-r[0])*i;return s.setSize(l,h),f()(e).css({width:l,height:h}),this.range=o.range,this.scale=a,this.dimensions=[l,h],this.xpixels=l,this.ypixels=h,this.isMobile=o.isMobile,this},style:function(e,t){var r=m(e);if("function"==typeof t){var n=o;o=f.a.extend({},o,r);var i=t.call(b);return o=n,i}f.a.extend(o,r)},scalePoint:l,scaleVector:a,unscalePoint:function e(s){if("number"==typeof s)return e([s,s]);var o=s[0],a=s[1];return[o/n+t[0],r[1]-a/i]},unscaleVector:function e(t){return"number"==typeof t?e([t,t]):[t[0]/n,t[1]/i]},svgPath:c,svgParabolaPath:u,svgSinusoidPath:d}),f.a.each(v,(function(e){b[e]=function(){var t,r=arguments[arguments.length-1],n=o;if("object"!=typeof r||p.a.isArray(r))o=f.a.extend({},o),t=v[e](...arguments);else{o=U(U({},o),m(r));var i=[].slice.call(arguments,0,arguments.length-1);t=v[e](...i)}var s=t.constructor.prototype;return s===Ct.exports.el||s===Ct.exports.st?(t.attr(o),o.arrows&&(t=g(t))):t instanceof f.a&&t.css(U(U({},o),Lt)),o=n,t}})),b.graphInit=function(e){e=e||{},f.a.each(e,(function(t,r){t.match(/.*Opacity$/)||"range"===t||"number"!=typeof r||(e[t]=[r,r]),"range"!==t&&"gridRange"!==t||(r.constructor===Array?r[0].constructor!==Array&&(e[t]=[[-r[0],r[0]],[-r[1],r[1]]]):"number"==typeof r&&(e[t]=[[-r,r],[-r,r]]))}));var t=e.range||[[-10,10],[-10,10]],r=e.gridRange||e.range,n=e.scale||[20,20],i=null==e.grid||e.grid,s=e.gridOpacity||.1,o=e.gridStep||[1,1],a=null==e.axes||e.axes,l=e.axisArrows||"",h=e.axisOpacity||1,c=e.axisCenter||[Math.min(Math.max(t[0][0],0),t[0][1]),Math.min(Math.max(t[1][0],0),t[1][1])],u=null!=e.axisLabels&&e.axisLabels,d=null==e.ticks||e.ticks,m=e.tickStep||[2,2],g=e.tickLen||[5,5],v=e.tickOpacity||1,y=e.labels||e.labelStep||!1,b=e.labelStep||[1,1],x=e.labelOpacity||1,w=e.unityLabels||!1,k=e.labelFormat||function(e){return e},C=e.xLabelFormat||k,E=e.yLabelFormat||k,S=null==e.smartLabelPositioning||e.smartLabelPositioning,T=[[t[0][0]-(t[0][0]>0?1:0),t[0][1]+(t[0][1]<0?1:0)],[t[1][0]-(t[1][0]>0?1:0),t[1][1]+(t[1][1]<0?1:0)]];if(p.a.isArray(w)||(w=[w,w]),S){var M=function(e){return function(t){return(e(t)+"").replace(/-(\d)/g,"\\llap{-}$1")}};C=M(C),E=M(E)}if(this.init({range:T,scale:n,isMobile:e.isMobile}),i&&this.grid(r[0],r[1],{stroke:e.isMobile?Et.GRAY_C:"#000000",opacity:e.isMobile?1:s,step:o,strokeWidth:e.isMobile?1:2}),a&&("<->"===l||!0===l?this.style({stroke:e.isMobile?Et.GRAY_G:"#000000",opacity:e.isMobile?1:h,strokeWidth:e.isMobile?1:2,arrows:"->"},(function(){t[1][0]<0&&t[1][1]>0&&(this.path([c,[r[0][0],c[1]]]),this.path([c,[r[0][1],c[1]]])),t[0][0]<0&&t[0][1]>0&&(this.path([c,[c[0],r[1][0]]]),this.path([c,[c[0],r[1][1]]]))})):"->"!==l&&""!==l||this.style({stroke:"#000000",opacity:h,strokeWidth:2,arrows:l},(function(){this.path([[r[0][0],c[1]],[r[0][1],c[1]]]),this.path([[c[0],r[1][0]],[c[0],r[1][1]]])})),u&&2===u.length&&(this.label([r[0][1],c[1]],u[0],"right"),this.label([c[0],r[1][1]],u[1],"above"))),d){var _=e.isMobile;this.style({stroke:e.isMobile?Et.GRAY_G:"#000000",opacity:e.isMobile?1:v,strokeWidth:1},(function(){var e=o[0]*m[0],i=g[0]/n[1],s=r[0][0],a=r[0][1];if(t[1][0]<0&&t[1][1]>0){for(var h=e+c[0];h<=a;h+=e)(h<a||!l)&&this.line([h,-i+c[1]],[h,_?0:i+c[1]]);for(var p=-e+c[0];p>=s;p-=e)(p>s||!l)&&this.line([p,-i+c[1]],[p,_?0:i+c[1]])}if(e=o[1]*m[1],i=g[1]/n[0],s=r[1][0],a=r[1][1],t[0][0]<0&&t[0][1]>0){for(var u=e+c[1];u<=a;u+=e)(u<a||!l)&&this.line([-i+c[0],u],[_?0:i+c[0],u]);for(var d=-e+c[1];d>=s;d-=e)(d>s||!l)&&this.line([-i+c[0],d],[_?0:i+c[0],d])}}))}y&&this.style({stroke:e.isMobile?Et.GRAY_G:"#000000",opacity:e.isMobile?1:x},(function(){for(var e=o[0]*m[0]*b[0],t=r[0][0],n=r[0][1],i=c[0]<0?"above":"below",s=c[0]<0?"right":"left",a=0===c[0]&&0!==c[1],h=0!==c[0]&&0===c[1],p=0!==c[0]||0!==c[1],u=w[0]||p,d=w[1]||p,f=(a?0:e)+c[0];f<=n;f+=e)(f<n||!l)&&this.label([f,c[1]],C(f),i);for(var g=-e*(u?1:2)+c[0];g>=t;g-=e)(g>t||!l)&&this.label([g,c[1]],C(g),i);e=o[1]*m[1]*b[1],t=r[1][0],n=r[1][1];for(var v=(h?0:e)+c[1];v<=n;v+=e)(v<n||!l)&&this.label([c[0],v],E(v),s);for(var y=-e*(d?1:2)+c[1];y>=t;y-=e)(y>t||!l)&&this.label([c[0],y],E(y),s)}))},b},function(e,t,r,n){if(void 0!==e){var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),a="clientX clientY pageX pageY screenX screenY".split(" "),l=e.event.mouseHooks?e.event.mouseHooks.props:[],h=e.event.props.concat(l),c={},p=0,u=0,d=0,m=!1,f=[],g=!1,v=!1,y="addEventListener"in r,b=e(r),x=1,w=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var k=0;k<o.length;k++)e.event.special[o[k]]=D(o[k]);y&&r.addEventListener("click",(function(t){var r,n,i,o,a,l=f.length,h=t.target;if(l)for(r=t.clientX,n=t.clientY,threshold=e.vmouse.clickDistanceThreshold,i=h;i;){for(o=0;o<l;o++)if(a=f[o],i===h&&Math.abs(a.x-r)<threshold&&Math.abs(a.y-n)<threshold||e.data(i,s)===a.touchID)return t.preventDefault(),void t.stopPropagation();i=i.parentNode}}),!0)}function C(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function E(t){for(var r,n,s={};t;){for(n in r=e.data(t,i))r[n]&&(s[n]=s.hasVirtualBinding=!0);t=t.parentNode}return s}function S(){v=!0}function T(){v=!1}function M(){_(),p=setTimeout((function(){p=0,w=0,f.length=0,g=!1,S()}),e.vmouse.resetTimerDuration)}function _(){p&&(clearTimeout(p),p=0)}function A(t,r,n){var s;return(n&&n[t]||!n&&function(t,r){for(var n;t;){if((n=e.data(t,i))&&(!r||n[r]))return t;t=t.parentNode}return null}(r.target,t))&&(s=function(t,r){var n,i,s,o,l,c,p,u,d,m=t.type;if((t=e.Event(t)).type=r,n=t.originalEvent,i=e.event.props,m.search(/mouse/)>-1&&(i=h),n)for(p=i.length;p;)t[o=i[--p]]=n[o];if(m.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==m.search(/^touch/)&&(m=(s=C(n)).touches,l=s.changedTouches,c=m&&m.length?m[0]:l&&l.length?l[0]:void 0))for(u=0,d=a.length;u<d;u++)t[o=a[u]]=c[o];return t}(r,t),e(r.target).trigger(s)),s}function I(t){var r=e.data(t.target,s);if(!(g||w&&w===r)){var n=A("v"+t.type,t);n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function O(t){var r,n,i=C(t).touches;if(i&&1===i.length&&(n=E(r=t.target)).hasVirtualBinding){w=x++,e.data(r,s,w),_(),T(),m=!1;var o=C(t).touches[0];u=o.pageX,d=o.pageY,A("vmouseover",t,n),A("vmousedown",t,n)}}function N(e){v||(m||A("vmousecancel",e,E(e.target)),m=!0,M())}function P(t){if(!v){var r=C(t).touches[0],n=s,i=e.vmouse.moveDistanceThreshold,s=s||Math.abs(r.pageX-u)>i||Math.abs(r.pageY-d)>i,o=E(t.target);s&&!n&&A("vmousecancel",t,o),A("vmousemove",t,o),M()}}function R(e){if(!v){S();var t,r=E(e.target);if(A("vmouseup",e,r),!m){var n=A("vclick",e,r);n&&n.isDefaultPrevented()&&(t=C(e).changedTouches[0],f.push({touchID:w,x:t.clientX,y:t.clientY}),g=!0)}A("vmouseout",e,r),m=!1,M()}}function L(t){var r,n=e.data(t,i);if(n)for(r in n)if(n[r])return!0;return!1}function F(){}function D(t){var r=t.substr(1);return{setup:function(n,s){L(this)||e.data(this,i,{}),e.data(this,i)[t]=!0,c[t]=(c[t]||0)+1,1===c[t]&&b.bind(r,I),e(this).bind(r,F),y&&(c.touchstart=(c.touchstart||0)+1,1===c.touchstart&&b.bind("touchstart",O).bind("touchend",R).bind("touchmove",P).bind("scroll",N))},teardown:function(n,s){--c[t],c[t]||b.unbind(r,I),y&&(--c.touchstart,c.touchstart||b.unbind("touchstart",O).unbind("touchmove",P).unbind("touchend",R).unbind("scroll",N));var o=e(this),a=e.data(this,i);a&&(a[t]=!1),o.unbind(r,F),L(this)||o.removeData(i)}}}}(window.jQuery,window,document);var Ft={pluck:function(e,t){return p.a.object(p.a.map(e,(function(e,r){return[r,e[t]]})))},mapObject:function(e,t){var r={};return p.a.each(p.a.keys(e),(function(n){r[n]=t(e[n],n)})),r},mapObjectFromArray:function(e,t){var r={};return p.a.each(e,(function(e){r[e]=t(e)})),r}},Dt=p.a.extend({transform:function(e){var t=wt.getPrefixedTransform();this.wrapper.style[t]=e},toFront:function(){var e=this.wrapper.parentNode;e&&e.appendChild(this.wrapper)},toBack:function(){var e=this.wrapper.parentNode;e.firstChild!==this.wrapper&&e.insertBefore(this.wrapper,e.firstChild)},remove:function(){this.visibleShape.remove(),f()(this.wrapper).remove()},getMouseTarget:function(){return this.visibleShape[0]},moveTo:function(e){var t=y.e.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),r=wt.getCanUse3dTransform(),n="translateX("+t[0]+"px) translateY("+t[1]+"px)"+(r?" translateZ(0)":"");this.transform(n)},hide:function(){this.visibleShape.hide()},show:function(){this.visibleShape.show()}},Ft.mapObjectFromArray(["attr","animate"],(function(e){return function(){this.visibleShape[e](...arguments)}}))),zt={maxScale:1,mouselayer:!1,shadow:!1,disableMouseEventsOnWrapper:!1},Bt=function(e,t,r,n){n=p.a.extend({},zt,n);var i=e.fixedEllipse(t,r,n.maxScale,n.padding);if(p.a.extend(this,i,{graphie:e,initialPoint:t}),n.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",n.interactiveKindForTesting),n.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),n.shadow){var s="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))",o=this.wrapper;o.style.webkitFilter=s,o.style.filter=s,this.moveTo=function(e){var t=y.e.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),r=wt.getCanUse3dTransform(),n="translateX("+Math.round(t[0])+"px) translateY("+Math.round(t[1])+"px)"+(r?" translateZ(0)":"");this.transform(n)}}n.disableMouseEventsOnWrapper&&(this.wrapper.style.pointerEvents="none",this.visibleShape.node.style.pointerEvents="auto")};p.a.extend(Bt.prototype,Dt);var qt={thickness:2,mouselayer:!1},Ht=function(e,t,r,n){n=p.a.extend({},qt,n);var i=[e.range[0][0],0],s=[e.range[0][1],0];p.a.extend(this,e.fixedLine(i,s,n.thickness)),n.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",n.interactiveKindForTesting),this.visibleShape.attr(n.normalStyle),p.a.extend(this,{graphie:e,initialPoint:e.scalePoint(i),initialLength:y.c.distanceToPoint(e.scalePoint(i),e.scalePoint(s))}),n.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),this.moveTo(t,r)};p.a.extend(Ht.prototype,Dt,{getMouseTarget:function(){return this.wrapper},moveTo:function(e,t){var r=this.graphie.scalePoint(e),n=this.graphie.scalePoint(t),i=y.e.polarDegFromCart(y.e.subtract(n,r)),s=i[0],o=he.bound(i[1]),a=y.e.subtract(r,this.initialPoint),l=he.bound(s/this.initialLength),h=wt.getCanUse3dTransform(),c="translateX("+a[0]+"px) translateY("+a[1]+"px) "+(h?" translateZ(0)":"")+"rotate("+o+"deg) scaleX("+l+") scaleY(1)";this.transform(c)}});var Ut={center:null,createPath:null,mouselayer:!1},Wt=function(e,t,r){r=p.a.extend({},Ut,r),p.a.extend(this,e.fixedPath(t,r.center,r.createPath)),p.a.extend(this,{graphie:e,initialPoint:e.scalePoint(p.a.head(t))}),r.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper)};p.a.extend(Wt.prototype,Dt);var{getCanUse3dTransform:jt}=wt;function Gt(e){return p.a.reduce(e,(function(e,t){return e+t}),0)}function Vt(){var e=p.a.zip(...arguments);return p.a.map(e,Gt)}function Yt(e){return p.a.map(e,(function(e){return-1*e}))}function Xt(e){var t=11.374597405497571;return 58.919514629750836*Math.exp(-.037587715462826674*e)+t}function Qt(e,t){return[e*Math.cos(t),e*Math.sin(t)*-1]}function Kt(e,t){return Qt(e,t*Math.PI/180)}var $t=!1,Zt={animate:function(){},attr:function(){},remove:function(){}};function Jt(e,t){this.set=e.raphael.set(),this.cx=t[0],this.cy=t[1];var r=this,n=e.unscaleVector(180.5)[0],i=e.scalePoint([this.cx-n,this.cy+n-e.unscaleVector(10.5)[1]]),s=e.mouselayer.image("https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png",i[0],i[1],360,180);this.set.push(s),s.node.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1});var o=function(r,i){var s=e.scaleVector(n);s[0]-=16,s[1]-=16;var o=e.scalePoint(t);return Math.sin((r+90)*Math.PI/180)*(s[0]+i)+o[0]+","+(Math.cos((r+90)*Math.PI/180)*(s[1]+i)+o[1])},a=e.raphael.path(" M"+o(180,6)+" L"+o(180,2)+" L"+o(183,10)+" L"+o(180,18)+" L"+o(180,14)+" A"+(e.scaleVector(n)[0]+10)+","+(e.scaleVector(n)[1]+10)+",0,0,1,"+o(170,14)+" L"+o(170,18)+" L"+o(167,10)+" L"+o(170,2)+" L"+o(170,6)+" A"+(e.scaleVector(n)[0]+10)+","+(e.scaleVector(n)[1]+10)+",0,0,0,"+o(180,6)+" Z").attr({stroke:null,fill:Et.INTERACTIVE});this.set.push(a),this.centerPoint=e.addMovablePoint({coord:t,visible:!1}),this.rotateHandle=e.addMovablePoint({bounded:!1,coord:[Math.sin(275*Math.PI/180)*n+this.cx,Math.cos(275*Math.PI/180)*n+this.cy],onMove:function(e,t){var n=180*Math.atan2(r.centerPoint.coord[1]-t,r.centerPoint.coord[0]-e)/Math.PI;r.rotate(-n-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=n,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2});var l=!1,h=!1,c=function(){return h||l},p=f()(this.rotateHandle.mouseTarget.getMouseTarget());p.bind("vmousedown",(function(e){l=!0,p.css("cursor","-webkit-grabbing"),p.css("cursor","grabbing"),a.animate({scale:1.5,fill:Et.INTERACTING},50),f()(document).bind("vmouseup.rotateHandle",(function(e){l=!1,p.css("cursor","-webkit-grab"),p.css("cursor","grab"),c()||a.animate({scale:1,fill:Et.INTERACTIVE},50),f()(document).unbind("vmouseup.rotateHandle")}))})),p.bind("vmouseover",(function(e){h=!0,a.animate({scale:1.5,fill:Et.INTERACTING},50)})),p.bind("vmouseout",(function(e){h=!1,c()||a.animate({scale:1,fill:Et.INTERACTIVE},50)}));var u=f.a.map(this.set,(function(e){return e.node}));return this.makeTranslatable=function(){f()(u).css("cursor","move"),p.css("cursor","-webkit-grab"),p.css("cursor","grab"),f()(u).bind("vmousedown",(function(t){t.preventDefault();var n=t.pageX-f()(e.raphael.canvas.parentNode).offset().left,i=t.pageY-f()(e.raphael.canvas.parentNode).offset().top;f()(document).bind("vmousemove.protractor",(function(t){var s=t.pageX-f()(e.raphael.canvas.parentNode).offset().left,o=t.pageY-f()(e.raphael.canvas.parentNode).offset().top;s=Math.max(10,Math.min(e.xpixels-10,s)),o=Math.max(10,Math.min(e.ypixels-10,o));var a=s-n,l=o-i;f.a.each(r.set.items,(function(){this.translate(a,l)})),r.centerPoint.setCoord([r.centerPoint.coord[0]+a/e.scale[0],r.centerPoint.coord[1]-l/e.scale[1]]),r.rotateHandle.setCoord([r.rotateHandle.coord[0]+a/e.scale[0],r.rotateHandle.coord[1]-l/e.scale[1]]),n=s,i=o})),f()(document).one("vmouseup",(function(e){f()(document).unbind("vmousemove.protractor")}))}))},this.rotation=0,this.rotate=function(t,r){var n=e.scalePoint(this.centerPoint.coord);return r&&(this.rotation=0),this.set.rotate(this.rotation+t,n[0],n[1]),this.rotation=this.rotation+t,this},this.moveTo=function(t,n){var i=e.scalePoint(r.centerPoint.coord),s=e.scalePoint([t,n]),o=2*Nt.getDistance(i,s);f()({x:i[0],y:i[1]}).animate({x:s[0],y:s[1]},{duration:o,step:function(t,n){var i=0,s=0;"x"===n.prop?i=t-e.scalePoint(r.centerPoint.coord)[0]:"y"===n.prop&&(s=t-e.scalePoint(r.centerPoint.coord)[1]),f.a.each(r.set.items,(function(){this.translate(i,s)})),r.centerPoint.setCoord([r.centerPoint.coord[0]+i/e.scale[0],r.centerPoint.coord[1]-s/e.scale[1]]),r.rotateHandle.setCoord([r.rotateHandle.coord[0]+i/e.scale[0],r.rotateHandle.coord[1]-s/e.scale[1]])}})},this.rotateTo=function(e){Math.abs(this.rotation-e)>180&&(this.rotation+=360);var t=5*Math.abs(this.rotation-e);f()({0:this.rotation}).animate({0:e},{duration:t,step:function(e,t){r.rotate(e,!0),r.rotateHandle.setCoord([Math.sin((e+275)*Math.PI/180)*n+r.centerPoint.coord[0],Math.cos((e+275)*Math.PI/180)*n+r.centerPoint.coord[1]])}})},this.remove=function(){this.set.remove()},this.makeTranslatable(),this}function er(e,t){p.a.defaults(t,{center:[0,0],pixelsPerUnit:40,ticksPerUnit:10,units:10,label:"",style:{fill:null,stroke:Et.GRAY}});var r,n=p.a.extend({},t.style,{strokeWidth:1}),i=p.a.extend({},t.style,{strokeWidth:2}),s=t.units*t.pixelsPerUnit,o=e.unscalePoint(y.e.subtract(e.scalePoint(t.center),y.e.scale([s,-50],.5))),a=t.pixelsPerUnit/e.scale[0],l=50/e.scale[0],h=y.e.add(o,[t.units*a,l]);if(10===t.ticksPerUnit)r={10:1,5:.55,1:.35};else{var c=[1,.6,.45,.3];r={};for(var u=t.ticksPerUnit;u>=1;u/=2)r[u]=1*(c.shift()||.2)}var d=p.a.keys(r).sort((function(e,t){return t-e}));var m=o[0],g=o[1],v=h[0],b=h[1],x=t.units*t.ticksPerUnit+1,w=e.raphael.set(),k=1/e.scale[0];w.push(e.line([m-k,g],[v+k,g],i)),w.push(e.line([m-k,b],[v+k,b],i)),p.a.times(x,(function(s){var o=s/t.ticksPerUnit,h=m+o*a,c=function(e){for(var t=0;t<d.length;t++){var n=d[t];if(e%n==0)return r[n]}return 0}(s)*l,p=0===s||s===x-1?i:n;if(w.push(e.line([h,g],[h,g+c],p)),o%1==0){var u,f,v=e.scalePoint([h,b]);0===o?f={mm:13,cm:11,m:8,km:11,in:8,ft:8,yd:10,mi:10}[u=t.label]||3*u.toString().length:(u=o,f=-3*(o.toString().length+1));var y=e.raphael.text(v[0]+f,v[1]+10,u);y.attr({"font-family":"KaTeX_Main","font-size":"12px",color:"#444"}),w.push(y)}}));var C=e.mouselayer.path(Nt.svgPath([o,[m,b],h,[v,g],!0]));C.attr({fill:"#000",opacity:0,stroke:"#000","stroke-width":2}),w.push(C),C.node.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1});var E=f.a.map(w,(function(e){return e.node}));f()(E).css("cursor","move"),f()(E).bind("vmousedown",(function(t){t.preventDefault();var r=t.pageX-f()(e.raphael.canvas.parentNode).offset().left,n=t.pageY-f()(e.raphael.canvas.parentNode).offset().top;f()(document).bind("vmousemove.ruler",(function(t){var i=t.pageX-f()(e.raphael.canvas.parentNode).offset().left,s=t.pageY-f()(e.raphael.canvas.parentNode).offset().top;i=Math.max(10,Math.min(e.xpixels-10,i)),s=Math.max(10,Math.min(e.ypixels-10,s));var o=i-r,a=s-n;w.translate(o,a),S.setCoord([S.coord[0]+o/e.scale[0],S.coord[1]-a/e.scale[1]]),T.setCoord([T.coord[0]+o/e.scale[0],T.coord[1]-a/e.scale[1]]),r=i,n=s})),f()(document).one("vmouseup",(function(e){f()(document).unbind("vmousemove.ruler")}))}));var S=e.addMovablePoint({coord:o,normalStyle:{fill:Et.INTERACTIVE,"fill-opacity":0,stroke:Et.INTERACTIVE},highlightStyle:{fill:Et.INTERACTING,"fill-opacity":.1,stroke:Et.INTERACTING},pointSize:6,onMove:function(t,r){var n=T.coord[1]-r,i=T.coord[0]-t,s=180*Math.atan2(n,i)/Math.PI,o=y.e.scale(y.e.add([t,r],T.coord),.5),a=e.scalePoint(o),l=y.e.scale(y.e.add(S.coord,T.coord),.5),h=e.scalePoint(l),c=y.e.subtract(a,h);w.rotate(-s,h[0],h[1]),w.translate(c[0],c[1])}}),T=e.addMovablePoint({coord:[v,g],normalStyle:{fill:Et.INTERACTIVE,"fill-opacity":0,stroke:Et.INTERACTIVE},highlightStyle:{fill:Et.INTERACTING,"fill-opacity":.1,stroke:Et.INTERACTING},pointSize:6,onMove:function(t,r){var n=r-S.coord[1],i=t-S.coord[0],s=180*Math.atan2(n,i)/Math.PI,o=y.e.scale(y.e.add([t,r],S.coord),.5),a=e.scalePoint(o),l=y.e.scale(y.e.add(S.coord,T.coord),.5),h=e.scalePoint(l),c=y.e.subtract(a,h);w.rotate(-s,h[0],h[1]),w.translate(c[0],c[1])}});return S.constraints.fixedDistance.dist=s/e.scale[0],S.constraints.fixedDistance.point=T,T.constraints.fixedDistance.dist=s/e.scale[0],T.constraints.fixedDistance.point=S,this.remove=function(){w.remove(),S.remove(),T.remove()},this}function tr(e,t){if(this.graphie=e,p.a.extend(this,t),p.a.defaults(this,{normalStyle:{stroke:Et.INTERACTIVE,"stroke-width":2,fill:Et.INTERACTIVE},highlightStyle:{stroke:Et.INTERACTING,"stroke-width":2,fill:Et.INTERACTING},labelStyle:{stroke:Et.DYNAMIC,"stroke-width":1,color:Et.DYNAMIC},angleStyle:{stroke:Et.DYNAMIC,"stroke-width":1,color:Et.DYNAMIC},allowReflex:!0}),!this.points||3!==this.points.length)throw new le("MovableAngle requires 3 points",oe.InvalidInput);this.points=p.a.map(t.points,(function(t){return p.a.isArray(t)?e.addMovablePoint({coord:t,visible:!1,constraints:{fixed:!0},normalStyle:this.normalStyle}):t}),this),this.coords=p.a.pluck(this.points,"coord"),null==this.reflex&&(this.allowReflex?this.reflex=this._getClockwiseAngle(this.coords)>180:this.reflex=!1),this.rays=p.a.map([0,2],(function(t){return e.addMovableLineSegment({pointA:this.points[1],pointZ:this.points[t],fixed:!0,extendRay:!0})}),this),this.temp=[],this.labeledAngle=e.label([0,0],"","center",this.labelStyle),this.fixed||(this.addMoveHandlers(),this.addHighlightHandlers()),this.update()}p.a.extend(Nt.Graphie.prototype,{addMouseLayer:function(e){var t=this;e=p.a.extend({allowScratchpad:!1,setDrawingAreaAvailable:function(){}},e);if(t.mouselayer=Ct.exports(t.raphael.canvas.parentNode,t.xpixels,t.ypixels),f()(t.mouselayer.canvas).css("z-index",2),e.onClick||e.onMouseDown||e.onMouseMove||e.onMouseOver||e.onMouseOut){var r=t.mouselayer.rect(0,0,t.xpixels,t.ypixels).attr({fill:"#000",opacity:0}),n=!1;f()(t.mouselayer.canvas).on("vmousedown",(function(i){i.target===r[0]&&(e.onMouseDown&&e.onMouseDown(t.getMouseCoord(i)),n=!0,e.onMouseMove&&f()(document).bind("vmousemove.mouseLayer",(function(r){n&&(r.preventDefault(),e.onMouseMove(t.getMouseCoord(r)))})),f()(document).bind("vmouseup.mouseLayer",(function(r){f()(document).unbind(".mouseLayer"),n&&e.onClick&&e.onClick(t.getMouseCoord(r)),n=!1})))})),e.onMouseOver&&f()(t.mouselayer.canvas).on("vmouseover",(function(r){e.onMouseOver(t.getMouseCoord(r))})),e.onMouseOut&&f()(t.mouselayer.canvas).on("vmouseout",(function(r){e.onMouseOut(t.getMouseCoord(r))}))}e.allowScratchpad||e.setDrawingAreaAvailable(!1),t._mouselayerWrapper=document.createElement("div"),f()(t._mouselayerWrapper).css({position:"absolute",left:0,top:0,zIndex:2}),t._visiblelayerWrapper=document.createElement("div"),f()(t._visiblelayerWrapper).css({position:"absolute",left:0,top:0});var i=t.raphael.canvas.parentNode;i.appendChild(t._visiblelayerWrapper),i.appendChild(t._mouselayerWrapper),t.addToMouseLayerWrapper=function(e){this._mouselayerWrapper.appendChild(e)},t.addToVisibleLayerWrapper=function(e){this._visiblelayerWrapper.appendChild(e)}},getMousePx:function(e){return[e.pageX-f()(this.raphael.canvas.parentNode).offset().left,e.pageY-f()(this.raphael.canvas.parentNode).offset().top]},getMouseCoord:function(e){return this.unscalePoint(this.getMousePx(e))},labelAngle:function(e){var t=this;p.a.defaults(e,{point1:[0,0],vertex:[0,0],point3:[0,0],label:null,numArcs:1,showRightAngleMarker:!0,pushOut:0,clockwise:!1,style:{}});var r,n,i=void 0===e.text?"":e.text,s=e.vertex,o=t.scalePoint(s);e.clockwise?(r=e.point1,n=e.point3):(r=e.point3,n=e.point1);var a=Nt.findAngle(r,s),l=Nt.findAngle(n,s),h=(l+360-a)%360,c=(a+h/2)%360,u=5*e.pushOut+Xt(h),d=[];if(Math.abs(h-90)<1e-9&&e.showRightAngleMarker){var m=Vt(o,Kt(u,a)),f=Vt(o,Kt(u,l)),g=Vt(o,Kt(u*=Math.SQRT2,c));p.a.each([m,f],(function(r){d.push(t.scaledPath([r,g],e.style))}))}else p.a.times(e.numArcs,(function(r){d.push(t.arc(s,t.unscaleVector(u),a,l,e.style)),u+=3}));if(i){var v=i.match(/\$deg(\d)?/);if(v){var y=v[1]||1;i=i.replace(v[0],he.toFixedApprox(h,y)+"^{\\circ}")}var b=Vt(o,Kt(u+15,c)),x=t.unscalePoint(b);e.label?(e.label.setPosition(x),e.label.processMath(i,!0)):t.label(x,i,"center",e.style)}return d},labelSide:function(e){var t,r,n=this;p.a.defaults(e,{point1:[0,0],point2:[0,0],label:null,text:"",numTicks:0,numArrows:0,clockwise:!1,style:{}}),e.clockwise?(t=e.point1,r=e.point2):(t=e.point2,r=e.point1);var i=[(t[0]+r[0])/2,(t[1]+r[1])/2],s=n.scalePoint(i),o=Math.atan2(r[1]-t[1],r[0]-t[0]),a=o+Math.PI/2,l=[],h=0;if(e.numTicks){var c=e.numTicks,u=p.a.extend({},e.style,{strokeWidth:2});p.a.times(c,(function(e){var t=Qt(5*(e-(c-1)/2),o),r=Qt(5,a),i=[Vt(s,t,r),Vt(s,t,Yt(r))];l.push(n.scaledPath(i,u))})),h+=5*(c-1)+15}if(e.numArrows){var d=e.numArrows,m=[t,r].sort((function(e,t){return e[1]===t[1]?e[0]-t[0]:e[1]-t[1]}))[0],f=n.scalePoint(m),g=p.a.extend({},e.style,{arrows:"->",strokeWidth:2});p.a.times(d,(function(e){var r=Qt(h+5*e,o);m!==t&&(r=Yt(r));var i=Vt(s,r);l.push(n.scaledPath([f,i],g))}))}var v=e.text;if(v){var y=v.match(/\$len(\d)?/);if(y){var b=Nt.getDistance(t,r),x=y[1]||1;v=v.replace(y[0],he.toFixedApprox(b,x))}var w=Qt(20,a),k=Vt(s,w),C=n.unscalePoint(k);e.label?(e.label.setPosition(C),e.label.processMath(v,!0)):n.label(C,v,"center",e.style)}return l},labelVertex:function(e){var t=this;if(p.a.defaults(e,{point1:null,vertex:[0,0],point3:null,label:null,text:"",clockwise:!1,style:{}}),e.text){var r,n,i=e.vertex,s=t.scalePoint(i);e.clockwise?(r=e.point1,n=e.point3):(r=e.point3,n=e.point1);var o,a=135;if(r&&n){var l=Nt.findAngle(r,i);o=(l+(a=(Nt.findAngle(n,i)+360-l)%360)/2+180)%360}else if(r){o=Nt.findAngle(i,r)+90}else if(n){o=Nt.findAngle(n,i)+90}else o=135;var h=Vt(s,Kt(10+Xt(360-a),o)),c=t.unscalePoint(h);e.label?(e.label.setPosition(c),e.label.processMath(e.text,!0)):t.label(c,e.text,"center",e.style)}},addMovablePoint:function(e){var t=f.a.extend(!0,{graph:this,coord:[0,0],snapX:0,snapY:0,pointSize:4,highlight:!1,dragging:!1,visible:!0,bounded:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],polygonVertices:[],normalStyle:{},highlightStyle:{fill:Et.INTERACTING,stroke:Et.INTERACTING},labelStyle:{color:Et.INTERACTIVE},vertexLabel:"",mouseTarget:null},e),r=t.constraints.fixed?Et.DYNAMIC:Et.INTERACTIVE;t.normalStyle=p.a.extend({},{fill:r,stroke:r},e.normalStyle),void 0!==e.coordX&&(t.coord[0]=e.coordX),void 0!==e.coordY&&(t.coord[1]=e.coordY);var n=t.graph,i=function(e){t.visible&&t.bounded&&!t.constraints.fixed&&(e=n.constrainToBounds(e,10));var r=e[0],i=e[1];if(0!==t.snapX&&(r=Math.round(r/t.snapX)*t.snapX),0!==t.snapY&&(i=Math.round(i/t.snapY)*t.snapY),t.constraints.fixedDistance.snapPoints){var s=n.scalePoint(e),o=s[0],a=s[1],l=2*Math.PI/t.constraints.fixedDistance.snapPoints,h=t.constraints.fixedDistance.dist,c=t.constraints.fixedDistance.point,p=(c[0]-n.range[0][0])*n.scale[0],u=(-c[1]+n.range[1][1])*n.scale[1],d=o-p,m=-a+u,f=Math.atan(m/d);d<0&&(f+=Math.PI),f=Math.round(f/l)*l,o=(d=h*Math.cos(f))+p,a=-(m=h*Math.sin(f))+u,r=he.roundTo(5,o/n.scale[0]+n.range[0][0]),i=he.roundTo(5,n.range[1][1]-a/n.scale[1])}return t.applyConstraint([r,i])};t.applyConstraint=function(e,r,n){var i=e.slice(),s={};if(n?f.a.extend(s,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},r):f.a.extend(s,this.constraints,r),s.constrainX)i=[this.coord[0],e[1]];else if(s.constrainY)i=[e[0],this.coord[1]];else if("number"==typeof s.fixedAngle.angle&&"number"==typeof s.fixedDistance.dist){var o=s.fixedAngle.vertex.coord||s.fixedAngle.vertex,a=s.fixedAngle.ref.coord||s.fixedAngle.ref,l=s.fixedDistance.point.coord||s.fixedDistance.point,h=(s.fixedAngle.angle+Nt.findAngle(a,o))*Math.PI/180,c=s.fixedDistance.dist;i[0]=c*Math.cos(h)+l[0],i[1]=c*Math.sin(h)+l[1]}else if("number"==typeof s.fixedAngle.angle){var p=s.fixedAngle.vertex.coord||s.fixedAngle.vertex,u=s.fixedAngle.ref.coord||s.fixedAngle.ref,d=(s.fixedAngle.angle+Nt.findAngle(u,p))*Math.PI/180,m=Nt.findAngle(e,p)*Math.PI/180,g=Nt.getDistance(e,p)*Math.cos(d-m);g=g<1?1:g,i[0]=g*Math.cos(d)+p[0],i[1]=g*Math.sin(d)+p[1]}else if("number"==typeof s.fixedDistance.dist){var v=s.fixedDistance.point.coord||s.fixedDistance.point,y=Nt.findAngle(e,v),b=s.fixedDistance.dist;y=y*Math.PI/180,i[0]=b*Math.cos(y)+v[0],i[1]=b*Math.sin(y)+v[1]}else s.fixed&&(i=t.coord);return i},t.coord=i(t.coord);if(t.visible&&n.style(t.normalStyle,(function(){var e=[t.pointSize/n.scale[0],t.pointSize/n.scale[1]],r={maxScale:2,padding:2};t.visibleShape=new Bt(n,t.coord,e,r),t.visibleShape.attr(p.a.omit(t.normalStyle,"scale")),t.visibleShape.toFront()})),t.normalStyle.scale=1,t.highlightStyle.scale=2,t.vertexLabel&&(t.labeledVertex=this.label([0,0],"","center",t.labelStyle)),t.drawLabel=function(){t.vertexLabel&&t.graph.labelVertex({vertex:t.coord,label:t.labeledVertex,text:t.vertexLabel,style:t.labelStyle})},t.drawLabel(),t.grab=function(e){e=e||[0,0],f()(document).bind("vmousemove.point vmouseup.point",(function(r){r.preventDefault(),t.dragging=!0,$t=!0;var s,o,a=y.e.add(n.getMouseCoord(r),e),l=(a=i(a))[0],h=a[1];if("vmousemove"===r.type){var c=!0;if(p.a.isFunction(t.onMove)){var u=t.onMove(l,h);!1===u&&(c=!1),p.a.isArray(u)&&(l=u[0],h=u[1])}if(s=(l-n.range[0][0])*n.scale[0],o=(-h+n.range[1][1])*n.scale[1],c){var d=n.unscalePoint([s,o]);t.visibleShape.moveTo(d),t.mouseTarget.moveTo(d),t.coord=[l,h],t.updateLineEnds(),f()(t).trigger("move")}t.drawLabel()}else if("vmouseup"===r.type){if(f()(document).unbind(".point"),t.dragging=!1,$t=!1,p.a.isFunction(t.onMoveEnd)){var m=t.onMoveEnd(l,h);if(p.a.isArray(m)){l=m[0],h=m[1],s=(l-n.range[0][0])*n.scale[0],o=(-h+n.range[1][1])*n.scale[1];var g=n.unscalePoint([s,o]);t.visibleShape.moveTo(g),t.mouseTarget.moveTo(g),t.coord=[l,h]}}t.highlight||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight())}}))},t.visible&&!t.constraints.fixed){if(!t.mouseTarget){var s=n.unscaleVector(16);t.mouseTarget=new Bt(n,t.coord,s,{mouselayer:!0,padding:0,disableMouseEventsOnWrapper:!0,interactiveKindForTesting:"movable-point"}),t.mouseTarget.attr({fill:"#000",opacity:0})}var o=f()(t.mouseTarget.getMouseTarget());o.css("cursor","move"),o.bind("vmousedown vmouseover vmouseout",(function(e){if("vmouseover"===e.type)t.highlight=!0,$t||(t.visibleShape.animate(t.highlightStyle,50),t.onHighlight&&t.onHighlight());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||$t||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();var r=t.coord,i=n.getMouseCoord(e),s=!("ontouchstart"in window)?[0,0]:y.e.subtract(r,i);t.grab(s)}}))}return t.moveTo=function(e,r,n){var i=5*Nt.getDistance(this.graph.scalePoint([e,r]),this.graph.scalePoint(this.coord)),s=n&&function(e){t.coord=e,t.updateLineEnds()};this.visibleShape.animateTo([e,r],i,s),this.mouseTarget.animateTo([e,r],i,s),this.coord=[e,r],p.a.isFunction(this.onMove)&&this.onMove(e,r)},t.updateLineEnds=function(){f()(this.lineStarts).each((function(){this.coordA=t.coord,this.transform()})),f()(this.lineEnds).each((function(){this.coordZ=t.coord,this.transform()})),f()(this.polygonVertices).each((function(){this.transform()}))},t.setCoord=function(e){this.visible&&(this.visibleShape.moveTo(e),null!=this.mouseTarget&&this.mouseTarget.moveTo(e)),this.coord=e.slice()},t.setCoordConstrained=function(e){this.setCoord(i(e))},t.toBack=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toBack(),this.visibleShape.toBack())},t.toFront=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toFront(),this.visibleShape.toFront())},t.remove=function(){this.visibleShape&&this.visibleShape.remove(),this.mouseTarget&&this.mouseTarget.remove(),this.labeledVertex&&this.labeledVertex.remove()},t},addMovableLineSegment:function(e){var t=f.a.extend({graph:this,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{},highlightStyle:{stroke:Et.INTERACTING,"stroke-width":6},labelStyle:{stroke:Et.INTERACTIVE,color:Et.INTERACTIVE},highlight:!1,dragging:!1,tick:[],extendLine:!1,extendRay:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1},sideLabel:"",vertexLabels:[],numArrows:0,numTicks:0,movePointsWithLine:!1},e),r=t.fixed?Et.DYNAMIC:Et.INTERACTIVE;t.normalStyle=p.a.extend({},{"stroke-width":2,stroke:r},e.normalStyle),t.arrowStyle=p.a.extend({},t.normalStyle,{color:t.normalStyle.stroke}),void 0!==e.pointA?(t.coordA=e.pointA.coord,t.pointA.lineStarts.push(t)):void 0!==e.coordA&&(t.coordA=e.coordA.slice()),void 0!==e.pointZ?(t.coordZ=e.pointZ.coord,t.pointZ.lineEnds.push(t)):void 0!==e.coordA&&(t.coordA=t.coordA.slice());var n=t.graph;n.style(t.normalStyle);for(var i=0;i<t.ticks;++i)t.tick[i]=Zt;Nt.unscaledSvgPath([[0,0],[1,0]]);for(var s=0;s<t.ticks;++s){var o=.5-(t.ticks-1+2*s)/n.scale[0];Nt.unscaledSvgPath([[o,-7],[o,7]])}if(e={thickness:Math.max(t.normalStyle["stroke-width"],t.highlightStyle["stroke-width"])},t.visibleLine=new Ht(n,[0,0],[1,0],e),t.visibleLine.attr(t.normalStyle),!t.fixed){t.mouseTarget=new Ht(n,[0,0],[1,0],{thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"}),t.mouseTarget.attr({fill:"#000",opacity:0})}if(t.transform=function(e){e&&("object"==typeof this.pointA&&(this.coordA=this.pointA.coord),"object"==typeof this.pointZ&&(this.coordZ=this.pointZ.coord));var r,i,s,o=function(e,r,n){var i=(e=t.graph).range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),s=e.unscaleVector(y.e.cartFromPolarDeg(1,n)),o=y.e.scale(y.e.normalize(s),i),a=y.e.add(r,o),l=y.e.polarDegFromCart(s)[1];return e.constrainToBoundsOnAngle(a,4,l*Math.PI/180)},a=(i=(r=this).graph.scalePoint(r.coordA),s=r.graph.scalePoint(r.coordZ),y.e.polarDegFromCart(y.e.subtract(s,i))[1]),l=this.coordA,h=this.coordZ;this.extendLine?(l=o(n,l,360-a),h=o(n,h,(540-a)%360)):this.extendRay&&(h=o(n,l,360-a));var c=[this.visibleLine];this.fixed||c.push(this.mouseTarget),p.a.each(c,(function(e){e.moveTo(l,h)}));var u=function(e,t){var r=[.75,0],n=[[-3,4],[-2.75,2.5],[0,.25],r,[0,-.25],[-2.75,-2.5],[-3,-4]];n=p.a.map(n,(function(e){var t=y.e.subtract(e,r),n=y.e.scale(t,1.4);return y.e.add(r,n)}));var i=p.a.map(n,e.unscalePoint),s={center:e.unscalePoint(r),createPath:function(e){for(var t="M"+e[0][0]+" "+e[0][1],r=1;r<e.length;r+=3)t+="C"+e[r][0]+" "+e[r][1]+" "+e[r+1][0]+" "+e[r+1][1]+" "+e[r+2][0]+" "+e[r+2][1];return t}},a=new Wt(e,i,s);return a.attr(p.a.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),a.toCoordAtAngle=function(t,n){var i=e.scalePoint(o(e,t,n)),s=jt();a.transform("translateX("+(i[0]+1.4*r[0])+"px) translateY("+(i[1]+1.4*r[1])+"px) "+(s?"translateZ(0) ":"")+"rotate("+(360-he.bound(n))+"deg)")},a};null==this._arrows&&(this._arrows=[],this.extendLine?(this._arrows.push(u(n,this.normalStyle)),this._arrows.push(u(n,this.normalStyle))):this.extendRay&&this._arrows.push(u(n,this.normalStyle)));var d=[this.coordA,this.coordZ],m=[360-a,(540-a)%360];p.a.each(this._arrows,(function(e,t){e.toCoordAtAngle(d[t],m[t])})),p.a.invoke(this.temp,"remove"),this.temp=[];var f=this.coordA[0]<this.coordZ[0]||this.coordA[0]===this.coordZ[0]&&this.coordA[1]>this.coordZ[1];this.sideLabel&&this.temp.push(this.graph.labelSide({point1:this.coordA,point2:this.coordZ,label:this.labeledSide,text:this.sideLabel,numArrows:this.numArrows,numTicks:this.numTicks,clockwise:f,style:this.labelStyle})),this.vertexLabels.length&&(this.graph.labelVertex({vertex:this.coordA,point3:this.coordZ,label:this.labeledVertices[0],text:this.vertexLabels[0],clockwise:f,style:this.labelStyle}),this.graph.labelVertex({point1:this.coordA,vertex:this.coordZ,label:this.labeledVertices[1],text:this.vertexLabels[1],clockwise:f,style:this.labelStyle})),this.temp=p.a.flatten(this.temp)},t.toBack=function(){t.fixed||t.mouseTarget.toBack(),t.visibleLine.toBack()},t.toFront=function(){t.fixed||t.mouseTarget.toFront(),t.visibleLine.toFront()},t.remove=function(){t.fixed||t.mouseTarget.remove(),t.visibleLine.remove(),t.labeledSide&&t.labeledSide.remove(),t.labeledVertices&&p.a.invoke(t.labeledVertices,"remove"),t._arrows&&p.a.invoke(t._arrows,"remove"),t.temp.length&&p.a.invoke(t.temp,"remove")},t.hide=function(){t.visibleLine.hide(),t.temp.length&&p.a.invoke(t.temp,"hide"),t._arrows&&p.a.invoke(t._arrows,"hide")},t.show=function(){t.visibleLine.show(),t.temp.length&&p.a.invoke(t.temp,"show"),t._arrows&&p.a.invoke(t._arrows,"show")},t.sideLabel&&(t.labeledSide=this.label([0,0],"","center",t.labelStyle)),t.vertexLabels.length&&(t.labeledVertices=p.a.map(t.vertexLabels,(function(e){return this.label([0,0],"","center",t.labelStyle)}),this)),!t.fixed&&!t.constraints.fixed){var a=f()(t.mouseTarget.getMouseTarget());a.css("cursor","move"),a.bind("vmousedown vmouseover vmouseout",(function(e){if("vmouseover"===e.type)$t||(t.highlight=!0,t.visibleLine.animate(t.highlightStyle,50),t.arrowStyle=p.a.extend({},t.arrowStyle,{color:t.highlightStyle.stroke,stroke:t.highlightStyle.stroke}),t.transform());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=p.a.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();var r=(e.pageX-f()(n.raphael.canvas.parentNode).offset().left)/n.scale[0]+n.range[0][0],i=n.range[1][1]-(e.pageY-f()(n.raphael.canvas.parentNode).offset().top)/n.scale[1];t.snapX>0&&(r=Math.round(r/t.snapX)*t.snapX),t.snapY>0&&(i=Math.round(i/t.snapY)*t.snapY);var s=[t.coordA[0]-r,t.coordA[1]-i],o=[t.coordZ[0]-r,t.coordZ[1]-i],a=-Math.min(n.scaleVector(s)[0],n.scaleVector(o)[0]),l=Math.max(n.scaleVector(s)[0],n.scaleVector(o)[0]),h=Math.max(n.scaleVector(s)[1],n.scaleVector(o)[1]),c=-Math.min(n.scaleVector(s)[1],n.scaleVector(o)[1]);f()(document).bind("vmousemove.lineSegment vmouseup.lineSegment",(function(e){e.preventDefault(),t.dragging=!0,$t=!0;var r=e.pageX-f()(n.raphael.canvas.parentNode).offset().left,i=e.pageY-f()(n.raphael.canvas.parentNode).offset().top;r=Math.max(a+10,Math.min(n.xpixels-10-l,r)),i=Math.max(h+10,Math.min(n.ypixels-10-c,i));var u=r/n.scale[0]+n.range[0][0],d=n.range[1][1]-i/n.scale[1];if(t.snapX>0&&(u=Math.round(u/t.snapX)*t.snapX),t.snapY>0&&(d=Math.round(d/t.snapY)*t.snapY),"vmousemove"===e.type){t.constraints.constrainX&&(u=t.coordA[0]-s[0]),t.constraints.constrainY&&(d=t.coordA[1]-s[1]);var m=u+s[0]-t.coordA[0],g=d+s[1]-t.coordA[1];t.coordA=[u+s[0],d+s[1]],t.coordZ=[u+o[0],d+o[1]],t.transform(),t.movePointsWithLine&&("object"==typeof t.pointA&&t.pointA.setCoord([t.pointA.coord[0]+m,t.pointA.coord[1]+g]),"object"==typeof t.pointZ&&t.pointZ.setCoord([t.pointZ.coord[0]+m,t.pointZ.coord[1]+g])),p.a.isFunction(t.onMove)&&t.onMove(m,g)}else"vmouseup"===e.type&&(f()(document).unbind(".lineSegment"),t.dragging=!1,$t=!1,t.highlight||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=p.a.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform()),p.a.isFunction(t.onMoveEnd)&&t.onMoveEnd());f()(t).trigger("move")}))}}))}return void 0!==t.pointA&&t.pointA.toFront(),void 0!==t.pointZ&&t.pointZ.toFront(),t.transform(),t},addMovablePolygon:function(e){var t=this,r=f.a.extend({snapX:0,snapY:0,fixed:!1,constrainToGraph:!0,normalStyle:{},highlightStyle:{stroke:Et.INTERACTING,"stroke-width":2,fill:Et.INTERACTING,"fill-opacity":.05},pointHighlightStyle:{fill:Et.INTERACTING,stroke:Et.INTERACTING},labelStyle:{stroke:Et.DYNAMIC,"stroke-width":1,color:Et.DYNAMIC},angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],updateOnPointMove:!0,closed:!0},p.a.omit(e,"points")),n=r.fixed?Et.DYNAMIC:Et.INTERACTIVE;r.normalStyle=p.a.extend({"stroke-width":2,"fill-opacity":0,fill:n,stroke:n},e.normalStyle),r.points=e.points;var i=function(e){return!p.a.isArray(e)};if(r.update=function(){var e=r.points.length;r.coords=p.a.map(r.points,(function(e,t){return i(e)?e.coord:e})),r.left=p.a.min(p.a.pluck(r.coords,0)),r.right=p.a.max(p.a.pluck(r.coords,0)),r.top=p.a.max(p.a.pluck(r.coords,1)),r.bottom=p.a.min(p.a.pluck(r.coords,1));var n=p.a.map(r.coords,(function(e){return t.scalePoint(e)}));r.closed?n.push(!0):n=n.concat(p.a.clone(n).reverse()),r.path=Nt.unscaledSvgPath(n),p.a.invoke(r.temp,"remove"),r.temp=[];var s,o,a=(s=r.coords,o=p.a.zip(s,s.slice(1).concat(s.slice(0,1))),Gt(p.a.map(o,(function(e){var t=e[0],r=e[1];return(r[0]-t[0])*(r[1]+t[1])})))>0);(r.angleLabels.length||r.showRightAngleMarkers.length)&&p.a.each(r.labeledAngles,(function(n,i){r.temp.push(t.labelAngle({point1:r.coords[(i-1+e)%e],vertex:r.coords[i],point3:r.coords[(i+1)%e],label:n,text:r.angleLabels[i],showRightAngleMarker:r.showRightAngleMarkers[i],numArcs:r.numArcs[i],clockwise:a,style:r.labelStyle}))})),r.sideLabels.length&&p.a.each(r.labeledSides,(function(n,i){r.temp.push(t.labelSide({point1:r.coords[i],point2:r.coords[(i+1)%e],label:n,text:r.sideLabels[i],numArrows:r.numArrows[i],numTicks:r.numTicks[i],clockwise:a,style:r.labelStyle}))})),r.vertexLabels.length&&p.a.each(r.labeledVertices,(function(n,i){t.labelVertex({point1:r.coords[(i-1+e)%e],vertex:r.coords[i],point3:r.coords[(i+1)%e],label:n,text:r.vertexLabels[i],clockwise:a,style:r.labelStyle})})),r.temp=p.a.flatten(r.temp)},r.transform=function(){r.update(),r.visibleShape.attr({path:r.path}),r.fixed||r.mouseTarget.attr({path:r.path})},r.remove=function(){r.visibleShape.remove(),r.fixed||r.mouseTarget.remove(),r.labeledAngles&&p.a.invoke(r.labeledAngles,"remove"),r.labeledSides&&p.a.invoke(r.labeledSides,"remove"),r.labeledVertices&&p.a.invoke(r.labeledVertices,"remove"),r.temp.length&&p.a.invoke(r.temp,"remove")},r.toBack=function(){r.fixed||r.mouseTarget.toBack(),r.visibleShape.toBack()},r.toFront=function(){r.fixed||r.mouseTarget.toFront(),r.visibleShape.toFront()},r.updateOnPointMove&&p.a.each(p.a.filter(r.points,i),(function(e){e.polygonVertices.push(r)})),r.coords=new Array(r.points.length),r.angleLabels.length){var s=Math.max(r.angleLabels.length,r.showRightAngleMarkers.length);r.labeledAngles=p.a.times(s,(function(){return this.label([0,0],"","center",r.labelStyle)}),this)}return r.sideLabels.length&&(r.labeledSides=p.a.map(r.sideLabels,(function(e){return this.label([0,0],"","center",r.labelStyle)}),this)),r.vertexLabels.length&&(r.labeledVertices=p.a.map(r.vertexLabels,(function(e){return this.label([0,0],"","center",r.labelStyle)}),this)),r.update(),r.visibleShape=t.raphael.path(r.path),r.visibleShape.attr(r.normalStyle),r.fixed||(r.mouseTarget=t.mouselayer.path(r.path),r.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"}),f()(r.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",(function(e){if("vmouseover"===e.type)$t&&!r.dragging||(r.highlight=!0,r.visibleShape.animate(r.highlightStyle,50),p.a.each(p.a.filter(r.points,i),(function(e){e.visibleShape.animate(r.pointHighlightStyle,50)})));else if("vmouseout"===e.type){if(r.highlight=!1,!r.dragging){r.visibleShape.animate(r.normalStyle,50);var n=p.a.filter(r.points,i);p.a.any(p.a.pluck(n,"dragging"))||p.a.each(n,(function(e){e.visibleShape.animate(e.normalStyle,50)}))}}else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),p.a.each(p.a.filter(r.points,i),(function(e){e.dragging=!0}));var s=(e.pageX-f()(t.raphael.canvas.parentNode).offset().left)/t.scale[0]+t.range[0][0],o=t.range[1][1]-(e.pageY-f()(t.raphael.canvas.parentNode).offset().top)/t.scale[1];r.snapX>0&&(s=Math.round(s/r.snapX)*r.snapX),r.snapY>0&&(o=Math.round(o/r.snapY)*r.snapY);var a=s,l=o,h=r.coords.slice(),c=(s-r.left)*t.scale[0],u=(r.right-s)*t.scale[0],d=(r.top-o)*t.scale[1],m=(o-r.bottom)*t.scale[1];f()(document).bind("vmousemove.polygon vmouseup.polygon",(function(e){e.preventDefault(),r.dragging=!0,$t=!0;var n=e.pageX-f()(t.raphael.canvas.parentNode).offset().left,g=e.pageY-f()(t.raphael.canvas.parentNode).offset().top;r.constrainToGraph&&(n=Math.max(c+10,Math.min(t.xpixels-10-u,n)),g=Math.max(d+10,Math.min(t.ypixels-10-m,g)));var v=n/t.scale[0]+t.range[0][0],y=t.range[1][1]-g/t.scale[1];if(r.snapX>0&&(v=Math.round(v/r.snapX)*r.snapX),r.snapY>0&&(y=Math.round(y/r.snapY)*r.snapY),"vmousemove"===e.type){var b=v-s,x=y-o,w=!0;if(p.a.isFunction(r.onMove)){var k=r.onMove(b,x);!1===k?w=!1:p.a.isArray(k)&&(b=k[0],x=k[1],v=s+b,y=o+x)}var C=function(e){return[h[e][0]+b,h[e][1]+x]};w&&(p.a.each(r.points,(function(e,t){i(e)?e.setCoord(C(t)):r.points[t]=C(t)})),r.transform(),f()(r).trigger("move"),a=v,l=y)}else if("vmouseup"===e.type){f()(document).unbind(".polygon");var E=p.a.filter(r.points,i);p.a.each(E,(function(e){e.dragging=!1})),r.dragging=!1,$t=!1,r.highlight||(r.visibleShape.animate(r.normalStyle,50),p.a.each(E,(function(e){e.visibleShape.animate(e.normalStyle,50)}))),p.a.isFunction(r.onMoveEnd)&&r.onMoveEnd(a-s,l-o)}}))}}))),p.a.invoke(p.a.filter(r.points,i),"toFront"),r},constrainToBounds:function(e,t){var r=this.unscalePoint([t,this.ypixels-t]),n=this.unscalePoint([this.xpixels-t,t]);return[Math.max(r[0],Math.min(n[0],e[0])),Math.max(r[1],Math.min(n[1],e[1]))]},constrainToBoundsOnAngle:function(e,t,r){var n=this.unscalePoint([t,this.ypixels-t]),i=this.unscalePoint([this.xpixels-t,t]),s=e.slice();return s[0]<n[0]?s=[n[0],s[1]+(n[0]-s[0])*Math.tan(r)]:s[0]>i[0]&&(s=[i[0],s[1]-(s[0]-i[0])*Math.tan(r)]),s[1]<n[1]?s=[s[0]+(n[1]-s[1])/Math.tan(r),n[1]]:s[1]>i[1]&&(s=[s[0]-(s[1]-i[1])/Math.tan(r),i[1]]),s},addMovableAngle:function(e){return new tr(this,e)},addCircleGraph:function(e){var t=this,r=f.a.extend({center:[0,0],radius:2,snapX:.5,snapY:.5,snapRadius:.5,minRadius:1,centerConstraints:{},centerNormalStyle:{},centerHighlightStyle:{stroke:Et.INTERACTING,fill:Et.INTERACTING},circleNormalStyle:{stroke:Et.INTERACTIVE,"fill-opacity":0},circleHighlightStyle:{stroke:Et.INTERACTING,fill:Et.INTERACTING,"fill-opacity":.05}},e),n=r.centerConstraints.fixed?Et.DYNAMIC:Et.INTERACTIVE,i=e?e.centerNormalStyle:null;r.centerNormalStyle=p.a.extend({},{fill:n,stroke:n},i),r.centerPoint=t.addMovablePoint({graph:t,coord:r.center,normalStyle:r.centerNormalStyle,snapX:r.snapX,snapY:r.snapY,constraints:r.centerConstraints}),r.circ=t.circle(r.center,r.radius,r.circleNormalStyle),r.perim=t.mouselayer.circle(t.scalePoint(r.center)[0],t.scalePoint(r.center)[1],t.scaleVector(r.radius)[0]).attr({"stroke-width":20,opacity:.002}),r.centerConstraints.fixed||f()(r.centerPoint.mouseTarget.getMouseTarget()).on("vmouseover vmouseout",(function(e){r.centerPoint.highlight||r.centerPoint.dragging?r.circ.animate(r.circleHighlightStyle,50):r.circ.animate(r.circleNormalStyle,50)})),r.toFront=function(){r.circ.toFront(),r.perim.toFront(),r.centerPoint.visibleShape.toFront(),r.centerConstraints.fixed||r.centerPoint.mouseTarget.toFront()},r.centerPoint.onMove=function(e,n){r.toFront(),r.circ.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(n)[1]}),r.perim.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(n)[1]}),r.onMove&&r.onMove(e,n)},f()(r.centerPoint).on("move",(function(){r.center=this.coord,f()(r).trigger("move")})),r.setCenter=function(e,t){r.centerPoint.setCoord([e,t]),r.centerPoint.onMove(e,t),r.center=[e,t]},r.setRadius=function(e){r.radius=e,r.perim.attr({r:t.scaleVector(e)[0]}),r.circ.attr({rx:t.scaleVector(e)[0],ry:t.scaleVector(e)[1]})},r.remove=function(){r.centerPoint.remove(),r.circ.remove(),r.perim.remove()};var s=[[-1*Math.PI,-.875*Math.PI,"ew-resize"],[-.875*Math.PI,-.625*Math.PI,"nesw-resize"],[-.625*Math.PI,-.375*Math.PI,"ns-resize"],[-.375*Math.PI,-.125*Math.PI,"nwse-resize"],[-.125*Math.PI,.125*Math.PI,"ew-resize"],[.125*Math.PI,.375*Math.PI,"nesw-resize"],[.375*Math.PI,.625*Math.PI,"ns-resize"],[.625*Math.PI,.875*Math.PI,"nwse-resize"],[.875*Math.PI,1*Math.PI,"ew-resize"]];return f()(r.perim.node).on("vmousemove",(e=>{var[t,n]=this.getMouseCoord(e);t-=r.center[0],n-=r.center[1];var i=Math.atan2(n,t);s.forEach((function(e){var[t,n,s]=e;i>=t&&i<n&&f()(r.perim.node).css("cursor",s)}))})),f()(r.perim.node).css("cursor","nesw-resize"),r.perim.node.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1}),f()(r.perim.node).on("vmouseover vmouseout vmousedown",(function(e){if("vmouseover"===e.type)r.highlight=!0,$t||(r.circ.animate(r.circleHighlightStyle,50),r.centerPoint.visibleShape.animate(r.centerHighlightStyle,50));else if("vmouseout"===e.type)r.highlight=!1,r.dragging||r.centerPoint.dragging||(r.circ.animate(r.circleNormalStyle,50),r.centerPoint.visibleShape.animate(r.centerNormalStyle,50));else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),r.toFront();var n=r.radius;f()(document).on("vmousemove vmouseup",(function(e){if(e.preventDefault(),r.dragging=!0,$t=!0,"vmousemove"===e.type){var i=t.constrainToBounds(t.getMouseCoord(e),10),s=Nt.getDistance(r.centerPoint.coord,i);s=Math.max(r.minRadius,Math.round(s/r.snapRadius)*r.snapRadius);var o=r.radius,a=!0;if(r.onResize){var l=r.onResize(s,o);p.a.isNumber(l)?s=l:!1===l&&(a=!1)}a&&(r.setRadius(s),f()(r).trigger("move"))}else"vmouseup"===e.type&&(f()(document).off("vmousemove vmouseup"),r.dragging=!1,$t=!1,r.onResizeEnd&&r.onResizeEnd(r.radius,n))}))}})),r},addRotateHandle:function(e){var t=this,r=e.center,n=e.radius,i=e.lengthAngle||30,s=e.hideArrow||!1,o=e.mouseTarget,a=p.a.uniqueId("rotateHandle");p.a.isArray(r)&&(r={coord:r});var l=t.addMovablePoint({coord:y.c.addVector(r.coord,y.e.cartFromPolarDeg(n,e.angleDeg||0)),constraints:{fixedDistance:{dist:n,point:r}},mouseTarget:o});r.toFront();var h,c=r.coord,u=l.coord,d=u,m=!1,g=!1,v=function(n){if(!s){var o=y.e.subtract(n,r.coord),a=y.e.polarDegFromCart(o)[1];h&&h.remove(),h=function(e,t,r,n,i,s,o){var a=function(n,i){var o=r+i,a=y.e.cartFromPolarDeg(o,s+n),l=y.e.add(t,a),h=e.scalePoint(l);return h[0]+","+h[1]},l=e.scaleVector(r-n),h=e.scaleVector(r+n);return e.raphael.path(" M"+a(i,-n)+" L"+a(i,-3*n)+" L"+a(2*i,0)+" L"+a(i,3*n)+" L"+a(i,n)+" A"+h[0]+","+h[1]+",0,0,1,"+a(-i,n)+" L"+a(-i,3*n)+" L"+a(-2*i,0)+" L"+a(-i,-3*n)+" L"+a(-i,-n)+" A"+l[0]+","+l[1]+",0,0,0,"+a(i,-n)+" Z").attr({stroke:null,fill:o?Et.INTERACTING:Et.INTERACTIVE})}(t,r.coord,e.radius,m||g?e.hoverWidth/2:e.width/2,i,a,m||g)}};f()(r).on("move."+a,(function(){var e=y.e.subtract(r.coord,c);l.setCoord(y.e.add(l.coord,e)),v(l.coord),c=r.coord,l.constraints.fixedDistance.point=r,u=l.coord})),l.onMove=function(t,n){m||(d=u,m=!0);var i=[t,n];if(e.onMove){var s=y.e.polarDegFromCart(y.e.subtract(u,r.coord)),o=y.e.polarDegFromCart(y.e.subtract(i,r.coord)),a=s[1],l=o[1],h=e.onMove(l,a);null!=h&&!0!==h&&(!1===h&&(h=a),i=y.e.add(r.coord,y.e.cartFromPolarDeg(s[0],h)))}return v(i),u=i,i},l.onMoveEnd=function(){if(m=!1,v(l.coord),e.onMoveEnd){var t=y.e.polarDegFromCart(y.e.subtract(d,r.coord)),n=y.e.polarDegFromCart(y.e.subtract(l.coord,r.coord));e.onMoveEnd(n[1],t[1])}},l.visibleShape.remove(),o||l.mouseTarget.attr({scale:2});var b=f()(l.mouseTarget.getMouseTarget());b.bind("vmouseover",(function(e){g=!0,v(l.coord)})),b.bind("vmouseout",(function(e){g=!1,v(l.coord)})),v(l.coord);var x=l.remove;return l.remove=function(){x.call(l),h&&h.remove(),f()(r).off("move."+a)},l.update=function(){v(l.coord)},l},addReflectButton:function(e){var t,r=this,n=e.line,i=r.addMovablePoint({constraints:e.constraints,coord:y.a.midpoint([n.pointA.coord,n.pointZ.coord]),snapX:r.snap[0],snapY:r.snap[1],onMove:function(e,t){return!1},onMoveEnd:function(t,r){e.onMoveEnd&&e.onMoveEnd.call(this,t,r)}}),s=!1,o=!1,a=function(){return s},l=p.a.map([0,1],(function(t){var r=t?e.highlightStyle:e.normalStyle;return p.a.map([0,1],(function(e){return p.a.defaults({"fill-opacity":e},r)}))})),h=function(e){return o&&(e=!e),l[+a()][+e]},c=function(n,i){t&&t.remove(),t=function(e,t,r,n,i,s,o){y.c.equal(r[0],r[1])&&(r=[r[0],y.c.addVector(r[0],[1,1])]);var a=y.e.normalize(y.e.subtract(r[1],r[0])),l=y.e.scale(a,n/2),h=y.e.scale(a,i),c=y.e.rotateDeg(h,90),p=y.e.rotateDeg(h,-90),u=y.e.negate(l),d=y.e.rotateDeg(l,90),m=y.e.rotateDeg(l,-90),f=y.c.addVectors(t,c),g=y.c.addVectors(t,p),v=y.c.addVectors(t,c,l,d),b=y.c.addVectors(t,c,u,d),x=y.c.addVectors(t,p,l,m),w=y.c.addVectors(t,p,u,m),k=e.path([f,v,b,!0],s),C=e.path([g,x,w,!0],o);return{remove:function(){k.remove(),C.remove()}}}(r,n,i,a()?1.5*e.size:e.size,a()?.125*e.size:.25,h(0),h(1))},u=function(e,t){e=e||n.pointA.coord,t=t||n.pointZ.coord;var r=y.a.midpoint([e,t]);i.setCoord(r),c(r,[e,t])};f()(n).on("move",p.a.bind(u,i,null,null));var d=f()(i.mouseTarget.getMouseTarget());d.on("vclick",(function(){!1!==e.onClick()&&(o=!o,c(i.coord,[n.pointA.coord,n.pointZ.coord]))})),n.pointA.toFront(),n.pointZ.toFront(),i.visibleShape.remove();var m=r.scaleVector(e.size)[0]/20;i.mouseTarget.attr({scale:1.5*m}),d.css("cursor","pointer"),d.bind("vmouseover",(function(e){s=!0,c(i.coord,[n.pointA.coord,n.pointZ.coord])})),d.bind("vmouseout",(function(e){s=!1,c(i.coord,[n.pointA.coord,n.pointZ.coord])}));var g=i.remove;return i.remove=function(){t.remove(),g.call(i)},i.update=u,i.isFlipped=function(){return o},u(),i},protractor:function(e){return new Jt(this,e)},ruler:function(e){return new er(this,e||{})},addPoints:Vt}),p.a.extend(tr.prototype,{points:[],snapDegrees:0,snapOffsetDeg:0,angleLabel:"",numArcs:1,pushOut:0,fixed:!1,addMoveHandlers:function(){var e=this.graphie;function t(t,r){return Nt.getDistance(e.scalePoint(t),e.scalePoint(r))<30}var r=this.points;r[1].onMove=function(n,i){var s=r[1].coord,o=[n,i],a=Vt(o,Yt(s)),l=!0,h={};return p.a.each([0,2],(function(n){var i=Vt(r[n].coord,a),s=Nt.findAngle(o,i);s*=Math.PI/180,i=e.constrainToBoundsOnAngle(i,10,s),h[n]=i,t(o,i)&&(l=!1)})),l&&p.a.each(h,(function(e,t){r[t].setCoord(e)})),l};var n=this.snapDegrees,i=this.snapOffsetDeg;p.a.each([0,2],(function(s){r[s].onMove=function(s,o){var a=[s,o],l=r[1].coord;if(t(l,a))return!1;if(n){var h=Nt.findAngle(a,l);h=Math.round((h-i)/n)*n+i;var c=Nt.getDistance(a,l);return Vt(l,e.polar(c,h))}return!0}})),f()(r).on("move",function(){this.update(),f()(this).trigger("move")}.bind(this))},addHighlightHandlers:function(){var e=this.points[1];e.onHighlight=function(){p.a.each(this.points,(function(e){e.visibleShape.animate(this.highlightStyle,50)}),this),p.a.each(this.rays,(function(e){e.visibleLine.animate(this.highlightStyle,50),e.arrowStyle=p.a.extend({},e.arrowStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke})}),this),this.angleStyle=p.a.extend({},this.angleStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke}),this.update()}.bind(this),e.onUnhighlight=function(){p.a.each(this.points,(function(e){e.visibleShape.animate(this.normalStyle,50)}),this),p.a.each(this.rays,(function(e){e.visibleLine.animate(e.normalStyle,50),e.arrowStyle=p.a.extend({},e.arrowStyle,{color:e.normalStyle.stroke,stroke:e.normalStyle.stroke})}),this),this.angleStyle=p.a.extend({},this.angleStyle,{color:Et.DYNAMIC,stroke:Et.DYNAMIC}),this.update()}.bind(this)},_getClockwiseAngle:function(e){return Nt.findAngle(e[2],e[0],e[1])+0},isReflex:function(){return this.reflex},isClockwise:function(){return this._getClockwiseAngle(this.coords)>180===this.reflex},getClockwiseCoords:function(){return this.isClockwise()?p.a.clone(this.coords):p.a.clone(this.coords).reverse()},update:function(e){var t=this.coords;this.coords=p.a.pluck(this.points,"coord"),p.a.invoke(this.points,"updateLineEnds");var r=this._getClockwiseAngle(t),n=this._getClockwiseAngle(this.coords),i=r>180,s=n>180;this.allowReflex&&(null==e&&(e=i!==s&&Math.abs(n-r)<180),e&&(this.reflex=!this.reflex)),p.a.invoke(this.temp,"remove"),this.temp=this.graphie.labelAngle({point1:this.coords[0],vertex:this.coords[1],point3:this.coords[2],label:this.labeledAngle,text:this.angleLabel,numArcs:this.numArcs,pushOut:this.pushOut,clockwise:this.reflex===s,style:this.angleStyle})},remove:function(){p.a.invoke(this.rays,"remove"),p.a.invoke(this.temp,"remove"),this.labeledAngle.remove()}});var rr=Pe.nestedMap,nr=Pe.deepEq;function ir(e){p.a.extend(this,e)}var sr=function(){throw new le("Abstract method! Must be implemented by Graphie Movable"+this.constructor.displayName,oe.NotAllowed)};p.a.extend(ir.prototype,{movableProps:[],add:sr,modify:sr,remove:sr,toFront:function(){},componentDidMount:function(){}});var or=function(e){var t=function e(t){if(!(this instanceof e))throw new le("Use createElement or JSX with graphie movables",oe.NotAllowed);return this.props=function(e,t){return p.a.extend({},e,{children:p.a.filter(p.a.flatten(t),p.a.identity)})}(t,t.children||[]),this};return e.displayName=e.displayName||p.a.uniqueId("GraphieClass"),t.displayName=e.displayName,(t.prototype=new ir(e)).constructor=t,t},ar={GraphieMovable:ir,createClass:or,createSimpleClass:function(e){return or({displayName:e.name||p.a.uniqueId("GraphieSimpleClass"),movableProps:["children"],add:function(t){this._elements=e(t,this.props),this._prevProps=this.props},modify:function(e){if(!nr(this.props,this._prevProps))return this.remove(),this.add(e),this._prevProps=this.props,"reordered"},remove:function(){rr(this._elements,(e=>{e&&e.remove()})),this._elements=null,this._prevProps=null},toFront:function(){rr(this._elements,(e=>{p.a.isFunction(e.toFront)&&e.toFront()}))}})}},lr=function(e){var t=e.graphie.scalePoint(e.coord(0)),r=e.graphie.scalePoint(e.coord(1));return y.e.polarDegFromCart(y.e.subtract(r,t))[1]},hr=function(e,t,r){var n=e.range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),i=e.unscaleVector(y.e.cartFromPolarDeg(1,r)),s=y.e.scale(y.e.normalize(i),n),o=y.e.add(t,s),a=y.e.polarDegFromCart(i)[1];return e.constrainToBoundsOnAngle(o,4,a*Math.PI/180)},cr=function(e,t){var r=[.75,0],n=[[-3,4],[-2.75,2.5],[0,.25],r,[0,-.25],[-2.75,-2.5],[-3,-4]];n=p.a.map(n,(function(e){var t=y.e.subtract(e,r),n=y.e.scale(t,1.4);return y.e.add(r,n)}));var i=p.a.map(n,e.unscalePoint),s={center:e.unscalePoint(r),createPath:function(e){for(var t="M"+e[0][0]+" "+e[0][1],r=1;r<e.length;r+=3)t+="C"+e[r][0]+" "+e[r][1]+" "+e[r+1][0]+" "+e[r+1][1]+" "+e[r+2][0]+" "+e[r+2][1];return t}},o=new Wt(e,i,s);return o.attr(p.a.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),o.toCoordAtAngle=function(t,n){var i=e.scalePoint(hr(e,t,n));o.transform("translateX("+(i[0]+1.4*r[0])+"px) translateY("+(i[1]+1.4*r[1])+"px) translateZ(0) rotate("+(360-he.bound(n))+"deg)")},o},pr={draw:function(){this.draw()},pointsToFront:function(e){p.a.invoke(e.points,"toFront")}};pr.standard=[pr.draw,pr.pointsToFront];var ur={draw:function(){this.draw()}};ur.standard=[ur.draw];var dr={basic:function(e){var t=this.graphie,r=this.coord(0),n=this.coord(1);if(!this.state.visibleShape){this.state.visibleShape=new Ht(t,r,n,{thickness:10}),this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}var i=lr(this);e.extendLine?(r=hr(t,r,360-i),n=hr(t,n,(540-i)%360)):e.extendRay&&(n=hr(t,n,360-i));var s=[this.state.visibleShape];this.mouseTarget()&&s.push(this.mouseTarget()),p.a.each(s,(function(e){e.moveTo(r,n)}))},arrows:function(e){null==this._arrows&&(this._arrows=[],e.extendLine?(this._arrows.push(cr(this.graphie,this.normalStyle())),this._arrows.push(cr(this.graphie,this.normalStyle()))):e.extendRay&&this._arrows.push(cr(this.graphie,this.normalStyle())));var t=lr(this),r=[360-t,(540-t)%360];p.a.each(this._arrows,(function(e,t){e.toCoordAtAngle(this.coord(t),r[t])}),this)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(e.highlightStyle,50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(e.normalStyle,50)}};dr.standard=[dr.basic,dr.arrows,dr.highlight];var mr={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},arrows:function(){null!=this._arrows&&p.a.invoke(this._arrows,"remove"),this._arrows=null}};mr.standard=[mr.basic,mr.arrows];var fr={fixed:function(){return function(){return!1}},snap:function(e){return function(t,r){if(null===e)return!0;var n=y.e.subtract(t,r);return e=e||this.graphie.snap,n=y.c.roundTo(n,e),y.e.add(r,n)}},bound:function(e,t,r){return void 0===r&&(r=void 0===e?10:0),function(n,i){var s=this.graphie,o=y.e.subtract(n,i);e=e||s.range,void 0===t&&(t=s.snap);var a=s.unscalePoint([r,s.ypixels-r]),l=s.unscalePoint([s.xpixels-r,r]);t&&(a=y.c.ceilTo(a,t),l=y.c.floorTo(l,t));var h=p.a.map(this.coords(),(function(e,t){var r=y.e.subtract(l,e);return[y.e.subtract(a,e),r]})),c=p.a.reduce(h,(function(e,t){var r=t[0],n=t[1];return[Math.max(r[0],Math.min(n[0],e[0])),Math.max(r[1],Math.min(n[1],e[1]))]}),o);return y.e.add(i,c)}},standard:null},gr={updatePoints:function(e,t){var r=y.e.subtract(e,t);p.a.each(this.state.points,(function(e){e.setCoord(y.e.add(e.coord(),r))}))},standard:null},vr={add:pr,modify:ur,draw:dr,remove:mr,onMoveStart:{standard:null},constraints:fr,onMove:gr,onMoveEnd:{standard:null}},yr=wt.assert,br=wt.normalizeOptions,xr=["add","draw","remove","onMoveStart","constraints","onMove","onMoveEnd"],wr={points:null,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,extendLine:!1,extendRay:!1},kr={visibleShape:null,mouseTarget:null},Cr=function(e,t,r){yr(null!=e),yr(null!=r),p.a.extend(this,{graphie:e,movable:t,state:{id:p.a.uniqueId("movableLine")}}),this.modify(p.a.extend({},kr,r))};p.a.extend(Cr,vr),wt.createGettersFor(Cr,p.a.extend({},wr,kr)),wt.addMovableHelperMethodsTo(Cr),p.a.extend(Cr.prototype,{cloneState:function(){return p.a.extend(this.movable.cloneState(),{coords:this.coords()},this.state)},_createDefaultState:function(){return p.a.extend({id:this.state.id},br(xr,Ft.pluck(vr,"standard")),wr)},modify:function(e){this.update(p.a.extend(this._createDefaultState(),e))},update:function(e){var t=this,r=this.graphie,n=t.state=p.a.extend(t.state,br(xr,e)),i=n.static?Et.DYNAMIC:Et.INTERACTIVE;if(n.normalStyle=p.a.extend({stroke:i,"stroke-width":2},n.normalStyle),n.highlightStyle=p.a.extend({stroke:Et.INTERACTING,"stroke-width":3},n.highlightStyle),!n.static&&!n.mouseTarget){n.mouseTarget=new Ht(r,this.coord(0),this.coord(1),{thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"}),n.mouseTarget.attr({fill:"#000",opacity:0})}n.static&&n.mouseTarget&&(n.mouseTarget.remove(),n.mouseTarget=null),t.movable.modify(p.a.extend({},n,{mouseTarget:n.mouseTarget,add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,r){var n=y.e.subtract(e,r);t._totalDelta=y.e.add(t._totalDelta,n);var i=y.e.add(t._initialRefCoord,t._totalDelta);!1!==(i=t._applyConstraints(i,t._prevRefCoord))&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),n.added||(t.prevState={},t._fireEvent(n.add,t.cloneState(),t.prevState),n.added=!0,p.a.invoke(n.points,"listen","onMove",n.id,t.draw.bind(t)),t.prevState=t.cloneState()),t._fireEvent(n.modify,t.cloneState(),t.prevState)},coords:function(){return p.a.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.points&&p.a.invoke(this.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove()},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});var Er={path:"M8.70710678,12.2928932 C8.31658249,11.9023689 7.68341751,11.9023689 7.29289322,12.2928932 C6.90236893,12.6834175 6.90236893,13.3165825 7.29289322,13.7071068 L9.82842712,16.2426407 C10.2207367,16.6349502 10.8574274,16.6328935 11.2471942,16.2380576 L16.7116603,10.7025237 C17.0996535,10.3094846 17.0955629,9.67633279 16.7025237,9.28833966 C16.3094846,8.90034653 15.6763328,8.90443714 15.2883397,9.29747629 L10.5309507,14.1167372 L8.70710678,12.2928932 Z",width:24,height:24},Sr={path:"M6.072 10.4l6.175-7.058a1 1 0 1 1 1.506 1.317L6.769 12.64a1 1 0 0 1-1.55-.054L2.203 8.604a1 1 0 1 1 1.594-1.208L6.072 10.4z",width:16,height:16},Tr={path:"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z",width:100,height:63.034},Mr={path:"M62.808 49.728q0 3.36-2.352 5.88l-41.72 41.664q-2.352 2.408-5.768 2.408t-5.768-2.408l-4.872-4.76q-2.352-2.52-2.352-5.88t2.352-5.712l31.08-31.136-31.08-31.024q-2.352-2.52-2.352-5.88t2.352-5.712l4.872-4.76q2.296-2.408 5.768-2.408t5.768 2.408l41.72 41.664q2.352 2.296 2.352 5.656z",width:63.034,height:100},_r={path:"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},Ar={path:"M50.046 83.676q1.767 0 2.907-1.14l29.526-29.526q1.197-1.197 1.197-2.907t-1.197-2.964l-5.928-5.928q-1.197-1.14-2.964-1.14t-2.907 1.14l-12.312 12.312l0-32.661q0-1.71-1.254-2.964t-2.907-1.254l-8.322 0q-1.71 0-2.964 1.254t-1.254 2.964l0 32.661l-12.312-12.312q-1.197-1.254-2.907-1.254t-2.907 1.254l-5.928 5.928q-1.197 1.197-1.197 2.964t1.197 2.907l29.469 29.526q1.197 1.14 2.964 1.14zm49.989-33.63q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},Ir={path:"M54.207 83.391q1.653 0 2.907-1.254t1.254-2.907l0-32.718l12.312 12.312q1.254 1.254 2.964 1.254t2.907-1.254l5.928-5.928q1.197-1.197 1.14-2.964 0-1.767-1.14-2.907l-29.526-29.526q-1.197-1.14-2.907-1.14t-2.964 1.14l-29.469 29.526q-1.197 1.254-1.197 2.964t1.197 2.907l5.928 5.928q1.197 1.197 2.907 1.197t2.907-1.197l12.312-12.312l0 32.718q0 1.653 1.254 2.907t2.964 1.254l8.322 0zm45.828-33.345q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100},Or={path:"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z",width:100,height:99.944},Nr={path:"M58.368 81.225l0-12.369q0-.912-.57-1.539t-1.425-.627l-12.54 0q-.855-.057-1.482.627t-.684 1.539l0 12.369q-.057.855.627 1.482t1.539.684l12.54 0q.855 0 1.425-.627t.57-1.539zm1.026-62.871q0-1.596-2.223-1.71l-14.307 0q-2.109 0-2.223 1.71l1.14 40.47q0 .627.627 1.14t1.539.456l12.084 0q.912-.057 1.539-.513t.684-1.083zm-9.348-18.354q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669z",width:100,height:99.944},Pr={path:"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z",width:100,height:76.637},Rr={path:"M99.758 43.09l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-29.45 0l0 29.45q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-29.45l-29.45 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l29.45 0l0-29.45q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836l0 29.45l29.45 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:100},Lr={path:"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z",width:100,height:100},Fr={path:"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z",width:24,height:24},Dr={path:"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z",width:23,height:23},zr={path:"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z",width:91.681,height:100},Br={path:"M10,6.6C10,7.2,9.8,8,9.3,9.1c0,0,0,0.1-0.1,0.1S9.2,9.3,9.2,9.4c0,0,0,0.1-0.1,0.1C9,9.6,9,9.6,8.9,9.6 c-0.1,0-0.1,0-0.1-0.1c0,0,0-0.1,0-0.1c0,0,0-0.1,0-0.1s0-0.1,0-0.1c0-0.3,0-0.5,0-0.7c0-0.4,0-0.7-0.1-1C8.6,7.1,8.5,6.9,8.4,6.7S8.2,6.3,8,6.1C7.8,5.9,7.6,5.8,7.4,5.7S6.9,5.5,6.7,5.5S6.1,5.4,5.8,5.4c-0.3,0-0.6,0-1,0H3.6v1.4c0,0.1,0,0.2-0.1,0.3C3.4,7.1,3.3,7.1,3.2,7.1C3.1,7.1,3,7.1,3,7L0.1,4.1C0,4.1,0,4,0,3.9s0-0.2,0.1-0.3L3,0.8C3,0.7,3.1,0.7,3.2,0.7c0.1,0,0.2,0,0.3,0.1C3.5,0.9,3.6,0.9,3.6,1v1.4h1.2c2.6,0,4.3,0.7,4.9,2.2C9.9,5.2,10,5.8,10,6.6z",width:10,height:10},qr={path:"M8,13 L16,13 C16.5522847,13 17,12.5522847 17,12 C17,11.4477153 16.5522847,11 16,11 L8,11 C7.44771525,11 7,11.4477153 7,12 C7,12.5522847 7.44771525,13 8,13 Z",width:24,height:24},Hr=Object.freeze({__proto__:null,iconCheck:Er,iconCheckMedium:Sr,iconChevronDown:Tr,iconChevronRight:Mr,iconCircle:_r,iconCircleArrowDown:Ar,iconCircleArrowUp:Ir,iconCircleThin:Or,iconDesktop:{path:"M94.208 52.119l0-43.746q0-.69-.506-1.15t-1.196-.506l-84.088 0q-.69 0-1.196.506t-.506 1.15l0 43.746q0 .69.506 1.196t1.196.506l84.088 0q.69 0 1.196-.506t.506-1.196zm6.716-43.746l0 57.224q0 3.45-2.484 5.934t-5.934 2.484l-28.566 0q0 3.128 2.53 7.774.828 1.61.828 2.622t-1.012 2.07q-1.012 1.012-2.346.966l-26.91 0q-1.38 0-2.392-1.012t-1.012-2.024q0-1.058 1.656-4.14t1.748-6.256l-28.612 0q-3.45 0-5.934-2.484t-2.484-5.934l0-57.224q0-3.45 2.484-5.934t5.934-2.438l84.088 0q3.45 0 5.98 2.438 2.438 2.484 2.438 5.934z",width:100,height:86.648},iconDropdownArrow:{path:"M9 9.8c0 .5.7 1.7 1.5 2.8 1.5 1.9 1.5 1.9 3 0C15.7 9.7 15.4 9 12 9c-1.6 0-3 .4-3 .8z",width:24,height:24},iconExclamationSign:Nr,iconGear:{path:"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z",width:1792,height:1792},iconMobilePhone:{path:"M36.04 89.557q0-2.584-1.836-4.42t-4.42-1.836-4.352 1.836q-1.836 1.836-1.836 4.42t1.836 4.352 4.42 1.836q2.652-.068 4.42-1.836t1.768-4.352zm16.184-12.444l0-54.74q0-1.088-.748-1.768t-1.768-.68l-39.78 0q-1.088 0-1.768.748t-.68 1.7l0 54.74q0 1.02.748 1.768t1.7.68l39.78 0q1.02-.068 1.768-.748t.748-1.7zm-14.892-65.892q0-1.224-1.292-1.292l-12.444 0q-1.224.068-1.224 1.292t1.224 1.224l12.444 0q1.292 0 1.292-1.224zm22.372-1.292l0 79.628q0 3.944-2.992 6.936t-7.004 2.992l-39.78 0q-4.012 0-7.004-2.924-2.924-2.924-2.924-7.004l0-79.628q0-4.012 2.924-6.936t7.004-2.992l39.78 0q4.012-.068 7.004 2.924t2.992 7.004z",width:60.013,height:100},iconOk:Pr,iconPlus:Rr,iconRemove:Lr,iconStar:Fr,iconTryAgain:Dr,iconTablet:{path:"M45.322 90.706q0-1.86-1.302-3.224-1.364-1.364-3.224-1.364t-3.224 1.364-1.302 3.224q0 1.86 1.364 3.224 1.302 1.364 3.162 1.302 1.86.062 3.224-1.302t1.302-3.224zm27.218-11.346l0-68.014q0-.93-.682-1.612t-1.55-.682l-58.962 0q-.93 0-1.612.682t-.682 1.612l0 68.014q0 .93.682 1.612t1.612.62l58.962 0q.992-.062 1.612-.682t.62-1.55zm9.114-68.014l0 77.066q0 4.65-3.348 7.998t-7.998 3.348l-58.962 0q-4.65 0-7.998-3.348t-3.348-7.998l0-77.066q0-4.65 3.348-7.998t7.998-3.348l58.962 0q4.65 0 7.998 3.348t3.348 7.998z",width:81.852,height:100},iconTrash:zr,iconUndo:Br,iconMinus:qr}),Ur={constrain:function(){this.constrain()}};Ur.standard=[Ur.constrain];var Wr={draw:function(){this.draw()}};Wr.standard=[Wr.draw];var jr={basic:function(e,t){var r=this.graphie;if(!this.state.visibleShape){var n=[this.pointSize()/r.scale[0],this.pointSize()/r.scale[1]],i={maxScale:Math.max(this.highlightStyle().scale,this.normalStyle().scale),padding:10,shadow:e.shadow};this.state.visibleShape=new Bt(r,this.coord(),n,i),this.state.visibleShape.attr(p.a.omit(this.normalStyle(),"scale")),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}e.normalStyle===t.normalStyle||p.a.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.moveTo(this.coord()),this.mouseTarget()&&this.mouseTarget().moveTo(this.coord())},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};jr.standard=[jr.basic,jr.highlight];var Gr={basic:function(){this.state.visibleShape&&(this.state.visibleShape.remove(),this.state.visibleShape=null)}};Gr.standard=Gr.basic;var Vr={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,y.c.roundTo(t,e))}},bound:function(e,t,r){return void 0===r&&(r=void 0===e?10:0),function(n,i,s){var o=this.graphie;e=e||o.range,void 0===t&&(t=o.snap);var a=o.unscalePoint([r,o.ypixels-r]),l=o.unscalePoint([o.xpixels-r,r]);return t&&(a=y.c.ceilTo(a,t),l=y.c.floorTo(l,t)),s&&s.onOutOfBounds?((n[0]>l[0]||n[0]<a[0]||n[1]>l[1]||n[1]<a[1])&&(s.onSkipRemaining(),s.onOutOfBounds()),n):[Math.max(a[0],Math.min(l[0],n[0])),Math.max(a[1],Math.min(l[1],n[1]))]}},standard:null},Yr={add:Ur,modify:Wr,draw:jr,remove:Gr,onMoveStart:{standard:null},constraints:Vr,onMove:{standard:null},onMoveEnd:{standard:null},onClick:{standard:null}},Xr=wt.assert,Qr=wt.normalizeOptions,{processMath:Kr}=At,$r=p.a.keys(Yr),Zr={coord:[0,0],pointSize:4,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,shadow:!1,tooltip:!1},Jr={added:!1,hasMoved:!1,visibleShape:null,outOfBounds:!1,mouseTarget:null,touchOffset:null},en=[],tn=function(e,t,r){p.a.extend(this,{graphie:e,movable:t,state:{id:p.a.uniqueId("movablePoint")}}),this.modify(p.a.extend({},Jr,r))};function rn(e){var t,r=p.a.zip(e,e.slice(1).concat(e.slice(0,1))),n=p.a.map(r,(function(e){var t=e[0],r=e[1];return(r[0]-t[0])*(r[1]+t[1])}));return t=n,p.a.reduce(t,(function(e,t){return e+t}),0)>0}p.a.extend(tn,Yr),wt.createGettersFor(tn,p.a.extend({},Zr,Jr)),wt.addMovableHelperMethodsTo(tn),p.a.extend(tn.prototype,{cloneState:function(){return p.a.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return p.a.extend({id:this.state.id},Qr($r,Ft.pluck(Yr,"standard")),Zr)},modify:function(e){this.update(p.a.extend(this._createDefaultState(),e))},_showTooltip:function(e){this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className="tooltip-content",this.state.visibleShape.wrapper.className="tooltip",this.state.visibleShape.wrapper.appendChild(this._tooltip),en.push((()=>{this.state.added&&this._hideTooltip()}))),this._tooltip.firstChild&&this._tooltip.removeChild(this._tooltip.firstChild),this.state.visibleShape.wrapper.className="tooltip visible",this._tooltip.appendChild(document.createElement("span")),"string"==typeof e?Kr(this._tooltip.firstChild,e,!1):"function"==typeof e?e(this._tooltip.firstChild):this._tooltip.firstChild.appendChild(e)},_hideTooltip:function(){this._tooltip&&(this.state.visibleShape.wrapper.className="tooltip")},update:function(e){var t=this,r=t.graphie,n=p.a.extend(t.state,Qr($r,e));Xr(y.c.is(n.coord));var i=n.static?Et.DYNAMIC:Et.INTERACTIVE;if(n.normalStyle=p.a.extend({fill:i,stroke:i,scale:1},n.normalStyle),n.highlightStyle=p.a.extend({fill:Et.INTERACTING,stroke:Et.INTERACTING,scale:2},n.highlightStyle),!n.static&&!n.mouseTarget){var s=t.state.coord,o=r.unscaleVector(24);n.mouseTarget=new Bt(r,s,o,{mouselayer:!0,padding:0,interactiveKindForTesting:"movable-point"}),n.mouseTarget.attr({fill:"#000",opacity:0})}var a=()=>{this._showTooltip((e=>{g.render(h.createElement("span",{style:{fontSize:"2em"}},h.createElement(Y,G({},zr,{style:{position:"static",color:Et.INTERACTIVE,marginLeft:9,marginRight:9}}))),e)}))},l=n.coord;t.movable.modify(p.a.extend({},n,{add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:e=>{if(n.hasMoved=!1,l=n.coord,null==n.touchOffset){var r=!("ontouchstart"in window);n.touchOffset=r?[0,0]:y.e.subtract(l,e)}var i=n.visibleShape.wrapper;if(n.shadow){var s="none";i.style.webkitFilter=s,i.style.filter=s}if(n.showHairlines&&n.showHairlines(n.coord),en.forEach((e=>e())),n.tooltip&&(n.xOnlyTooltip?this._showTooltip("".concat(n.coord[0])):this._showTooltip("(".concat(n.coord[0],", ").concat(n.coord[1],")")),n.shadow)){var o=i.getElementsByClassName("tooltip-content")[0],a="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";o.style.webkitFilter=a,o.style.filter=a}t._fireEvent(n.onMoveStart,l,l),t.draw()},onMove:(e,r)=>{var i=y.e.add(e,n.touchOffset);t.moveTo(i),n.showHairlines&&(this.state.outOfBounds?n.hideHairlines():n.showHairlines(n.coord)),n.tooltip&&(this.state.outOfBounds||(n.xOnlyTooltip?this._showTooltip("".concat(n.coord[0])):this._showTooltip("(".concat(n.coord[0],", ").concat(n.coord[1],")")))),n.onRemove&&this.state.outOfBounds&&a()},onMoveEnd:()=>{t.isHovering()&&!n.hasMoved&&t._fireEvent(n.onClick,n.coord,l);var e=n.visibleShape.wrapper;if(n.shadow){var r="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.webkitFilter=r,e.style.filter=r}if(n.hideHairlines&&n.hideHairlines(),n.hasMoved)this._hideTooltip();else if(n.onRemove){a();var i=e.getElementsByClassName("tooltip-content")[0];i.style.webkitFilter="none",i.style.filter="none",this._tooltip.firstChild.addEventListener("touchstart",(e=>{e.stopPropagation()}),!0),this._tooltip.firstChild.addEventListener("touchend",(e=>{n.onRemove(),e.stopPropagation()}),!0)}else n.tooltip&&this._hideTooltip();n.outOfBounds&&n.onRemove(),t._fireEvent(n.onMoveEnd,n.coord,l),n.hasMoved=!1,n.touchOffset=null,t.draw()}})),n.added||(t.prevState={},t._fireEvent(n.add,t.cloneState(),t.prevState),n.added=!0,t.prevState=t.cloneState()),t._fireEvent(n.modify,t.cloneState(),t.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){var e=this._applyConstraints(this.coord(),this.coord());return y.c.is(e)&&this.setCoord(e),!1!==e},setCoord:function(e){Xr(y.c.is(e,2)),this.state.coord=p.a.clone(e),this.draw()},setCoordConstrained:function(e){Xr(y.c.is(e,2));var t=this._applyConstraints(e,this.coord());!1!==t&&(this.state.coord=p.a.clone(t),this.draw())},moveTo:function(e){var t=this.state;this.state.outOfBounds=!1;var r=this._applyConstraints(e,t.coord,t.onRemove?{onOutOfBounds:()=>{this.state.outOfBounds=!0}}:{});if(!1!==r&&(y.c.is(r)&&(e=r),!y.c.equal(e,t.coord))){var n=t.coord;t.coord=e,t.hasMoved=!0,this._fireEvent(t.onMove,t.coord,n),this.draw()}},normalStyle:function(){return p.a.clone(this.state.normalStyle)},highlightStyle:function(){return p.a.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()},grab:function(e){this.state.touchOffset=[0,0],this.movable.grab(e),this.moveTo(e)}});var nn={constrain:function(){this.constrain()},pointsToFront:function(e){p.a.invoke(e.points,"toFront")}};nn.standard=[nn.constrain,nn.pointsToFront];var sn={draw:function(){this.draw()}};sn.standard=[sn.draw];var on={basic:function(e,t){var r=this.graphie,n=this.path(e);this.state.visibleShape||(this.state.visibleShape=r.raphael.path(n),this.state.visibleShape.attr(this.normalStyle())),e.normalStyle===t.normalStyle||p.a.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.attr({path:n}),this.mouseTarget()&&this.mouseTarget().attr({path:n})},labels:function(e,t){var r=this.graphie,n=this,i=p.a.invoke(e.points,"coord"),s=rn(i),o=i.length;null!=n.state._labelCache&&p.a.invoke(n.state._labelCache,"remove"),n.state._labelCache=[],(e.angleLabels.length||e.showRightAngleMarkers.length)&&(null==n.state._labeledAngles&&(n.state._labeledAngles=p.a.times(Math.max(e.angleLabels.length,e.showRightAngleMarkers.length),(function(){return r.label([0,0],"","center",e.labelStyle)}))),p.a.each(n.state._labeledAngles,(function(t,a){n.state._labelCache.push(r.labelAngle({point1:i[(a-1+o)%o],vertex:i[a],point3:i[(a+1)%o],label:t,text:e.angleLabels[a],showRightAngleMarker:e.showRightAngleMarkers[a],numArcs:e.numArcs[a],clockwise:s,style:e.labelStyle}))}))),e.sideLabels.length&&(null==n.state._labeledSides&&(n.state._labeledSides=p.a.map(e.sideLabels,(function(t){return r.label([0,0],"","center",e.labelStyle)}))),p.a.each(n.state._labeledSides,(function(t,a){n.state._labelCache.push(r.labelSide({point1:i[a],point2:i[(a+1)%o],label:t,text:e.sideLabels[a],numArrows:e.numArrows[a],numTicks:e.numTicks[a],clockwise:s,style:e.labelStyle}))}))),e.vertexLabels.length&&(null==n.state._labeledVertices&&(n.state._labeledVertices=p.a.map(e.vertexLabels,(function(t){return r.label([0,0],"","center",e.labelStyle)}))),p.a.each(n.state._labeledVertices,(function(t,a){n.state._labelCache.push(r.labelVertex({point1:i[(a-1+o)%o],vertex:i[a],point3:i[(a+1)%o],label:t,text:e.vertexLabels[a],clockwise:s,style:e.labelStyle}))}))),n.state._labelCache=p.a.flatten(n.state._labelCache)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};on.standard=[on.basic,on.labels,on.highlight];var an={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},labels:function(){var e=[this.state._labeledSides,this.state._labeledVertices,this.state._labeledAngles,this.state._labelCache];p.a.each(e,(function(e){null!=e&&e.length&&p.a.invoke(e,"remove")}))}};an.standard=[an.basic,an.labels];var ln={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,y.c.roundTo(t,e))}},bound:function(e,t,r){return void 0===r&&(r=void 0===e?10:0),function(n,i){var s=this.graphie,o=y.e.subtract(n,i);e=e||s.range,void 0===t&&(t=s.snap);var a=s.unscalePoint([r,s.ypixels-r]),l=s.unscalePoint([s.xpixels-r,r]);t&&(a=y.c.ceilTo(a,t),l=y.c.floorTo(l,t));var h=p.a.map(this.coords(),(function(e,t){var r=y.e.subtract(l,e);return[y.e.subtract(a,e),r]})),c=p.a.reduce(h,(function(e,t){var r=t[0],n=t[1];return[Math.max(r[0],Math.min(n[0],e[0])),Math.max(r[1],Math.min(n[1],e[1]))]}),o);return y.e.add(i,c)}},standard:null},hn={updatePoints:function(e,t){var r=y.e.subtract(e,t);p.a.each(this.state.points,(function(e){e.setCoord(y.e.add(e.coord(),r))}))},standard:null},cn={add:nn,modify:sn,draw:on,remove:an,onMoveStart:{standard:null},constraints:ln,onMove:hn,onMoveEnd:{standard:null},onClick:{standard:null}},pn=wt.assert,un=wt.normalizeOptions,dn=p.a.keys(cn),mn={points:null,angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],closed:!0,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,labelStyle:null},fn={added:!1,hasMoved:!1,visibleShape:null,mouseTarget:null},gn=function(e,t,r){pn(null!=e),pn(null!=r),p.a.extend(this,{graphie:e,movable:t,state:{id:p.a.uniqueId("movablePolygon")}}),this.modify(p.a.extend({},fn,r))};p.a.extend(gn,cn),wt.createGettersFor(gn,p.a.extend({},mn,fn)),wt.addMovableHelperMethodsTo(gn),p.a.extend(gn.prototype,{cloneState:function(){return p.a.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return p.a.extend({id:this.state.id},un(dn,Ft.pluck(cn,"standard")),mn)},modify:function(e){this.update(p.a.extend(this._createDefaultState(),e))},update:function(e){var t=this,r=t.graphie,n=p.a.extend(t.state,un(dn,e)),i=n.static?Et.DYNAMIC:Et.INTERACTIVE;n.normalStyle=p.a.extend({},n.normalStyle,{"stroke-width":2,"fill-opacity":0,fill:i,stroke:i},e.normalStyle),n.highlightStyle=p.a.extend({},{stroke:Et.INTERACTING,"stroke-width":2,fill:Et.INTERACTING,"fill-opacity":.05},n.highlightStyle),n.labelStyle=p.a.extend({},{stroke:Et.DYNAMIC,"stroke-width":1,color:Et.DYNAMIC},n.labelStyle),n.static||n.mouseTarget||(n.mouseTarget=r.mouselayer.path(this.path()),n.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"})),t.movable.modify(p.a.extend({},n,{modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,r){var n=y.e.subtract(e,r);t._totalDelta=y.e.add(t._totalDelta,n);var i=y.e.add(t._initialRefCoord,t._totalDelta);!1!==(i=t._applyConstraints(i,t._prevRefCoord))&&(t._fireEvent(t.state.onMove,i,t._prevRefCoord),t._prevRefCoord=i)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),p.a.invoke(n.points,"listen","onMove",n.id,t.draw.bind(t)),n.added||(t.prevState={},t._fireEvent(n.add,t.cloneState(),t.prevState),n.added=!0,t.prevState=t.cloneState()),t._fireEvent(n.modify,t.cloneState(),t.prevState)},path:function(e){var t=this.graphie;e=e||this.state;var r=p.a.map(e.points,(function(e){return t.scalePoint(e.coord())}));return e.closed?r.push(!0):r=r.concat(p.a.clone(r).reverse()),Nt.unscaledSvgPath(r)},coords:function(){return p.a.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.points&&p.a.invoke(this.state.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){if(null!=this.points&&0!==this.points.length){var e=this.coord(0),t=this._applyConstraints(e,e);!1!==t&&this._fireEvent(this.state.onMove,t,e)}},normalStyle:function(){return p.a.clone(this.state.normalStyle)},highlightStyle:function(){return p.a.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});var vn=wt.normalizeOptions,yn=wt.assert,bn=["add","modify","draw","remove","onMoveStart","onMove","onMoveEnd","onClick"],xn={cursor:null},wn={added:!1,isHovering:!1,isMouseOver:!1,isDragging:!1,mouseTarget:null},kn=function(e,t){p.a.extend(this,{graphie:e,state:{id:p.a.uniqueId("movable")}}),this.modify(p.a.extend({},wn,t))};wt.createGettersFor(kn,p.a.extend({},xn,wn)),wt.addMovableHelperMethodsTo(kn),p.a.extend(kn.prototype,{cloneState:function(){return p.a.clone(this.state)},_createDefaultState:function(){return p.a.extend({id:this.state.id,add:[],modify:[],draw:[],remove:[],onMoveStart:[],onMove:[],onMoveEnd:[],onClick:[]},xn)},modify:function(e){this.update(p.a.extend({},this._createDefaultState(),e))},grab:function(e){yn(y.c.is(e));var t=this,r=t.graphie,n=t.state;n.isHovering=!0,n.isDragging=!0,r.isDragging=!0;var i=e,s=i;t._fireEvent(n.onMoveStart,i,i);var o=function(e){e.preventDefault();var i=r.getMouseCoord(e);t._fireEvent(n.onMove,i,s),t.draw(),s=i};f()(document).bind("vmousemove",o),f()(document).bind("vmouseup",(function e(a){f()(document).unbind("vmousemove",o),f()(document).unbind("vmouseup",e),n.isHovering&&t._fireEvent(n.onClick,s,i),n.isHovering=t.state.isMouseOver,n.isDragging=!1,r.isDragging=!1,t._fireEvent(n.onMoveEnd,s,i),t.draw()}))},update:function(e){var t,r=this,n=r.graphie,i=r.cloneState(),s=p.a.extend(r.state,vn(bn,e));s.mouseTarget&&!i.mouseTarget&&(t=s.mouseTarget.getMouseTarget?f()(s.mouseTarget.getMouseTarget()):f()(s.mouseTarget[0]),!("ontouchstart"in window)&&(t.on("vmouseover",(function(){s.isMouseOver=!0,n.isDragging||(s.isHovering=!0),r.state.added&&r.draw()})),t.on("vmouseout",(function(){s.isMouseOver=!1,s.isDragging||(s.isHovering=!1),r.state.added&&r.draw()}))),t[0].addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1}),t.on("vmousedown",(function(e){if(0===e.which||1===e.which){e.preventDefault();var t=n.getMouseCoord(e);r.grab(t)}})));s.mouseTarget&&void 0!==s.cursor&&(s.mouseTarget.getMouseTarget?f()(s.mouseTarget.getMouseTarget()):f()(s.mouseTarget[0])).css("cursor",s.cursor||"");s.added||(r._fireEvent(s.modify,r.cloneState(),{}),s.added=!0,r.prevState=r.cloneState()),r._fireEvent(s.modify,r.cloneState(),r.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.mouseTarget&&(f()(this.state.mouseTarget).off(),this.state.mouseTarget.remove(),this.state.mouseTarget=null)},toBack:function(){this.state.mouseTarget&&this.state.mouseTarget.toBack()},toFront:function(){this.state.mouseTarget&&this.state.mouseTarget.toFront()}});var Cn={MovablePoint:tn,addMovablePoint:function(e,t){var r=new kn(e,{});return new tn(e,r,t)},MovableLine:Cr,addMovableLine:function(e,t){var r=new kn(e,{});return new Cr(e,r,t)},MovablePolygon:gn,addMovablePolygon:function(e,t){var r=new kn(e,{});return new gn(e,r,t)},addMaybeMobileMovablePoint:function(e,t){var r=e.props.apiOptions.isMobile,n=r?{stroke:"#ffffff","stroke-width":3,fill:Et.INTERACTIVE}:{stroke:Et.INTERACTIVE,fill:Et.INTERACTIVE},i=Object.assign(n,t.normalStyle),s=Object.assign(r?U(U({},n),{},{"stroke-width":0,scale:.75}):{},t.highlightStyle),o=Object.assign({normalStyle:i,highlightStyle:s,shadow:r,tooltip:r&&e.props.showTooltips,showHairlines:e.showHairlines,hideHairlines:e.hideHairlines},r?{pointSize:7}:{});return Cn.addMovablePoint(e.graphie,Object.assign(t,o))}},En=ar.createClass({displayName:"MovablePoint",movableProps:["children"],_getProps:function(){if(this.props.isMobile){var e=this.props.isMobile,t=e?{stroke:"#ffffff","stroke-width":3,fill:Et.INTERACTIVE}:{stroke:Et.INTERACTIVE,fill:Et.INTERACTIVE},r=e?Object.assign(t,this.props.mobileStyleOverride||{}):Object.assign(t,this.props.normalStyle),n=e?U(U({},t),{},{"stroke-width":0,scale:.75}):this.props.highlightStyle,i=Object.assign({normalStyle:r,highlightStyle:n,shadow:e,tooltip:e&&this.props.showTooltips},e?{pointSize:7}:{});return Object.assign(this.props,i)}return this.props},add:function(e){this.point=Cn.addMovablePoint(e,this._getProps())},modify:function(){this.point.modify(this._getProps())},remove:function(){this.point.remove()},toFront:function(){this.point.toFront()},grab:function(e){this.point.grab(e)}});p.a.extend(En,Cn.MovablePoint);var Sn=ar.createClass({displayName:"MovableLine",movableProps:["children"],add:function(e){var t=p.a.pluck(this.props.children,"point"),r=p.a.extend({},this.props,{points:t});this.line=Cn.addMovableLine(e,r)},modify:function(){var e=p.a.pluck(this.props.children,"point"),t=p.a.extend({},this.props,{points:e});this.line.modify(t)},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}});p.a.extend(Sn,Cn.MovableLine);var Tn=ar.createSimpleClass(((e,t)=>{var r=t.coord;t.unscaled&&(r=e.unscalePoint(r));var n=null;return ie().JIPT.useJIPT?(n=e.label(r,t.text,t.direction,!1,t.style),ie().graphieMovablesJiptLabels.addLabel(n,t.tex)):n=e.label(r,t.text,t.direction,t.tex,t.style),n})),Mn=ar.createClass({displayName:"Line",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.line=this.graphie.line(t.start,t.end,t.style)},modify:function(){var e=this.props,t=this.graphie.svgPath([e.start,e.end]);this.line.attr(p.a.extend({},e.style,{path:t}))},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}}),_n=ar.createClass({displayName:"Parabola",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.parabola=this.graphie.parabola(t.a,t.b,t.c,t.style)},modify:function(){var e=this.props,t=this.graphie.svgParabolaPath(e.a,e.b,e.c);this.parabola.attr(p.a.extend({},e.style,{path:t}))},remove:function(){this.parabola.remove()},toFront:function(){this.parabola.toFront()}}),An=ar.createClass({displayName:"Sinusoid",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.sinusoid=this.graphie.sinusoid(t.a,t.b,t.c,t.d,t.style)},modify:function(){var e=this.props,t=this.graphie.svgSinusoidPath(e.a,e.b,e.c,e.d);this.sinusoid.attr(p.a.extend({},e.style,{path:t}))},remove:function(){this.sinusoid.remove()},toFront:function(){this.sinusoid.toFront()}}),In=ar.createSimpleClass(((e,t)=>e.plot(t.fn,t.range,t.style))),On=ar.createSimpleClass(((e,t)=>e.plotParametric(t.fn,t.range,t.style))),Nn=ar.createSimpleClass(((e,t)=>e.ellipse(t.coord,e.unscaleVector([4,4]),{fill:t.color||Et.BLACK,stroke:t.color||Et.BLACK}))),Pn=ar.createClass({displayName:"Path",movableProps:["children"],add:function(e){var t=this.props;this.graphie=e,this.path=this.graphie.path(t.coords,t.style)},modify:function(){var e=this.props,t=this.graphie.svgPath(e.coords);this.path.attr({path:t})},remove:function(){this.path.remove()},toFront:function(){this.path.toFront()}}),Rn={Arc:ar.createSimpleClass(((e,t)=>{var r=t.center,n=t.radius;return t.unscaled&&(r=e.unscalePoint(r),n=e.unscaleVector(n)),e.arc(r,n,t.startAngle,t.endAngle,t.sector,t.style)})),Circle:ar.createSimpleClass(((e,t)=>e.circle(t.center,t.radius,t.style))),Label:Tn,Line:Mn,MovableLine:Sn,MovablePoint:En,Parabola:_n,Path:Pn,Plot:In,PlotParametric:On,Point:Nn,Sinusoid:An,Rect:ar.createSimpleClass(((e,t)=>e.rect(t.x,t.y,t.width,t.height,t.style)))},Ln=ar.GraphieMovable,Fn=Nt.createGraphie,{deepEq:Dn,nestedMap:zn}=Pe,{assert:Bn}=wt;class qn extends h.Component{constructor(){super(...arguments),j(this,"getGraphie",(()=>this._graphie)),j(this,"_range",(()=>p.a.map(this.props.range,(e=>e[0]>=e[1]?[-10,10]:e)))),j(this,"_box",(()=>p.a.map(this.props.box,(e=>e>0?e:340)))),j(this,"_scale",(()=>{var e=this._box(),t=this._range();return p.a.map(e,((e,r)=>e/(t[r][1]-t[r][0])))})),j(this,"_setupGraphie",(()=>{this._removeMovables();var e=v.a.findDOMNode(this.refs.graphieDiv);f()(e).empty();var t=this._graphie=Fn(e);t.init({range:this._range(),scale:this._scale(),isMobile:this.props.isMobile}),this.props.addMouseLayer&&t.addMouseLayer({onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),t.snap=this.props.options.snapStep||[1,1],this.props.responsive&&(f()(e).css({width:"100%",height:"100%"}),t.raphael.setSize("100%","100%")),this.props.setup(t,p.a.extend({range:this._range(),scale:this._scale()},this.props.options))})),j(this,"_removeMovables",(()=>{p.a.invoke(this._movables,"remove"),this._movables={}})),j(this,"_renderMovables",((e,t)=>{var r=t.graphie,n=t.oldMovables,i=t.newMovables,s=e=>{p.a.each(e.movableProps,(r=>{e.props[r]=this._renderMovables(e.props[r],t)}))},o=!1;return zn(e,(e=>{if(!e)return t.nextKey++,e;var a=new e.type(e.props);Bn(a instanceof Ln,"All children of a Graphie component must be Graphie movables");var l=e.key,h=null==l?"_no_id_"+t.nextKey:l;t.nextKey++;var c=e.ref;s(a);var p=n[h];if(p)if(a.constructor===p.constructor){p.props=a.props,"reordered"===p.modify(r)&&(o=!0),i[h]=p}else null==l&&ae.error("Replacing a <Graphie> child with a child of a different type. Please add keys to your <Graphie> children",oe.Internal),p.remove(),a.add(r),o=!0,i[h]=a;else a.add(r),o=!0,i[h]=a;return o&&i[h].toFront(),c&&(this.movables[c]=i[h]),i[h]}))})),j(this,"_updateMovables",(()=>{var e=this._graphie,t=this._movables,r={};this._movables=r,this.movables={},this._renderMovables(this.props.children,{nextKey:1,graphie:e,oldMovables:t,newMovables:r}),p.a.each(t,((e,t)=>{r[t]||e.remove()}))}))}componentDidMount(){this._setupGraphie(),this._updateMovables()}shouldComponentUpdate(e){return!p.a.isEqual(this.props,e)}componentDidUpdate(e){this.props.setup!==e.setup&&ae.error("<Graphie> was given a new setup function. This is a bad idea; please refactor your code to give the same setup function reference to <Graphie> on every render.",oe.Internal),Dn(this.props.options,e.options)&&Dn(this.props.box,e.box)&&Dn(this.props.range,e.range)||this._setupGraphie(),this._updateMovables()}render(){return h.createElement("div",{className:"graphie-container"},h.createElement("div",{className:"graphie",ref:"graphieDiv"}))}}j(qn,"propTypes",{addMouseLayer:d.a.bool,box:d.a.arrayOf(d.a.number).isRequired,children:d.a.node,isMobile:d.a.bool,onClick:d.a.func,onMouseDown:d.a.func,onMouseMove:d.a.func,onMouseUp:d.a.func,options:d.a.shape({snapStep:d.a.arrayOf(d.a.number)}),range:d.a.arrayOf(d.a.arrayOf(d.a.number)),responsive:d.a.bool,setDrawingAreaAvailable:d.a.func,setup:d.a.func.isRequired}),j(qn,"defaultProps",{range:[[-10,10],[-10,10]],options:{},responsive:!1,addMouseLayer:!0}),p.a.extend(qn,ar),p.a.extend(qn,Rn);var Hn="pending",Un="loading",Wn="loaded",jn="failed";class Gn extends h.Component{constructor(e){super(e),j(this,"img",void 0),j(this,"createLoader",(()=>{this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src})),j(this,"destroyLoader",(()=>{this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)})),j(this,"handleLoad",(e=>{this.destroyLoader(),this.setState({status:Wn}),this.props.onLoad&&this.props.onLoad(e)})),j(this,"handleError",(e=>{this.destroyLoader(),this.setState({status:jn}),this.props.onError&&this.props.onError(e)})),j(this,"renderImg",(()=>{var{src:e,imgProps:t}=this.props,r=null,n=null;null!=t.onClick&&(r=e=>{13!==e.keyCode&&32!==e.keyCode||t.onClick&&t.onClick(e)},n=e=>{32===e.keyCode&&e.preventDefault()});var i=ie().staticUrl;return h.createElement("img",G({src:i(e),onKeyUp:r,onKeyDown:n},t))})),this.state={status:e.src?Un:Hn}}componentDidMount(){this.state.status===Un&&this.createLoader()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({status:e.src?Un:Hn})}componentDidUpdate(e,t){this.state.status!==Un||this.img||this.createLoader(),t.status!==this.state.status&&this.props.onUpdate(this.state.status)}componentWillUnmount(){this.destroyLoader()}render(){switch(this.state.status){case Wn:return this.renderImg();case jn:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}}var Vn={},Yn=/^file\+graphie\:/,Xn=/\/([^/]+)$/;function Qn(e){return/\.(jpg|jpeg)$/i.test(e)}function Kn(){var{JIPT:e,kaLocale:t}=ie();return e.useJIPT?"en-pt":t}function $n(){return"en"!==Kn()}var Zn=/\/(?=[^/]+$)/;function Jn(e){return h.createElement("span",{style:{background:"url(/images/spinner.gif) no-repeat",backgroundPosition:"center",width:"100%",height:"100%",position:"absolute",minWidth:"20px"}})}class ei extends h.Component{constructor(e){super(e),j(this,"_isMounted",void 0),j(this,"onDataLoaded",((e,t)=>{if(this._isMounted&&e.labels&&e.range){var r=e.labels.reduce(((e,t)=>U(U({},e),{},{[t.content]:!1})),{});this.setState({dataLoaded:!0,labelDataIsLocalized:t,labelsRendered:r,labels:e.labels,range:e.range})}})),j(this,"onImageLoad",(()=>{this.sizeProvided()?this.setState({imageLoaded:!0}):Pe.getImageSize(this.props.src,((e,t)=>{this._isMounted&&this.setState({imageLoaded:!0,imageDimensions:[e,t]})}))})),j(this,"setupGraphie",((e,t)=>{p.a.map(t.labels,(t=>{var{JIPT:r}=ie();if(r.useJIPT&&this.state.labelDataIsLocalized){var n=e.label(t.coordinates,t.content,t.alignment,!1);ie().svgImageJiptLabels.addLabel(n,t.typesetAsMath)}else if(t.coordinates){var i=e.label(t.coordinates,t.content,t.alignment,t.typesetAsMath,{"font-size":100*this.props.scale+"%"}),s=i[0].style,o=this._tryGetPixels(s.top),a=this._tryGetPixels(s.left);if(null===o||null===a){var l=i.position();o=l.top,a=l.left}var h=(this.props.height||0)*this.props.scale,c=(this.props.width||0)*this.props.scale;i.css({top:o/h*100+"%",left:a/c*100+"%"}),p.a.each(t.style,((e,t)=>{i.css(t,e)}))}this.setState({labelsRendered:U(U({},this.state.labelsRendered),{},{[t.content]:!0})})}))})),j(this,"_handleZoomClick",(e=>{(f()(e.target).width()<this.props.width||this.props.zoomToFullSizeOnMobile)&&De.handleZoomClick(e,this.props.zoomToFullSizeOnMobile),this.props.trackInteraction&&this.props.trackInteraction()})),j(this,"handleUpdate",(e=>{this.props.onUpdate(),Pe.isLabeledSVG(this.props.src)||"loaded"!==e||this.setState({imageLoaded:!0})})),e.setAssetStatus(e.src,!1),this._isMounted=!1,this.state={imageLoaded:!1,imageDimensions:null,dataLoaded:!1,labelDataIsLocalized:!1,labels:[],labelsRendered:{},range:[[0,0],[0,0]]}}componentDidMount(){this._isMounted=!0,Pe.isLabeledSVG(this.props.src)&&this.loadResources()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({imageLoaded:!1,dataLoaded:!1})}shouldComponentUpdate(e,t){return!p.a.isEqual(this.props,e)||this.isLoadedInState(this.state)!==this.isLoadedInState(t)}componentDidUpdate(e,t){var r=this.isLoadedInState(t),n=this.isLoadedInState(this.state);Pe.isLabeledSVG(this.props.src)&&!n&&this.loadResources(),!r&&n&&this.props.setAssetStatus(this.props.src,!0)}componentWillUnmount(){this._isMounted=!1}isLoadedInState(e){return Pe.isLabeledSVG(this.props.src)?e.imageLoaded&&e.dataLoaded:e.imageLoaded}loadResources(){var e=function(e){var t=e.match(Xn);if(null==t)throw new le("not a valid URL",oe.InvalidInput);return t&&t[1]}(this.props.src);if(Vn[e])if(Vn[e].loaded){var{data:t,localized:r}=Vn[e];this.onDataLoaded(t,r)}else Vn[e].dataCallbacks.push(this.onDataLoaded);else{var n={loaded:!1,dataCallbacks:[this.onDataLoaded],data:null,localized:$n()};Vn[e]=n;var i=(t,r)=>{!function(e,t){t=U({callbackName:"callback",success:f.a.noop,error:f.a.noop},t);var r=document.createElement("script");function n(){document.head&&document.head.removeChild(r),delete window[t.callbackName]}r.setAttribute("async",""),r.setAttribute("src",e),window[t.callbackName]=function(){n(),t.success.apply(null,arguments)},r.addEventListener("error",(function(){n(),t.error.apply(null,arguments)})),document.head&&document.head.appendChild(r)}(t,{callbackName:"svgData"+e,success:e=>{n.data=e,n.loaded=!0,p.a.each(n.dataCallbacks,(e=>{e(n.data,n.localized)}))},error:r})};$n()?i(function(e){if(Yn.test(e))return Pe.getDataUrl(e);var[t,r]=Pe.getBaseUrl(e).split(Zn);return"".concat(t,"/").concat(Kn(),"/").concat(r,"-data.json")}(this.props.src),((e,t,r)=>{n.localized=!1,i(Pe.getDataUrl(this.props.src),((e,t,r)=>{ae.error("Data load failed for svg-image",oe.Service,{cause:r,loggedMetadata:{dataUrl:Pe.getDataUrl(this.props.src),status:t}})}))})):i(Pe.getDataUrl(this.props.src),((e,t,r)=>{ae.error("Data load failed for svg-image",oe.Service,{cause:r,loggedMetadata:{dataUrl:Pe.getDataUrl(this.props.src),status:t}})}))}}sizeProvided(){return null!=this.props.width&&null!=this.props.height}_tryGetPixels(e){return(e=e||"").endsWith("px")&&parseFloat(e)||null}render(){var e=this.props.src,t={alt:this.props.alt,title:this.props.title,tabIndex:"0"};this.props.alt&&this.props.overrideAriaHidden&&(t["aria-hidden"]=!0);var r,n=this.props.width&&this.props.width*this.props.scale,i=this.props.height&&this.props.height*this.props.scale,s={width:n,height:i},o=this.props.responsive&&!(!n||!i);this.props.extraGraphie&&this.props.extraGraphie.labels.length&&(r=h.createElement(qn,{box:this.props.extraGraphie.box,range:this.props.extraGraphie.range,options:{labels:this.props.extraGraphie.labels},responsive:!0,addMouseLayer:!1,setup:this.setupGraphie}));var a=void 0===this.props.preloader?Jn:this.props.preloader,c=a?()=>a(s):null;if(!Pe.isLabeledSVG(e)){if(o){var u=l()({zoomable:(n||0)>700,"svg-image":!0});return t.onClick=this._handleZoomClick,h.createElement(gt,{className:u,width:n,height:i,constrainHeight:this.props.constrainHeight,allowFullBleed:this.props.allowFullBleed&&Qn(e)},h.createElement(Gn,{src:e,imgProps:t,preloader:c,onUpdate:this.handleUpdate}),r)}return t.style=s,h.createElement(Gn,{src:e,preloader:c,imgProps:t,onUpdate:this.handleUpdate})}var d,m=Pe.getSvgUrl(e);if(this.isLoadedInState(this.state)){var f;if(this.sizeProvided())f=[n,i];else{if(!this.state.imageDimensions)throw new le("svg-image has no dimensions",oe.InvalidInput,{metadata:{src:this.props.src}});f=[this.state.imageDimensions[0]*this.props.scale,this.state.imageDimensions[1]*this.props.scale]}var g=[40*this.props.scale,40*this.props.scale];d=h.createElement(qn,{ref:"graphie",box:f,scale:g,range:this.state.range,options:p.a.pick(this.state,"labels"),responsive:o,addMouseLayer:!1,setup:this.setupGraphie})}return o?h.createElement(gt,{className:"svg-image",width:n,height:i,constrainHeight:this.props.constrainHeight},h.createElement(Gn,{src:m,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:c,imgProps:t}),d,r):(t.style=s,h.createElement("div",{className:"unresponsive-svg-image",style:s},h.createElement(Gn,{src:m,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:c,imgProps:t}),d))}}j(ei,"defaultProps",{constrainHeight:!1,onUpdate:()=>{},responsive:!0,src:"",scale:1,zoomToFullSizeOnMobile:!1,setAssetStatus:(e,t)=>{}});class ti extends h.Component{constructor(e){super(e),j(this,"_hasRendered",void 0),j(this,"handleRender",(()=>{this.props.onRender(),this.setState({rendered:!0}),this.props.onRender(),this._hasRendered||(this._hasRendered=!0,this.props.setAssetStatus(this.props.children,!0))})),this.props.setAssetStatus(this.props.children,!1),this.state={rendered:!1},this._hasRendered=!1}render(){var{TeX:e}=ie();return h.createElement(e,{onRender:this.handleRender},this.props.children)}}j(ti,"defaultProps",{onRender:()=>{},setAssetStatus:(e,t)=>{}});class ri extends h.Component{constructor(){super(...arguments),j(this,"_isMounted",void 0),j(this,"_observer",void 0),j(this,"_measuringInitialized",void 0),j(this,"_originalWidth",void 0),j(this,"_node",void 0),j(this,"state",{visible:!1,marginBottomPx:0,zoomed:!0}),j(this,"reset",(()=>{this._isMounted&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},(()=>{this.measureAndScaleChildToFit(!1)})))})),j(this,"stopPropagationIfZoomed",(e=>{this.state.zoomed||e.stopPropagation()})),j(this,"handleClickIfZoomed",(e=>{this.state.zoomed||(e.stopPropagation(),this.handleClick())})),j(this,"handleClick",(()=>{this.setState({zoomed:!this.state.zoomed})}))}componentDidMount(){this._isMounted=!0,this.maybeInitializeMeasuring()}componentDidUpdate(){this.maybeInitializeMeasuring()}componentWillUnmount(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect(),this._isMounted=!1}maybeInitializeMeasuring(){var e=this.props.readyToMeasure&&!this._measuringInitialized;this._isMounted&&e&&(this._measuringInitialized=!0,this._node=v.a.findDOMNode(this),setTimeout((()=>this.measureAndScaleChildToFit(!1)),0),window.MutationObserver&&(this._observer=new MutationObserver((e=>{if(this._isMounted)for(var t of e)if(t.target!==this._node){this.measureAndScaleChildToFit(this.state.zoomed);break}})),this._observer.observe(this._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",this.reset))}measureAndScaleChildToFit(e){if(this._isMounted){var t={width:this._node.offsetWidth,height:this._node.offsetHeight},r=this.props.computeChildBounds(this._node,t),n=r.width+1,i=r.height+1;if(n>t.width){var s=t.width/n;this.setState({scale:s,zoomed:e,compactHeight:Math.ceil(s*i),expandedHeight:i}),setTimeout((()=>{this._isMounted&&this.setState({visible:!0})}))}else this.setState({visible:!0})}}render(){var{visible:e,scale:t,compactHeight:r,expandedHeight:n,zoomed:i}=this.state,{animateHeight:s}=this.props,o=s?"opacity transform height":"opacity transform",a=e?{transitionProperty:o,WebkitTransitionProperty:o,msTransitionProperty:o,transitionDuration:"0.3s",WebkitTransitionDuration:"0.3s",msTransitionDuration:"0.3s",transitionTimingFunction:"ease-out",WebkitTransitionTimingfunction:"ease-out",msTransitionTmingFunction:"ease-out"}:{},l=e?"":" translate(0, 8px)",c=(null!=t?t:1).toString(),p=i?"scale(1, 1) ".concat(l):"scale(".concat(c,", ").concat(c,") ").concat(l),u=U({display:"block",width:"100%",height:i?n:r,transform:p,WebkitTransform:p,msTransform:p,transformOrigin:"0 0",WebkitTransformOrigin:"0 0",msTransformOrigin:"0 0",opacity:e?1:0,WebkitTapHighlightColor:"transparent"},a);return h.createElement("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:u},this.props.children)}}j(ri,"defaultProps",{animateHeight:!1,readyToMeasure:!0,computeChildBounds:e=>{var t=e.firstElementChild;return{width:t.offsetWidth,height:t.offsetHeight}}});var ni=(e,t)=>{var r=e.querySelector(".katex-html")||e.querySelector(".MathJax"),n={width:r.offsetWidth,height:r.offsetHeight};return{width:Math.max(t.width,n.width),height:Math.max(t.height,n.height)}};class si extends h.Component{constructor(){super(),j(this,"handleRender",(()=>{this.setState({isRendered:!0})})),this.state={isRendered:!1}}render(){return h.createElement(ri,{readyToMeasure:this.state.isRendered,computeChildBounds:ni},h.createElement(re.Consumer,null,(e=>{var{setAssetStatus:t}=e;return h.createElement(ti,{onRender:this.handleRender,setAssetStatus:t},this.props.children)})))}}class oi extends h.Component{constructor(e){super(e),this.state={error:""}}componentDidCatch(e,t){this.setState({error:e.toString()}),ae.error("Perseus error boundary caught error",oe.Internal,{cause:e,loggedMetadata:{info:t.toString()}})}render(){return this.state.error?h.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16"},h.createElement("path",{d:"m8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3c0.55 0 1-0.45 1-1s-0.45-1-1-1-1 0.45-1 1 0.45 1 1 1zm0-9c-0.55 0-1 0.45-1 1v4c0 0.55.45 1 1 1s1-0.45 1-1v-4c0-0.55-0.45-1-1-1z",fill:"#d92916",fillRule:"evenodd"})):this.props.children}}function ai(){}class li{constructor(e,t,r,n){j(this,"_tracked",void 0),j(this,"setting",void 0),j(this,"track",void 0),j(this,"trackApi",void 0),j(this,"widgetID",void 0),j(this,"widgetType",void 0),j(this,"_track",(e=>{this._tracked&&!this.setting||(this._tracked=!0,this.trackApi(U({type:this.widgetType,id:this.widgetID},e)))})),e?(this._tracked=!1,this.trackApi=e,this.widgetType=t,this.widgetID=r,this.setting=n,this.track=this._track):this.track=ai}}var hi={fence:{match:w.a.defaultRules.fence.match,order:1,parse:(e,t,r)=>({type:"codeBlock",lang:e[2]||void 0,content:e[3]})},paragraph:{match:w.a.defaultRules.paragraph.match,order:2,parse:(e,t,r)=>({content:e[1]})}},ci=w.a.parserFor(hi),pi={parseToArray:e=>{var t=e.replace(/^\n\s*\n/,"")+"\n\n";return ci(t,{inline:!1}).map((e=>e.content))},joinFromArray:e=>e.join("\n\n")};class ui{constructor(){j(this,"previousContent",null),j(this,"runLinter",Object(c.debounce)(((e,t)=>{"undefined"!=typeof KA&&e!==this.previousContent&&(this.previousContent=e,""!==e?fetch("/api/internal/translations/lint_poentry?preview=1&lang=en",{headers:{"Content-Type":"application/json"},body:JSON.stringify({msgid:e,msgstr:e,format:"perseus_text",filename:""}),method:"POST"}).then((e=>e.status>=400?{status:"error",message:"Could not run i18n linter."}:e.json()),(e=>({status:"error",message:"Could not run i18n linter."}))).then((e=>{"error"===e.status?t(["Some part of this text makes it untranslatable. The specific message from the i18n linter was: "+e.message.replace(/\n/g," ")]):t([])})):t([]))}),1e3))}applyLintErrors(e,t){if(t.length){var r=t.join("\n\n");e.unshift({content:{type:"text",content:""},insideTable:!1,message:r,ruleName:"legacy-error",severity:s.a.Severity.ERROR,type:"lint"})}}}var di={path:"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z",height:12,width:12};class mi extends h.Component{constructor(){super(...arguments),j(this,"_positionTimeout",void 0),j(this,"state",{tooltipAbove:!0}),j(this,"getPosition",(()=>{var e=v.a.findDOMNode(this).getBoundingClientRect();this.setState({tooltipAbove:e.top>100})})),j(this,"renderLink",(e=>{var t,r,n,i=this.state.tooltipAbove;return 1===this.props.severity?(t=fi.indicatorError,r="Error",n=fi.publishBlockingError):2===this.props.severity?(t=fi.indicatorWarning,r="Warning",n=fi.warning):(t=fi.indicatorGuideline,r="Recommendation",n=fi.warning),h.createElement("a",{href:"https://khanacademy.org/r/linter-rules#".concat(this.props.ruleName),target:"lint-help-window",className:Object(C.css)(e)},h.createElement("span",{className:Object(C.css)(fi.indicator,t)},1===this.props.severity&&h.createElement(Y,di)),h.createElement("div",{className:Object(C.css)(fi.tooltip,i&&fi.tooltipAbove)},this.props.message.split("\n\n").map(((e,t)=>h.createElement("p",{key:t,className:Object(C.css)(fi.tooltipParagraph)},h.createElement("span",{className:Object(C.css)(n)},r,":"," "),e))),h.createElement("div",{className:Object(C.css)(fi.tail,i&&fi.tailAbove)})))}))}componentDidMount(){this._positionTimeout=window.setTimeout(this.getPosition)}componentWillUnmount(){window.clearTimeout(this._positionTimeout)}render(){var{children:e,inline:t,blockHighlight:r,insideTable:n}=this.props;return n?t?h.createElement("span",{"data-lint-inside-table":"true"},e):h.createElement("div",{"data-lint-inside-table":"true"},e):r?h.createElement("span",{className:Object(C.css)(fi.lintContainer,fi.lintContainerBlock)},this.renderLink(fi.radioWidgetHoverTarget),h.createElement("span",null,e)):t?h.createElement("span",{className:Object(C.css)(fi.lintContainer)},this.renderLink(fi.inlineHoverTarget),h.createElement("span",null,e)):h.createElement("div",{className:Object(C.css)(fi.lintContainer)},this.renderLink(fi.hoverTarget),h.createElement("div",null,e))}}j(mi,"propTypes",{children:d.a.node,inline:d.a.bool,message:d.a.string.isRequired,ruleName:d.a.string.isRequired,insideTable:d.a.bool.isRequired,blockHighlight:d.a.bool,severity:d.a.number});var fi=C.StyleSheet.create({lintContainer:{position:"relative"},lintContainerBlock:{display:"block"},hoverTarget:{position:"absolute",top:0,right:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:pt},":hover div":{display:"block"},":hover ~ div":{outline:"1px solid #f86700"},":hover ~ div div[data-lint-inside-table]":{outline:"1px solid #f86700"},":hover ~ div span[data-lint-inside-table]":{backgroundColor:ct,color:Ue}},inlineHoverTarget:{float:"right",position:"relative",marginRight:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:pt},":hover div":{display:"block"},":hover ~ span":{backgroundColor:ct,color:Ue}},radioWidgetHoverTarget:{position:"absolute",left:-40,display:"block",width:24,height:24,minWidth:264,":hover > span":{backgroundColor:pt},":hover > div":{display:"block",padding:8,width:280},":hover > div > div":{left:8},":hover ~ span":{backgroundColor:ct,color:Ue}},indicator:{alignItems:"center",borderRadius:4,color:"white",display:"flex",fontSize:12,height:8,justifyContent:"center",margin:8,width:8},indicatorError:{backgroundColor:"#be2612",borderRadius:8,height:16,width:16},indicatorWarning:{backgroundColor:"#f86700"},indicatorGuideline:{backgroundColor:"#ffbe26"},tooltip:{position:"absolute",right:-12,display:"none",zIndex:1e3,color:Ue,backgroundColor:Xe,opacity:.9,fontFamily:ze,fontSize:"12px",lineHeight:"15px",width:"320px",borderRadius:"4px"},tooltipAbove:{bottom:32},tail:{position:"absolute",top:-12,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"12px solid #21242c"},tailAbove:{bottom:-12,borderBottom:"none",borderTop:"12px solid #21242c",top:"auto"},tooltipParagraph:{margin:12},warning:{color:ct,fontFamily:Be},publishBlockingError:{color:dt}}),gi=U(U({},k.pureMarkdownRules),{},{columns:U(U({},k.pureMarkdownRules.columns),{},{react:(e,t,r)=>h.createElement("div",{className:"perseus-two-columns",key:r.key},h.createElement("div",{className:"perseus-column"},h.createElement("div",{className:"perseus-column-content"},t(e.col1,r))),h.createElement("div",{className:"perseus-column"},h.createElement("div",{className:"sat-header-grafting-area"}),h.createElement("div",{className:"perseus-column-content"},h.createElement("div",{className:"sat-skill-subscore-grafting-area"}),t(e.col2,r),h.createElement("div",{className:"sat-grafting-area"}))))}),crowdinId:U(U({},k.pureMarkdownRules.crowdinId),{},{react:(e,t,r)=>e.id}),table:U(U({},k.pureMarkdownRules.table),{},{react:function(e,t,r){var n=w.a.defaultRules.table.react(e,t,r);return r.isMobile?h.cloneElement(n,{tabIndex:0}):n}}),titledTable:U(U({},k.pureMarkdownRules.titledTable),{},{react:(e,t,r)=>{var n;if(e.table)if("lint"===e.table.type){var i;n="table"===(null===(i=e.table.content)||void 0===i?void 0:i.type)?gi.lint.react(U(U({},e.table),{},{content:U(U({},e),{},{table:e.table.content})}),t,U(U({},r),{},{unwrapTitledTableContents:!0})):gi.lint.react(e.table,t,r)}else{var s=w.a.defaultRules.table.react(e.table,t,r),o=h.createElement("caption",{key:"caption",className:"perseus-table-title"},t(e.title,r));n=h.cloneElement(s,null,[o,...s.props.children])}else n="//invalid table//";return r.unwrapTitledTableContents?n:h.createElement("div",{className:"perseus-titled-table",key:r.key},n)}}),widget:U(U({},k.pureMarkdownRules.widget),{},{react:(e,t,r)=>h.createElement("em",{key:r.key},o.doNotTranslate("[Widget: ",e.id,"]"))}),blockMath:U(U({},k.pureMarkdownRules.blockMath),{},{react:(e,t,r)=>{var{TeX:n}=ie();return h.createElement(n,{key:r.key},e.content)}}),math:U(U({},k.pureMarkdownRules.math),{},{react:(e,t,r)=>{var{TeX:n}=ie();return h.createElement(n,{key:r.key},e.content)}}),unescapedDollar:U(U({},k.pureMarkdownRules.unescapedDollar),{},{react:(e,t,r)=>"$"}),link:U(U({},k.pureMarkdownRules.link),{},{react:function(e,t,r){var n=w.a.defaultRules.link.react(e,t,r),i=n.props.href,s=null;!!i&&i.match(/https?:\/\/[^\/]*khanacademy.org|^\//)||(s="noopener noreferrer");var o=U(U({},n.props),{},{target:"_blank",href:i,rel:s});return r.baseElements&&r.baseElements.Link?r.baseElements.Link(o):h.cloneElement(n,o)}}),codeBlock:U(U({},k.pureMarkdownRules.codeBlock),{},{react:(e,t,r)=>"alt"===e.lang?h.createElement("div",{key:r.key,className:"perseus-markdown-alt perseus-sr-only"},t(e.content,r)):w.a.defaultRules.codeBlock.react(e,t,r)}),lint:U(U({},k.pureMarkdownRules.lint),{},{react:(e,t,r)=>h.createElement(mi,{message:e.message,ruleName:e.ruleName,inline:vi(e.content),blockHighlight:e.blockHighlight,insideTable:e.insideTable,severity:e.severity},t(e.content,r))})});function vi(e){return!!(e&&e.type&&yi.hasOwnProperty(e.type))}var yi={text:!0,math:!0,unescapedDollar:!0,link:!0,img:!0,strong:!0,u:!0,em:!0,del:!0,code:!0},bi=w.a.parserFor(gi),xi=(e,t)=>bi(e+"\n\n",U(U({},t),{},{inline:!1})),wi=(e,t)=>{p.a.isArray(e)?p.a.each(e,(e=>wi(e,t))):p.a.isObject(e)&&(t(e),"table"===e.type?(wi(e.header,t),wi(e.cells,t)):"list"===e.type?wi(e.items,t):"titledTable"===e.type?wi(e.table,t):"columns"===e.type?(wi(e.col1,t),wi(e.col2,t)):p.a.isArray(e.content)&&wi(e.content,t))},ki=e=>{if(p.a.isArray(e))return p.a.flatten(p.a.map(e,ki));if(e.content&&p.a.isString(e.content))return-1!==e.type.toLowerCase().indexOf("code")?["",e.content,""]:[e.content.replace(/\s+/g," ")];var t=p.a.chain(e).values().flatten().filter((e=>null!=e&&p.a.has(e,"type"))).value();if(!t.length)return[];var r=ki(t);if("paragraph"===e.type&&r.length){r[0]=r[0].replace(/^\s+/,"");var n=r.length-1;r[n]=r[n].replace(/\s+$/,"")}return r},Ci={characterCount:e=>{var t=xi(e);return ki(t).join("").length},traverseContent:wi,parse:xi,parseInline:(e,t)=>bi(e,U(U({},t),{},{inline:!0})),reactFor:w.a.reactFor,ruleOutput:w.a.ruleOutput(gi,"react"),basicOutput:w.a.reactFor(w.a.ruleOutput(gi,"react")),sanitizeUrl:w.a.sanitizeUrl};class Ei extends h.Component{render(){var e=this.props.className?"paragraph "+this.props.className:"paragraph";return h.createElement("div",{className:e,"data-perseus-component-index":this.props.translationIndex,"data-perseus-paragraph-index":this.props.paragraphIndex},this.props.children)}}var Si=e=>e.replace(/\{align[*]?\}/g,"{aligned}").replace(/[\u00a0]/g," "),{interactiveSizes:Ti}=ft,Mi={SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"},_i=e=>e?e<=512?Mi.SMALL:e<=688?Mi.MEDIUM:Mi.LARGE:Mi.MEDIUM,Ai=e=>e===Mi.SMALL?[Ti.defaultBoxSizeSmall,Ti.defaultBoxSizeSmall]:[Ti.defaultBoxSize,Ti.defaultBoxSize],Ii=Object.freeze({__proto__:null,containerSizeClass:Mi,getClassFromWidth:_i,getInteractiveBoxFromSizeClass:Ai}),Oi="block",Ni=["default"],Pi={},Ri={},Li=(e,t)=>{Pi[e]=t},Fi=e=>{e.forEach((e=>{Li(e.name,e)})),Yi()},Di=e=>p.a.has(Pi,e)?Pi[e].getWidget?Pi[e].getWidget():Pi[e].widget:null,zi=e=>Pi[e]?Pi[e].version||{major:0,minor:0}:null,Bi=()=>{var e={};return p.a.each(p.a.keys(Pi),(function(t){e[t]=zi(t)})),e},qi=e=>{var t=Pi[e.type].accessible;return"function"==typeof t?t(e.options):!!t},Hi=e=>{var t=e.type;if(!p.a.isString(t))throw new le("widget type must be a string, but was: "+t,oe.Internal);var r=Pi[t];if(null==r)return e;var n=e.version||{major:0,minor:0},i=r.version||{major:0,minor:0};if(n.major>i.major||n.major===i.major&&n.minor>i.minor)return e;var s=p.a.clone(e.options)||{},o=r.propUpgrades||{};if(0!==p.a.keys(s).length)for(var a=n.major+1;a<=i.major;a++)o[String(a)]?s=o[String(a)](s):ae.error("No upgrade found for widget. Cannot render.",oe.Internal,{loggedMetadata:{type:t,fromMajorVersion:a-1,toMajorVersion:a}});s=U(U({},t in Ri?Ri[t].defaultProps:{}),s);var l=e.alignment;null!=l&&"default"!==l||(l=ji(t)[0]);var h=e.static;return null==h&&(h=false),p.a.extend({},e,{version:i,graded:null==e.graded||e.graded,alignment:l,static:h,options:s})},Ui=(e,t)=>{var r=e.type,n=Pi[r];return null==n?e.options:(e.static?Xi(r)||p.a.identity:n.transform||p.a.identity)(e.options,t)},Wi=(e,t)=>{if(!t)throw new le("traverseRenderer must be provided, but was not",oe.Internal);if(!e||!e.type||!Pi[e.type])return e;var r=Pi[e.type],n=e.options;if(r.traverseChildWidgets&&n){var i=r.traverseChildWidgets(n,t);return p.a.extend({},e,{options:i})}return e},ji=e=>{var t=Pi[e];return t&&t.supportedAlignments||Ni},Gi=e=>{var t=Pi[e];return t&&(t.getDefaultAlignment?t.getDefaultAlignment():t.defaultAlignment)||Oi},Vi=["block","inline-block","inline","float-left","float-right","full-width"],Yi=()=>{p.a.each(Pi,(function(e){if(e.defaultAlignment&&!p.a.contains(Vi,e.defaultAlignment))throw new le("Widget '"+e.displayName+"' has an invalid defaultAlignment value: "+e.defaultAlignment,oe.InvalidInput);if(e.supportedAlignments){var t=p.a.difference(e.supportedAlignments,Vi);if(t.length)throw new le("Widget '"+e.displayName+"' has an invalid value for supportedAlignments: "+t.join(" "),oe.InvalidInput)}}))},Xi=e=>{var t=Pi[e];return t&&t.staticTransform},Qi=e=>{var t=Pi[e];return t&&t.tracking||""},Ki=e=>{var t=Pi[e];return t&&t.isLintable||false},$i=Object.freeze({__proto__:null,registerWidget:Li,registerWidgets:Fi,registerEditors:e=>{e.forEach((e=>{if(!e.widgetName)throw new le("Editor ".concat(e.displayName," doesn't have a widgetName property"),oe.Internal);Ri[e.widgetName]=e}))},getWidget:Di,getEditor:e=>p.a.has(Ri,e)?Ri[e]:null,getTransform:e=>p.a.has(Pi,e)?Pi[e].transform||p.a.identity:null,getVersion:zi,getVersionVector:Bi,getPublicWidgets:()=>p.a.pick(Pi,p.a.reject(p.a.keys(Pi),(function(e){return Pi[e].hidden}))),isAccessible:qi,getAllWidgetTypes:()=>p.a.keys(Pi),upgradeWidgetInfoToLatestVersion:Hi,getRendererPropsForWidgetInfo:Ui,traverseChildWidgets:Wi,getSupportedAlignments:ji,getDefaultAlignment:Gi,validateAlignments:Yi,supportsStaticMode:e=>{var t=Pi[e];return t&&null!=t.staticTransform},getStaticTransform:Xi,getTracking:Qi,isLintable:Ki});class Zi extends h.Component{constructor(){super(...arguments),j(this,"state",{sizeClass:Mi.MEDIUM,widgetProps:this.props.initialProps}),j(this,"getWidget",(()=>this.refs.widget)),j(this,"replaceWidgetProps",(e=>{this.setState({widgetProps:e})}))}componentDidMount(){if(this.state.widgetProps.apiOptions.isMobile){var e=v.a.findDOMNode(this).offsetWidth;this.setState({sizeClass:_i(e)})}}render(){var e=l()({"perseus-widget-container":!0,"widget-highlight":this.props.shouldHighlight,"widget-nohighlight":!this.props.shouldHighlight}),t=this.props.type,r=Di(t);if(null==r)return console.warn("Widget type '".concat(t,"' not found!")),h.createElement("div",{className:e});var n=this.state.widgetProps.alignment;"default"===n&&(n=Gi(t)),e+=" widget-"+n;var i=this.state.widgetProps.apiOptions,s=this.state.widgetProps.static||i.readOnly,o={width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:3},a=Ki(t)?this.props.linterContext:U(U({},this.props.linterContext),{},{highlightLint:!1});return h.createElement("div",{className:e,style:s?{position:"relative",overflow:"visible"}:{}},h.createElement(r,G({},this.state.widgetProps,{linterContext:a,containerSizeClass:this.state.sizeClass,ref:"widget"})),s&&h.createElement("div",{style:o}))}UNSAFE_componentWillReceiveProps(e){if(this.props.type!==e.type)throw new Error("WidgetContainer can't change widget type; set a different key instead to recreate the container.")}shouldComponentUpdate(e,t){return this.props.shouldHighlight!==e.shouldHighlight||this.props.type!==e.type||this.state.widgetProps!==t.widgetProps||this.state.sizeClass!==t.sizeClass}}j(Zi,"defaultProps",{linterContext:s.b});var{mapObject:Ji,mapObjectFromArray:es}=Ft,ts=/\S/,rs=/(web\+graphie|https):\/\/[^\s]*/,ns=()=>{},is=["content","problemNum","widgets"];class ss extends h.Component{constructor(e,t){var r;super(e,t),r=this,j(this,"_currentFocus",void 0),j(this,"_foundTextNodes",void 0),j(this,"_interactionTrackers",void 0),j(this,"_isMounted",void 0),j(this,"_isTwoColumn",void 0),j(this,"_notGorgon",void 0),j(this,"lastRenderedMarkdown",void 0),j(this,"reuseMarkdown",void 0),j(this,"translationIndex",void 0),j(this,"widgetIds",void 0),j(this,"getApiOptions",(()=>U(U({},J.defaults),this.props.apiOptions))),j(this,"_getInitialWidgetState",(e=>{var t=this._getAllWidgetsInfo(e);return{widgetInfo:t,widgetProps:this._getAllWidgetsStartProps(t,e)}})),j(this,"_getAllWidgetsInfo",(e=>Ji(e.widgets,((e,t)=>{if(!e.type||!e.alignment){var r={};e.type||(r.type=t.split(" ")[0]),e.alignment||(r.alignment="default"),e=p.a.extend({},e,r)}return Hi(e)})))),j(this,"_getAllWidgetsStartProps",((e,t)=>Ji(e,(e=>Ui(e,t.problemNum))))),j(this,"_getDefaultWidgetInfo",(e=>{var t=Pe.rTypeFromWidgetId.exec(e);return null==t?{}:{type:t[1],graded:!0,options:{}}})),j(this,"_getWidgetInfo",(e=>this.state.widgetInfo[e]||this._getDefaultWidgetInfo(e))),j(this,"renderWidget",((e,t,r)=>{var n=this.state.widgetInfo[t];if(n&&"full-width"===n.alignment&&(r.foundFullWidth=!0),n){var i=n&&n.type||e,o=p.a.contains(this.props.highlightedWidgets,t);return h.createElement(oi,{key:"container:"+t},h.createElement(Zi,{ref:"container:"+t,type:i,initialProps:this.getWidgetProps(t),shouldHighlight:o,linterContext:s.d(this.props.linterContext,"widget")}))}return null})),j(this,"getWidgetProps",(e=>{var t=this.getApiOptions(),n=this.state.widgetProps[e]||{},i=null,s=this.state.widgetInfo[e];this.props.reviewMode&&s&&(i=s.options),this._interactionTrackers||(this._interactionTrackers={});var o=this._interactionTrackers[e];return o||(o=this._interactionTrackers[e]=new li(t.trackInteraction,s&&s.type,e,Qi(s&&s.type))),U(U({},n),{},{ref:e,widgetId:e,alignment:s&&s.alignment,static:s&&s.static&&!this.props.problemNum,problemNum:this.props.problemNum,apiOptions:this.getApiOptions(),keypadElement:this.props.keypadElement,questionCompleted:this.props.questionCompleted,onFocus:p.a.partial(this._onWidgetFocus,e),onBlur:p.a.partial(this._onWidgetBlur,e),findWidgets:this.findWidgets,reviewModeRubric:i,onChange:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r._setWidgetProps(e,t,n,i)},trackInteraction:o.track,isLastUsedWidget:e===this.state.lastUsedWidgetId})})),j(this,"getSerializedState",(e=>Ji(e||this.state.widgetProps,((e,t)=>{var r=this.getWidgetInstance(t);return r&&r.getSerializedState?r.getSerializedState():e})))),j(this,"restoreSerializedState",((e,t)=>{var r=p.a.keys(e),n=p.a.keys(this.state.widgetProps);if(r.length===n.length&&p.a.intersection(r,n).length===r.length){var i=1,s=()=>{--i,t&&0===i&&t()};this.setState({widgetProps:Ji(e,((e,t)=>{var r=this.getWidgetInstance(t);if(r&&r.restoreSerializedState){++i;var n=r.restoreSerializedState(e,s);return p.a.extend({},this.state.widgetProps[t],n)}return e}))},(()=>{setTimeout(s,0)}))}else ae.error("Refusing to restore bad serialized state:",oe.Internal,{loggedMetadata:{serializedState:JSON.stringify(e),currentProps:JSON.stringify(this.state.widgetProps)}})})),j(this,"showRationalesForCurrentlySelectedChoices",(()=>{Object.keys(this.props.widgets).forEach((e=>{var t=this.getWidgetInstance(e);t&&t.showRationalesForCurrentlySelectedChoices&&t.showRationalesForCurrentlySelectedChoices(this._getWidgetInfo(e).options)}))})),j(this,"deselectIncorrectSelectedChoices",(()=>{Object.keys(this.props.widgets).forEach((e=>{var t=this.getWidgetInstance(e);t&&t.deselectIncorrectSelectedChoices&&t.deselectIncorrectSelectedChoices()}))})),j(this,"findInternalWidgets",(e=>{var t;if("string"==typeof e)if(-1!==e.indexOf(" ")){var r=e;t=(e,t,n)=>e===r}else{var n=e;t=(e,t,r)=>t.type===n}else t=e;return this.widgetIds.filter((e=>{var r=this._getWidgetInfo(e),n=this.getWidgetInstance(e);return t(e,r,n)})).map(this.getWidgetInstance)})),j(this,"findWidgets",(e=>[...this.findInternalWidgets(e),...this.props.findExternalWidgets(e)])),j(this,"getWidgetInstance",(e=>{var t=this.refs["container:"+e];return t?t.getWidget():null})),j(this,"_onWidgetFocus",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!p.a.isArray(t))throw new le("widget props.onFocus focusPath must be an Array, but was"+JSON.stringify(t),oe.Internal);r._setCurrentFocus([e].concat(t))})),j(this,"_onWidgetBlur",((e,t)=>{var r=this._currentFocus,n=[e].concat(t);p.a.isEqual(n,r)&&p.a.defer((()=>{p.a.isEqual(this._currentFocus,r)&&this._setCurrentFocus(null)}))})),j(this,"getContent",((e,t)=>t.jiptContent||e.content)),j(this,"shouldRenderJiptPlaceholder",((e,t)=>ie().JIPT.useJIPT&&null==t.jiptContent&&-1!==e.content.indexOf("crwdns"))),j(this,"replaceJiptContent",((e,t)=>{if(null==t)this.setState({jiptContent:e});else{/^\s*(`{3,}|~{3,})\s*(\S+)?\s*\n([\s\S]+?)\s*\1\s*$/.test(e)||(/\S\n\s*\n\S/.test(e)?e="$\\large{\\red{\\text{Please translate each paragraph to a single paragraph.}}}$":/^\s*$/.test(e)&&(e="$\\large{\\red{\\text{Translated paragraph is currently empty}}}$"));var r=this.getContent(this.props,this.state),n=pi.parseToArray(r);n[t]=e,this.setState({jiptContent:pi.joinFromArray(n)})}})),j(this,"outputMarkdown",((e,t)=>{if(p.a.isArray(e)){for(var r=t.key,n=[],i=!1,s=0;s<e.length;s++){t.key=s,t.paragraphIndex=s;var o=this.outputMarkdown(e[s],t),a="string"==typeof o;"string"==typeof o&&i?n[n.length-1]+=o:n.push(o),i=a}return t.key=r,n}this._foundTextNodes=!1,t.foundFullWidth=!1;var c,u=this.outputNested(e,t);return c=null!=this.translationIndex?null:l()({"perseus-paragraph-centered":!this._foundTextNodes,"perseus-paragraph-full-width":t.foundFullWidth&&1===e.content.length}),h.createElement(Ei,{key:t.key,className:c,translationIndex:this.translationIndex,paragraphIndex:t.paragraphIndex},h.createElement(oi,null,u))})),j(this,"outputNested",((e,t)=>{if(p.a.isArray(e)){for(var r=t.key,n=[],i=!1,s=0;s<e.length;s++){t.key=s;var o=this.outputNested(e[s],t),a="string"==typeof o;"string"==typeof o&&i?n[n.length-1]+=o:n.push(o),i=a}return t.key=r,n}return this.outputNode(e,this.outputNested,t)})),j(this,"outputNode",((e,t,r)=>{var n=this.getApiOptions(),i=n.imagePlaceholder;if("widget"===e.type){var s=n.widgetPlaceholder;return s||(this._foundTextNodes=!0,p.a.contains(this.widgetIds,e.id)?h.createElement("span",{key:r.key,className:"renderer-widget-error"},["Widget [[","☃"," ",e.id,"]] already exists."].join("")):(this.widgetIds.push(e.id),this.renderWidget(e.widgetType,e.id,r)))}if("blockMath"===e.type){var o=Si(e.content),a={overflowX:"auto",overflowY:"hidden",paddingTop:10,paddingBottom:10,marginTop:-10,marginBottom:-10};if(n.isMobile){var l={marginLeft:-16,marginRight:-16},c={paddingLeft:16,paddingRight:16},u=U(U({},a),os.mobileZoomableParentFix);return h.createElement("div",{key:r.key,className:"perseus-block-math",style:l},h.createElement(oi,null,h.createElement("div",{className:"perseus-block-math-inner",style:U(U({},u),c)},h.createElement(si,null,o))))}return h.createElement("div",{key:r.key,className:"perseus-block-math"},h.createElement(oi,null,h.createElement("div",{className:"perseus-block-math-inner",style:a},h.createElement(re.Consumer,null,(e=>{var{setAssetStatus:t}=e;return h.createElement(ti,{setAssetStatus:t},o)})))))}if("math"===e.type){var d=e.content.replace(/\{align[*]?\}/g,"{aligned}");return h.createElement("span",{key:r.key,style:{whiteSpace:"nowrap"}},h.createElement(oi,null,h.createElement("span",null),h.createElement(re.Consumer,null,(e=>{var{setAssetStatus:t}=e;return h.createElement(ti,{onRender:this.props.onRender,setAssetStatus:t},d)})),h.createElement("span",null)))}if("image"===e.type){if(i)return i;var m=p.a.has(this.props.images,e.target)?this.props.images[e.target]:null,f=!r.inTable;return h.createElement(oi,{key:r.key},h.createElement(re.Consumer,null,(t=>{var{setAssetStatus:r}=t;return h.createElement(ei,G({setAssetStatus:r,src:Ci.sanitizeUrl(e.target),alt:e.alt,title:e.title,responsive:f,onUpdate:this.props.onRender,zoomToFullSizeOnMobile:n.isMobile&&n.isArticle},m))})))}if("columns"===e.type)return this._isTwoColumn=!0,h.createElement(oi,{key:r.key},Ci.ruleOutput(e,t,r));if("text"===e.type)return ts.test(e.content)&&(this._foundTextNodes=!0),i&&rs.test(e.content)?i:e.content;if("table"===e.type||"titledTable"===e.type){var g=Ci.ruleOutput(e,t,U(U({},r),{},{isMobile:n.isMobile,inTable:!0}));if(!n.isMobile)return g;var v={marginLeft:-16,marginRight:-16},y=U(U({},{paddingLeft:0,paddingRight:0}),os.mobileZoomableParentFix),b=h.createElement("div",{style:U(U({},y),{},{overflowX:"auto"})},h.createElement(oi,null,h.createElement(ri,{animateHeight:!0},g)));return h.createElement("div",{style:v},b)}return h.createElement(oi,{key:r.key},Ci.ruleOutput(e,t,r))})),j(this,"handleRender",(e=>{var t=this.props.onRender,r=e.onRender;if(t!==ns||r!==ns){var n=f()(v.a.findDOMNode(this)).find("img");r!==ns&&n.off("load",r),t!==ns&&n.on("load",t)}t()})),j(this,"_setCurrentFocus",(e=>{var t,r,n=this.getApiOptions();if(t=e,r=this._currentFocus,!(null===t||null===r?t===r:p.a.every(t,((e,t)=>{if(null!=r)return p.a.isEqual(e,r[t])})))){var i=this._currentFocus;i&&this.blurPath(i),this._currentFocus=e,n.onFocusChange(this._currentFocus,i)}})),j(this,"focus",(()=>{for(var e,t,r,n=0;n<this.widgetIds.length;n++){var i=this.widgetIds[n],s=this.getWidgetInstance(i),o=s&&s.focus&&s.focus();if(o){e=i,t=o;break}}if(e)return"object"==typeof t?(r=[e].concat(t.path||[]),ae.error("Renderer received a focus result of type 'object' instead of the expected type 'boolean'",oe.Internal,{loggedMetadata:{focusResult:JSON.stringify(t),currentProps:JSON.stringify(this.state.widgetProps)}})):r=[e],this._setCurrentFocus(r),!0})),j(this,"getDOMNodeForPath",(e=>{var t=p.a.first(e),r=p.a.rest(e),n=this.getWidgetInstance(t),i=n&&n.getDOMNodeForPath;return i?i(r):0===r.length?v.a.findDOMNode(n):void 0})),j(this,"getGrammarTypeForPath",(e=>{var t=p.a.first(e),r=p.a.rest(e),n=this.getWidgetInstance(t);if(n&&n.getGrammarTypeForPath)return n.getGrammarTypeForPath(r)})),j(this,"getInputPaths",(()=>{var e=[];return p.a.each(this.widgetIds,(t=>{var r=this.getWidgetInstance(t);if(r&&r.getInputPaths){var n=r.getInputPaths();p.a.each(n,(r=>{var n=[t].concat(r);e.push(n)}))}})),e})),j(this,"focusPath",(e=>{if(!p.a.isEqual(this._currentFocus,e)){this._currentFocus&&this.blurPath(this._currentFocus);var t=p.a.first(e),r=p.a.rest(e),n=this.getWidgetInstance(t);n&&n.focusInputPath&&n.focusInputPath(r)}})),j(this,"blurPath",(e=>{if(p.a.isEqual(this._currentFocus,e)){var t=p.a.first(e),r=p.a.rest(e);if(this.getWidgetInstance(t)){var n=this.getWidgetInstance(t);n&&n.blurInputPath&&n.blurInputPath(r)}}})),j(this,"blur",(()=>{this._currentFocus&&this.blurPath(this._currentFocus)})),j(this,"serialize",(()=>{var e={};return p.a.each(this.state.widgetInfo,(function(t,r){var n=this.getWidgetInstance(r).serialize();p.a.isEmpty(n)||(e[r]=n)}),this),e})),j(this,"emptyWidgets",(()=>p.a.filter(this.widgetIds,(e=>{var t=this._getWidgetInfo(e);if(t.static)return!1;var r=this.getWidgetInstance(e);if(r&&r.simpleValidate){var n=r.simpleValidate(t.options,null);return Pe.scoreIsEmpty(n)}})))),j(this,"_setWidgetProps",((e,t,r,n)=>{this.setState((r=>{var i=U(U({},r.widgetProps),{},{[e]:U(U({},r.widgetProps[e]),t)}),s=n?r.lastUsedWidgetId:e;return n||this.props.onSerializedStateUpdated(this.getSerializedState(i)),{lastUsedWidgetId:s,widgetProps:i}}),(()=>{setTimeout((()=>{var t=r&&r();n||this.props.onInteractWithWidget(e),!1!==t&&this._setCurrentFocus([e])}),0)}))})),j(this,"setInputValue",((e,t,r)=>{var n,i=p.a.first(e),s=p.a.rest(e),o=this.getWidgetInstance(i);null==o||null===(n=o.setInputValue)||void 0===n||n.call(o,s,t,r)})),j(this,"getUserInput",(()=>this.widgetIds.map((e=>{var t=this.getWidgetInstance(e);if(t&&t.getUserInput)return t.getUserInput()})))),j(this,"getWidgetIds",(()=>this.widgetIds)),j(this,"getUserInputForWidgets",(()=>es(this.widgetIds,(e=>{var t=this.getWidgetInstance(e);if(t&&t.getUserInput)return t.getUserInput()})))),j(this,"scoreWidgets",(()=>{var e=this.state.widgetInfo,t=this.getApiOptions().onInputError,r=p.a.filter(this.widgetIds,(t=>{var r=e[t],n=null==(null==r?void 0:r.graded)||r.graded,i=!(null==r||!r.static);return n&&!i})),n={};return p.a.each(r,(r=>{var i=e[r],s=this.getWidgetInstance(r);s&&s.simpleValidate&&(n[r]=s.simpleValidate(null==i?void 0:i.options,t))})),n})),j(this,"score",(()=>p.a.reduce(this.scoreWidgets(),Pe.combineScores,Pe.noScore))),j(this,"guessAndScore",(()=>[this.getUserInput(),this.score()])),j(this,"examples",(()=>{var e=this.widgetIds,t=p.a.compact(p.a.map(e,(e=>{var t=this.getWidgetInstance(e);return null!=t&&t.examples?t.examples():null})));return t.length&&p.a.all(t,(function(e){return p.a.isEqual(t[0],e)}))?t[0]:null})),j(this,"handleNotGorgonLintErrors",(e=>{this._isMounted&&this.setState({notGorgonLintErrors:e})})),this._notGorgon=new ui,this.state=U({jiptContent:null,notGorgonLintErrors:[],lastUsedWidgetId:null},this._getInitialWidgetState(e))}componentDidMount(){this._isMounted=!0,this.handleRender({}),this._currentFocus=null,this.props.serializedState&&this.restoreSerializedState(this.props.serializedState),this.props.linterContext.highlightLint&&this._notGorgon.runLinter(this.props.content,this.handleNotGorgonLintErrors)}UNSAFE_componentWillReceiveProps(e){p.a.isEqual(p.a.pick(this.props,is),p.a.pick(e,is))||this.setState(this._getInitialWidgetState(e))}shouldComponentUpdate(e,t){if(this.props.alwaysUpdate)return!0;var r=!p.a.isEqual(this.state,t);return!p.a.isEqual(this.props,e)||r}UNSAFE_componentWillUpdate(e,t){var r=this.shouldRenderJiptPlaceholder(this.props,this.state),n=this.shouldRenderJiptPlaceholder(e,t),i=this.getContent(this.props,this.state),s=this.getContent(e,t),o=this.props.highlightedWidgets,a=e.highlightedWidgets;this.reuseMarkdown=!r&&!n&&i===s&&p.a.isEqual(this.state.notGorgonLintErrors,t.notGorgonLintErrors)&&(!this.props.linterContext.highlightLint||p.a.isEqual(this.props.widgets,e.widgets))&&this.props.linterContext.highlightLint===e.linterContext.highlightLint&&o===a}componentDidUpdate(e,t){this.handleRender(e),p.a.each(this.widgetIds,(e=>{var t=this.refs["container:"+e];t&&t.replaceWidgetProps(this.getWidgetProps(e))})),this.props.serializedState&&!p.a.isEqual(this.props.serializedState,this.getSerializedState())&&this.restoreSerializedState(this.props.serializedState),this.props.linterContext.highlightLint&&this._notGorgon.runLinter(this.props.content,this.handleNotGorgonLintErrors)}componentWillUnmount(){this.widgetIds=[],null!=this.translationIndex&&ie().rendererTranslationComponents.removeComponentAtIndex(this.translationIndex),this._isMounted=!1}render(){var e=this.getApiOptions(),{KatexProvider:t}=ie();if(this.reuseMarkdown)return this.lastRenderedMarkdown;var r=this.getContent(this.props,this.state);if(this.widgetIds=[],this.shouldRenderJiptPlaceholder(this.props,this.state)&&(this.translationIndex||(this.translationIndex=ie().rendererTranslationComponents.addComponent(this)),!e.isArticle))return h.createElement(t,null,h.createElement("div",{"data-perseus-component-index":this.translationIndex},r));this._isTwoColumn=!1;var n=Ci.parse(r,{isJipt:null!=this.translationIndex});if(this.props.linterContext.highlightLint){var i=U({content:this.props.content,widgets:this.props.widgets},this.props.linterContext);s.e(n,i,!0),this._notGorgon.applyLintErrors(n,[...this.state.notGorgonLintErrors,...this.props.legacyPerseusLint||[]])}var o=this.outputMarkdown(n,{baseElements:e.baseElements}),a=l()({[ee.RENDERER]:!0,[ee.RESPONSIVE_RENDERER]:!0,[ee.TWO_COLUMN_RENDERER]:this._isTwoColumn});return this.lastRenderedMarkdown=h.createElement(t,null,h.createElement("div",{className:a},o)),this.lastRenderedMarkdown}}j(ss,"defaultProps",{content:"",widgets:{},images:{},highlightedWidgets:[],questionCompleted:!1,onRender:ns,onInteractWithWidget:function(){},findExternalWidgets:()=>[],alwaysUpdate:!1,reviewMode:!1,serializedState:null,onSerializedStateUpdated:()=>{},linterContext:s.b});var os={mobileZoomableParentFix:{transform:"translate3d(0,0,0)"}},as={fontSize:"150%"},ls={fontSize:"120%"},hs={fontSize:"130%"},cs=[()=>[h.createElement("span",{key:"plus",style:ls},"+"),"+"],()=>[h.createElement("span",{key:"minus",style:as},"-"),"-"],e=>{var{TeX:t}=ie();return e.convertDotToTimes?[h.createElement(t,{key:"times",style:as},o.doNotTranslate("\\times")),"\\times"]:[h.createElement(t,{key:"times",style:as},o.doNotTranslate("\\cdot")),"\\cdot"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"frac",style:as},o.doNotTranslate("\\frac{x}{y}")),e=>{var t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}]}],ps={basic:cs,"basic+div":cs.concat([()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"div"},o.doNotTranslate("\\div")),"\\div"]}]),trig:[()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"sin"},o.doNotTranslate("\\sin")),"\\sin"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"cos"},o.doNotTranslate("\\cos")),"\\cos"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"tan"},o.doNotTranslate("\\tan")),"\\tan"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"theta",style:hs},o.doNotTranslate("\\theta")),"\\theta"]},()=>{var{TeX:e}=ie();return[h.createElement("span",{key:"phi"},h.createElement("span",{className:"perseus-sr-only"},o.doNotTranslate("phi")),h.createElement(e,{key:"pi",style:hs},o.doNotTranslate("\\phi"))),"\\phi"]}],prealgebra:[()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"sqrt"},o.doNotTranslate("\\sqrt{x}")),"\\sqrt"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"nthroot"},o.doNotTranslate("\\sqrt[3]{x}")),e=>{e.typedText("nthroot3"),e.keystroke("Right")}]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"pow",style:ls},o.doNotTranslate("a^b")),e=>{var t=e.latex();e.typedText("^"),e.latex()===t&&e.typedText("a^b")}]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"pi",style:ls},o.doNotTranslate("\\pi")),"\\pi"]}],logarithms:[()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"log"},o.doNotTranslate("\\log")),"\\log"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"ln"},o.doNotTranslate("\\ln")),"\\ln"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"log_b"},o.doNotTranslate("\\log_b")),e=>{e.typedText("log_"),e.keystroke("Right"),e.typedText("("),e.keystroke("Left"),e.keystroke("Left")}]}],"basic relations":[()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"eq"},"="),"="]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"lt"},o.doNotTranslate("\\lt")),"\\lt"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"gt"},o.doNotTranslate("\\gt")),"\\gt"]}],"advanced relations":[()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"neq"},o.doNotTranslate("\\neq")),"\\neq"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"leq"},o.doNotTranslate("\\leq")),"\\leq"]},()=>{var{TeX:e}=ie();return[h.createElement(e,{key:"geq"},o.doNotTranslate("\\geq")),"\\geq"]}]},us=d.a.arrayOf(d.a.oneOf(p()(ps).keys()));class ds extends h.Component{render(){var e=p.a.sortBy(this.props.sets,(e=>p.a.keys(ps).indexOf(e))),t=p()(e).map((e=>ps[e])),r=p()(t).map((e=>e.map((e=>{var t=e(this.props);return h.createElement("button",{onClick:()=>this.props.onInsert(t[1]),className:"tex-button",key:t[0].key,type:"button"},t[0])})))),n=p()(r).map(((e,t)=>h.createElement("div",{className:"clearfix tex-button-row",key:this.props.sets[t]},e)));return h.createElement("div",{className:"".concat(this.props.className||""," preview-measure")},n)}}j(ds,"propTypes",{sets:us.isRequired,onInsert:d.a.func.isRequired,className:d.a.string}),j(ds,"buttonSets",ps),j(ds,"buttonSetsType",us);var ms=d.a;class fs extends h.Component{constructor(){super(...arguments),j(this,"mouseDown",void 0),j(this,"state",{focused:!1}),j(this,"handleFocus",(()=>{this.setState({focused:!0})})),j(this,"handleMouseDown",(e=>{var t=v.a.findDOMNode(this).contains(e.target);this.mouseDown=t,t||this.setState({focused:!1})})),j(this,"handleMouseUp",(()=>{this.mouseDown&&this.focus(),this.mouseDown=!1})),j(this,"handleBlur",(e=>{this.mouseDown||v.a.findDOMNode(this).contains(e.relatedTarget)||this.setState({focused:!1})})),j(this,"_shouldShowButtons",(()=>"always"===this.props.buttonsVisible||"never"!==this.props.buttonsVisible&&this.state.focused)),j(this,"insert",(e=>{var t=this.mathField();p()(e).isFunction()?e(t):"\\"===e[0]?t.cmd(e).focus():t.write(e).focus(),t.focus()})),j(this,"mathField",(e=>S.a.getInterface(2).MathField(v.a.findDOMNode(this.refs.mathinput),e))),j(this,"focus",(()=>{this.mathField().focus(),this.setState({focused:!0})})),j(this,"blur",(()=>{this.mathField().blur(),this.setState({focused:!1})}))}render(){var e=l()({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});this.props.className&&(e=e+" "+this.props.className);var t=null;return this._shouldShowButtons()&&(t=h.createElement(ds,{sets:this.props.buttonSets,className:"math-input-buttons absolute",convertDotToTimes:this.props.convertDotToTimes,onInsert:this.insert})),h.createElement("div",{style:{display:"inline-block"}},h.createElement("div",{style:{display:"inline-block"}},h.createElement("span",{className:e,ref:"mathinput","aria-label":this.props.labelText,onFocus:this.handleFocus,onBlur:this.handleBlur})),h.createElement("div",{style:{position:"relative"},onBlur:this.handleBlur},t))}componentWillUnmount(){window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)}componentDidMount(){window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp);var e=!1;this.mathField({autoCommands:"pi theta phi sqrt nthroot",charsThatBreakOutOfSupSub:"+-*/=<>≠≤≥",supSubsRequireOperand:!0,spaceBehavesLikeTab:!0,handlers:{edited:t=>{var r=t.latex();if(r=r.replace(/<>/g,"\\ne"),this.props.convertDotToTimes){r=r.replace(/\\cdot/g,"\\times");var n=t.__controller.cursor[S.a.L];n&&"\\cdot "===n.ctrlSeq&&(t.__controller.backspace(),t.cmd("\\times"))}else r=r.replace(/\\times/g,"\\cdot");e&&this.props.value!==r&&this.props.onChange(r)},enter:()=>{f()(v.a.findDOMNode(this.refs.mathinput)).submit()},upOutOf:e=>{e.typedText("^")}}}),this.mathField().latex(this.props.value),e=!0}}function gs(e,t,r){var n=e.indexOf("{",t)+1,i=function(e,t){for(var r=0,n=t,i=e.length;n<i;n++){var s=e[n];if("{"===s?r++:"}"===s&&r--,r<0)return n}return e.length}(e,n);return{endpoint:i,expression:ys(e.substring(n,i),r)}}function vs(e,t){var r=e.indexOf("\\frac",t),n=e.indexOf("\\dfrac",t);return r>-1&&n>-1?Math.min(r,n):r>-1?r:n>-1?n:-1}function ys(e,t){if(!e)return"";for(var r="",n=0,i=vs(e,n);i>-1;){r+=e.substring(n,i);var s=gs(e,n=i,t),o=gs(e,n=s.endpoint+1,t);n=o.endpoint+1,r.length&&(r+=" "),r+=t(s.expression,o.expression),i=vs(e,n)}return r+=e.slice(n)}j(fs,"propTypes",{value:ms.string,onChange:ms.func.isRequired,convertDotToTimes:ms.bool,buttonsVisible:ms.oneOf(["always","never","focused"]),buttonSets:ds.buttonSetsType.isRequired,labelText:d.a.string,onFocus:ms.func,onBlur:ms.func}),j(fs,"defaultProps",{value:"",convertDotToTimes:!1,buttonsVisible:"focused"});var bs=function(e){return ys(e,(function(e,t){return e+"/"+t})).replace("\\%","%")},xs=function(e){function t(e){return e.indexOf("\\frac")>-1||e.indexOf("\\dfrac")>-1}return ys(e,(function(e,r){return(t(e)||t(r)?"\\dfrac":"\\frac")+" {"+e+"}{"+r+"}"}))};class ws extends h.Component{constructor(){super(...arguments),j(this,"state",{focused:!1,selectorNamespace:p.a.uniqueId("math-output")}),j(this,"_getInputClassName",(()=>{var e="math-output "+ee.INPUT+" "+ee.INTERACTIVE;return this.state.focused&&(e+=" "+ee.FOCUSED),this.props.className&&(e+=" "+this.props.className),e})),j(this,"_getDisplayValue",(e=>xs(null!=e?""+e:""))),j(this,"getValue",(()=>this.props.value)),j(this,"focus",(()=>{this.state.focused||(this.props.onFocus(),this._bindBlurHandler(),this.setState({focused:!0}))})),j(this,"blur",(()=>{this.state.focused&&(this.props.onBlur(),this._unbindBlurHandler(),this.setState({focused:!1}))})),j(this,"_bindBlurHandler",(()=>{f()(document).bind("vclick."+this.state.selectorNamespace,(e=>{f()(e.target).closest(v.a.findDOMNode(this)).length||this.blur()}))})),j(this,"_unbindBlurHandler",(()=>{f()(document).unbind("."+this.state.selectorNamespace)}))}render(){var{TeX:e}=ie();return h.createElement("span",{ref:"input",className:this._getInputClassName(),"aria-label":this.props.labelText,onMouseDown:this.focus,onTouchStart:this.focus},h.createElement("div",{style:{textAlign:"center"}},h.createElement(e,null,this._getDisplayValue(this.props.value))))}componentWillUnmount(){this._unbindBlurHandler()}}j(ws,"propTypes",{value:d.a.oneOfType([d.a.string,d.a.number]),className:d.a.string,labelText:d.a.string,onFocus:d.a.func,onBlur:d.a.func}),j(ws,"defaultProps",{value:"",onFocus:function(){},onBlur:function(){}});var ks=["labelText"];class Cs extends h.Component{constructor(){super(...arguments),j(this,"focus",(()=>{v.a.findDOMNode(this).focus()})),j(this,"blur",(()=>{v.a.findDOMNode(this).blur()})),j(this,"getValue",(()=>{var e;return null===(e=v.a.findDOMNode(this))||void 0===e?void 0:e.value})),j(this,"getStringValue",(()=>{var e;return null===(e=v.a.findDOMNode(this))||void 0===e?void 0:e.value.toString()})),j(this,"setSelectionRange",((e,t)=>{v.a.findDOMNode(this).setSelectionRange(e,t)})),j(this,"getSelectionStart",(()=>v.a.findDOMNode(this).selectionStart)),j(this,"getSelectionEnd",(()=>v.a.findDOMNode(this).selectionEnd))}render(){var e=this.props,{labelText:t}=e,r=V(e,ks);return h.createElement("input",G({},r,{type:"text","aria-label":t,onChange:e=>this.props.onChange(e.target.value)}))}}j(Cs,"propTypes",{value:d.a.string,onChange:d.a.func.isRequired,className:d.a.string,labelText:d.a.string,onFocus:d.a.func,onBlur:d.a.func,disabled:d.a.bool}),j(Cs,"defaultProps",{value:"",disabled:!1});var Es=x()({displayName:"Triangle",propTypes:{color:d.a.string.isRequired,left:d.a.number.isRequired,top:d.a.number.isRequired,width:d.a.number.isRequired,height:d.a.number.isRequired,horizontalDirection:d.a.oneOf(["left","right"]).isRequired,verticalDirection:d.a.oneOf(["top","bottom"]).isRequired},render:function(){var e,t,r,n,i="".concat(this.props.width,"px solid transparent");"right"===this.props.horizontalDirection?e=i:t=i;var s="".concat(this.props.height,"px solid ").concat(this.props.color);return"top"===this.props.verticalDirection?r=s:n=s,h.createElement("div",{style:{display:"block",height:0,width:0,position:"absolute",left:this.props.left,top:this.props.top,borderLeft:e,borderRight:t,borderTop:r,borderBottom:n}})}}),Ss=x()({displayName:"TooltipArrow",propTypes:{position:d.a.string,visibility:d.a.string,left:d.a.number,top:d.a.number,color:d.a.string.isRequired,border:d.a.string.isRequired,width:d.a.number.isRequired,height:d.a.number.isRequired,horizontalDirection:d.a.oneOf(["left","right"]).isRequired,verticalDirection:d.a.oneOf(["top","bottom"]).isRequired},getDefaultProps:function(){return{position:"relative",visibility:"visible",left:0,top:0}},render:function(){var e="top"===this.props.verticalDirection,t=e?0:1,r=e?0:-1;return h.createElement("div",{style:{display:"block",position:this.props.position,visibility:this.props.visibility,left:this.props.left,top:this.props.top,width:this.props.width+2,height:this.props.height+1,marginTop:-1,marginBottom:-2,zIndex:10}},h.createElement(Es,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.border,left:0,top:r,width:this.props.width+2,height:this.props.height+2}),h.createElement(Es,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.color,left:1,top:t,width:this.props.width,height:this.props.height}))}}),Ts={top:{top:"-100%"},bottom:{top:0}},Ms={left:{targetLeft:0},right:{targetLeft:"100%"}},_s={left:{tooltipLeft:0,arrowLeft:e=>0},right:{tooltipLeft:"-100%",arrowLeft:e=>-e-2}},As=x()({displayName:"Tooltip",propTypes:{show:d.a.bool.isRequired,className:d.a.string,arrowSize:d.a.number,borderColor:d.a.string,verticalPosition:d.a.oneOf(Object.keys(Ts)),horizontalPosition:d.a.oneOf(Object.keys(Ms)),horizontalAlign:d.a.oneOf(Object.keys(_s)),children:d.a.arrayOf(d.a.element).isRequired,targetContainerStyle:d.a.any},getDefaultProps:function(){return{className:"",arrowSize:10,borderColor:"#ccc",verticalPosition:"bottom",horizontalPosition:"left",horizontalAlign:"left",targetContainerStyle:{}}},getInitialState:function(){return{height:null}},componentDidMount:function(){this._updateHeight()},UNSAFE_componentWillReceiveProps:function(){this.setState({height:null})},componentDidUpdate:function(){this._updateHeight()},_renderToolTipDiv:function(e){var t,r,n=Object.assign({},Ms[this.props.horizontalPosition],_s[this.props.horizontalAlign],Ts[this.props.verticalPosition]);return e?(t=h.createElement(Ss,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,position:"absolute",color:"white",border:this.props.borderColor,left:n.arrowLeft(this.props.arrowSize),top:2-this.props.arrowSize,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10}),r=h.createElement(Ss,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,visibility:"hidden",color:"white",border:this.props.borderColor,left:n.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10})):(t=h.createElement(Ss,{verticalDirection:"bottom",horizontalDirection:this.props.horizontalAlign,color:"white",border:this.props.borderColor,left:n.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10}),r=null),h.createElement("div",{style:{position:"relative",height:0,display:this.props.show?"block":"none"}},h.createElement("div",{ref:"tooltipContainer",className:"tooltipContainer",style:{position:"absolute",height:this.state.height||void 0,left:n.targetLeft}},t,h.createElement("div",{className:this.props.className,ref:"tooltipContent",style:{position:"relative",top:n.top,left:n.tooltipLeft,border:"1px solid "+this.props.borderColor,WebkitBoxShadow:"0 1px 3px "+this.props.borderColor,MozBoxShadow:"0 1px 3px "+this.props.borderColor,boxShadow:"0 1px 3px "+this.props.borderColor,zIndex:9}},this.props.children.slice(1)),r))},_updateHeight:function(){var e=v.a.findDOMNode(this.refs.tooltipContainer).offsetHeight;e!==this.state.height&&this.setState({height:e})},render:function(){var e="top"===this.props.verticalPosition;return h.createElement("span",null,e&&this._renderToolTipDiv(e),h.createElement("div",{style:this.props.targetContainerStyle},this.props.children[0]),!e&&this._renderToolTipDiv())}}),{captureScratchpadTouchStart:Is}=Pe,Os="math",Ns="text",Ps="tex";class Rs extends h.Component{constructor(){super(...arguments),j(this,"state",{focused:!1,showExamples:!1}),j(this,"_getUniqueId",(()=>"input-with-examples-".concat(btoa(this.props.id).replace(/=/g,"")))),j(this,"_getInputClassName",(()=>{if(this.props.type===Ps)return this.props.className;var e=ee.INPUT+" "+ee.INTERACTIVE;return this.state.focused&&(e+=" "+ee.FOCUSED),this.props.className&&(e+=" "+this.props.className),e})),j(this,"_getPropsForInputType",(()=>{var e={"aria-describedby":this._getUniqueId(),ref:"input",className:this._getInputClassName(),labelText:this.props.labelText,value:this.props.value,onFocus:this._handleFocus,onBlur:this._handleBlur,disabled:this.props.disabled};return this.props.type===Ps?e:(p.a.extend(e,{onChange:this.props.onChange,onTouchStart:Is}),this.props.type===Os?p.a.extend({buttonSet:this.props.buttonSet,buttonsVisible:this.props.buttonsVisible,convertDotToTimes:this.props.convertDotToTimes},e):this.props.type===Ns?p.a.extend({autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"},e):void 0)})),j(this,"_getComponentForInputType",(()=>{switch(this.props.type){case Ps:return ws;case Os:return fs;case Ns:return Cs;default:return null}})),j(this,"_renderInput",(()=>{var e=this._getPropsForInputType(),t=this._getComponentForInputType();return h.createElement(t,e)})),j(this,"_handleFocus",(()=>{this.props.onFocus(),this.setState({focused:!0,showExamples:!0})})),j(this,"show",(()=>{this.setState({showExamples:!0})})),j(this,"hide",(()=>{this.setState({showExamples:!1})})),j(this,"_handleBlur",(()=>{this.props.onBlur(),this.setState({focused:!1,showExamples:!1})})),j(this,"focus",(()=>{this.refs.input.focus()})),j(this,"blur",(()=>{this.refs.input.blur()})),j(this,"handleChange",(e=>{this.props.onChange(e.target.value)}))}render(){var e=this._renderInput();if(this.props.type===Ps)return e;var t=p.a.map(this.props.examples,(e=>"- "+e)).join("\n"),r=this.props.shouldShowExamples&&this.state.showExamples;return h.createElement(As,{ref:"tooltip",className:"perseus-formats-tooltip preview-measure",horizontalPosition:"left",horizontalAlign:"left",verticalPosition:"bottom",arrowSize:10,borderColor:"#ccc",show:r},e,h.createElement("div",{id:this._getUniqueId()},h.createElement(ss,{content:t,linterContext:s.d(this.props.linterContext,"input-with-examples")})))}}j(Rs,"propTypes",{type:d.a.oneOf([Os,Ns,Ps]),value:d.a.string,onChange:d.a.func.isRequired,className:d.a.string,examples:d.a.arrayOf(d.a.string).isRequired,shouldShowExamples:d.a.bool,convertDotToTimes:d.a.bool,buttonSet:d.a.string,buttonsVisible:d.a.oneOf(["always","never","focused"]),labelText:d.a.string,onFocus:d.a.func,onBlur:d.a.func,disabled:d.a.bool,id:d.a.string.isRequired,linterContext:s.c}),j(Rs,"defaultProps",{type:Ns,shouldShowExamples:!0,onFocus:function(){},onBlur:function(){},disabled:!1,linterContext:s.b});var Ls=["key","ref","containerSizeClass","widgetId","onChange","problemNum","apiOptions","questionCompleted","findWidgets","onRemove","id","onBlur","onFocus","trackInteraction","keypadElement"],Fs='Usage:\n  this.change({propName: 5}, callback);\n  this.change("propName", 5, callback);\n  this.change("propName")',Ds=function(e,t,r){var n=p.a.omit(e.props,Ls),i=p.a.extend(n,t);e.props.onChange(i,r)},zs=function e(t,r,n,i){if(void 0===n)return p.a.partial(e,t,r);var s={};s[r]=n,Ds(t,s,i)},Bs=function(e,t,r){if(p.a.isObject(e)&&void 0===r)return Ds(this,e,r=t);if("string"==typeof e)return zs(this,e,t,r);throw new le("Invalid types sent to this.change(): "+p.a.toArray(arguments).join()+"\n"+Fs,oe.Internal)},qs={onChange:d.a.func.isRequired},Hs=Object.freeze({__proto__:null,change:Bs,propTypes:qs}),Us=o._("Sorry, I don't understand that!"),Ws=e=>e.replace(/([_^])([^{])/g,"$1{$2}");class js extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"displayName","Expression"),j(this,"state",{showErrorTooltip:!1,showErrorText:!1}),j(this,"componentDidMount",(()=>{this._isMounted=!0})),j(this,"componentDidUpdate",(e=>{p.a.isEqual(this.props.value,e.value)&&p.a.isEqual(this.props.functions,e.functions)||(clearTimeout(this.errorTimeout),this.parse(this.props.value,this.props).parsed?this.setState({showErrorTooltip:!1}):this.errorTimeout=setTimeout((()=>{!1!==this.props.apiOptions.onInputError(null,this.props.value,Us)&&this.setState({showErrorTooltip:!0})}),2e3))})),j(this,"componentWillUnmount",(()=>{clearTimeout(this.errorTimeout),this._isMounted=!1})),j(this,"_isMounted",!1),j(this,"errorTimeout",null),j(this,"simpleValidate",((e,t)=>(t=t||function(){},js.validate(this.getUserInput(),e,t)))),j(this,"getUserInput",(()=>js.getUserInputFromProps(this.props))),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"parse",((e,t)=>{var r=p.a.pick(t||this.props,"functions");return p.a.extend(r,{decimal_separator:o.getDecimalSeparator()}),n.e(Ws(e),r)})),j(this,"changeAndTrack",((e,t)=>{this.change("value",e,t),this.props.trackInteraction()})),j(this,"_handleFocus",(()=>{this.props.onFocus([])})),j(this,"_handleBlur",(()=>{this.props.onBlur([])})),j(this,"focus",(()=>(this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0))),j(this,"focusInputPath",(e=>{this.refs.input.focus()})),j(this,"blurInputPath",(e=>{this.refs.input.blur()})),j(this,"insert",(e=>{this.props.apiOptions.staticRender||this.refs.input.insert(e)})),j(this,"getInputPaths",(()=>[[]])),j(this,"getGrammarTypeForPath",(e=>"expression")),j(this,"setInputValue",((e,t,r)=>{this.props.onChange({value:t},r)}))}static validate(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=p.a.clone(t);p.a.extend(i,{decimal_separator:o.getDecimalSeparator()});var s,a,l,h,c,u=!0;for(var d of t.answerForms||[]){var m=(h=d,c=void 0,(c=n.e(h.value,t)).parsed?ue.expression.createValidatorFunctional(c.expr,p()({}).extend(i,{simplify:h.simplify,form:h.form})):(ae.error("Unable to parse solution answer for expression",oe.InvalidInput,{loggedMetadata:{rubric:JSON.stringify(t)}}),null));if(m){var f=m(e);if(f.correct){s=d,a=f.message||"";break}u=u&&f.empty,"correct"===d.considered&&f.ungraded&&!l&&(l=f)}}return s?"ungraded"===s.considered?{type:"invalid",message:!1===r(null,e,a)?null:a}:{type:"points",earned:"correct"===s.considered?1:0,total:1,message:a}:l?{type:"invalid",message:l.message,suppressAlmostThere:l.suppressAlmostThere}:u?{type:"invalid",message:null}:{type:"points",earned:0,total:1}}static getUserInputFromProps(e){return Ws(e.value)}static getOneCorrectAnswerFromRubric(e){var t=(e.answerForms||[]).filter((e=>"correct"===e.considered));if(0!==t.length)return t[0].value}render(){if(this.props.apiOptions.customKeypad)return h.createElement(i.KeypadInput,{ref:"input",value:this.props.value,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:()=>{var e;null===(e=this.props.keypadElement)||void 0===e||e.configure(this.props.keypadConfiguration,(()=>{this._isMounted&&this._handleFocus()}))},onBlur:this._handleBlur});if(this.props.apiOptions.staticRender)return h.createElement(Rs,{ref:"input",value:this.props.value,type:"tex",examples:[],shouldShowExamples:!1,onChange:this.changeAndTrack,onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,linterContext:this.props.linterContext});var e=h.createElement("span",{className:"error-tooltip",role:"tooltip"},h.createElement(As,{className:"error-text-container",horizontalPosition:"right",horizontalAlign:"left",verticalPosition:"top",arrowSize:10,borderColor:"#fcc335",show:this.state.showErrorText},h.createElement("span",{className:"error-icon","data-test-id":"test-error-icon",onMouseEnter:()=>{this.setState({showErrorText:!0})},onMouseLeave:()=>{this.setState({showErrorText:!1})},onClick:()=>{this.setState({showErrorText:!this.state.showErrorText})}},h.createElement(Y,Nr)),h.createElement("div",{className:"error-text"},Us))),t=l()({"perseus-widget-expression":!0,"show-error-tooltip":this.state.showErrorTooltip});return h.createElement("div",{className:t},h.createElement(fs,{ref:"input",className:ee.INTERACTIVE,value:this.props.value,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonsVisible:this.props.buttonsVisible||"focused",buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur}),this.state.showErrorTooltip&&e)}}j(js,"defaultProps",{value:"",times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:()=>{},onBlur:()=>{},apiOptions:J.defaults,linterContext:s.b});var Gs=e=>{var t=i.KeypadTypes.EXPRESSION,r={},s={};for(var o of e.answerForms){var a=n.e(o.value,e);a.parsed&&function(){var e=a.expr,t=e=>(e=>"pi"===e||"theta"===e)(e)?e.toUpperCase():e;for(var n of e.getVars())r[t(n)]=!0;for(var i of e.getConsts())s[t(i)]=!0}()}var l=Object.keys(r);l.sort();var h=Object.keys(s);h.sort();var c=[...l,...h];return c.length||c.push("PI"),{keypadType:t,extraKeys:c}},Vs={name:"expression",displayName:"Expression / Equation",defaultAlignment:"inline-block",widget:js,transform:e=>{var{times:t,functions:r,buttonSets:n,buttonsVisible:i}=e;return{keypadConfiguration:Gs(e),times:t,functions:r,buttonSets:n,buttonsVisible:i}},version:{major:1,minor:0},propUpgrades:{1:e=>({times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,answerForms:[{considered:"correct",form:e.form,simplify:e.simplify,value:e.value}]})},isLintable:!0};class Ys extends h.Component{render(){var e=p.a.uniq(this.props.answers),t=p.a.map(e,(e=>h.createElement("dd",{key:e},e)));return h.createElement("dl",{className:"perseus-possible-answers"},h.createElement("dt",null,o.doNotTranslate("Correct Answer")),t)}}j(Ys,"propTypes",{answers:d.a.arrayOf(d.a.string)});var Xs=["keypadElement","onFocus","value"],Qs=x()({displayName:"SimpleKeypadInput",propTypes:{keypadElement:i.keypadElementPropType,onFocus:d.a.func,value:d.a.oneOfType([d.a.string,d.a.number])},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},focus(){this.refs.input.focus()},blur(){this.refs.input.blur()},getValue:function(){return this.props.value},render(){var e=this,t=e.props,{keypadElement:r,onFocus:n,value:s}=t,o=V(t,Xs);return h.createElement(i.KeypadInput,G({ref:"input",keypadElement:r,onFocus:()=>{r?r.configure({keypadType:i.KeypadTypes.FRACTION},(()=>{e._isMounted&&n&&n()})):n&&n()},value:null==s?"":""+s},o))}}),Ks=bs,$s={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},Zs={integer:function(e){return o._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?o._("a *proper* fraction, like $1/2$ or $6/10$"):o._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?o._("an *improper* fraction, like $10/7$ or $14/8$"):o._("a *simplified improper* fraction, like $7/4$")},mixed:function(e){return o._("a mixed number, like $1\\ 3/4$")},decimal:function(e){return o._("an *exact* decimal, like $0.75$")},percent:function(e){return o._("a percent, like $12.34\\%$")},pi:function(e){return o._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}};class Js extends h.Component{constructor(){super(...arguments),j(this,"shouldShowExamples",(()=>"number"!==this.props.answerType&&!this.props.apiOptions.staticRender)),j(this,"handleChange",((e,t)=>{this.props.onChange({currentValue:e},t)})),j(this,"_getInputType",(()=>this.props.apiOptions.staticRender?"tex":"text")),j(this,"_handleFocus",(()=>{this.props.onFocus([]);var{interactionCallback:e}=this.props.apiOptions;e&&e()})),j(this,"_handleBlur",(()=>{this.props.onBlur([])})),j(this,"focus",(()=>(this.refs.input.focus(),!0))),j(this,"focusInputPath",(e=>{this.refs.input.focus()})),j(this,"blurInputPath",(e=>{this.refs.input.blur()})),j(this,"getInputPaths",(()=>[[]])),j(this,"getGrammarTypeForPath",(e=>"number")),j(this,"setInputValue",((e,t,r)=>{this.props.onChange({currentValue:t},r)})),j(this,"getUserInput",(()=>Js.getUserInputFromProps(this.props))),j(this,"simpleValidate",((e,t)=>(t=t||function(){},Js.validate(this.getUserInput(),e,t)))),j(this,"examples",(()=>{var e=this.props.answerType,t=$s[e].forms.split(/\s*,\s*/),r=p.a.map(t,(function(e){return Zs[e](this.props)}),this);return[o._("**Your answer should be** ")].concat(r)}))}render(){if(this.props.apiOptions.customKeypad){var e=h.createElement(Qs,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});return this.props.rightAlign?h.createElement("div",{className:"perseus-input-right-align"},e):e}var t=this.props.reviewModeRubric,r=null,n=null;if(this.props.apiOptions.satStyling&&t){var i=this.simpleValidate(t);if(!(r="points"===i.type&&i.earned===i.total)){var s=String(t.value);t.inexact&&t.maxError&&(s+=" ± "+t.maxError);var o=[s];n=h.createElement(Ys,{answers:o})}}var a={};a["perseus-input-size-"+this.props.size]=!0,a["perseus-input-right-align"]=this.props.rightAlign,a[ee.CORRECT]=t&&r&&this.props.currentValue,a[ee.INCORRECT]=t&&!r&&this.props.currentValue,a[ee.UNANSWERED]=t&&!this.props.currentValue;var c=h.createElement(Rs,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:l()(a),type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,linterContext:this.props.linterContext});return n?h.createElement("span",{className:"perseus-input-with-answer-blurb"},c,n):c}static validate(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};null==t.answerType&&(t.answerType="number");var n=ue.number.createValidatorFunctional(t.value,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:$s[t.answerType].forms})(Ks(e.currentValue));return n.empty?{type:"invalid",message:!1===(null==r?void 0:r(null,e.currentValue,n.message))?null:n.message}:{type:"points",earned:n.correct?1:0,total:1,message:n.message}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){if(null!=e.value){var t=String(e.value);return e.inexact&&e.maxError&&(t+=" ± "+e.maxError),t}}}j(Js,"defaultProps",{currentValue:"",size:"normal",answerType:"number",rightAlign:!1,apiOptions:J.defaults,linterContext:s.b});var eo={name:"input-number",displayName:"Number text box (old)",defaultAlignment:"inline-block",hidden:!0,widget:Js,transform:e=>{var{simplify:t,size:r,answerType:n,rightAlign:i}=e;return{simplify:t,size:r,answerType:n,rightAlign:i}},isLintable:!0},to=bs,ro=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],no={integer:()=>o._("an integer, like $6$"),proper:e=>"optional"===e.simplify?o._("a *proper* fraction, like $1/2$ or $6/10$"):o._("a *simplified proper* fraction, like $3/5$"),improper:e=>"optional"===e.simplify?o._("an *improper* fraction, like $10/7$ or $14/8$"):o._("a *simplified improper* fraction, like $7/4$"),mixed:()=>o._("a mixed number, like $1\\ 3/4$"),decimal:()=>o._("an *exact* decimal, like $0.75$"),pi:()=>o._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")};class io extends h.Component{constructor(){super(...arguments),j(this,"state",{previousValues:[""]}),j(this,"getAnswerBlurb",(e=>{var t,r;if(this.props.apiOptions.satStyling&&e){var n=this.simpleValidate(e);if(!(t="points"===n.type&&n.earned===n.total)){var i=p.a.filter(e.answers,(e=>"correct"===e.status)),s=p.a.map(i,(e=>{var t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);var r=he.toNumericString(e.value,t);return e.maxError&&(r+=" ± "+he.toNumericString(e.maxError,t)),r}));r=h.createElement(Ys,{answers:s})}}return[r,!!t]})),j(this,"getClasses",((e,t)=>{var r={};return r["perseus-input-size-"+this.props.size]=!0,r["perseus-input-right-align"]=this.props.rightAlign,r[ee.CORRECT]=t&&e&&this.props.currentValue,r[ee.INCORRECT]=t&&!e&&this.props.currentValue,r[ee.UNANSWERED]=t&&!this.props.currentValue,r})),j(this,"examples",(()=>{var e,t=0!==(null===(e=this.props.answerForms)||void 0===e?void 0:e.length)?this.props.answerForms:p.a.map(p.a.keys(no),(e=>({name:e,simplify:"required"}))),r=p.a.map(t,(e=>no[e.name](e)));return r=p.a.uniq(r),[o._("**Your answer should be** ")].concat(r)})),j(this,"shouldShowExamples",(()=>{var e,t,r=0===(null===(e=this.props.answerForms)||void 0===e?void 0:e.length),n=p.a.uniq(null===(t=this.props.answerForms)||void 0===t?void 0:t.map((e=>e.name))).length>=p.a.size(no);return!r&&!n})),j(this,"simpleValidate",(e=>io.validate(this.getUserInput(),e))),j(this,"focus",(()=>(this.refs.input.focus(),!0))),j(this,"focusInputPath",(e=>{this.refs.input.focus()})),j(this,"blurInputPath",(e=>{this.refs.input.blur()})),j(this,"getInputPaths",(()=>[[]])),j(this,"getGrammarTypeForPath",(e=>"number")),j(this,"setInputValue",((e,t,r)=>{this.props.onChange({currentValue:t},r)})),j(this,"getUserInput",(()=>io.getUserInputFromProps(this.props))),j(this,"handleChange",((e,t)=>{this.props.onChange({currentValue:e},t),this.props.trackInteraction()})),j(this,"_getInputType",(()=>this.props.apiOptions.staticRender?"tex":"text")),j(this,"_handleFocus",(()=>{this.props.onFocus([]);var{interactionCallback:e}=this.props.apiOptions;e&&e()})),j(this,"_handleBlur",(()=>{this.props.onBlur([])}))}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){var t=p.a.filter(e.answers,(e=>"correct"===e.status)),r=p.a.map(t,(e=>{var t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);var r=he.toNumericString(e.value,t);return e.maxError&&(r+=" ± "+he.toNumericString(e.maxError,t)),r}));if(0!==r.length)return r[0]}static validate(e,t){var r=p.a.pluck(ro,"value"),n=e=>ue.number.createValidatorFunctional(e.value,{message:e.message,simplify:"correct"===e.status?e.simplify:"optional",inexact:!0,maxError:e.maxError,forms:e.strict&&e.answerForms&&0!==e.answerForms.length?e.answerForms:r}),i=to(e.currentValue),s=p.a.where(t.answers,{status:"correct"}),o=s.every((e=>Math.abs(e.value)<=1)),a=p.a.find(p.a.map(s,(e=>{var r=i;return t.coefficient&&(r?"-"===r&&(r=-1):r=1),n(e)(so(r,o))})),(e=>e.correct||e.empty));if(!a){var l=[].concat(p.a.where(t.answers,{status:"ungraded"}),p.a.where(t.answers,{status:"wrong"})),h=p.a.find(l,(e=>n(e)(so(i,o)).correct));a={empty:!!h&&"ungraded"===h.status,correct:!!h&&"correct"===h.status,message:h?h.message:null,guess:i}}return a.empty?{type:"invalid",message:a.message}:{type:"points",earned:a.correct?1:0,total:1,message:a.message}}render(){var e=this.props.reviewModeRubric,t=this.getAnswerBlurb(e),r=t[0],n=t[1],i=this.getClasses(n,e),s=this.props.labelText;null!=s&&""!==s||(s=o._("Your answer:"));if(this.props.apiOptions.customKeypad)return(e=>this.props.rightAlign?h.createElement("div",{className:"perseus-input-right-align"},e):e)(h.createElement(Qs,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur}));var a=h.createElement(Rs,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:l()(i),labelText:s,type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,highlightLint:this.props.highlightLint});return r?h.createElement("span",{className:"perseus-input-with-answer-blurb"},a,r):this.props.apiOptions.satStyling?h.createElement("label",{className:"perseus-input-with-label"},h.createElement("span",{className:"perseus-input-label","aria-hidden":"true"},o.doNotTranslate("Answer:")),a):h.createElement("div",null,a)}}j(io,"defaultProps",{currentValue:"",size:"normal",rightAlign:!1,apiOptions:J.defaults,coefficient:!1,answerForms:[],labelText:"",linterContext:s.b,multipleNumberInput:!1});var so=(e,t)=>{if("string"!=typeof e||!e.endsWith("%"))return e;var r=parseFloat(e.slice(0,-1));return isNaN(r)?e:t?r/100:r},oo={name:"numeric-input",displayName:"Number text box",defaultAlignment:"inline-block",accessible:!0,widget:io,transform:function(e){var t,r,n,i,s;return p.a.extend(p.a.omit(e,"answers"),{answerForms:(t=p.a.map(e.answers,(e=>p.a.map(e.answerForms,(t=>({simplify:e.simplify,name:t}))))),i=p.a.flatten(t),r=i,n=p.a.isEqual,s=p.a.reduce(r,((e,t)=>p.a.find(e,n.bind(null,t))?e:e.concat([t])),[]),p.a.sortBy(s,(e=>p.a.keys(no).indexOf(e.name))))})},isLintable:!0},ao={getUserInput:function(){return p.a.omit(this.props,Ls)},getUserInputFromProps:function(e){return p.a.omit(e,Ls)}};class lo extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"displayName","PassageRef"),j(this,"_isMounted",void 0),j(this,"_throttledUpdateRange",void 0),j(this,"state",{lineRange:null,content:null}),j(this,"getUserInput",(()=>ao.getUserInput.call(this))),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"_deferredUpdateRange",(()=>{p.a.defer(this._updateRange)})),j(this,"_updateRange",(()=>{var e=this.props.findWidgets("passage "+this.props.passageNumber)[0],t=null;e&&(t=e.getReference(this.props.referenceNumber)),this._isMounted&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))})),j(this,"simpleValidate",(e=>lo.validate(this.getUserInput(),e)))}shouldComponentUpdate(e,t){return!p.a.isEqual(this.props,e)||!p.a.isEqual(this.state,t)}render(){var e,t,r=this.state.lineRange;if(e=r?r[0]===r[1]?o.$_("line %(lineNumber)s",{lineNumber:r[0]}):o.$_("lines %(lineRange)s",{lineRange:r[0]+"–"+r[1]}):o.$_("lines %(lineRange)s",{lineRange:"?".concat("–","?")}),this.props.summaryText){var n=Ci.parseInline(this.props.summaryText);t=h.createElement("span",{"aria-hidden":!0}," ","(“",Ci.basicOutput(n),"”)")}else t=null;return h.createElement("span",null,e,t,r&&h.createElement("div",{className:"perseus-sr-only"},this.state.content))}componentDidMount(){this._isMounted=!0,this._deferredUpdateRange(),this._throttledUpdateRange=p.a.throttle(this._deferredUpdateRange,500),window.addEventListener("resize",this._throttledUpdateRange)}componentDidUpdate(){this._deferredUpdateRange()}componentWillUnmount(){window.removeEventListener("resize",this._throttledUpdateRange),this._isMounted=!1}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}}j(lo,"defaultProps",{passageNumber:1,referenceNumber:1,summaryText:""});var ho={name:"passage-ref",displayName:"PassageRef (SAT only)",defaultAlignment:"inline",widget:lo,transform:e=>({passageNumber:e.passageNumber,referenceNumber:e.referenceNumber,summaryText:e.summaryText}),version:{major:0,minor:1}},{pureXsMax:co,pureSmMin:po,pureSmMax:uo,pureMdMin:mo,pureMdMax:fo,pureLgMin:go,pureLgMax:vo,pureXlMin:yo}=ft,bo={xs:"@media screen and (max-width: ".concat(co,")"),sm:"@media screen and (min-width: ".concat(po,") and ")+"(max-width: ".concat(uo,")"),md:"@media screen and (min-width: ".concat(mo,") and ")+"(max-width: ".concat(fo,")"),lg:"@media screen and (min-width: ".concat(go,") and ")+"(max-width: ".concat(vo,")"),xl:"@media screen and (min-width: ".concat(yo,")"),xsOrSmaller:"@media screen and (max-width: ".concat(co,")"),smOrSmaller:"@media screen and (max-width: ".concat(uo,")"),mdOrSmaller:"@media screen and (max-width: ".concat(fo,")"),lgOrSmaller:"@media screen and (max-width: ".concat(vo,")"),smOrLarger:"@media screen and (min-width: ".concat(po,")"),mdOrLarger:"@media screen and (min-width: ".concat(mo,")"),lgOrLarger:"@media screen and (min-width: ".concat(go,")"),xlOrLarger:"@media screen and (min-width: ".concat(yo,")")},{zIndexAboveScratchpad:xo,zIndexInteractiveComponent:wo,radioBorderColor:ko,checkedColor:Co,circleSize:Eo,radioMarginWidth:So}=ft,To=C.StyleSheet.create({perseusInteractive:{zIndex:wo,position:"relative"},aboveScratchpad:{position:"relative",zIndex:xo},blankBackground:{backgroundColor:"#FDFDFD"},perseusSrOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},responsiveLabel:{[bo.smOrSmaller]:{fontSize:14,lineHeight:1.3},[bo.md]:{fontSize:17,lineHeight:1.4},[bo.lgOrLarger]:{fontSize:20,lineHeight:1.4}},responsiveInput:{display:"inline-block",WebkitAppearance:"none",appearance:"none","::-ms-check":{display:"none"},backgroundColor:"#fff",border:"2px solid #fff",boxShadow:"0 0px 0px 1px ".concat(ko),outline:"none",boxSizing:"border-box",flexShrink:0,marginBottom:1,marginLeft:1,marginRight:1,marginTop:1,height:Eo-2,width:Eo-2},responsiveRadioInput:{borderRadius:"50%",":checked":{backgroundColor:Co,border:"none",borderRadius:"50%",boxShadow:"inset 0px 0px 0px 2px white, "+"0 0px 0px 2px ".concat(Co),marginTop:So,marginBottom:So,marginLeft:So,marginRight:So,height:Eo-2*So,width:Eo-2*So}},responsiveRadioInputActive:{backgroundColor:"#fff",border:"2px solid #fff",borderRadius:"50%",boxShadow:"0 0px 0px 2px ".concat(Co),marginTop:So,marginBottom:So,marginLeft:So,marginRight:So,height:Eo-2*So,width:Eo-2*So,":checked":{backgroundColor:"#fff"}},disableTextSelection:{userSelect:"none"}});"undefined"==typeof HTMLElement||HTMLElement.prototype.scrollTo||(HTMLElement.prototype.scrollTo=function(e,t){this.scrollLeft=e,this.scrollTop=t});var Mo=(e,t)=>{"function"==typeof e.scrollTo?e.scrollTo(0,t):"scrollTop"in e&&(e.scrollTop=t)},_o=e=>e===document.body||null==e?window:e.scrollHeight>e.clientHeight?e:_o(e.parentElement),Ao=(e,t)=>{setTimeout((()=>{var r=_o(e),n=e.getBoundingClientRect(),i=r===window?{top:0,bottom:window.innerHeight}:r.getBoundingClientRect(),s=0,o=r===window?window.scrollY:r.scrollTop;if(n.bottom>i.bottom){var a=n.bottom-i.bottom;n.top+a<i.top&&(a=n.top-i.top),s=o+a}else if(n.top<i.top){s=o+(n.top-i.top)}!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,i=e===window?window.pageYOffset:e.scrollTop,s=t,o=s-i,a=17,l=r/a,h=0,c=setInterval((function(){if(h<l){var t=h/l,r=(1-Math.cos(Math.PI*t))/2;Mo(e,i+o*r),h+=1}else Mo(e,s),clearInterval(c),n&&n()}),a)}(r,s,750,t)}),0)};class Io extends h.Component{render(){var e={borderColor:this.props.visible?this.props.color:"transparent"};return h.createElement("span",{className:Object(C.css)(Oo.ring),style:e},this.props.children)}}j(Io,"defaultProps",{visible:!0,color:qe});var Oo=C.StyleSheet.create({ring:{margin:"auto",display:"inline-block",borderRadius:"50%",borderWidth:2,padding:2,borderStyle:"solid"}});function No(e){var t=o._("A B C D E F G H I J K L M N O P Q R S T U V W X Y Z").split(" ");return e<t.length?t[e]:" "}var Po=25;class Ro extends h.Component{constructStyles(e,t,r){var n,i=$e,s=$e;return e?t?(i=et,s=r?Ue:et,n=r?et:Ue):r&&(i=nt,s=Ue,n=nt):r&&(s=Ue,n=$e),{color:s,backgroundColor:n,borderColor:i}}render(){var{letter:e,a11yText:t,reviewMode:r,checked:n,correct:i,crossedOut:s}=this.props,{color:o,backgroundColor:a,borderColor:l}=this.constructStyles(r,i,n);return h.createElement("div",{className:Object(C.css)(Bo.iconWrapper)},h.createElement("div",{className:Object(C.css)(Bo.satCircle),style:{backgroundColor:a,borderColor:l}}),h.createElement("div",{style:{color:o},className:Object(C.css)(Bo.letter)},h.createElement("span",{className:"perseus-sr-only"},t),h.createElement("span",{"aria-hidden":"true"},e)),s&&h.createElement(Do,{color:l,sat:!0}))}}var Lo=24;class Fo extends h.Component{getChoiceInner(){var{letter:e,showCorrectness:t,correct:r}=this.props;return t?r?h.createElement(Y,G({},Er,{style:{position:"relative",top:-1}})):h.createElement(Y,qr):e}getDynamicStyles(){var{checked:e,showCorrectness:t,pressed:r,primaryProductColor:n,correct:i,transparentBackground:s}=this.props;if(!t&&r)return{borderColor:n,color:n,backgroundColor:s?"transparent":Ue};if(e){var o=t&&i?qe:n;return{color:Ue,backgroundColor:o,borderColor:o}}return{borderColor:Ye,color:Ye}}render(){var{a11yText:e,checked:t,crossedOut:r,showCorrectness:n,correct:i,focused:s,primaryProductColor:o,previouslyAnswered:a}=this.props,l=this.getDynamicStyles();return h.createElement("div",{className:Object(C.css)(Bo.iconWrapper)},h.createElement(Io,{color:o,visible:s},h.createElement("div",{style:l,className:Object(C.css)(Bo.libraryCircle,n&&i&&Bo.libraryCircleCorrect,n&&!i&&Bo.libraryCircleIncorrect,n&&!i&&(t||a)&&Bo.libraryCircleIncorrectAnswered),"data-is-radio-icon":!0},h.createElement("div",{className:"perseus-sr-only"},e),h.createElement("div",{"aria-hidden":!0},this.getChoiceInner()))),r&&h.createElement(Do,{color:l.borderColor}))}}function Do(e){var t=e.sat?29:28;return h.createElement("svg",{width:t,height:t,viewBox:"0 0 ".concat(t," ").concat(t),className:Object(C.css)(Bo.crossOutLine)},h.createElement("line",{x1:2,x2:t-2,y1:t-2,y2:2,stroke:e.color,strokeWidth:"2",strokeLinecap:"round"}))}class zo extends h.Component{a11yText(e){var{checked:t,correct:r,crossedOut:n,showCorrectness:i}=this.props;return i&&r?t?o._("(Choice %(letter)s, Checked, Correct)",{letter:e}):n?o._("(Choice %(letter)s, Crossed out, Correct)",{letter:e}):o._("(Choice %(letter)s, Correct)",{letter:e}):i&&!r?t?o._("(Choice %(letter)s, Checked, Incorrect)",{letter:e}):n?o._("(Choice %(letter)s, Crossed out, Incorrect)",{letter:e}):o._("(Choice %(letter)s, Incorrect)",{letter:e}):t?o._("(Choice %(letter)s, Checked)",{letter:e}):n?o._("(Choice %(letter)s, Crossed out)",{letter:e}):o._("(Choice %(letter)s)",{letter:e})}render(){var{pos:e,reviewMode:t,checked:r,crossedOut:n,correct:i,product:s,showCorrectness:o,pressed:a,focused:l,primaryProductColor:c,previouslyAnswered:p,transparentBackground:u}=this.props,d=No(e);return"sat"===s?h.createElement(Ro,{letter:d,a11yText:this.a11yText(d),reviewMode:t,checked:r,correct:i,crossedOut:n}):h.createElement(Fo,{letter:d,a11yText:this.a11yText(d),reviewMode:t,checked:r,crossedOut:n,pressed:a,focused:l,correct:i,showCorrectness:o,primaryProductColor:c,previouslyAnswered:p,transparentBackground:u})}}j(zo,"defaultProps",{primaryProductColor:qe});var Bo=C.StyleSheet.create({satCircle:{display:"block",borderRadius:Po,borderStyle:"solid",borderWidth:2,content:"''",height:Po,width:Po,top:1,left:1},iconWrapper:{display:"inline-block",position:"relative"},crossOutLine:{position:"absolute",top:"calc(50% - ".concat(14,"px)"),left:"calc(50% - ".concat(14,"px)")},libraryCircle:{width:Lo,height:Lo,boxSizing:"border-box",borderRadius:Lo,borderStyle:"solid",borderWidth:2,fontFamily:ze,fontWeight:"bold",fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1px"},libraryCircleCorrect:{fontSize:Lo},libraryCircleIncorrect:{fontSize:Lo,borderColor:Ye,color:Ye},libraryCircleIncorrectAnswered:{backgroundColor:Qe,borderColor:Qe,color:Ue},letter:{border:"2px solid transparent",width:Po,height:Po,position:"absolute",top:1,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:Be,fontSize:13}});class qo extends h.Component{render(){var{color:e,pathClassName:t,className:r,title:n,style:i,alt:s}=this.props,{icon:o,size:a}=this.props,l="";"string"==typeof o&&(o={path:o,width:10,height:10}),"number"!=typeof a&&(a=1,l="em");var c=a,p=c/o.height*o.width,u=!!this.props.focusable;return h.createElement("svg",{role:"img",alt:s,"aria-label":n,"aria-hidden":!n||null,className:r,style:i,focusable:u.toString(),width:p+l,height:c+l,viewBox:"".concat(0," ").concat(0," ").concat(o.width," ").concat(o.height)},!!n&&h.createElement("title",null,n),h.createElement("path",{className:t,fill:e,d:o.path}))}}j(qo,"defaultProps",{color:"currentColor"});var Ho=1030,Uo="#71B307",Wo="#BED47A",jo="#314453",Go="#4D6779",Vo="#C42420",Yo="#4898FC",Xo="#46A8BF",Qo="#00294A",Ko=Object.freeze({__proto__:null,black:"#000000",grayDarker:"#333333",grayDark:"#555555",gray:"#999999",grayLight:"#AAAAAA",grayLighter:"#DDDDDD",white:"#FFFFFF",blue:"#005A88",blueDark:"#2C3747",green:"#76A005",red:"#CF5044",yellow:"#FFC40D",orange:"#BF4F04",pink:"#C3325F",purple:"#7A43B6",bodyBackground:"#FFFFFF",textColor:"#444444",linkColor:"#005987",linkColorHover:"#678D00",sansFontFamily:"'Helvetica Neue',Helvetica,Arial,sans-serif",serifFontFamily:"Georgia,'Times New Roman',Times,serif",monoFontFamily:"Monaco,Menlo,Consolas,'Courier New',monospace",baseFontSize:"14px",baseFontFamily:"inherit",baseLineHeight:"20px",altFontFamily:"Georgia,'Times New Roman',Times,serif",headingsFontFamily:"inherit",headingsFontWeight:"bold",headingsColor:"inherit",fontSizeLarge:"18px",fontSizeSmall:"12px",fontSizeMini:"10.5px",paddingLarge:"11px 19px",paddingSmall:"2px 10px",paddingMini:"0 6px",baseBorderRadius:"4px",borderRadiusLarge:"6px",borderRadiusSmall:"3px",tableBackground:"#000000",tableBackgroundAccent:"#F9F9F9",tableBackgroundHover:"#F5F5F5",tableBorder:"#DDDDDD",btnBackground:"#FFFFFF",btnBackgroundHighlight:"rgb(230, 230, 230)",btnBorder:"#CCCCCC",btnPrimaryBackground:"#0088CC",btnPrimaryBackgroundHighlight:"rgb(0, 68, 204)",btnInfoBackground:"#5BC0DE",btnInfoBackgroundHighlight:"#2F96B4",btnSuccessBackground:"#62C462",btnSuccessBackgroundHighlight:"#51A351",btnWarningBackground:"rgb(251, 180, 81)",btnWarningBackgroundHighlight:"#F89406",btnDangerBackground:"#EE5F5B",btnDangerBackgroundHighlight:"#BD362F",btnInverseBackground:"#444444",btnInverseBackgroundHighlight:"#222222",inputBackground:"#FFFFFF",inputBorder:"#CCCCCC",inputBorderRadius:"4px",inputDisabledBackground:"#EEEEEE",formActionsBackground:"#F5F5F5",inputHeight:"30px",dropdownBackground:"#FFFFFF",dropdownBorder:"rgba(0, 0, 0, 0.2)",dropdownDividerTop:"#E5E5E5",dropdownDividerBottom:"#FFFFFF",dropdownLinkColor:"#333333",dropdownLinkColorHover:"#FFFFFF",dropdownLinkColorActive:"#FFFFFF",dropdownLinkBackgroundActive:"#0088CC",dropdownLinkBackgroundHover:"#0088CC",zindexDropdown:1e3,zindexPopover:1010,zindexTooltip:Ho,zindexFixedNavbar:1030,zindexHeader:1060,zindexModalBackdrop:1070,zindexModal:1080,zindexAboveModal:1090,iconSpritePath:"../img/glyphicons-halflings.png",iconWhiteSpritePath:"../img/glyphicons-halflings-white.png",placeholderText:"#999999",hrBorder:"#EEEEEE",horizontalComponentOffset:"180px",wellBackground:"#F5F5F5",navbarCollapseWidth:"979px",navbarCollapseDesktopWidth:"980px",navbarHeight:"40px",navbarBackgroundHighlight:"#FFFFFF",navbarBackground:"rgb(242, 242, 242)",navbarBorder:"rgb(212, 212, 212)",navbarText:"#777777",navbarLinkColor:"#777777",navbarLinkColorHover:"#333333",navbarLinkColorActive:"#555555",navbarLinkBackgroundHover:"#000000",navbarLinkBackgroundActive:"rgb(230, 230, 230)",navbarBrandColor:"#777777",navbarInverseBackground:"#111111",navbarInverseBackgroundHighlight:"#222222",navbarInverseBorder:"#252525",navbarInverseText:"#999999",navbarInverseLinkColor:"#999999",navbarInverseLinkColorHover:"#FFFFFF",navbarInverseLinkColorActive:"#FFFFFF",navbarInverseLinkBackgroundHover:"#000000",navbarInverseLinkBackgroundActive:"#111111",navbarInverseSearchBackground:"rgb(82, 82, 82)",navbarInverseSearchBackgroundFocus:"#FFFFFF",navbarInverseSearchBorder:"#111111",navbarInverseSearchPlaceholderColor:"#CCCCCC",navbarInverseBrandColor:"#999999",paginationBackground:"#FFFFFF",paginationBorder:"#DDDDDD",paginationActiveBackground:"#F5F5F5",heroUnitBackground:"#EEEEEE",heroUnitHeadingColor:"inherit",heroUnitLeadColor:"inherit",warningText:"#C09853",warningBackground:"#FCF8E3",warningBorder:"rgb(251, 239, 213)",errorText:"#B94A48",errorBackground:"#F2DEDE",errorBorder:"rgb(238, 211, 215)",successText:"#468847",successBackground:"#DFF0D8",successBorder:"rgb(212, 232, 197)",infoText:"#4A7C17",infoBackground:"#EDF2DF",infoBorder:"rgb(228, 232, 197)",tooltipColor:"#FFFFFF",tooltipBackground:"#000000",tooltipArrowWidth:"5px",tooltipArrowColor:"#000000",popoverBackground:"#FFFFFF",popoverArrowWidth:"10px",popoverArrowColor:"#FFFFFF",popoverTitleBackground:"rgb(247, 247, 247)",popoverArrowOuterWidth:"11px",popoverArrowOuterColor:"rgba(0, 0, 0, 0.25)",gridColumns:"12",gridColumnWidth:"60px",gridGutterWidth:"20px",gridRowWidth:"940px",gridColumnWidth1200:"70px",gridGutterWidth1200:"30px",gridRowWidth1200:"1170px",gridColumnWidth768:"42px",gridGutterWidth768:"20px",gridRowWidth768:"724px",fluidGridColumnWidth:"6.382978723404255%",fluidGridGutterWidth:"2.127659574468085%",fluidGridColumnWidth1200:"5.982905982905983%",fluidGridGutterWidth1200:"2.564102564102564%",fluidGridColumnWidth768:"5.801104972375691%",fluidGridGutterWidth768:"2.7624309392265194%",kaGreen:Uo,kaGreenLight:Wo,kaBlue:jo,kaBlueLight:Go,grayExtraDark:"#111111",grayExtraLight:"#EEEEEE",graySuperLight:"#F7F7F7",whiteDark:"#FDFDFD",dark:"#21242C",blueDarkUnsaturated:"#3B414E",blueDarkSaturated:"#1F3043",blueLight:"#A9C0D1",greenLight:"#C6D1AD",greenDark:"#356700",yellowGreen:"#9DB63B",okGreen:"#A7CF5B",alertRed:Vo,coral:"#EE6666",grayBlue:"#9AB3B9",lightPageBackground:"#FDFDFD",yclaBlue:"#49BAD5",yclaTeal:"#56D0B3",yclaTealDark:"#50C1A7",yclaGreenDark:"#3D9A82",yclaGreen:"#81C262",learnstormBlue:Yo,homepageBlue:Xo,backgroundBlue:Qo,teacherSignupBlue:"#335d7d",homepageGreen:"#2B8E7B",streakColor:"#F79734",facebookColor:"#1A60A2",blueGoogleColor:"#2CAFE2",redGoogleColor:"#BF4434",homepageColor:"#2D585E",lightTextColor:"#898989",fontSizeTiny:"11px",fontSizeNormal:"14px",fontSizeMedium:"16px",fontSizeExtraLarge:"24px",fontSizeHuge:"36px",fontSizeBakana:"48px",fontSizeBananas:"60px",fixedWidthFontFamily:"'Helvetica Neue',Helvetica,Arial,sans-serif",contentPadding:"20px",primaryButtonBackground:"#89B908",primaryButtonBorder:"#76A005",buttonTextColor:"rgb(122, 122, 122)",buttonBorderRadius:"3px",basicBorderColor:"#CCCCCC",minContainerWidth:"1000px",maxContainerWidth:"1200px",formHintColor:"#999999",guidelineExampleText:"#606060",hoverCardWidth:"450px",menuHighlightColor:"#96AB4F",menuHighlightBorderColor:"#76A005",menuActiveTextColor:"#FFFFFF",menuInactiveTextColor:"#444444",menuSubheaderTextColor:"rgb(120, 120, 120)",menuBorderColor:"#94A170",unreadBackgroundColor:"#ECEEF4",menuLineHeight:"18px",menuSubheaderLineHeight:"17px",menuSubheaderFontSize:"9px",notificationBarColor:"#4858A4",modalBodyTopPadding:"20px",modalDialogPadding:"15px",modalSectionPadding:"9px",mathDomain1:"#11ACCD",mathDomain2:"#63D9EA",mathDomain3:"#027d97",mathDomain4:"#085566",partnerContentDomain1:"#01A995",partnerContentDomain2:"#01D1C1",partnerContentDomain3:"#208170",partnerContentDomain4:"#144F44",csDomain1:"#1FAB54",csDomain2:"#74CF70",csDomain3:"#0D923F",csDomain4:"#085E29",economicsDomain1:"#E07D10",economicsDomain2:"#FFBE26",economicsDomain3:"#A75A05",economicsDomain4:"#953C02",collegeCareersMoreDomain1:"#01A995",collegeCareersMoreDomain2:"#01D1C1",collegeCareersMoreDomain3:"#208170",collegeCareersMoreDomain4:"#144F44",humanitiesDomain1:"#E84D39",humanitiesDomain2:"#FF8482",humanitiesDomain3:"#BE2612",humanitiesDomain4:"#8C1C0D",gtpDomain1:"#1865F2",gtpDomain2:"#1865F2",gtpDomain3:"#1865F2",gtpDomain4:"#1865F2",scienceDomain1:"#CA337C",scienceDomain2:"#FF92C6",scienceDomain3:"#9E034E",scienceDomain4:"#6B0235",testPrepDomain1:"#1865F2",testPrepDomain2:"#1865F2",testPrepDomain3:"#1865F2",testPrepDomain4:"#1865F2",defaultDomain1:"#1865F2",defaultDomain2:"#66afe9",defaultDomain3:"#1152b0",defaultDomain4:"#0d3d82",defaultDomainColor:"#314453",defaultSubjectColor:"#4D6779",defaultTopicColor:"#6A8DA6",defaultHoverColor:"#314453",defaultLinkColor:"#314453",defaultLinkHoverColor:"#6A8DA6",scienceDomainColor:"#94424F",scienceSubjectColor:"#9D4A5A",scienceTopicColor:"#C55F73",scienceHoverColor:"#94424F",scienceLinkColor:"#94424F",scienceLinkHoverColor:"#C55F73",humanitiesDomainColor:"#AD3434",humanitiesSubjectColor:"#C13B31",humanitiesTopicColor:"#D24A45",humanitiesHoverColor:"#AD3434",humanitiesLinkColor:"#AD3434",humanitiesLinkHoverColor:"#D24A45",economicsDomainColor:"#B77033",economicsSubjectColor:"#BF7B34",economicsTopicColor:"#D1933B",economicsHoverColor:"#B77033",economicsLinkColor:"#B77033",economicsLinkHoverColor:"#D1933B",csDomainColor:"#437A39",csSubjectColor:"#53893E",csTopicColor:"#689B51",csHoverColor:"#437A39",csLinkColor:"#437A39",csLinkHoverColor:"#689B51",partnerContentDomainColor:"#218270",partnerContentSubjectColor:"#2C8D7B",partnerContentTopicColor:"#329A86",partnerContentHoverColor:"#218270",partnerContentLinkColor:"#218270",partnerContentLinkHoverColor:"#329A86",essayDomainColor:"#0071B3",mathDomainColor:"#1C758A",mathSubjectColor:"#46A8BF",mathTopicColor:"#4FBAD4",mathHoverColor:"#1C758A",mathLinkColor:"#1C758A",mathLinkHoverColor:"#4FBAD4",testPrepDomainColor:"#644172",testPrepSubjectColor:"#7E5F8E",testPrepTopicColor:"#9A72AC",testPrepHoverColor:"#644172",testPrepLinkColor:"#644172",testPrepLinkHoverColor:"#9A72AC",collegeCareersMoreDomainColor:"#218270",collegeCareersMoreSubjectColor:"#2C8D7B",collegeCareersMoreTopicColor:"#329A86",collegeCareersMoreHoverColor:"#218270",collegeCareersMoreLinkColor:"#218270",collegeCareersMoreLinkHoverColor:"#329A86",satDomainColor:"#0084CE",satSubjectColor:"#0084CE",satTopicColor:"#0084CE",satHoverColor:"#0084CE",satLinkColor:"#0084CE",satLinkHoverColor:"#0084CE",colorProficient:"#1C758A",colorPracticed:"rgb(158, 221, 235)",colorMastery1:"rgb(90, 197, 221)",colorMastery2:"rgb(42, 174, 203)",colorMastery3:"#1C758A",colorSuggested:"#73982C",colorReview:"#E35D04",colorNotStarted:"#CCCCCC",colorStarted:"#C7E5F7",colorStruggling:"#C30202",colorPersonal:"#00809C",colorPractice:"#96D9FF",colorEnergyPoints:"#005987",pureSmMin:"568px",pureMdMin:"768px",pureLgMin:"1024px",pureXlMin:"1200px",pureXsMax:"567px",pureSmMax:"767px",pureMdMax:"1023px",pureLgMax:"1199px"}),$o={white:"#FFFFFF",gray98:"#FAFAFA",gray97:"#F6F7F7",gray95:"#F0F1F2",gray90:"#E3E5E6",gray85:"#D6D8DA",gray76:"#BABEC2",gray72:"#999A9D",gray68:"#888D93",gray55:"#707378",gray41:"#626569",gray25:"#3B3E40",gray17:"#21242C",gray10:"#1499af",black:"#000000",alertRed:Vo,homepageBlue:Xo,kaBlue:jo,kaBlueLight:Go,kaGreen:Uo,kaGreenLight:Wo,learnstormBlue:Yo,backgroundBlue:Qo,adminGreen:"#78C008",kaBlueExtraLight:"#39c2db",kaBlueHover:"#0c7f99",kaGreenHover:"#518005",skyDark:"#001f4d",recommendationGold:"#ffbe26",starAced:"#ff9c39",google:"#C1432f",modernGoogle:"#be2612",modernGoogleHover:"#8c1c0d",facebook:"#4267B2",modernFacebook:"#4267B2",modernFacebookHover:"#00294a",wonderBlocksGold:"#FFB100",wonderBlocksLightBlue:"#37C5FD",breadcrumbs:"rgba(255, 255, 255, 0.7)"},Zo={color:$o.breadcrumbs,fontFamily:"inherit",fontSize:15,fontWeight:"bold",letterSpacing:.8,lineHeight:"19px",textTransform:"uppercase",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased"},Jo={regular:"inherit"},ea={subjectHeadingDesktop:{fontFamily:"inherit",fontSize:50,fontWeight:"bold",lineHeight:"61px"},subjectHeadingMobile:{fontFamily:"inherit",fontSize:35,fontWeight:"bold",lineHeight:"37px"},conceptHeadingDesktop:{fontFamily:"inherit",fontSize:35,fontWeight:"bold",lineHeight:"37px"},conceptHeadingMobile:{fontFamily:"inherit",fontSize:23,fontWeight:"bold",lineHeight:"27px"},subheadingDesktop:{fontFamily:"inherit",fontSize:23,fontWeight:"bold",lineHeight:"27px"},subheadingMobile:{fontFamily:"inherit",fontSize:20,fontWeight:"bold",lineHeight:"24px"},smallSubheadingDesktop:{fontFamily:"inherit",fontSize:20,lineHeight:1.25},smallSubheadingMobile:{fontFamily:"inherit",fontSize:15,lineHeight:1.25},smallHeading:{color:$o.gray25,fontFamily:"inherit",fontSize:17,fontWeight:"bold",lineHeight:"23px"},smallHeadingMobile:{color:$o.gray25,fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"18px"},accentHeading:{color:$o.gray68,fontFamily:"inherit",fontSize:15,fontWeight:"bold",letterSpacing:.8,lineHeight:"19px",textTransform:"uppercase"},bodyLarge:{fontFamily:Jo.regular,fontSize:20,lineHeight:"30px"},bodySmall:{fontFamily:Jo.regular,fontSize:17,fontWeight:"normal",lineHeight:"23px"},bodySmallBold:{fontFamily:Jo.regular,fontSize:17,fontWeight:"bold",lineHeight:"23px"},bodyXsmall:{fontFamily:Jo.regular,fontSize:15,lineHeight:"22px"},bodyXsmallBold:{fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"22px"},breadcrumb:Zo,breadcrumbSmall:U(U({},Zo),{},{fontSize:12,lineHeight:"13px"}),labelLarge:{fontFamily:"inherit",fontSize:23,fontWeight:"bold",lineHeight:"27px"},labelMedium:{fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"18px"},labelSmall:{fontFamily:Jo.regular,fontSize:12,lineHeight:"14px"},caption:{fontFamily:Jo.regular,fontSize:14,fontStyle:"italic",lineHeight:"17px"},desktopScalingOnMobile:{MozTextSizeAdjust:"100%",MsTextSizeAdjust:"100%",WebkitTextSizeAdjust:"100%"},modalSubtitle:{fontSize:12,lineHeight:1.65,WebkitFontSmoothing:"antialiased",fontWeight:"bold"},wonderBlocksHeader:{paddingLeft:16,paddingRight:16,paddingBottom:24,paddingTop:34,[bo.mdOrLarger]:{paddingBottom:32}},wonderBlocksTitle:{color:$o.white,fontWeight:900,fontSize:28,lineHeight:"32px",margin:0,[bo.mdOrLarger]:{fontSize:36,lineHeight:"40px"}},wonderBlocksLabelLarge:{fontSize:16,lineHeight:"20px",fontWeight:700}},ta=Object.freeze({__proto__:null,colors:$o,borderRadius:4,fonts:Jo,typography:ea});class ra extends h.PureComponent{constructor(){super(...arguments),j(this,"_handleTooltipButtonRef",(e=>{e&&this.props.usingKeyboardFocus&&e.focus()}))}_getAriaLabel(){var{crossedOut:e,pos:t}=this.props,r=No(t);return e?o._("Bring back Choice %(letter)s",{letter:r}):o._("Cross out Choice %(letter)s",{letter:r})}render(){var{crossedOut:e,pos:t,primaryProductColor:r,theme:n}=this.props,i="day"===n?r:T.default.white;return h.createElement("button",{type:"button","aria-label":this._getAriaLabel(),className:Object(C.css)([na.tooltipButton]),onClick:()=>this.props.onClick(),onMouseDown:e=>e.preventDefault(),onFocus:()=>this.props.onFocus(),onBlur:()=>this.props.onBlur(),disabled:this.props.disabled,tabIndex:this.props.tabFocusable?0:-1,ref:this._handleTooltipButtonRef},h.createElement(zo,{pos:t,product:"library",crossedOut:!this.props.crossedOut,primaryProductColor:i,pressed:!0,checked:!1,focused:!1,correct:!1,showCorrectness:!1,reviewMode:!1,previouslyAnswered:!1,transparentBackground:!0}),h.createElement(M.LabelLarge,{style:{color:i}},e?o._("Bring back"):o._("Cross out")))}}j(ra,"defaultProps",{primaryProductColor:$o.kaGreen});var na=C.StyleSheet.create({tooltipButton:{background:"none",border:"none",font:"inherit",padding:0,cursor:"pointer",textDecoration:"none",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"}});class ia{constructor(e,t,r){j(this,"_intersectionObserver",void 0),j(this,"_onVisibilityChange",void 0),j(this,"_handleIntersection",(e=>{for(var t of e)this._onVisibilityChange(t.isIntersecting,t.rootBounds)})),this._intersectionObserver=new IntersectionObserver(this._handleIntersection,{root:e,threshold:Number.EPSILON,rootMargin:r}),this._onVisibilityChange=t}setTargetElement(e){this._intersectionObserver.disconnect(),this._intersectionObserver.observe(e)}disconnect(){this._intersectionObserver.disconnect()}}class sa extends h.PureComponent{render(){var{direction:e,pxFromStart:t,pxFromEnd:r}=this.props,n=[oa.wrapper,"horizontal"===e&&oa.wrapperHorizontal,"vertical"===e&&oa.wrapperVertical],i=[oa.content,"horizontal"===e&&oa.contentHorizontal,"vertical"===e&&oa.contentVertical];return 0===t?h.createElement("div",{className:Object(C.css)(...n)},h.createElement("div",{className:Object(C.css)(...i)},this.props.children)):0===r?h.createElement("div",{className:Object(C.css)(...n,oa.wrapperAlignToEnd)},h.createElement("div",{className:Object(C.css)(...i)},this.props.children)):h.createElement("div",{className:Object(C.css)(...n)},h.createElement("div",{style:{flexShrink:r,flexBasis:t}}),h.createElement("div",{className:Object(C.css)(...i)},this.props.children),h.createElement("div",{style:{flexShrink:t,flexBasis:r}}))}}var oa=C.StyleSheet.create({wrapper:{display:"flex",overflow:"hidden"},wrapperHorizontal:{flexDirection:"row",width:"100%"},wrapperVertical:{flexDirection:"column",height:"100%"},wrapperAlignToEnd:{justifyContent:"flex-end"},content:{flex:"0 0 auto"},contentHorizontal:{maxWidth:"100%"},contentVertical:{maxHeight:"100%"}}),aa=18,la=parseInt("6px");function ha(e){var{color:t,inverted:r}=e;return r?{backgroundColor:t,textColor:T.default.white}:{backgroundColor:T.default.white,textColor:t}}class ca extends h.PureComponent{render(){var e,t,r,{onClick:n,onMouseEnter:i,onMouseLeave:s,side:o}=this.props.tooltipProps,{backgroundColor:a}=ha(this.props.tooltipProps);if("top"===o)e=["0,0","".concat(9,",").concat(9),"".concat(aa,",0")],t=aa,r=9;else if("right"===o)e=["".concat(9,",0"),"0,".concat(9),"".concat(9,",").concat(aa)],t=9,r=aa;else if("bottom"===o)e=["0,".concat(9),"".concat(9,",0"),"".concat(aa,",").concat(9)],t=aa,r=9;else{if("left"!==o)throw new le("unexpected side ".concat(o),oe.InvalidInput);e=["0,0","".concat(9,",").concat(9),"0,".concat(aa)],t=9,r=aa}return h.createElement("svg",{width:t,height:r,className:Object(C.css)(pa.tooltipArrow)},h.createElement("filter",{id:"tooltip-dropshadow-".concat(o),height:"150%"},h.createElement("feOffset",{dx:0,dy:1,result:"offsetblur"}),h.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:2}),h.createElement("feComponentTransfer",null,h.createElement("feFuncA",{type:"linear",slope:.1})),h.createElement("feMerge",null,h.createElement("feMergeNode",null),h.createElement("feMergeNode",{in:"SourceGraphic"}))),h.createElement("polyline",{fill:a,stroke:a,points:e.join(" "),className:Object(C.css)(n&&pa.tooltipArrowShapeWithOnClick),onClick:n,onMouseEnter:i,onMouseLeave:s}),h.createElement("polyline",{fill:a,points:e.join(" "),stroke:"rgba(0, 0, 0, 0.1)",filter:"url(#tooltip-dropshadow-".concat(o,")")}))}}var pa=C.StyleSheet.create({tooltipArrow:{display:"block",userSelect:"none"},tooltipArrowShapeWithOnClick:{pointerEvents:"auto",cursor:"pointer"}}),ua=C.StyleSheet.create({srOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}});class da extends h.PureComponent{constructor(){super(...arguments),j(this,"_handleClickClose",(()=>this.props.dismiss()))}_renderCloseButton(e){var{inverted:t,dismissOnClickClose:r}=this.props.tooltipProps;if(!r)return null;var n=e.get("button-description"),i=this.getA11yHeaderId(e);return h.createElement("button",{className:Object(C.css)(ma.closeIcon),onClick:this._handleClickClose,"aria-describedby":"".concat(n," ").concat(i)},h.createElement(qo,{title:o._("Close"),icon:"M6.26353762,4.99851587 L9.73097464,1.53107884 C10.0836373,1.17841618 10.0842213,0.612127047 9.73530496,0.263210718 C9.38395604,-0.0881381913 8.81874474,-0.0837668714 8.46743686,0.267541014 L4.99999981,3.73497806 L1.5325628,0.267541051 C1.1812549,-0.0837668481 0.616043606, -0.0881381955 0.264694717,0.263210694 C-0.0842215912,0.612127004 -0.0836375768,1.17841613 0.269025093,1.5310788 L3.73646206,4.9985158 L0.269025109,8.46595276 C-0.083637537,8.81861541 -0.0842215923, 9.38490462 0.264694642,9.73382106 C0.616043456,10.0851701 1.18125469, 10.0807988 1.53256259,9.72949093 L4.99999988,6.26205363 L8.46743739, 9.72949117 C8.8187453,10.0807991 9.38395655,10.0851704 9.73530537, 9.73382138 C10.0842216,9.38490498 10.0836375,8.81861579 9.73097488, 8.46595313 L6.26353762,4.99851587 Z",size:10,color:t?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.15)"}),h.createElement("div",{id:n,className:Object(C.css)(ua.srOnly)},o._("Closes the tooltip: ")))}getA11yHeaderId(e){var{tooltipProps:{a11y:t}}=this.props;return t&&t.title?"string"==typeof t.title?e.get("header"):t.title.id:this.getA11yContentId(e)}getA11yContentId(e){return e.get("content")}renderTooltip(e){var{content:t,dismissOnClickClose:r,noPadding:n,onClick:i,onMouseEnter:s,onMouseLeave:o,a11y:a,testId:l}=this.props.tooltipProps,c=a&&a.title,p=a&&a.assertiveness,{backgroundColor:u,textColor:d}=ha(this.props.tooltipProps),m=this.getA11yHeaderId(e),f=this.getA11yContentId(e);return h.createElement("div",{className:Object(C.css)(ma.tooltipBubble,!n&&ma.tooltipBubbleWithPadding,r&&ma.tooltipBubbleWithCloseIcon,i&&ma.tooltipBubbleWithOnClick),onClick:i,onMouseEnter:s,onMouseLeave:o,style:{backgroundColor:u,color:d},role:"region","aria-labelledby":m,"aria-describedby":f===m?null:f,"data-test-id":l},this._renderCloseButton(e),h.createElement("div",{"aria-live":p},"string"==typeof c?h.createElement("div",{className:Object(C.css)(ua.srOnly),id:m},c):null,h.createElement("div",{id:f,className:Object(C.css)(ma.tooltipContent)},t)))}render(){return h.createElement(_.UniqueIDProvider,{mockOnFirstRender:!1,scope:"tooltip-bubble"},(e=>this.renderTooltip(e)))}}var ma=C.StyleSheet.create({tooltipBubble:U(U({boxSizing:"border-box",position:"relative"},ea.labelMedium),{},{borderRadius:la,border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"".concat(0,"px ").concat(1,"px ")+"".concat(4,"px 0px ")+"rgba(0, 0, 0, ".concat(.1,")"),userSelect:"none"}),tooltipBubbleWithPadding:{padding:"10px 23px"},tooltipBubbleWithCloseIcon:{paddingRight:34},tooltipBubbleWithOnClick:{cursor:"pointer"},tooltipContent:{userSelect:"auto"},closeIcon:{display:"block",position:"absolute",right:10,top:10,padding:0,background:"inherit",border:"none"}});class fa extends h.PureComponent{constructor(){super(...arguments),j(this,"_mountRemeasureTimeout",void 0),j(this,"state",{targetElementClientRect:null,rootElementClientRect:null}),j(this,"_handleScroll",(e=>{var{rootElement:t,targetElement:r}=this.props,n=e.target;t.contains(n)&&n.contains(r)&&this.remeasure()})),j(this,"remeasure",(()=>{var{targetElement:e,rootElement:t}=this.props;this.setState({targetElementClientRect:e.getBoundingClientRect(),rootElementClientRect:t.getBoundingClientRect()})}))}componentDidMount(){this._mountRemeasureTimeout=setTimeout(this.remeasure,0),window.addEventListener("resize",this.remeasure),window.addEventListener("scroll",this._handleScroll,!0)}componentWillUnmount(){this._mountRemeasureTimeout&&clearTimeout(this._mountRemeasureTimeout),window.removeEventListener("resize",this.remeasure),window.removeEventListener("scroll",this._handleScroll,!0)}_computeTargetPointOffsets(e,t){var r,{offset:n,offsetFrom:i,side:s}=this.props.tooltipProps,o=e,a=t,l=n;if("arrow"===i&&(l+=9),"top"===s)r={left:o.left+o.width/2,top:o.top-l};else if("bottom"===s)r={left:o.left+o.width/2,top:o.bottom+l};else if("left"===s)r={left:o.left-l,top:o.top+o.height/2};else{if("right"!==s)throw new le("unexpected side ".concat(s),oe.InvalidInput);r={left:o.right+l,top:o.top+o.height/2}}return{pxFromTop:r.top-a.top,pxFromBottom:a.bottom-r.top,pxFromLeft:r.left-a.left,pxFromRight:a.right-r.left}}_renderBubble(e){var t,{isAboveModal:r}=this.props,{side:n,tooltipMargin:i}=this.props.tooltipProps,s={},o={},a={};if("top"===n||"bottom"===n)t=ga.tooltipBubblePositionerTopBottom,o.direction="horizontal",o.pxFromStart=e.pxFromLeft,o.pxFromEnd=e.pxFromRight,a.marginLeft=i,a.marginRight=i;else{if("left"!==n&&"right"!==n)throw new le("unexpected side ".concat(n),oe.InvalidInput);t=ga.tooltipBubblePositionerLeftRight,o.direction="vertical",o.pxFromStart=e.pxFromTop,o.pxFromEnd=e.pxFromBottom,a.marginTop=i,a.marginBottom=i}if("top"===n)s.bottom=e.pxFromBottom;else if("bottom"===n)s.top=e.pxFromTop;else if("left"===n)s.right=e.pxFromRight;else{if("right"!==n)throw new le("unexpected side ".concat(n),oe.InvalidInput);s.left=e.pxFromLeft}return h.createElement("div",{className:Object(C.css)(ga.tooltipBubblePositioner,t,r&&ga.tooltipAboveModal),style:s},h.createElement(sa,o,h.createElement("div",{className:Object(C.css)(ga.tooltipBubbleWrapper),style:a},h.createElement(da,{tooltipProps:this.props.tooltipProps,dismiss:this.props.dismiss}))))}_renderArrow(e,t){var{isAboveModal:r}=this.props,{side:n,tooltipMargin:i}=this.props.tooltipProps,s={};if("top"===n)s.bottom=e.pxFromBottom-9+1;else if("bottom"===n)s.top=e.pxFromTop-9+1;else if("left"===n)s.right=e.pxFromRight-9+1;else{if("right"!==n)throw new le("unexpected side ".concat(n),oe.InvalidInput);s.left=e.pxFromLeft-9+1}var o=i+la;if("top"===n||"bottom"===n){var a=o,l=t.width-aa-o;s.left=e.pxFromLeft-9,s.left=Math.min(s.left,l),s.left=Math.max(s.left,a)}else{if("left"!==n&&"right"!==n)throw new le("unexpected side ".concat(n),oe.InvalidInput);var c=o,p=t.height-aa-o;s.top=e.pxFromTop-9,s.top=Math.min(s.top,p),s.top=Math.max(s.top,c)}return h.createElement("div",{className:Object(C.css)(ga.tooltipArrowPositioner,r&&ga.tooltipAboveModal),style:s},h.createElement(ca,{tooltipProps:this.props.tooltipProps}))}_buildMediaFilterStyle(){var{media:e}=this.props.tooltipProps;return e?C.StyleSheet.create({mediaFilter:{display:"none",[e]:{display:"block"}}}).mediaFilter:null}render(){var{targetElementClientRect:e,rootElementClientRect:t}=this.state;if(!e||!t)return null;var r=this._computeTargetPointOffsets(e,t);return h.createElement("div",{className:Object(C.css)(this._buildMediaFilterStyle())},this._renderBubble(r),this._renderArrow(r,t))}}var ga=C.StyleSheet.create({tooltipBubblePositioner:{position:"absolute",zIndex:Ho,pointerEvents:"none"},tooltipAboveModal:{zIndex:1090},tooltipBubblePositionerTopBottom:{left:0,width:"100%"},tooltipBubblePositionerLeftRight:{top:0,height:"100%"},tooltipBubbleWrapper:{pointerEvents:"auto"},tooltipArrowPositioner:{position:"absolute",zIndex:Ho,pointerEvents:"none"}});class va extends h.Component{constructor(){super(...arguments),j(this,"_mountNode",void 0),j(this,"_tooltipPositioner",void 0)}componentDidMount(){var e=document.createElement("div");this._mountNode=e,this.props.rootElement.appendChild(e),this._renderInMountNode(e)}componentDidUpdate(){var e=this._mountNode;e&&this._renderInMountNode(e)}componentWillUnmount(){var e=this._mountNode;e&&(v.a.unmountComponentAtNode(e),this.props.rootElement.removeChild(e))}remeasure(){this._tooltipPositioner&&this._tooltipPositioner.remeasure()}_renderInMountNode(e){var{tooltipProps:t,dismiss:r,rootElement:n,targetElement:i,isAboveModal:s}=this.props;v.a.render(h.createElement(fa,{tooltipProps:t,dismiss:r,rootElement:n,targetElement:i,isAboveModal:s,ref:e=>this._tooltipPositioner=e}),e)}render(){return null}}var ya=["children"],ba=Object.freeze({side:"top",offset:0,offsetFrom:"bubble",tooltipMargin:0,noPadding:!1,color:$o.gray17,inverted:!1,dismissOnClickClose:!1,toggleOnHover:!0,showOnMount:!1});class xa extends h.PureComponent{constructor(e){super(e),j(this,"_rootElement",void 0),j(this,"_wrapper",void 0),j(this,"_targetElement",void 0),j(this,"_tooltipPortal",void 0),j(this,"_visibilityObserver",void 0),j(this,"_isMounted",void 0),j(this,"_targetElementMountTimeout",void 0),j(this,"_handleVisibilityChange",(e=>{this.setState({targetElementIsVisible:e})})),j(this,"_handleMouseEnter",(()=>{this.setState({hovered:!0})})),j(this,"_handleMouseLeave",(()=>{this.setState({hovered:!1})})),j(this,"_handleDismiss",(()=>{null==this.props.dismissed&&this.setState({dismissed:!0}),this.props.onDismiss&&this.props.onDismiss()})),this._isMounted=!1,this.state={dismissed:null!=e.dismissed&&e.dismissed,hovered:!1,targetElementIsVisible:!1}}componentDidMount(){this._isMounted=!0,this._registerVisibilityObserver()}UNSAFE_componentWillReceiveProps(e){null!=e.dismissed&&this.setState({dismissed:e.dismissed})}UNSAFE_componentWillUpdate(){this._registerVisibilityObserver()}componentWillUnmount(){this._isMounted=!1,this._targetElementMountTimeout&&clearTimeout(this._targetElementMountTimeout),this._visibilityObserver.disconnect()}_findRootElement(){return this.context.modalContainerElement||document.getElementById("mission-task-container")||document.getElementById("outer-wrapper")||document.body}_registerVisibilityObserver(){var e=this._findRootElement();if(!e)throw new le("Failed to mount NewTooltip: we need a #outer-wrapper or document.body element.",oe.Internal);if(e!==this._rootElement){this._rootElement=e,this._visibilityObserver&&this._visibilityObserver.disconnect(),this._visibilityObserver=function(e,t,r){return new ia(e,t,r)}(e,this._handleVisibilityChange);var t=this._wrapper;if(!t)throw new le("NewTooltip expected a wrapper element after mount",oe.Internal);for(var r=t;r.hasAttribute("data-tooltip-wrapper");)if(!(r=r.childNodes[0]))throw new le("NewTooltip expected wrapper element to have a child",oe.Internal);this._targetElement=r,this._targetElementMountTimeout=setTimeout((()=>{var e=this._targetElement;if(!e)throw new le("NewTooltip should have a target element after mounting.",oe.Internal);ie().isDevServer&&"inline"===getComputedStyle(e).display&&(ae.error("Warning: The children of a NewTooltip element must be block-like, but this element seems to have `display: inline`. This could break position tracking.",oe.Internal),ae.log("NewTooltip Target Element:",{targetElement:e.outerHTML})),this._visibilityObserver.setTargetElement(e),this.forceUpdate()}),0)}}_shouldShowTooltip(){var{toggleOnHover:e,showOnMount:t}=this.props,{dismissed:r,targetElementIsVisible:n}=this.state;return!1!==n&&(!r&&(!!t||!(!e||!this.state.hovered)))}remeasure(){this._tooltipPortal&&this._tooltipPortal.remeasure()}render(){var{children:e,toggleOnHover:t}=this.props,r=V(this.props,ya);return h.createElement("div",{className:Object(C.css)(wa.targetElement),onMouseEnter:t?this._handleMouseEnter:void 0,onMouseLeave:t?this._handleMouseLeave:void 0,ref:e=>this._wrapper=e,"data-tooltip-wrapper":!0,"data-test-id":"question-id"},e,this._targetElement&&this._shouldShowTooltip()&&h.createElement(va,{tooltipProps:r,dismiss:this._handleDismiss,rootElement:this._rootElement,targetElement:this._targetElement,isAboveModal:!!this.context.modalContainerElement,ref:e=>this._tooltipPortal=e}))}}j(xa,"defaultProps",ba),xa.contextTypes={modalContainerElement:d.a.instanceOf(HTMLElement)};var wa=C.StyleSheet.create({targetElement:{display:"inline"}});class ka extends h.PureComponent{constructor(){super(...arguments),j(this,"_handleKeyDown",(e=>{"Tab"===e.key&&(this.props.onDismiss(),e.preventDefault())}))}_renderTooltipContent(){return h.createElement("div",{onKeyDown:this._handleKeyDown},h.createElement(ra,this.props.buttonProps))}render(){return h.createElement("div",null,h.createElement(xa,{content:this._renderTooltipContent(),offsetFrom:"arrow",offset:10,dismissed:this.props.dismissed,showOnMount:!0,toggleOnHover:!1,onClick:()=>this.props.buttonProps.onClick(),media:bo.mdOrLarger},this.props.children),!this.props.dismissed&&h.createElement(Ca,{onDismiss:this.props.onDismiss}))}}class Ca extends h.PureComponent{constructor(){super(...arguments),j(this,"_handleGlobalClick",(()=>{this.props.onDismiss()})),j(this,"_handleGlobalKeyup",(e=>{"Escape"===e.key&&this.props.onDismiss()}))}componentDidMount(){setTimeout((()=>{window.addEventListener("click",this._handleGlobalClick),window.addEventListener("keyup",this._handleGlobalKeyup)}),0)}componentWillUnmount(){window.removeEventListener("click",this._handleGlobalClick),window.removeEventListener("keyup",this._handleGlobalKeyup)}render(){return null}}var Ea={path:"M27.218 6.82l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:27.284};class Sa extends h.PureComponent{constructor(){super(...arguments),j(this,"_menu",void 0),j(this,"_menuButton",void 0),j(this,"_crossOutButtonIsFocused",void 0),j(this,"state",{hovered:!1,opened:!1,slidePanelCovered:!0,usingKeyboardFocus:!1,wasCrossedOutOnLastOpen:!1}),j(this,"_openMenu",(()=>{var e=null!=this._menu&&this._menu.contains(document.activeElement);this.setState({opened:!0,usingKeyboardFocus:e,wasCrossedOutOnLastOpen:this.props.crossedOut})})),j(this,"_closeMenu",(()=>{this._crossOutButtonIsFocused&&this._menuButton&&this._menuButton.focus(),this.setState({opened:!1,slidePanelCovered:!0})})),j(this,"_handleMenuClick",((e,t)=>{t?this._openMenu():this._closeMenu(),e.preventDefault()})),j(this,"_handleCrossedOutButtonClick",(e=>{this.props.onCrossedOutChange(e),this._closeMenu()})),j(this,"_handleSlideTransitionEnd",(()=>{this.state.opened&&this.setState({slidePanelCovered:!1})}))}UNSAFE_componentWillReceiveProps(e){e.enabled||this._closeMenu()}_getButtonProps(e){var t=this.state.wasCrossedOutOnLastOpen;return{onClick:()=>{this._handleCrossedOutButtonClick(!t)},onFocus:()=>{this._crossOutButtonIsFocused=!0},onBlur:()=>{this._crossOutButtonIsFocused=!1},crossedOut:t,pos:this.props.pos,primaryProductColor:this.props.primaryProductColor,usingKeyboardFocus:this.state.usingKeyboardFocus,theme:e}}_getMenuIconColor(){return this.state.opened?this.props.primaryProductColor:this.state.hovered?T.default.offBlack:T.default.offBlack50}_renderMenu(){var{pos:e,isSatProduct:t}=this.props,{opened:r}=this.state,n=Object(C.css)(Ta.menu,t&&Ta.spacing);return h.createElement("div",{ref:e=>this._menu=e,className:n,onClick:e=>this._handleMenuClick(e,!r),onMouseEnter:()=>this.setState({hovered:!0}),onMouseLeave:()=>this.setState({hovered:!1})},h.createElement(ka,{dismissed:!this.state.opened,onDismiss:this._closeMenu,buttonProps:this._getButtonProps("day")},h.createElement("button",{type:"button","aria-label":o._("Open menu for Choice %(letter)s",{letter:No(e)}),className:Object(C.css)([Ta.menuButton]),onClick:e=>this._handleMenuClick(e,!r),onMouseDown:e=>e.preventDefault(),ref:e=>this._menuButton=e},h.createElement(qo,{className:Object(C.css)(Ta.menuIcon),icon:Ea,size:3,color:this._getMenuIconColor()}))))}_renderSlidePanel(){var e=this._getButtonProps("night"),{slidePanelCovered:t}=this.state;return h.createElement("div",{className:Object(C.css)(Ta.slidePanel,t&&Ta.slidePanelCovered),onClick:e.onClick,"aria-hidden":t},h.createElement(ra,G({},e,{disabled:t,tabFocusable:!t})))}render(){var{enabled:e}=this.props,{opened:t}=this.state;return h.createElement("div",{className:Object(C.css)(Ta.wrapper)},h.createElement("div",{className:Object(C.css)(Ta.slidingContent,e&&Ta.slidingContentEnabled,t&&Ta.slidingContentOpen),onTransitionEnd:this._handleSlideTransitionEnd},h.createElement("div",{className:Object(C.css)(Ta.content)},this.props.children),e&&this._renderMenu()),e&&this._renderSlidePanel())}}var Ta=C.StyleSheet.create({wrapper:{display:"block",position:"relative"},slidingContent:{display:"flex",flexDirection:"row",alignItems:"stretch"},slidingContentEnabled:{[bo.smOrSmaller]:{transition:"transform 0.2s ease-out",backgroundColor:T.default.white}},slidingContentOpen:{[bo.smOrSmaller]:{transform:"translateX(-".concat(96,"px)")}},content:{display:"block",flex:"1 1 0"},menu:{cursor:"pointer",boxSizing:"border-box",width:32,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",[bo.smOrSmaller]:{paddingRight:8}},menuButton:{background:"none",border:"none",font:"inherit",padding:0,textAlign:"inherit",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",height:16},menuIcon:{display:"block"},slidePanel:{position:"absolute",top:0,right:0,boxSizing:"border-box",width:96,height:"100%",paddingLeft:8,paddingRight:8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:T.default.offBlack50,cursor:"pointer",[bo.mdOrLarger]:{display:"none"}},spacing:{paddingRight:12},slidePanelCovered:{zIndex:-1}});class Ma extends h.Component{_renderText(){var{checked:e,correct:t,crossedOut:r}=this.props;return t?e?o._("Correct (selected)"):r?o._("Correct (but you crossed it out)"):o._("Correct"):e?o._("Incorrect (selected)"):o._("Incorrect")}render(){var e,{checked:t,correct:r,previouslyAnswered:n}=this.props;return e=r?_a.correct:t||n?_a.incorrectAnswered:_a.incorrect,h.createElement("div",{className:Object(C.css)(_a.text,e)},this._renderText())}}var _a=C.StyleSheet.create({text:{alignItems:"center",display:"flex",fontSize:12,height:32,textTransform:"uppercase"},correct:{color:qe},incorrectAnswered:{color:Qe},incorrect:{color:Ye}}),Aa=["inputRef","onChecked","goToPrevChoice","goToNextChoice"];class Ia extends h.Component{constructor(){super(...arguments),j(this,"_inputElement",void 0),j(this,"handleClick",(e=>{this.props.onChecked(!this.props.checked)})),j(this,"handleKeyUp",(e=>{" "===e.key&&(this.props.onChecked(!this.props.checked),e.preventDefault())})),j(this,"handleChange",(e=>{!this.props.checked&&e.target.checked&&this.props.onChecked(!0)})),j(this,"handleKeyDown",(e=>{" "===e.key?e.preventDefault():"ArrowUp"===e.key||"ArrowLeft"===e.key?(this.props.goToPrevChoice(),e.preventDefault()):"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(this.props.goToNextChoice(),e.preventDefault())})),j(this,"handleRef",(e=>{this._inputElement=e,this.props.inputRef&&this.props.inputRef(e)}))}render(){var e=V(this.props,Aa);return h.createElement("input",G({},e,{type:"radio",onChange:this.handleChange,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.handleRef}))}}j(Ia,"propTypes",{checked:d.a.bool.isRequired,inputRef:d.a.func,onChecked:d.a.func.isRequired,goToPrevChoice:d.a.func.isRequired,goToNextChoice:d.a.func.isRequired});var Oa={backgroundColor:Ze,outline:"2px solid ".concat($e),zIndex:1},Na="16px 16px",Pa="12px 16px";class Ra extends h.Component{constructor(){super(...arguments),j(this,"justFinishedTouch",void 0),j(this,"justFinishedTimeoutID",void 0),j(this,"_input",void 0),j(this,"state",{isInputFocused:!1,isInputActive:!1}),j(this,"onInputFocus",(()=>{this.setState({isInputFocused:!0})})),j(this,"onInputBlur",(()=>{this.setState({isInputFocused:!1})})),j(this,"onInputMouseDown",(e=>{"mousedown"===e.type&&this.justFinishedTouch||(this.setState({isInputActive:!0}),this.props.apiOptions.satStyling&&this._input&&this._input.focus())})),j(this,"onInputMouseUp",(e=>{if("mouseup"!==e.type||!this.justFinishedTouch){if("touchend"===e.type)return this.justFinishedTouch=!0,null!=this.justFinishedTimeoutID&&clearTimeout(this.justFinishedTimeoutID),void(this.justFinishedTimeoutID=setTimeout((()=>{this.setState({isInputActive:!1}),this.justFinishedTouch=!1}),10));this.setState({isInputActive:!1}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()}})),j(this,"onInputMouseOut",(()=>{this.setState({isInputActive:!1})})),j(this,"inputRef",(e=>{this._input=e})),j(this,"renderOptionStatus",(()=>{var{correct:e,checked:t,crossedOut:r,reviewMode:n,previouslyAnswered:i}=this.props;return this.props.apiOptions.satStyling?null:n||i?h.createElement(Ma,{checked:t,correct:e,crossedOut:r,previouslyAnswered:i}):null})),j(this,"renderChoiceIcon",(()=>{var{radioStyleVersion:e,primaryProductColor:t}=this.props.apiOptions.styling;return void 0!==e&&"final"===e||this.props.apiOptions.satStyling?h.createElement(zo,{pos:this.props.pos,correct:this.props.correct,crossedOut:this.props.crossedOut,pressed:this.state.isInputActive,focused:this.state.isInputFocused,checked:this.props.checked,showCorrectness:this.props.showCorrectness,reviewMode:this.props.reviewMode,product:this.props.apiOptions.satStyling?"sat":"library",primaryProductColor:t,previouslyAnswered:this.props.previouslyAnswered}):null})),j(this,"_setChecked",(e=>{e?this._sendChange({checked:!0,crossedOut:!1}):this._sendChange({checked:!1})})),j(this,"_setCrossedOut",(e=>{e?this._sendChange({checked:!1,crossedOut:!0}):this._sendChange({crossedOut:!1})})),j(this,"_sendChange",(e=>{var t=null!=e.checked?e.checked:this.props.checked,r=null!=e.crossedOut?e.crossedOut:this.props.crossedOut;this.props.onChange({checked:t,crossedOut:r})})),j(this,"focusInput",(()=>{var e;null===(e=this._input)||void 0===e||e.focus()}))}UNSAFE_componentWillUpdate(e){this.state.isInputFocused&&e.disabled&&this.setState({isInputFocused:!1})}componentWillUnmount(){null!=this.justFinishedTimeoutID&&clearTimeout(this.justFinishedTimeoutID)}render(){var e=this.props.apiOptions.satStyling,t=this.props.apiOptions.isMobile,{radioStyleVersion:r}=this.props.apiOptions.styling,n=void 0!==r&&"final"===r,i=l()(this.props.className,"checkbox-label",Object(C.css)(La.label,t&&To.disableTextSelection,!e&&La.responsiveLabel,e&&La.satLabel)),s=l()(Object(C.css)(this.state.isInputFocused&&La.satDescriptionInputFocused,this.state.isInputActive&&La.satDescriptionInputActive)),o=this.props.showCorrectness&&!this.props.correct,a=this.props.checked&&!o,c={type:this.props.type,name:this.props.groupName,id:"".concat(this.props.groupName,"-choice-").concat(this.props.pos),checked:a,disabled:this.props.disabled,onFocus:this.onInputFocus,onBlur:this.onInputBlur,className:Object(C.css)(!n&&To.perseusInteractive,!n&&La.input,!n&&To.responsiveInput,!n&&!e&&To.responsiveRadioInput,!n&&!e&&this.state.isInputActive&&To.responsiveRadioInputActive,n&&To.perseusSrOnly,e&&To.perseusSrOnly,e&&this.props.reviewMode&&La.satReviewInput)},p=null;p="radio"===this.props.type?h.createElement(Ia,G({onChecked:e=>this._setChecked(e),goToPrevChoice:this.props.goToPrevChoice,goToNextChoice:this.props.goToNextChoice,inputRef:this.inputRef},c)):h.createElement("input",G({onChange:e=>this._setChecked(e.target.checked),ref:this.inputRef},c));var{reviewMode:u,correct:d,checked:m}=this.props,f=e&&u&&d,g=e&&u&&!d&&m,v=l()("description",f&&"sat-correct",g&&"sat-incorrect",Object(C.css)(!e&&La.description,e&&La.satDescription,f&&La.satDescriptionCorrect,f&&m&&La.satDescriptionCorrectChecked,g&&La.satDescriptionIncorrectChecked)),y=l()("checkbox",Object(C.css)(To.perseusInteractive,!e&&La.choiceIconWrapper,e&&La.satCheckboxOptionContent)),b=l()("checkbox-and-option",Object(C.css)(!e&&La.intermediateResponsiveCheckbox,!e&&u&&La.intermediateResponsiveCheckboxReview)),x=l()("perseus-radio-rationale-content",Object(C.css)(La.rationale,!e&&La.nonSatRationale,e&&La.satReviewRationale)),w=this.props.editMode?"div":"label",k=this.props.apiOptions.crossOutEnabled&&!this.props.showCorrectness,E=!e&&!u&&this.props.apiOptions.readOnly||k&&this.props.crossedOut;return h.createElement("div",{className:e?s:void 0},h.createElement(Sa,{enabled:k,pos:this.props.pos,primaryProductColor:this.props.apiOptions.styling.primaryProductColor,crossedOut:this.props.crossedOut,onCrossedOutChange:this._setCrossedOut,isSatProduct:e},h.createElement(w,{htmlFor:this.props.editMode?void 0:c.id,className:i,style:{opacity:E?.5:1}},h.createElement("div",{className:v,onMouseDown:this.onInputMouseDown,onMouseUp:this.onInputMouseUp,onMouseOut:this.onInputMouseOut,onTouchStart:this.onInputMouseDown,onTouchEnd:this.onInputMouseUp},h.createElement("div",{className:b},h.createElement("span",{className:y},p,this.renderChoiceIcon()),h.createElement("span",{className:l()(ee.RADIO.OPTION_CONTENT,ee.INTERACTIVE,Object(C.css)(e&&La.satRadioOptionContent,e&&u&&La.satReviewRadioOptionContent)),style:{cursor:"default"}},h.createElement("div",{className:Object(C.css)(La.optionStatusContainer)},this.renderOptionStatus()),h.createElement("div",null,this.props.content))),this.props.showRationale&&h.createElement("div",{className:x,"data-test-id":"perseus-radio-rationale-content-".concat(this.props.pos)},this.props.rationale)))))}}j(Ra,"propTypes",{apiOptions:d.a.shape({satStyling:d.a.bool,isMobile:d.a.bool,styling:d.a.shape({radioStyleVersion:d.a.oneOf(["intermediate","final"]),primaryProductColor:d.a.string}),readOnly:d.a.bool}),checked:d.a.bool,className:d.a.string,rationale:d.a.node,content:d.a.node,correct:d.a.bool,deselectEnabled:d.a.bool,disabled:d.a.bool,editMode:d.a.bool,groupName:d.a.string,isLastChoice:d.a.bool,pos:d.a.number,reviewMode:d.a.bool,showRationale:d.a.bool,showCorrectness:d.a.bool,type:d.a.string,crossedOut:d.a.bool,previouslyAnswered:d.a.bool,onChange:d.a.func,goToPrevChoice:d.a.func.isRequired,goToNextChoice:d.a.func.isRequired}),j(Ra,"defaultProps",{apiOptions:{styling:{}},checked:!1,classSet:{},correct:!1,disabled:!1,editMode:!1,onChange:function(){},showRationale:!1,type:"radio",pos:0,previouslyAnswered:!1});var La=C.StyleSheet.create({description:{display:"inline-block",width:"100%"},satDescription:{display:"block",position:"relative",boxSizing:"border-box",cursor:"pointer",marginLeft:0,padding:"17px 14px"},satDescriptionInputFocused:U(U({},Oa),{},{display:"block"}),satDescriptionInputActive:U(U({},Oa),{},{backgroundColor:Je}),satDescriptionCorrect:{color:et},satDescriptionCorrectChecked:{backgroundColor:rt},satDescriptionIncorrectChecked:{color:nt,backgroundColor:st},input:{display:"inline-block",width:20,margin:3,marginLeft:-20,marginRight:0,float:"none"},satReviewInput:{pointerEvents:"none"},satRadioOptionContent:{userSelect:"text",display:"block",marginLeft:45,cursor:"inherit"},satReviewRadioOptionContent:{fontWeight:"bold"},satCheckboxOptionContent:{position:"absolute",display:"block",top:"50%",margin:"-16px 0 0 0",width:"auto"},choiceIconWrapper:{display:"flex",marginRight:12,flexShrink:0},optionStatusContainer:{display:"block"},rationale:{display:"block"},nonSatRationale:{padding:Na,paddingTop:0,marginLeft:44,[bo.smOrSmaller]:{padding:Pa,paddingTop:0}},satReviewRationale:{marginTop:13,marginLeft:45},label:{display:"block",transition:"opacity 0.2s ease-out"},responsiveLabel:{WebkitTapHighlightColor:"transparent",display:"flex",alignItems:"stretch"},satLabel:{cursor:"pointer"},intermediateResponsiveCheckbox:{display:"flex",alignItems:"center",padding:Na,[bo.smOrSmaller]:{padding:Pa}},intermediateResponsiveCheckboxReview:{alignItems:"flex-start"}});class Fa extends h.Component{constructor(){super(...arguments),j(this,"_choice",void 0),j(this,"focusInput",(()=>{this._choice.focusInput()}))}render(){var e=U(U({},this.props),{},{className:l()(this.props.className,"none-of-above"),content:this.props.showContent?this.props.content:h.createElement(ss,{key:"noneOfTheAboveRenderer",content:o._("None of the above")}),ref:e=>this._choice=e});return h.createElement(Ra,e)}}j(Fa,"propTypes",{className:d.a.string,content:d.a.node,showContent:d.a.bool}),j(Fa,"defaultProps",{showContent:!0});var{captureScratchpadTouchStart:Da}=Pe,za=d.a.arrayOf(d.a.shape({checked:d.a.bool,crossedOut:d.a.bool,content:d.a.node,rationale:d.a.node,hasRationale:d.a.bool,showRationale:d.a.bool,showCorrectness:d.a.bool,correct:d.a.bool,originalIndex:d.a.number,isNoneOfTheAbove:d.a.bool})),Ba=mt;class qa extends h.Component{constructor(){super(...arguments),j(this,"state",{radioGroupName:p.a.uniqueId("perseus_radio_")}),j(this,"updateChoice",((e,t)=>{var r;r=t.checked&&!this.props.multipleSelect?this.props.choices.map((e=>!1)):this.props.choices.map((e=>e.checked));var n=this.props.choices.map((e=>e.crossedOut));r[e]=t.checked,n[e]=t.crossedOut,this.props.onChange({checked:r,crossedOut:n})})),j(this,"focus",(e=>(v.a.findDOMNode(this.refs["radio"+(e||0)]).focus(),!0))),j(this,"getInstructionsText",(()=>this.props.multipleSelect?this.props.countChoices?o._("Choose %(numCorrect)s answers:",{numCorrect:this.props.numCorrect}):o._("Choose all answers that apply:"):o._("Choose 1 answer:"))),j(this,"deselectEnabled",(()=>this.props.apiOptions.isMobile||this.props.deselectEnabled)),j(this,"goToChoice",(e=>{var t=this.props.choices.length;e<0&&(e+=t),e>=t&&(e-=t);var r=this.refs["radio".concat(e)];if(r){r.focusInput();var n=this.props.choices.map((e=>e.crossedOut)),i=this.props.choices.map((e=>!1));this.props.choices[e].crossedOut||(i[e]=!0),this.props.onChange({checked:i,crossedOut:n})}else ae.error("found no choice at index ".concat(e,", even after ")+"wrapping it to be within bounds",oe.Internal,{loggedMetadata:{choices:JSON.stringify(this.props.choices)}})}))}componentDidUpdate(e){var{apiOptions:t,choices:r,isLastUsedWidget:n,reviewModeRubric:i}=this.props;if(t.canScrollPage&&n&&i&&!e.reviewModeRubric){var s=r.findIndex((e=>e.checked));if(s>=0){var o=v.a.findDOMNode(this.refs["radio"+s]);Ao(o)}}}render(){var e=this.props.multipleSelect?"checkbox":"radio",t=this.props.reviewModeRubric,r=!!t,n=qa.styles,i=this.props.apiOptions.satStyling,s=this.props.apiOptions.isMobile,o=this.props.choices,a=o[0].highlighted,c=o[o.length-1].highlighted,u=l()("perseus-widget-radio",!this.props.editMode&&"perseus-rendered-radio",Object(C.css)(n.radio,!i&&n.responsiveRadioContainer,!i&&a&&s&&n.radioContainerFirstHighlighted,!i&&c&&s&&n.radioContainerLastHighlighted,i&&n.satRadio)),d=l()("instructions",Object(C.css)(n.instructions,s&&n.instructionsMobile)),m=this.getInstructionsText(),f=!i,g=Object(C.css)(n.responsiveFieldset),v=h.createElement("fieldset",{className:"perseus-widget-radio-fieldset ".concat(g)},h.createElement("legend",{className:"perseus-sr-only"},m),f&&h.createElement("div",{className:d},m),h.createElement("ul",{className:u},this.props.choices.map((function(s,o){var a=Ra,c={ref:"radio".concat(o),apiOptions:this.props.apiOptions,checked:s.checked,crossedOut:s.crossedOut,previouslyAnswered:s.previouslyAnswered,reviewMode:r,correct:s.correct,rationale:s.rationale,content:s.content,disabled:this.props.apiOptions.readOnly||s.disabled,editMode:this.props.editMode,groupName:this.state.radioGroupName,isLastChoice:o===this.props.choices.length-1,showCorrectness:r||!!s.showCorrectness,showRationale:s.hasRationale&&(r||s.showRationale),type:e,pos:o,deselectEnabled:this.deselectEnabled(),onChange:e=>{this.updateChoice(o,e)},goToPrevChoice:()=>this.goToChoice(o-1),goToNextChoice:()=>this.goToChoice(o+1)};s.isNoneOfTheAbove&&(a=Fa,p.a.extend(c,{showContent:s.revealNoneOfTheAbove}));var u=this.props.choices[o+1],d=!!u&&u.highlighted,m=e=>{var o=i&&r&&e,a=i&&r&&u&&u.checked;return Object(C.css)(To.aboveScratchpad,n.item,!i&&n.responsiveItem,!i&&e&&n.selectedItem,!i&&e&&s.highlighted&&n.aboveBackdrop,!i&&e&&s.highlighted&&this.props.apiOptions.isMobile&&n.aboveBackdropMobile,!i&&d&&this.props.apiOptions.isMobile&&n.nextHighlighted,i&&n.satRadioOption,o&&!s.correct&&n.satRadioOptionIncorrect,o&&s.correct&&n.satRadioOptionCorrect,a&&!u.correct&&n.satRadioOptionNextIncorrect,a&&u.correct&&n.satRadioOptionNextCorrect,i&&t&&n.satReviewRadioOption)};m(!0);var f=l()(m(s.checked),ee.RADIO.OPTION,s.checked&&ee.RADIO.SELECTED,r&&t.choices[o].correct&&ee.CORRECT,r&&!t.choices[o].correct&&ee.INCORRECT),g=null,v=null;return this.props.editMode&&(v=e=>{for(var t=e.target;t&&t!==g;){if(t.getAttribute("data-is-radio-icon"))return void this.updateChoice(o,{checked:!s.checked});t=t.parentNode}}),h.createElement("li",{key:o,ref:e=>g=e,className:f,onClick:v,onTouchStart:this.props.labelWrap?Da:null},h.createElement(a,c))}),this)));return h.createElement("div",{className:Object(C.css)(!i&&n.responsiveContainer)},v)}}j(qa,"propTypes",{apiOptions:d.a.shape({readOnly:d.a.bool,satStyling:d.a.bool,isMobile:d.a.bool,styling:d.a.shape({radioStyleVersion:d.a.oneOf(["intermediate","final"])}),canScrollPage:d.a.bool}),choices:za,deselectEnabled:d.a.bool,editMode:d.a.bool,labelWrap:d.a.bool,countChoices:d.a.bool,numCorrect:d.a.number,multipleSelect:d.a.bool,reviewModeRubric:d.a.shape({choices:za}),onChange:d.a.func,isLastUsedWidget:d.a.bool}),j(qa,"styles",C.StyleSheet.create({instructions:{display:"block",color:Xe,fontSize:14,lineHeight:1.25,fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[bo.smOrSmaller]:{fontSize:16},[bo.xl]:{fontSize:20}},radio:{width:"100%"},responsiveRadioContainer:{borderBottom:"1px solid ".concat(Ba),borderTop:"1px solid ".concat(Ba),width:"auto",[bo.smOrSmaller]:{marginLeft:at,marginRight:at}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},satRadio:{background:"none",marginLeft:0,userSelect:"none"},satRadioOption:{margin:0,padding:0,borderBottom:"1px solid #ccc",":first-child":{borderTop:"1px solid #ccc"}},satRadioOptionCorrect:{borderBottomColor:tt,":first-child":{borderTopColor:tt}},satRadioOptionIncorrect:{borderBottomColor:it,":first-child":{borderTopColor:it}},satRadioOptionNextCorrect:{borderBottomColor:tt},satRadioOptionNextIncorrect:{borderBottomColor:it},satReviewRadioOption:{pointerEvents:"none"},item:{marginLeft:20},inlineItem:{display:"inline-block",paddingLeft:20,verticalAlign:"middle"},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:"1px solid ".concat(Ba)}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:at,marginRight:at,paddingLeft:ot},responsiveFieldset:{paddingRight:ot}})),j(qa,"defaultProps",{editMode:!1});class Ha extends h.Component{constructor(){super(...arguments),j(this,"_renderRenderer",(e=>{var t=1,r={},n=(e=e||"").replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,((e,n,i,s)=>{var o="passage-ref "+t;return t++,r[o]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(n),referenceNumber:parseInt(i),summaryText:s},version:ho.version},"[["+Pe.snowman+" "+o+"]]"}));return h.createElement(ss,{key:"choiceContentRenderer",content:n,widgets:r,findExternalWidgets:this.props.findWidgets,alwaysUpdate:!0,linterContext:U(U({},this.props.linterContext),{},{blockHighlight:!0})})})),j(this,"focus",(e=>this.refs.baseRadio.focus(e))),j(this,"updateChoices",(e=>{var t,{choiceStates:r,choices:n}=this.props;(t=r?r.map((e=>U({},e))):n.map((()=>({selected:!1,crossedOut:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1})))).forEach(((t,r)=>{t.selected=e.checked[r],t.crossedOut=e.crossedOut[r]})),this.props.onChange({choiceStates:t}),this.props.trackInteraction()})),j(this,"getUserInput",(()=>Ha.getUserInputFromProps(this.props))),j(this,"simpleValidate",(e=>Ha.validate(this.getUserInput(),e))),j(this,"showRationalesForCurrentlySelectedChoices",(e=>{var{choiceStates:t}=this.props;if(t){var r=this.simpleValidate(e),n="points"===r.type&&r.total===r.earned,i=t.map((e=>U(U({},e),{},{highlighted:e.selected,rationaleShown:e.selected||e.rationaleShown||n,readOnly:e.selected||e.readOnly||n,correctnessShown:e.selected||e.correctnessShown,previouslyAnswered:e.previouslyAnswered||e.selected})));this.props.onChange({choiceStates:i},null,!0)}})),j(this,"deselectIncorrectSelectedChoices",(()=>{if(this.props.choiceStates){var e=this.props.choiceStates.map(((e,t)=>U(U({},e),{},{selected:e.selected&&!!this.props.choices[t].correct,highlighted:!1})));this.props.onChange({choiceStates:e},null,!1)}}))}render(){var e,t=this.props.choices;return e=this.props.static?p.a.map(t,(e=>({selected:e.correct,crossedOut:e.crossedOut,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1}))):this.props.choiceStates?this.props.choiceStates:this.props.values?p.a.map(this.props.values,(e=>({selected:e,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}))):p.a.map(t,(()=>({selected:!1,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}))),t=p.a.map(t,((t,r)=>{var n=t.isNoneOfTheAbove&&!t.content?o._("None of the above"):t.content,{selected:i,crossedOut:s,rationaleShown:a,correctnessShown:l,readOnly:h,highlighted:c,previouslyAnswered:p}=e[r],u=this.props.reviewModeRubric&&this.props.reviewModeRubric.choices[r];return{content:this._renderRenderer(n),checked:i,correct:void 0===t.correct?!!u&&u.correct:t.correct,disabled:h,hasRationale:!!t.clue,rationale:this._renderRenderer(t.clue),showRationale:a,showCorrectness:l,isNoneOfTheAbove:t.isNoneOfTheAbove,revealNoneOfTheAbove:this.props.questionCompleted&&i,crossedOut:s,highlighted:c,previouslyAnswered:p}})),h.createElement(qa,{ref:"baseRadio",labelWrap:!0,multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:this.props.numCorrect,choices:t,onChange:this.updateChoices,reviewModeRubric:this.props.reviewModeRubric,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions,isLastUsedWidget:this.props.isLastUsedWidget})}static validate(e,t){var r=p.a.reduce(e.choicesSelected,((e,t)=>e+(t?1:0)),0);return 0===r?{type:"invalid",message:null}:e.numCorrect>1&&r!==e.numCorrect?{type:"invalid",message:o._("Please choose the correct number of answers.")}:e.noneOfTheAboveSelected&&r>1?{type:"invalid",message:o._("'None of the above' may not be selected when other answers are selected.")}:{type:"points",earned:p.a.all(e.choicesSelected,((r,n)=>(e.noneOfTheAboveIndex===n?p.a.all(t.choices,((e,t)=>n===t||!e.correct)):!!t.choices[n].correct)===r))?1:0,total:1,message:null}}static getUserInputFromProps(e){if(e.choiceStates){for(var t=null,r=!1,n=e.choiceStates,i=n.map((()=>!1)),s=e.countChoices,o=e.numCorrect,a=0;a<i.length;a++){var l=e.choices[a].originalIndex;i[l]=n[a].selected,e.choices[a].isNoneOfTheAbove&&(t=l,i[a]&&(r=!0))}return{countChoices:s,choicesSelected:i,numCorrect:o,noneOfTheAboveIndex:t,noneOfTheAboveSelected:r}}if(e.values){for(var h=null,c=!1,u=e.values.slice(),d=e.countChoices,m=e.numCorrect,f=0;f<e.values.length;f++){var g=e.choices[f].originalIndex;u[g]=e.values[f],e.choices[f].isNoneOfTheAbove&&(h=g,u[f]&&(c=!0))}return{choicesSelected:u,noneOfTheAboveIndex:h,noneOfTheAboveSelected:c,countChoices:d,numCorrect:m}}return{choicesSelected:p.a.map(e.choices,(()=>!1))}}}j(Ha,"defaultProps",{choices:[{}],displayCount:null,multipleSelect:!1,countChoices:!1,deselectEnabled:!1,linterContext:s.b});var{shuffle:Ua,random:Wa}=Pe,ja=[[o._("False"),o._("True")],[o._("No"),o._("Yes")]],Ga=(e,t)=>{var r=((e,t)=>{var r,n,i=e.choices.slice();return i=p.a.map(i,((e,t)=>p.a.extend({},e,{originalIndex:t,correct:Boolean(e.correct)}))),function(e){var t=null,r=p.a.reject(e,(function(e,r){if(e.isNoneOfTheAbove)return t=e,!0}));return t&&r.push(t),r}((e=>{var t=e.map((e=>e.content));return ja.some((e=>p.a.isEqual(t,e)))?[e[1],e[0]]:e})((r=i,n=void 0===t?Wa:t,e.randomize?Ua(r,null!=n?n:0):r)))})(e,t),n=p.a.reduce(e.choices,(function(e,t){return t.correct?e+1:e}),0),{hasNoneOfTheAbove:i,multipleSelect:s,countChoices:o,deselectEnabled:a}=e;return{numCorrect:n,hasNoneOfTheAbove:i,multipleSelect:s,countChoices:o,deselectEnabled:a,choices:r,selectedChoices:p.a.pluck(r,"correct")}},Va={name:"radio",displayName:"Multiple choice",accessible:!0,widget:Ha,transform:Ga,staticTransform:Ga,version:{major:1,minor:0},propUpgrades:{1:e=>{var t,r;if(e.noneOfTheAbove)throw new Error("radio widget v0 no longer supports auto noneOfTheAbove");return t=e.choices,r=!1,p.a.extend(p.a.omit(e,"noneOfTheAbove"),{choices:t,hasNoneOfTheAbove:r})}},isLintable:!0},Ya=[Va,eo,oo,Vs];class Xa extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"state",{uniqueId:p.a.uniqueId("perseus_radio_")}),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"getUserInput",(()=>Xa.getUserInputFromProps(this.props))),j(this,"onChange",((e,t)=>{var r=[...this.props.values];r[e]=t,this.change("values",r),this.props.trackInteraction()})),j(this,"simpleValidate",(e=>Xa.validate(this.getUserInput(),e)))}render(){var e=this,t=this.props.apiOptions.isMobile,r=this.props.items.map(((e,t)=>[e,t]));this.props.randomizeItems&&(r=Pe.shuffle(r,this.props.problemNum));var n=h.createElement("table",{className:"categorizer-table "+Object(C.css)(Ka.mobileTable)},h.createElement("thead",null,h.createElement("tr",null,h.createElement("th",null," "),this.props.categories.map(((e,t)=>h.createElement("th",{className:Object(C.css)(Ka.header),key:t},h.createElement(ss,{content:e,linterContext:this.props.linterContext})))))),h.createElement("tbody",null,r.map((r=>{var n=r[0],i=r[1],s=e.state.uniqueId+"_"+i;return h.createElement("tr",{key:i},h.createElement("td",null,h.createElement(ss,{content:n,linterContext:this.props.linterContext})),e.props.categories.map(((r,n)=>{var o=e.props.values[i]===n;return h.createElement("td",{className:"category "+Object(C.css)(Ka.cell),key:n},h.createElement("div",{className:ee.INTERACTIVE,role:"button","aria-label":r,onClick:this.onChange.bind(this,i,n)},t&&h.createElement("input",{type:"radio",name:s,className:Object(C.css)(To.responsiveInput,To.responsiveRadioInput),checked:o,onChange:this.onChange.bind(this,i,n),onClick:e=>e.stopPropagation()}),!t&&h.createElement("span",{className:Object(C.css)(Ka.radioSpan,o&&Ka.checkedRadioSpan,this.props.static&&o&&Ka.staticCheckedRadioSpan)},o?h.createElement(Y,_r):h.createElement(Y,Or))))})))})))),i=l()({"categorizer-container":!0,"static-mode":this.props.static}),s=this.props.apiOptions.isMobile?[Ka.fullBleedContainer]:[];return h.createElement("div",{className:i+" "+Object(C.css)(...s)},n)}static validate(e,t){var r=!0,n=!0;return p.a.each(t.values,(function(t,i){null==e.values[i]&&(r=!1),e.values[i]!==t&&(n=!1)})),r?{type:"points",earned:n?1:0,total:1,message:null}:{type:"invalid",message:o._("Make sure you select something for every row.")}}static getUserInputFromProps(e){return ao.getUserInputFromProps(e)}}j(Xa,"defaultProps",{items:[],categories:[],values:[],linterContext:s.b});var Qa,Ka=C.StyleSheet.create({mobileTable:{[bo.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[bo.mdOrSmaller]:{marginLeft:-16,marginRight:-16,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}}),$a={name:"categorizer",displayName:"Categorizer",widget:Xa,transform:e=>p.a.pick(e,"items","categories","randomizeItems"),staticTransform:e=>p.a.pick(e,"items","categories","values","randomizeItems"),isLintable:!0},Za=e=>new URL(e,(Qa||(Qa=window.location),Qa).origin),{updateQueryString:Ja}=Pe;function el(e){var t,{InitialRequestUrl:r}=ie(),n="/computer-programming/program/"+"".concat(e,"/embedded?embed=yes&author=no");return(t=r.protocol)&&"file:"===t.toLowerCase()?"https://khanacademy.org".concat(n):Za(n).href}class tl extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"handleMessageEvent",(e=>{var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(!p.a.isUndefined(t.testsPassed)){var r=t.testsPassed?"correct":"incorrect";this.change({status:r,message:t.message})}})),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"simpleValidate",(e=>tl.validate({status:this.props.status,message:this.props.message},e)))}static validate(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}componentDidMount(){f()(window).on("message",this.handleMessageEvent)}componentWillUnmount(){f()(window).off("message",this.handleMessageEvent)}render(){if(!this.props.programID)return h.createElement("div",null);var e,t=!1,r=el(this.props.programID),n={height:this.props.height,width:"100%"};if(this.props.showEditor?(r+="&editor=yes",e="perseus-scratchpad-editor"):(r+="&editor=no&width=".concat(688),e="perseus-scratchpad","webpage"!==this.props.programType&&(t=!0)),this.props.showButtons?(r+="&buttons=yes",n.height+=67):r+="&buttons=no",this.props.settings){var i={};p.a.each(this.props.settings,(function(e){e.name&&e.value&&(i[e.name]=e.value)})),r=Ja(r,"settings",JSON.stringify(i))}var s=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return h.createElement("div",{className:Object(C.css)(rl.widthOverride,t&&rl.container)},h.createElement("iframe",{sandbox:s,src:r,style:n,className:e,allowFullScreen:!0}))}}j(tl,"propTypes",U(U({},qs),{},{programID:d.a.string,programType:d.a.oneOf(["pjs","sql","webpage"]),width:d.a.number,height:d.a.number,settings:d.a.array,showEditor:d.a.bool,showButtons:d.a.bool,status:d.a.oneOf(["incomplete","incorrect","correct"]),message:d.a.string})),j(tl,"defaultProps",{showEditor:!1,showButtons:!1,status:"incomplete",message:null});var rl=C.StyleSheet.create({widthOverride:{width:820},container:{margin:"auto"}}),nl={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:tl,hidden:!0};class il extends h.Component{componentDidMount(){this.props.trackInteraction()}render(){return h.createElement(_.View,{style:ol.tooltipBody},h.createElement(ss,{apiOptions:this.props.apiOptions,content:this.props.content,widgets:this.props.widgets}))}}j(il,"propTypes",{apiOptions:J.propTypes,content:d.a.string,trackInteraction:d.a.func.isRequired,widgets:d.a.objectOf(d.a.any)});class sl extends h.Component{constructor(){super(...arguments),j(this,"getUserInput",(()=>({}))),j(this,"simpleValidate",(e=>sl.validate(this.getUserInput(),e)))}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){var e=h.createElement(il,{apiOptions:this.props.apiOptions,content:this.props.definition,key:this.props.definition,trackInteraction:this.props.trackInteraction,widgets:this.props.widgets});return h.createElement(I.default,{content:e,placement:"top"},h.createElement("span",{className:"perseus-widget-definition"},h.createElement(_.View,{style:ol.definitionLink},this.props.togglePrompt)))}}j(sl,"defaultProps",{togglePrompt:"define me",definition:"definition goes here"});var ol={tooltipBody:{color:T.default.offBlack,display:"block",fontSize:20,fontWeight:500,lineHeight:"30px",margin:A.default.xSmall_8},definitionLink:{borderBottom:"dashed 1px ".concat(T.default.blue),color:T.default.blue,cursor:"pointer",display:"inline-block",textDecoration:"none"}},al={name:"definition",displayName:"Definition",accessible:!0,defaultAlignment:"inline",widget:sl,transform:p.a.identity};class ll extends h.Component{constructor(){super(...arguments),j(this,"focus",(()=>(v.a.findDOMNode(this).focus(),!0))),j(this,"_handleChangeEvent",(e=>{this._handleChange(parseInt(e.target.value))})),j(this,"_handleChange",(e=>{this.props.trackInteraction(),this.props.onChange({selected:e})})),j(this,"getUserInput",(()=>({value:this.props.selected}))),j(this,"simpleValidate",(e=>ll.validate(this.getUserInput(),e)))}static validate(e,t){var r=e.value;return 0===r?{type:"invalid",message:null}:{type:"points",earned:t.choices[r-1].correct?1:0,total:1,message:null}}render(){var e=[h.createElement(O.OptionItem,{key:"placeholder",value:"0",disabled:!0,label:this.props.placeholder}),...this.props.choices.map(((e,t)=>h.createElement(O.OptionItem,{key:String(t+1),value:String(t+1),label:e})))];return h.createElement("div",{onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()}},h.createElement(O.SingleSelect,{placeholder:"",onChange:e=>this._handleChange(parseInt(e)),selectedValue:String(this.props.selected),disabled:this.props.apiOptions.readOnly},e))}}j(ll,"defaultProps",{choices:[],selected:0,placeholder:"",apiOptions:J.defaults});var hl={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:ll,transform:e=>({placeholder:e.placeholder,choices:e.choices.map((e=>e.content))})};class cl extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"state",{expanded:!1}),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"_onClick",(()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()})),j(this,"getUserInput",(()=>({}))),j(this,"simpleValidate",(e=>cl.validate(this.getUserInput(),e)))}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){var e,{Link:t}=this.props.apiOptions.baseElements,{isArticle:r,isMobile:n}=this.props.apiOptions,i=this.state.expanded?this.props.hidePrompt:this.props.showPrompt,s="javascript:void(0)",o=this._onClick;e=n?h.createElement("div",{className:Object(C.css)(ml.linkContainer)},h.createElement("a",{className:Object(C.css)(ml.mobileExplanationLink),href:s,onClick:o,role:"button","aria-expanded":this.state.expanded},i),this.state.expanded&&h.createElement("svg",{className:Object(C.css)(ml.disclosureArrow)},h.createElement("polygon",{style:{fill:dl},points:"0,".concat(ul," ")+"".concat(pl,",").concat(ul," ")+"".concat(pl/2,",0")}))):r?h.createElement("div",{className:Object(C.css)(ml.linkContainer,ml.articleLink)},h.createElement(t,{className:Object(C.css)(ml.explanationLink),style:ml.explanationLink,href:s,onClick:o,role:"button","aria-expanded":this.state.expanded},"[".concat(i,"]"))):h.createElement("div",{className:Object(C.css)(ml.linkContainer,ml.exerciseLink)},h.createElement(t,{className:Object(C.css)(ml.explanationLink),href:s,onClick:o,role:"button","aria-expanded":this.state.expanded},"[".concat(i,"]")));var a=n?ml.contentExpandedMobile:ml.contentExpanded;return h.createElement("div",{className:Object(C.css)(ml.container)},e,this.state.expanded&&h.createElement("div",{className:Object(C.css)(ml.content,n&&ml.contentMobile,this.state.expanded&&a),ref:"content"},h.createElement(ss,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext})))}}j(cl,"defaultProps",{showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:s.b});var pl=30,ul=14,dl=je,ml=C.StyleSheet.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:{fontStyle:"italic",color:"#007d96"},articleLink:{fontSize:20,lineHeight:"30px"},exerciseLink:{fontSize:14,lineHeight:"19.6px"},mobileExplanationLink:{color:qe,borderBottom:"dashed 1px ".concat(qe),textDecoration:"none",[bo.xl]:{fontSize:22,lineHeight:1.4},[bo.lgOrSmaller]:{fontSize:20,lineHeight:1.5},[bo.smOrSmaller]:{fontSize:18,lineHeight:1.2}},content:{position:"relative",transition:"margin-top 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-23,paddingLeft:23,paddingBottom:10,marginBottom:ul,marginTop:ul},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:ul},contentMobile:{background:dl,marginLeft:at,marginRight:at,paddingLeft:ot,paddingRight:ot},disclosureArrow:{bottom:-(ul+5),height:ul,left:"50%",marginLeft:-pl/2,position:"absolute",width:pl}}),fl={name:"explanation",displayName:"Explanation",accessible:!0,defaultAlignment:"inline",widget:cl,transform:p.a.identity,isLintable:!0};class gl extends h.Component{render(){var{apiOptions:e,answerBarState:t,onCheckAnswer:r,onNextQuestion:n}=this.props,i=U(U({},vl.answerBar),{},{backgroundColor:"CORRECT"===t?T.default.offWhite:"white",justifyContent:"CORRECT"!==t||n?"space-between":"center"}),s="INCORRECT"===t?h.createElement("span",{style:vl.text},h.createElement("span",{style:vl.tryAgainIcon},h.createElement(Y,Dr)),h.createElement("span",{style:{marginLeft:8}},o._("Keep trying"))):h.createElement("span",null);if("CORRECT"!==t){var a="INCORRECT"===t?o._("Try again"):o._("Check");return h.createElement("div",{style:i},s,h.createElement(N.default,{disabled:e.readOnly||"ACTIVE"!==t,onClick:r},a))}return h.createElement("div",{style:i},h.createElement("span",{style:vl.text},h.createElement("span",{style:{fontSize:28,color:T.default.green}},h.createElement(Y,G({},Fr,{style:{marginBottom:5}}))),h.createElement("span",{role:"alert","aria-label":o._("Correct!"),style:{marginLeft:8}},o._("Correct!"))),n&&h.createElement(N.default,{onClick:n},o._("Next question")))}}var vl={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:at,marginRight:at,marginBottom:at,marginTop:ot,paddingLeft:ot,paddingRight:10,borderTop:"1px solid ".concat(T.default.offBlack50)},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:17}},yl="ungraded",bl="correct",xl="incorrect",wl="invalid",kl=(e,t)=>{switch(e){case"HIDDEN":case"INACTIVE":return t?"ACTIVE":e;case"ACTIVE":return t?e:"INACTIVE";case"INCORRECT":return t?"ACTIVE":"INACTIVE";default:return e}},Cl=o._("We couldn't grade your answer."),El=o._("It looks like you left something blank or ")+o._("entered in an invalid answer.");class Sl extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"state",{status:yl,showHint:!1,message:"",answerBarState:"HIDDEN"}),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"_onInteractWithWidget",(e=>{if(this.setState({status:yl,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);var t=0===this.refs.renderer.emptyWidgets().length,r=this.state.answerBarState;this.setState({answerBarState:kl(r,t)})}})),j(this,"_checkAnswer",(()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices();var e=this.refs.renderer.score(),t="points"===e.type?e.total===e.earned?bl:xl:wl,r="points"===e.type?e.message||"":e.message?"".concat(Cl," ").concat(e.message):"".concat(Cl," ").concat(El);this.setState({status:t,message:r,answerBarState:"correct"===t?"CORRECT":"INCORRECT"}),this.props.trackInteraction({status:t})})),j(this,"getInputPaths",(()=>this.refs.renderer.getInputPaths())),j(this,"setInputValue",((e,t,r)=>this.refs.renderer.setInputValue(e,t,r))),j(this,"focus",(()=>this.refs.renderer.focus())),j(this,"focusInputPath",(e=>{this.refs.renderer.focusPath(e)})),j(this,"blurInputPath",(e=>{this.refs.renderer.blurPath(e)}))}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){var e=p.a.extend({},J.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}}),t=null,r=null;this.state.status===bl?(r=h.createElement(Y,G({},Pr,{style:{color:"#526f03"}})),t=o._("Correct")):this.state.status===xl&&(r=h.createElement(Y,G({},Lr,{style:{color:"#ff5454"}})),t=o._("Incorrect"));var n=this.props.inGradedGroupSet?Object(C.css)(Tl.gradedGroupInSet):Object(C.css)(Tl.gradedGroup),i=l()({[n]:e.isMobile,"perseus-graded-group":!0,"answer-correct":!e.isMobile&&this.state.status===bl,"answer-incorrect":!e.isMobile&&this.state.status===xl}),{answerBarState:s}=this.state,a="CORRECT"===s,c=e.readOnly||e.isMobile&&a;return h.createElement("div",{className:i},!!this.props.title&&h.createElement("div",{className:Object(C.css)(Tl.title)},this.props.title),h.createElement(ss,G({},this.props,{ref:"renderer",apiOptions:U(U({},e),{},{readOnly:c}),onInteractWithWidget:this._onInteractWithWidget,linterContext:this.props.linterContext})),!e.isMobile&&r&&h.createElement("div",{className:"group-icon"},r),!e.isMobile&&t&&h.createElement("div",{className:Object(C.css)(ua.srOnly),role:"alert","aria-label":t},t),!e.isMobile&&h.createElement("p",null,this.state.message),!e.isMobile&&h.createElement(N.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer},o._("Check")),!e.isMobile&&a&&this.props.onNextQuestion&&h.createElement(N.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5}},o._("Next question")),this.props.hint&&this.props.hint.content&&(this.state.showHint?h.createElement("div",null,h.createElement("button",{tabIndex:"0",className:Object(C.css)(Tl.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!1})}},o._("Hide explanation")),h.createElement(ss,G({},this.props.hint,{ref:"hints-renderer",apiOptions:e,linterContext:this.props.linterContext}))):h.createElement("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!0})},className:Object(C.css)(Tl.showHintLink)},o._("Explain"))),e.isMobile&&"HIDDEN"!==s&&h.createElement(gl,{apiOptions:e,answerBarState:s,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion}))}}j(Sl,"defaultProps",{title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:s.b});var Tl=C.StyleSheet.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:"1px solid ".concat(Ve),borderBottom:"1px solid ".concat(Ve),backgroundColor:Ke,marginLeft:at,marginRight:at,paddingBottom:ot,paddingLeft:ot,paddingRight:ot,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:qe,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:qe,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:Ve,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}}),Ml={name:"graded-group",displayName:"Graded group (articles only)",widget:Sl,traverseChildWidgets:function(e,t){return p.a.extend({},e,t(e))},hidden:!1,tracking:"all",isLintable:!0},_l=Ml.widget;class Al extends h.Component{render(){for(var e=this,t=[],r=function(r){t.push(h.createElement("div",{role:"button","aria-label":o._("Skip to %(title)s",{title:e.props.groupTitles[r]}),key:r,className:Object(C.css)(Nl.indicator,r===e.props.currentGroup&&Nl.selectedIndicator),onClick:()=>e.props.onChangeCurrentGroup(r)}))},n=0;n<this.props.numGroups;n++)r(n);return h.createElement("div",{className:Object(C.css)(Nl.indicatorContainer)},t)}}class Il extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"_childGroup",void 0),j(this,"state",{currentGroup:0}),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"getInputPaths",(()=>this._childGroup.getInputPaths())),j(this,"setInputValue",((e,t,r)=>this._childGroup.setInputValue(e,t,r))),j(this,"focus",(()=>this._childGroup.focus())),j(this,"focusInputPath",(e=>{this._childGroup.focusInputPath(e)})),j(this,"blurInputPath",(e=>{this._childGroup.blurInputPath(e)})),j(this,"handleNextQuestion",(()=>{var{currentGroup:e}=this.state;e<this.props.gradedGroups.length-1&&this.setState({currentGroup:e+1})}))}shouldComponentUpdate(e,t){return e.gradedGroups,e!==this.props||t!==this.state}render(){var{JIPT:e}=ie();if(e.useJIPT&&this.props.gradedGroups.length>1)return h.createElement("div",{className:Object(C.css)(Nl.container)},this.props.gradedGroups.map(((e,t)=>h.createElement(_l,G({key:t},this.props,e,{inGradedGroupSet:!1,linterContext:this.props.linterContext})))));var t=this.props.gradedGroups[this.state.currentGroup];if(!t)return h.createElement("span",null,o.doNotTranslate("No current group..."));var r=this.props.gradedGroups.length,n=this.state.currentGroup<r-1?this.handleNextQuestion:null;return h.createElement("div",{className:Object(C.css)(Nl.container)},h.createElement("div",{className:Object(C.css)(Nl.top)},h.createElement("div",{className:Object(C.css)(Nl.title)},t.title),h.createElement("div",{className:Object(C.css)(Nl.spacer)}),h.createElement(Al,{numGroups:r,currentGroup:this.state.currentGroup,groupTitles:this.props.gradedGroups.map((e=>e.title)),onChangeCurrentGroup:e=>this.setState({currentGroup:e})})),h.createElement(_l,G({key:this.state.currentGroup,ref:e=>this._childGroup=e},this.props,t,{inGradedGroupSet:!0,title:null,onNextQuestion:n,linterContext:this.props.linterContext})))}}j(Il,"defaultProps",{gradedGroups:[],linterContext:s.b});var Ol={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:Il,traverseChildWidgets:function(e,t){return{groups:e.gradedGroups.map(t)}},hidden:!1,tracking:"all",isLintable:!0},Nl=C.StyleSheet.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:Ve,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:He,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:qe},container:{borderTop:"1px solid ".concat(Ve),borderBottom:"1px solid ".concat(Ve),backgroundColor:Ke,marginLeft:at,marginRight:at,paddingBottom:ot,paddingLeft:ot,paddingRight:ot,paddingTop:10,width:"auto"}});class Pl extends h.Component{constructor(){super(...arguments),j(this,"container",void 0)}componentWillUnmount(){this.container=null}focus(){if(this.container)return this.container.focus(),!0}toggleSelect(e){var t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}render(){var e=this.props.value,t=this.props.buttons.map(((t,r)=>h.createElement("button",{title:t.title,type:"button",id:""+r,ref:"button"+r,key:""+r,className:Object(C.css)(Rl.buttonStyle,t.value===e&&Rl.selectedStyle),onClick:()=>this.toggleSelect(t.value)},t.content||""+t.value)));return h.createElement("div",{style:{display:"inline-block"},ref:e=>this.container=e},t)}}j(Pl,"defaultProps",{value:null,allowEmpty:!0});var Rl=C.StyleSheet.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:2}},selectedStyle:{backgroundColor:"#ddd"}}),Ll={url:null};function Fl(e){var t=e[0],r=e[1],n=e[2],i=e[3];t<0&&(t*=-1,r*=-1,n*=-1);var s=2*Math.PI;for(r<0&&(r*=-1,n*=-1,n+=s/2);n>0;)n-=s;for(;n<0;)n+=s;return[t,r,n,i]}function Dl(e){var t=e[0],r=e[1],n=e[2],i=e[3];t<0&&(t*=-1,r*=-1,n*=-1);var s=Math.PI;for(r<0&&(r*=-1,n*=-1,n+=s/2);n>0;)n-=s;for(;n<0;)n+=s;return[t,r,n,i]}var zl={areEqual:function(e,t){return Pe.deepEq(e,t)},Movable:qn.Plot,getPropsForCoeffs:function(e){return{fn:p.a.partial(this.getFunctionForCoeffs,e)}}},Bl=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){var t=e[0],r=e[1],n=r[0]-t[0],i=r[1]-t[1];if(0!==n){var s=i/n;return[s,r[1]-s*r[0]]}},getFunctionForCoeffs:function(e,t){return e[0]*t+e[1]},getEquationString:function(e){var t=this.getCoefficients(e),r=t[0],n=t[1];return"y = "+r.toFixed(3)+"x + "+n.toFixed(3)}}),ql=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:qn.Parabola,getCoefficients:function(e){var t=e[0],r=e[1],n=t[0],i=t[1],s=(r[1]-i)/((r[0]-n)*(r[0]-n));return[s,-2*n*s,s*n*n+i]},getFunctionForCoeffs:function(e,t){return(e[0]*t+e[1])*t+e[2]},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){var t=this.getCoefficients(e),r=t[0],n=t[1],i=t[2];return"y = "+r.toFixed(3)+"x^2 + "+n.toFixed(3)+"x + "+i.toFixed(3)}}),Hl=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:qn.Sinusoid,getCoefficients:function(e){var t=e[0],r=e[1],n=r[1]-t[1],i=Math.PI/(2*(r[0]-t[0]));return[n,i,t[0]*i,t[1]]},getFunctionForCoeffs:function(e,t){var r=e[0],n=e[1],i=e[2],s=e[3];return r*Math.sin(n*t-i)+s},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){var t=this.getCoefficients(e),r=t[0],n=t[1],i=t[2],s=t[3];return"y = "+r.toFixed(3)+" sin("+n.toFixed(3)+"x - "+i.toFixed(3)+") + "+s.toFixed(3)},areEqual:function(e,t){return Pe.deepEq(Fl(e),Fl(t))}}),Ul=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){var t=e[0],r=e[1],n=r[1]-t[1],i=Math.PI/(4*(r[0]-t[0]));return[n,i,t[0]*i,t[1]]},getFunctionForCoeffs:function(e,t){var r=e[0],n=e[1],i=e[2],s=e[3];return r*Math.tan(n*t-i)+s},getEquationString:function(e){var t=this.getCoefficients(e),r=t[0],n=t[1],i=t[2],s=t[3];return"y = "+r.toFixed(3)+" sin("+n.toFixed(3)+"x - "+i.toFixed(3)+") + "+s.toFixed(3)},areEqual:function(e,t){return Pe.deepEq(Dl(e),Dl(t))}}),Wl=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,r,n,i){var s=p.a.head(n)[1];return p.a.all(r,(e=>e[1]!==s))},extraAsymptoteConstraint:function(e,t,r,n,i){var s=e[1];if(p.a.all(r,(e=>e[1]>s))||p.a.all(r,(e=>e[1]<s)))return[t[0],s];var o=t[1];if(p.a.all(r,(e=>e[1]>o))){var a=p.a.min(p.a.map(r,(e=>e[1])));return[t[0],a-i.snapStep[1]]}var l=p.a.max(p.a.map(r,(e=>e[1])));return[t[0],l+i.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){var r=e[0],n=e[1],i=p.a.head(t)[1],s=Math.log((r[1]-i)/(n[1]-i))/(r[0]-n[0]);return[(r[1]-i)/Math.exp(s*r[0]),s,i]},getFunctionForCoeffs:function(e,t){var r=e[0],n=e[1],i=e[2];return r*Math.exp(n*t)+i},getEquationString:function(e,t){if(!t)return null;var r=this.getCoefficients(e,t),n=r[0],i=r[1],s=r[2];return"y = "+n.toFixed(3)+"e^("+i.toFixed(3)+"x) + "+s.toFixed(3)}}),jl=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,r,n,i){var s=p.a.head(n)[0];return p.a.all(r,(e=>e[0]!==s))&&r[0][1]!==r[1][1]},extraAsymptoteConstraint:function(e,t,r,n,i){var s=e[0];if(p.a.all(r,(e=>e[0]>s))||p.a.all(r,(e=>e[0]<s)))return[s,t[1]];var o=t[0];return p.a.all(r,(e=>e[0]>o))?[p.a.min(p.a.map(r,(e=>e[0])))-i.snapStep[0],t[1]]:[p.a.max(p.a.map(r,(e=>e[0])))+i.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){var r=e=>[e[1],e[0]],n=Wl.getCoefficients(p.a.map(e,r),p.a.map(t,r)),i=-n[2]/n[0],s=1/n[0];return[1/n[1],s,i]},getFunctionForCoeffs:function(e,t,r){var n=e[0],i=e[1],s=e[2];return n*Math.log(i*t+s)},getEquationString:function(e,t){if(!t)return null;var r=this.getCoefficients(e,t),n=r[0],i=r[1],s=r[2];return"y = ln("+n.toFixed(3)+"x + "+i.toFixed(3)+") + "+s.toFixed(3)}}),Gl=p.a.extend({},zl,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){var t=e[0],r=e[1],n=r[0]-t[0],i=r[1]-t[1];if(0!==n){var s=Math.abs(i/n);return r[1]<t[1]&&(s*=-1),[s,t[0],t[1]]}},getFunctionForCoeffs:function(e,t){var r=e[0],n=e[1],i=e[2];return r*Math.abs(t-n)+i},getEquationString:function(e){var t=this.getCoefficients(e),r=t[0],n=t[1],i=t[2];return"y = "+r.toFixed(3)+"| x - "+n.toFixed(3)+"| + "+i.toFixed(3)}}),Vl={linear:Bl,quadratic:ql,sinusoid:Hl,tangent:Ul,exponential:Wl,logarithm:jl,absolute_value:Gl},Yl=p.a.keys(Vl);function Xl(e){return Vl[e]}var Ql=(e,t)=>{if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(null==e.coords)return{type:"invalid",message:null};var r=Xl(e.type),n=r.getCoefficients(e.coords,e.asymptote),i=r.getCoefficients(t.correct.coords,t.correct.asymptote);return null==n||null==i?{type:"invalid",message:null}:r.areEqual(n,i)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}},Kl=(e,t,r,n)=>e.map((e=>{var i=e.map(((e,n)=>{var i=t[n],s=r[n],o=function(e,t){return Math.floor((e[1]-e[0])/t)}(i,s),a=Math.round(e*o);return i[0]+s*a}));return y.c.roundTo(i,n)})),$l=(e,t,r,n)=>e?Kl(e,t,r,n):e,Zl=(e,t)=>{var r=Xl(e),n=Pe.snapStepFromGridStep([1,1]);return{type:e,asymptote:$l(r.defaultAsymptote,t.range,t.step,n),coords:null}},Jl=p.a.first,eh=(e,t)=>{var r=e.gridStep||Pe.getGridStep(e.range,e.step,t);return{gridStep:r,snapStep:e.snapStep||Pe.snapStepFromGridStep(r)}},th={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:Ll,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},rh=Zl("linear",th),nh={graph:th,plot:rh,availableTypes:[rh.type]},ih=e=>{var t=e.charAt(0).toUpperCase()+e.substring(1),r=ie().staticUrl;return{value:e,title:t,content:h.createElement("img",{src:r(Xl(e).url),alt:t})}},sh=Object.freeze({__proto__:null,DEFAULT_BACKGROUND_IMAGE:Ll,allTypes:Yl,functionForType:Xl,validate:Ql,getEquationString:e=>{var t=e.plot;return t.type&&t.coords&&Xl(t.type).getEquationString(t.coords,t.asymptote)||""},pointsFromNormalized:Kl,maybePointsFromNormalized:$l,defaultPlotProps:Zl,chooseType:Jl,getGridAndSnapSteps:eh,DEFAULT_GRAPHER_PROPS:nh,typeToButton:ih}),oh=qn.MovablePoint,ah=qn.MovableLine;var lh={padding:"5px 5px"};class hh extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"_coords",(()=>{var e=this.props,t=e.graph,r=e.model&&$l(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||r||null})),j(this,"_asymptote",(()=>this.props.asymptote)),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"renderPlot",(()=>{var e=this.props.model,t=this.props.graph.range[0],r=U({stroke:this.props.isMobile?Et.BLUE_C:Et.DYNAMIC},this.props.isMobile?{"stroke-width":3}:{}),n=e.getCoefficients(this._coords(),this._asymptote());if(n){var i=e.getPropsForCoeffs(n,t);return h.createElement(e.Movable,G({},i,{key:this.props.model.url,range:t,style:r}))}})),j(this,"renderAsymptote",(()=>{var e=this.props.model,t=this.props.graph,r=this._asymptote(),n={strokeDasharray:"- "};return r&&h.createElement(ah,{onMove:(e,t)=>{var r=y.e.subtract(e,t),n=p.a.map(this._asymptote(),(e=>y.e.add(e,r)));this.props.onChange({asymptote:n})},constraints:[Cn.MovableLine.constraints.bound(),Cn.MovableLine.constraints.snap(),(r,n)=>{var i=y.e.subtract(r,n),s=p.a.map(this._asymptote(),(e=>y.e.add(e,i)));return!e.extraAsymptoteConstraint||e.extraAsymptoteConstraint(r,n,this._coords(),s,t)}],normalStyle:n,highlightStyle:n},p.a.map(r,((e,t)=>h.createElement(oh,{key:"asymptoteCoord-".concat(t),coord:e,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))))}))}render(){var e=p.a.map(this._coords(),((e,t)=>h.createElement(oh,{key:t,coord:e,static:this.props.static,constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>{var r=p.a.all(this._coords(),((r,n)=>t===n||!r||!y.b.equal(e[0],r[0])));if(!r)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){var n=this.props.model.extraCoordConstraint,i=p.a.clone(this._coords()),s=p.a.clone(i[t]);return i[t]=e,n(e,s,i,this._asymptote(),this.props.graph)}return r}],onMove:(e,r)=>{var n,i=this._asymptote();n=i&&this.props.model.allowReflectOverAsymptote&&function(e,t,r){var n=(e,t,r)=>(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1]);return n(r[0],r[1],t)>0!=n(r[0],r[1],e)>0}(e,r,i)?p.a.map(this._coords(),(e=>y.c.reflectOverLine(e,i))):p.a.clone(this._coords()),n[t]=e,this.props.onChange({coords:n})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))),t=this.props.graph.box,r=this.props.graph.backgroundImage,n=null;if(r.url){var i=t[0]/ht.defaultBoxSize;n=h.createElement(ei,{src:r.url,width:r.width,height:r.height,scale:i})}return h.createElement("div",{className:"perseus-widget perseus-widget-grapher",style:{width:t[0],height:t[1],boxSizing:"initial"}},h.createElement("div",{className:"graphie-container above-scratchpad",style:{width:t[0],height:t[1]}},n,h.createElement(qn,G({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&e)))}}j(hh,"defaultProps",{graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1});class ch extends h.Component{constructor(){super(...arguments),j(this,"horizHairline",void 0),j(this,"vertHairline",void 0),j(this,"handlePlotChanges",(e=>{var t=p.a.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()})),j(this,"handleActiveTypeChange",(e=>{var t=this.props.graph,r=p.a.extend({},this.props.plot,Zl(e,t));this.props.onChange({plot:r})})),j(this,"_setupGraphie",((e,t)=>{var r=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:p.a.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:r?this._calculateMobileTickStep(t.gridStep,t.step,t.range):p.a.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:p.a.pluck(t.gridConfig,"unityLabel"),isMobile:r}),e.label([0,t.range[1][1]],t.labels[1],r?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],r?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:p.a.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:r}):"none"===t.markings&&e.init({range:t.range,scale:p.a.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){var n={normalStyle:{strokeWidth:1}};this.horizHairline=new Ht(e,[0,0],[0,0],n),this.horizHairline.attr({stroke:Et.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new Ht(e,[0,0],[0,0],n),this.vertHairline.attr({stroke:Et.INTERACTIVE}),this.vertHairline.hide()}})),j(this,"showHairlines",(e=>{this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())})),j(this,"hideHairlines",(()=>{this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())}))}render(){var e=this.props.plot.type,t=this.props.plot.coords,r=this.props.plot.asymptote,n=h.createElement("div",{style:lh,className:"above-scratchpad"},h.createElement(Pl,{value:e,allowEmpty:!0,buttons:p.a.map(this.props.availableTypes,ih),onChange:this.handleActiveTypeChange})),i=Ai(this.props.containerSizeClass),s=U(U(U({},this.props.graph),eh(this.props.graph,i[0])),{},{gridConfig:this._getGridConfig(U(U({},this.props.graph),{},{box:i},eh(this.props.graph,i[0])))}),o={graph:{box:i,range:s.range,step:s.step,snapStep:s.snapStep,backgroundImage:s.backgroundImage,options:s,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&Xl(e),coords:t,asymptote:r,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return h.createElement("div",null,h.createElement(hh,o),this.props.availableTypes.length>1&&n)}_getGridConfig(e){return e.step.map(((t,r)=>Pe.gridDimensionConfig(t,e.range[r],e.box[r],e.gridStep[r])))}_calculateMobileTickStep(e,t,r){var n=Pe.constrainedTickStepsFromTickSteps(t,r);return n[0]=n[0]/e[0],n[1]=n[1]/e[1],n}simpleValidate(e){return Ql(this.getUserInput(),e)}getUserInput(){return ch.getUserInputFromProps(this.props)}focus(){}static validate(e,t){return Ql(e,t)}static getUserInputFromProps(e){return e.plot}}j(ch,"defaultProps",nh);var ph=e=>{var t={availableTypes:e.availableTypes,graph:e.graph};if(1===t.availableTypes.length){var r=t.graph,n=Jl(t.availableTypes);t.plot=Zl(n,r)}return t},uh={name:"grapher",displayName:"Grapher",widget:ch,transform:ph,staticTransform:e=>U(U({},ph(e)),{},{availableTypes:[e.correct.type],plot:e.correct})};class dh extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"getUserInput",(()=>this.refs.renderer.getUserInput())),j(this,"getSerializedState",(()=>this.refs.renderer.getSerializedState())),j(this,"restoreSerializedState",((e,t)=>(this.refs.renderer.restoreSerializedState(e,t),null))),j(this,"simpleValidate",(e=>this.refs.renderer.score())),j(this,"getInputPaths",(()=>this.refs.renderer.getInputPaths())),j(this,"setInputValue",((e,t,r)=>this.refs.renderer.setInputValue(e,t,r))),j(this,"focus",(()=>this.refs.renderer.focus())),j(this,"focusInputPath",(e=>{this.refs.renderer.focusPath(e)})),j(this,"blurInputPath",(e=>{this.refs.renderer.blurPath(e)})),j(this,"showRationalesForCurrentlySelectedChoices",(()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices()}))}componentDidMount(){this.forceUpdate()}render(){var e=p.a.extend({},J.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}}),t=p.a.indexOf(this.props.findWidgets("group"),this),r=this.props.apiOptions.groupAnnotator(t,this.props.widgetId),n=this.refs.renderer&&this.refs.renderer.score(),i=n&&"invalid"!==n.type,s=n&&"invalid"===n.type;return h.createElement("div",{className:l()({"perseus-group":!0,"perseus-group-valid-answer":i,"perseus-group-invalid-answer":s})},r,h.createElement(ss,G({},this.props,{ref:"renderer",apiOptions:e,findExternalWidgets:this.props.findWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:e=>{this.refs.renderer&&this.change("widgets",this.refs.renderer.props.widgets)},linterContext:this.props.linterContext})),this.props.icon&&h.createElement("div",{className:"group-icon"},this.props.icon))}}j(dh,"defaultProps",{content:"",widgets:{},images:{},linterContext:s.b});var mh={name:"group",displayName:"Group (SAT only)",widget:dh,traverseChildWidgets:function(e,t){return p.a.extend({},e,t(e))},hidden:!1,isLintable:!0},{updateQueryString:fh}=Pe;class gh extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"getUserInput",(()=>ao.getUserInput.call(this))),j(this,"handleMessageEvent",(e=>{var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(!p.a.isUndefined(t.testsPassed)){var r=t.testsPassed?"correct":"incorrect";this.change({status:r,message:t.message})}})),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"simpleValidate",(e=>gh.validate(this.getUserInput(),e)))}componentDidMount(){f()(window).on("message",this.handleMessageEvent)}componentWillUnmount(){f()(window).off("message",this.handleMessageEvent)}render(){var e={width:String(this.props.width),height:String(this.props.height)},{InitialRequestUrl:t}=ie();Object.entries(e).forEach((t=>{var[r,n]=t;n.endsWith("%")||n.endsWith("px")||(e[r]=n+"px")}));var r=this.props.url;if(r&&r.length&&0!==r.indexOf("http")&&(r=fh(r="https://www.khanacademy.org/computer-programming/program/"+r+"/embedded?buttons=no&embed=yes&editor=no&author=no","width",this.props.width),r=fh(r,"height",this.props.height),r=fh(r,"origin",t.origin)),this.props.settings){var n={};p.a.each(this.props.settings,(function(e){e.name&&e.value&&(n[e.name]=e.value)})),r=fh(r,"settings",JSON.stringify(n))}return" allow-top-navigation",h.createElement("iframe",{sandbox:"allow-same-origin allow-scripts allow-top-navigation",style:e,src:r,allowFullScreen:this.props.allowFullScreen})}}j(gh,"propTypes",U(U({},qs),{},{width:d.a.oneOfType([d.a.string,d.a.number]),height:d.a.oneOfType([d.a.string,d.a.number]),url:d.a.string,settings:d.a.array,status:d.a.oneOf(["incomplete","incorrect","correct"]),message:d.a.string,allowFullScreen:d.a.bool,allowTopNavigation:d.a.bool})),j(gh,"defaultProps",{status:"incomplete",message:null,allowFullScreen:!1,allowTopNavigation:!1}),p.a.extend(gh,{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}});var vh={name:"iframe",displayName:"Iframe",widget:gh,hidden:!0},yh=[0,10],bh="block";class xh extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"getUserInput",(()=>null)),j(this,"simpleValidate",(e=>xh.validate(this.getUserInput(),e))),j(this,"focus",(()=>{}))}render(){var e,t,r,n,{apiOptions:i}=this.props,s=this.props.backgroundImage;if(s.url&&(e=h.createElement(ei,{src:s.url,alt:this.props.alt,overrideAriaHidden:!0,width:s.width,height:s.height,preloader:i.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:i.isMobile,constrainHeight:i.isMobile,allowFullBleed:i.isMobile})),this.props.alt&&(t=h.createElement("span",{className:"perseus-sr-only"},h.createElement(ss,{content:this.props.alt,apiOptions:i,linterContext:this.props.linterContext}))),i.isMobile){var o;if(this.props.title||this.props.caption){var a=this.props.title;a&&(this.props.caption&&!/[.?!"']\s*$/.test(a)&&(a+="."),a="**".concat(a,"** "));var c=l()({"perseus-image-caption":!0,"has-title":!!a}),p=this.props.alignment,u="block"===p||"full-width"===p?null:"0 !important";o=h.createElement("div",{className:c},h.createElement("div",{className:Object(C.css)(wh.caption),style:{minWidth:u}},h.createElement(ss,{content:a+this.props.caption,apiOptions:i,linterContext:this.props.linterContext})))}return h.createElement("div",{className:"perseus-image-widget"},e,t,o)}return this.props.title&&(r=h.createElement("div",{className:"perseus-image-title"},h.createElement(ss,{content:this.props.title,apiOptions:i,linterContext:this.props.linterContext}))),this.props.caption&&(n=h.createElement("div",{className:"perseus-image-caption"},h.createElement(ss,{content:this.props.caption,apiOptions:i,linterContext:this.props.linterContext}))),h.createElement("div",{className:"perseus-image-widget"},r,e,t,n)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}}j(xh,"defaultProps",{alignment:bh,title:"",range:[yh,yh],box:[400,400],backgroundImage:{url:null,width:0,height:0},labels:[],alt:"",caption:"",linterContext:s.b});var wh=C.StyleSheet.create({caption:{display:"inline-block",marginTop:lt,maxWidth:640,[bo.lgOrSmaller]:{maxWidth:540},[bo.smOrSmaller]:{maxWidth:450}}}),kh={name:"image",accessible:e=>{var t=e.backgroundImage;return!(t&&t.url&&!e.alt)},defaultAlignment:bh,supportedAlignments:["block","full-width"],displayName:"Image",widget:xh,isLintable:!0},Ch=qn.Label,Eh=qn.Line,Sh=qn.MovablePoint,Th=qn.MovableLine,Mh=qn.Plot,_h=qn.PlotParametric,Ah=qn.Point,Ih=qn.Rect,{unescapeMathMode:Oh}=Pe,Nh=(e,t)=>{for(var r=e+"||"+(t=t||{}).decimal_separator+"||",n=t.functions,i=n?n.length:0,s=0;s<i;s++)r+=n[s]+"|";return r},Ph=Object.create(null),Rh=(e,t)=>{var r=Nh(e,t),i=Ph[r];return i||(i=n.e(e,t),Ph[r]=i,i)},Lh=Object.create(null),Fh=(e,t)=>{var r=Nh(e,t),i=Lh[r];if(i)return i;var s=n.e(e,t).expr;return i=s?s.compile():function(){return 0},Lh[r]=i,i};class Dh extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"state",{variables:zh(this.props.elements),functions:Bh(this.props.elements)}),j(this,"_setupGraphie",((e,t)=>{e.graphInit(p.a.extend({},t,{grid:p.a.contains(["graph","grid"],this.props.graph.markings),axes:p.a.contains(["graph"],this.props.graph.markings),ticks:p.a.contains(["graph"],this.props.graph.markings),labels:p.a.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1}))})),j(this,"_updatePointLocation",((e,t)=>{var r=p.a.clone(this.state.variables);r["x_"+e]=t[0],r["y_"+e]=t[1],this.setState({variables:r}),this.props.trackInteraction()})),j(this,"_updateLineLocation",((e,t)=>{var r=this._eval("("+e.endX+")-("+e.startX+")"),n=this._eval("("+e.endY+")-("+e.startY+")"),i=y.e.add(t,[r,n]),s=p.a.clone(this.state.variables);s["x_"+e.startSubscript]=t[0],s["y_"+e.startSubscript]=t[1],s["x_"+e.endSubscript]=i[0],s["y_"+e.endSubscript]=i[1],this.setState({variables:s}),this.props.trackInteraction()})),j(this,"_eval",((e,t)=>{var r=Fh(e,{functions:this.state.functions}),n=p.a.extend({},this.state.variables,t);return p.a.each(p.a.keys(n),(e=>{if(p.a.isString(n[e])){var t=Fh(n[e],{functions:this.state.functions});n[e]=function(e){return t(p.a.extend({},n,{x:e}))}}})),r(n)||0})),j(this,"_extractVars",(e=>{if(null==e)return[];var t=[];return p.a.each(e.args(),(function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))}),this),"Var"===e.name()&&t.push(e.prettyPrint()),t})),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"getUserInput",(()=>({}))),j(this,"simpleValidate",(e=>Dh.validate(this.getUserInput(),e)))}UNSAFE_componentWillReceiveProps(e){p.a.isEqual(this.props.elements,e.elements)||this.setState({variables:zh(e.elements),functions:Bh(e.elements)})}render(){var e=this.props.graph.range,t=this.props.graph.labels;return"graph"===this.props.graph.markings&&(t=this.props.graph.labels.map((e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e))),h.createElement(qn,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},"graph"===this.props.graph.markings&&h.createElement(Ch,{coord:[0,e[1][1]],text:t[1],direction:"above"}),"graph"===this.props.graph.markings&&h.createElement(Ch,{coord:[e[0][1],0],text:t[0],direction:"right"}),p.a.map(this.props.elements,(function(e,t){if("point"===e.type)return h.createElement(Ah,{key:e.key,coord:[this._eval(e.options.coordX),this._eval(e.options.coordY)],color:e.options.color});if("line"===e.type){var r=[this._eval(e.options.startX),this._eval(e.options.startY)],n=[this._eval(e.options.endX),this._eval(e.options.endY)];return h.createElement(Eh,{key:e.key,start:r,end:n,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,arrows:e.options.arrows}})}if("movable-point"===e.type){var i=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];return"snap"===e.options.constraint?i.push(Sh.constraints.snap(e.options.snap)):"x"===e.options.constraint?i.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&i.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})])),h.createElement(Sh,{key:e.key,coord:[this.state.variables["x_"+e.options.varSubscript],this.state.variables["y_"+e.options.varSubscript]],constraints:i,foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap,onMove:p.a.partial(this._updatePointLocation,e.options.varSubscript)})}if("movable-line"===e.type){var s=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];"snap"===e.options.constraint?s.push(Sh.constraints.snap(e.options.snap)):"x"===e.options.constraint?s.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&s.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})]));var o=[this.state.variables["x_"+e.options.startSubscript],this.state.variables["y_"+e.options.startSubscript]],a=[this.state.variables["x_"+e.options.endSubscript],this.state.variables["y_"+e.options.endSubscript]];return h.createElement(Th,{key:e.key,constraints:s,onMove:p.a.bind(this._updateLineLocation,this,e.options),foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap},h.createElement(Sh,{coord:o,static:!0,normalStyle:{stroke:"none",fill:"none"}}),h.createElement(Sh,{coord:a,static:!0,normalStyle:{stroke:"none",fill:"none"}}))}if("function"===e.type){var l=p.a.without(this._extractVars(Rh(e.options.value).expr),"x"),c=p.a.object(l,p.a.map(l,(e=>this.state.variables[e]))),u=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return h.createElement(Mh,{key:e.key,fn:t=>this._eval(e.options.value,{x:t}),foo_fn:e.options.value,foo_varvalues:c,range:u,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("parametric"===e.type){var d=p.a.without(this._extractVars(Rh(e.options.x).expr).concat(this._extractVars(Rh(e.options.y).expr)),"t"),m=p.a.object(d,p.a.map(d,(e=>this.state.variables[e]))),f=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return h.createElement(_h,{key:e.key,fn:t=>[this._eval(e.options.x,{t}),this._eval(e.options.y,{t})],foo_fnx:e.options.x,foo_fny:e.options.y,foo_varvalues:m,range:f,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("label"===e.type){var g=[this._eval(e.options.coordX),this._eval(e.options.coordY)];return h.createElement(Ch,{key:t+1,coord:g,text:Oh(e.options.label),style:{color:e.options.color}})}return"rectangle"===e.type?h.createElement(Ih,{key:t+1,x:this._eval(e.options.coordX),y:this._eval(e.options.coordY),width:p.a.max([this._eval(e.options.width),0]),height:p.a.max([this._eval(e.options.height),0]),style:{stroke:"none",fill:e.options.color}}):void 0}),this))}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}}j(Dh,"defaultProps",{graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]});var zh=e=>{var t={};return p.a.each(p.a.where(e,{type:"movable-point"}),(e=>{var r=e.options.varSubscript,n=Rh(e.options.startX||"0").expr,i=Rh(e.options.startY||"0").expr,s=0,o=0;n&&(s=n.eval({})||0),i&&(o=i.eval({})||0),t["x_"+r]=s,t["y_"+r]=o})),p.a.each(p.a.where(e,{type:"movable-line"}),(e=>{var r=e.options.startSubscript,n=e.options.endSubscript,i=Rh(e.options.startX||"0").expr,s=Rh(e.options.startY||"0").expr,o=Rh(e.options.endX||"0").expr,a=Rh(e.options.endY||"0").expr,l=0,h=0,c=0,p=0;i&&(l=i.eval({})||0),s&&(h=s.eval({})||0),o&&(c=o.eval({})||0),a&&(p=a.eval({})||0),t["x_"+r]=l,t["y_"+r]=h,t["x_"+n]=c,t["y_"+n]=p})),p.a.each(p.a.where(e,{type:"function"}),(e=>{t[e.options.funcName]=e.options.value})),t},Bh=e=>p.a.map(p.a.where(e,{type:"function"}),(e=>e.options.funcName)),qh={name:"interaction",displayName:"Interaction",widget:Dh,transform:p.a.identity,hidden:!0},Hh={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"},Uh={position:"relative",top:"25%"};class Wh extends h.Component{constructor(){super(...arguments),j(this,"protractor",void 0),j(this,"ruler",void 0),j(this,"_graphie",void 0),j(this,"_hasSetupGraphieThisUpdate",void 0),j(this,"_shouldSetupGraphie",void 0),j(this,"reset",(()=>{this._setupGraphie(!1)})),j(this,"graphie",(()=>this._graphie)),j(this,"pointsFromNormalized",((e,t)=>{var r=this;return p.a.map(e,(function(e){return p.a.map(e,(function(e,n){var i=r.props.range[n];if(t)return i[0]+(i[1]-i[0])*e;var s=r.props.step[n],o=function(e,t){return Math.floor((e[1]-e[0])/t)}(i,s),a=Math.round(e*o);return i[0]+s*a}))}))})),j(this,"_setupGraphie",(e=>{if(!this._hasSetupGraphieThisUpdate){var t=v.a.findDOMNode(this.refs.graphieDiv);f()(t).empty();var r=this.props.labels.map((e=>Pe.unescapeMathMode(e))),n=this.props.range,i=this._graphie=Nt.createGraphie(t),s=this._getGridConfig();i.snap=this.props.snapStep,"graph"===this.props.markings?(i.graphInit({range:n,scale:p.a.pluck(s,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:this.props.gridStep,tickStep:p.a.pluck(s,"tickStep"),labelStep:1,unityLabels:p.a.pluck(s,"unityLabel"),isMobile:this.props.isMobile}),i.label([0,n[1][1]],r[1],this.props.isMobile?"below right":"above"),i.label([n[0][1],0],r[0],this.props.isMobile?"above left":"right")):"grid"===this.props.markings?i.graphInit({range:n,scale:p.a.pluck(s,"scale"),gridStep:this.props.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:this.props.isMobile}):"none"===this.props.markings&&i.init({range:n,scale:p.a.pluck(s,"scale"),isMobile:this.props.isMobile});var o;if(this.props.instructions){o=f()("<div/>"),p.a.each(Hh,(function(e,t){o.css(t,e)})),o.css("opacity",.5);var a=f()("<span/>",{text:this.props.instructions});p.a.each(Uh,(function(e,t){a.css(t,e)})),o.append(a),f()(t).append(o)}else o=void 0;var l=o||this.props.onMouseDown?p.a.bind((function(e){o&&(o.remove(),o=null),this.props.onMouseDown(e)}),this):null,h=o?function(){o&&o.css("opacity",0)}:null,c=o?function(){o&&o.css("opacity",.5)}:null;i.addMouseLayer({onClick:this.props.onClick,onMouseDown:l,onMouseOver:h,onMouseOut:c,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,allowScratchpad:!0,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this._updateProtractor(),this._updateRuler(),this._hasSetupGraphieThisUpdate=!0,!e&&this.props.onGraphieUpdated&&this.props.onGraphieUpdated(i)}})),j(this,"_getGridConfig",(()=>{var e=this;return p.a.map(e.props.step,(function(t,r){return Pe.gridDimensionConfig(t,e.props.range[r],e.props.box[r],e.props.gridStep[r])}))})),j(this,"_updateProtractor",(()=>{if(this.protractor&&this.protractor.remove(),this.props.showProtractor){var e=this.pointsFromNormalized([[.5,.05]])[0];this.protractor=this._graphie.protractor(e)}})),j(this,"_updateRuler",(()=>{if(this.ruler&&this.ruler.remove(),this.props.showRuler){var e=this.pointsFromNormalized([[.5,.25]])[0],t=this._graphie.range[0][1]-this._graphie.range[0][0];this.ruler=this._graphie.ruler({center:e,label:this.props.rulerLabel,pixelsPerUnit:this._graphie.scale[0],ticksPerUnit:this.props.rulerTicks,units:Math.round(.8*t)})}})),j(this,"toJSON",(()=>p.a.pick(this.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep")))}render(){var e,t=this.props.backgroundImage;if(t.url){var r=this.props.box[0]/ht.defaultBoxSize;e=h.createElement(ei,{src:t.url,width:t.width,height:t.height,scale:r,responsive:!1})}else e=null;return h.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},e,h.createElement("div",{className:"graphie",ref:"graphieDiv"}))}componentDidMount(){this._setupGraphie(!0)}componentDidUpdate(){this._hasSetupGraphieThisUpdate=!1,this._shouldSetupGraphie&&(this._setupGraphie(!1),this._shouldSetupGraphie=!1)}UNSAFE_componentWillReceiveProps(e){var t=this;p.a.each(["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"],(function(r){p.a.isEqual(t.props[r],e[r])||(t._shouldSetupGraphie=!0)}))}}j(Wh,"propTypes",{box:d.a.array.isRequired,labels:d.a.arrayOf(d.a.string),range:d.a.arrayOf(d.a.arrayOf(d.a.number)),step:d.a.arrayOf(d.a.number),gridStep:d.a.arrayOf(d.a.number),snapStep:d.a.arrayOf(d.a.number),markings:d.a.string,backgroundImage:d.a.shape({url:d.a.string}),showProtractor:d.a.bool,showRuler:d.a.bool,rulerLabel:d.a.string,rulerTicks:d.a.number,onGraphieUpdated:d.a.func,instructions:d.a.string,onClick:d.a.func,setDrawingAreaAvailable:d.a.func,isMobile:d.a.bool}),j(Wh,"defaultProps",{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:{url:null},showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:!1});var{DeprecationMixin:jh}=Pe,Gh=Pe.eq,Vh=Pe.deepEq,Yh="unlimited";function Xh(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function Qh(e,t,r){return Gh(Xh(e,t,r),0)}function Kh(e){return Gh(e,0)?0:e>0?1:-1}function $h(e,t,r){return r[0]<=Math.max(e[0],t[0])&&r[0]>=Math.min(e[0],t[0])&&r[1]<=Math.max(e[1],t[1])&&r[1]>=Math.min(e[1],t[1])}function Zh(e,t){var r=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],n=p.a.map(r,(function(e){return Kh(Xh(...e))}));if(n[0]!==n[1]&&n[2]!==n[3])return!0;for(var i=0;i<4;i++)if(0===n[i]&&$h(...r[i]))return!0;return!1}function Jh(e,t){return p.a.map(p.a.zip(e,t),(function(e){return e[0]-e[1]}))}function ec(e){return Math.sqrt(p.a.reduce(e,(function(e,t){return e+Math.pow(t,2)}),0))}function tc(e){return p.a.zip(e,oc(e)).map((function(e){return ec(Jh(...e))}))}function rc(e){var t=p.a.zip(oc(e,-1),e,oc(e,1)),r=p.a.map(t,(function(e){var t,r,n=Jh(e[1],e[0]),i=Jh(e[2],e[1]),s=Math.acos((t=n,r=i,p.a.reduce(p.a.zip(t,r),(function(e,t){return e+t[0]*t[1]}),0)/(ec(n)*ec(i))));return Kh(Xh(...e))>0?s:-s})),n=p.a.reduce(r,(function(e,t){return e+t}),0);return p.a.map(r,(function(e){return n>0?Math.PI-e:Math.PI+e}))}function nc(e,t,r){if(e.length!==t.length)return!1;for(var n=e.length,i=rc(e),s=rc(t),o=tc(e),a=tc(t),l=0;l<2*n;l++){var h=s.slice(),c=a.slice();if(l>=n&&(h.reverse(),c.reverse(),c=oc(c,1)),h=oc(h,l),c=oc(c,l),Vh(i,h)){var u=function(){var e=p.a.zip(o,c),t=p.a.map(e,(function(e){return e[0]/e[1]})),n=p.a.all(t,(function(e){return Gh(t[0],e)})),i=p.a.all(e,(function(e){return y.b.equal(e[0],e[1],r)}));if(n&&i)return{v:!0}}();if("object"==typeof u)return u.v}}return!1}function ic(e,t){return e<t||Gh(e,t)}function sc(e){var[t,r,n,i]=e;t<0&&(t*=-1,r*=-1,n*=-1);var s=2*Math.PI;for(r<0&&(r*=-1,n*=-1,n+=s/2);n>0;)n-=s;for(;n<0;)n+=s;return[t,r,n,i]}function oc(e,t){return t=void 0===t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function ac(e){return e.replace(/(?:^|-)(.)/g,(function(e,t){return t.toUpperCase()}))}function lc(e,t){if(Gh(e[0],t[0]))return"x = "+e[0].toFixed(3);var r=(t[1]-e[1])/(t[0]-e[0]),n=e[1]-r*e[0];return"y = "+r.toFixed(3)+"x + "+n.toFixed(3)}var hc={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},cc=e=>pc(e)&&(null==e.graph.coords||0===e.graph.coords.length),pc=e=>"point"===e.graph.type&&e.graph.numPoints===Yh||"polygon"===e.graph.type&&e.graph.numSides===Yh,uc=(e,t)=>new le("".concat(e," called but current graph type is not a '").concat(t,"'"),oe.NotAllowed,{metadata:{graphType:t}});class dc extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"angle",void 0),j(this,"circle",void 0),j(this,"graphie",void 0),j(this,"horizHairline",void 0),j(this,"line",void 0),j(this,"lines",void 0),j(this,"parabola",void 0),j(this,"pointA",void 0),j(this,"pointB",void 0),j(this,"pointC",void 0),j(this,"points",void 0),j(this,"polygon",void 0),j(this,"shouldResetGraphie",void 0),j(this,"sinusoid",void 0),j(this,"trashCan",void 0),j(this,"vertHairline",void 0),j(this,"state",{shouldShowInstructions:cc(this.props)}),j(this,"_getShouldShowInstructions",(e=>(e=e||this.props,this.isClickToAddPoints(e)&&(null==e.graph.coords||0===e.graph.coords.length)))),j(this,"deprecatedProps",hc),j(this,"setGraphie",(e=>{this.graphie=e,this.setupGraphie()})),j(this,"handleAddPointsMouseDown",(e=>{if(!this.isClickToAddPoints())throw new le("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false",oe.NotAllowed);if(!this.isCoordInTrash(e)){var t;if("point"===this.props.graph.type){if(!(t=this.createPointForPointsType(e,this.points.length)).constrain())return void t.remove();this.points.push(t);var r=this.points.length-1;this.points[r].grab(e),this.updateCoordsFromPoints()}else if("polygon"===this.props.graph.type){var n;if(null!==(n=this.polygon)&&void 0!==n&&n.closed())return;t=this.createPointForPolygonType(e,this.points.length),this.points.push(t);var i=this.points.length-1;this.points[i].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}})),j(this,"resetGraphie",(()=>{this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()})),j(this,"setupGraphie",(()=>{var e,t;(this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile)&&(this.horizHairline=new Ht(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:Et.INTERACTIVE}),null===(e=this.horizHairline)||void 0===e||e.hide(),this.vertHairline=new Ht(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:Et.INTERACTIVE}),null===(t=this.vertHairline)||void 0===t||t.hide());this["add"+ac(this.props.graph.type)+"Controls"]()})),j(this,"showHairlines",(e=>{var t,r,n,i;this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(null===(t=this.horizHairline)||void 0===t||t.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),null===(r=this.horizHairline)||void 0===r||r.show(),null===(n=this.vertHairline)||void 0===n||n.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),null===(i=this.vertHairline)||void 0===i||i.show())})),j(this,"hideHairlines",(()=>{var e,t;this.props.apiOptions.isMobile&&(null===(e=this.horizHairline)||void 0===e||e.hide(),null===(t=this.vertHairline)||void 0===t||t.hide())})),j(this,"setTrashCanVisibility",(e=>{var t=this.graphie;if(y.b.equal(e,0))this.trashCan&&(this.trashCan.remove(),this.trashCan=null);else if(!this.props.apiOptions.isMobile){var r,n;if(!this.trashCan)this.trashCan=null==t||null===(n=t.raphael)||void 0===n?void 0:n.image("https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",t.xpixels-40,t.ypixels-40,40,40);null===(r=this.trashCan)||void 0===r||r.attr({opacity:e})}})),j(this,"isClickToAddPoints",(e=>(e=e||this.props,pc(e)))),j(this,"_lineStroke",(()=>this.props.isMobile?{"stroke-width":3}:{})),j(this,"addLine",(e=>{var t=this,r=t.graphie,n=dc.getLineCoords(t.props.graph,t.props),i=t.points=p.a.map(n,(e=>Cn.addMaybeMobileMovablePoint(this,{coord:e,constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap()],onMove:()=>{var e=p.a.extend({},t.props.graph,{coords:p.a.invoke(i,"coord")});t.onChange({graph:e})}}))),s={points:i,static:!0,normalStyle:U({stroke:this.props.apiOptions.isMobile?Et.BLUE_C:Et.INTERACTIVE},this._lineStroke())};"line"===e?s.extendLine=!0:"ray"===e&&(s.extendRay=!0),t.line=Cn.addMovableLine(r,s),i[0].listen("constraints","isLine",(e=>!y.c.equal(e,i[1].coord()))),i[1].listen("constraints","isLine",(e=>!y.c.equal(e,i[0].coord())))})),j(this,"removeLine",(()=>{var e;p.a.invoke(this.points,"remove"),null===(e=this.line)||void 0===e||e.remove()})),j(this,"addLinearControls",(()=>{this.addLine("line")})),j(this,"removeLinearControls",(()=>{this.removeLine()})),j(this,"addQuadraticControls",(()=>{if("quadratic"!==this.props.graph.type)throw uc("addQuadraticControls","quadratic");var e=this.props.graph.coords;e||(e=dc.defaultQuadraticCoords(this.props));var t=()=>{var e=p.a.extend({},this.props.graph,{coords:[r.coord(),n.coord(),i.coord()]});this.onChange({graph:e}),this.updateQuadratic()},r=null;r=this.pointA=Cn.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>!r||e[0]!==n.coord()[0]&&e[0]!==i.coord()[0]],onMove:t});var n=null;n=this.pointB=Cn.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>!n||e[0]!==r.coord()[0]&&e[0]!==i.coord()[0]],onMove:t});var i=null;i=this.pointC=Cn.addMaybeMobileMovablePoint(this,{coord:e[2],constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>!i||e[0]!==r.coord()[0]&&e[0]!==n.coord()[0]],onMove:t}),this.updateQuadratic()})),j(this,"updateQuadratic",(()=>{var e=dc.getCurrentQuadraticCoefficients(this.props);if(e){var t=e[0],r=e[1],n=e[2];if(this.parabola){var i,s,o=null===(i=this.graphie)||void 0===i?void 0:i.svgParabolaPath(t,r,n);null===(s=this.parabola)||void 0===s||s.attr({path:o})}else{var a,l,h;this.parabola=null===(a=this.graphie)||void 0===a?void 0:a.parabola(t,r,n),null===(l=this.parabola)||void 0===l||l.attr(U({stroke:this.props.apiOptions.isMobile?Et.BLUE_C:Et.DYNAMIC},this._lineStroke())),null===(h=this.parabola)||void 0===h||h.toBack()}}})),j(this,"removeQuadraticControls",(()=>{var e,t,r;null===(e=this.pointA)||void 0===e||e.remove(),null===(t=this.pointB)||void 0===t||t.remove(),null===(r=this.pointC)||void 0===r||r.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)})),j(this,"addSinusoidControls",(()=>{if("sinusoid"!==this.props.graph.type)throw uc("addSinusoidControls","sinusoid");var e=this.props.graph.coords;e||(e=dc.defaultSinusoidCoords(this.props));var t=()=>{var e=p.a.extend({},this.props.graph,{coords:[r.coord(),n.coord()]});this.onChange({graph:e}),this.updateSinusoid()},r=null;r=this.pointA=Cn.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>!r||e[0]!==n.coord()[0]],onMove:t});var n=this.pointB=Cn.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>!r||e[0]!==r.coord()[0]],onMove:t});this.updateSinusoid()})),j(this,"updateSinusoid",(()=>{var e=dc.getCurrentSinusoidCoefficients(this.props);if(e){var t=e[0],r=e[1],n=e[2],i=e[3];if(this.sinusoid){var s,o,a=null===(s=this.graphie)||void 0===s?void 0:s.svgSinusoidPath(t,r,n,i);null===(o=this.sinusoid)||void 0===o||o.attr({path:a})}else{var l,h,c;this.sinusoid=null===(l=this.graphie)||void 0===l?void 0:l.sinusoid(t,r,n,i),null===(h=this.sinusoid)||void 0===h||h.attr(U({stroke:this.props.apiOptions.isMobile?Et.BLUE_C:Et.DYNAMIC},this._lineStroke())),null===(c=this.sinusoid)||void 0===c||c.toBack()}}})),j(this,"removeSinusoidControls",(()=>{var e,t;null===(e=this.pointA)||void 0===e||e.remove(),null===(t=this.pointB)||void 0===t||t.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)})),j(this,"addCircleControls",(()=>{var e=this.graphie,t=p.a.min(e.snap),r=this.circle=null==e?void 0:e.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||p.a.min(this.props.step),snapX:e.snap[0],snapY:e.snap[1],minRadius:t,snapRadius:t});f()(r).on("move",(()=>{var e=p.a.extend({},this.props.graph,{center:r.center,radius:r.radius});this.onChange({graph:e})}))})),j(this,"removeCircleControls",(()=>{var e;null===(e=this.circle)||void 0===e||e.remove()})),j(this,"addLinearSystemControls",(()=>{var t=this.graphie,r=dc.getLinearSystemCoords(this.props.graph,this.props),n=[Et.INTERACTIVE,Et.GREEN],i=this.points=p.a.map(r,((t,r)=>{for(var i=[],s=function(s){var o=t[s];i.push(Cn.addMaybeMobileMovablePoint(e,{coord:o,constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),e=>{var t=i[1-s];if(t)return!y.c.equal(e,t.coord())}],onMove:()=>{var t=p.a.extend({},e.props.graph,{coords:p.a.map(e.points,(e=>p.a.invoke(e,"coord")))});e.onChange({graph:t})},normalStyle:{fill:n[r]},highlightStyle:{fill:n[r]}}))},o=0;o<t.length;o+=1)s(o);return i}));this.lines=p.a.map(i,((e,r)=>Cn.addMovableLine(t,{points:e,static:!0,extendLine:!0,normalStyle:{stroke:n[r]}})))})),j(this,"removeLinearSystemControls",(()=>{p.a.invoke(this.lines,"remove"),p.a.map(this.points,(e=>p.a.invoke(e,"remove")))})),j(this,"isCoordInTrash",(e=>{if(this.props.apiOptions.isMobile)return!1;var t=this.graphie,r=null==t?void 0:t.scalePoint(e);return r[0]>=t.xpixels-40&&r[1]>=t.ypixels-40})),j(this,"createPointForPointsType",((e,t)=>{var r=this,n=()=>{r.points=p.a.filter(r.points,(function(e){return e!==i})),r.updateCoordsFromPoints(),setTimeout(i.remove.bind(i),0)},i=null;return i=Cn.addMaybeMobileMovablePoint(this,U({coord:e,constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),function(e){return p.a.all(r.points,(function(t){return i===t||!y.c.equal(e,t.coord())}))}],onMoveStart:function(){r.isClickToAddPoints()&&r.setTrashCanVisibility(1)},onMove:r.updateCoordsFromPoints,onMoveEnd:function(e){r.isClickToAddPoints()&&(r.isCoordInTrash(e)&&n(),r.setTrashCanVisibility(.5))}},this.props.apiOptions.isMobile&&r.isClickToAddPoints()?{onRemove:n}:{})),i})),j(this,"removePoint",(e=>{var t=null;return this.points=p.a.filter(this.points,(function(r,n){return r!==e||(t=n,!1)})),t})),j(this,"createPointForPolygonType",((e,t)=>{if("polygon"!==this.props.graph.type)throw uc("createPointForPolygonType","polygon");var r=!p.a.contains(["angles","sides"],this.props.graph.snapTo),n=e=>(t+e+this.points.length)%this.points.length,i=()=>{var e,t,r=this.removePoint(o);null!==(e=this.polygon)&&void 0!==e&&e.closed()&&(this.points=oc(this.points,r),null===(t=this.polygon)||void 0===t||t.update({closed:!1}));this.updatePolygon(),this.clearCoords(),setTimeout(o.remove.bind(o),0)},s=R()(((e,t)=>{e.state.isInitialMove=t}),1e3),o=Cn.addMaybeMobileMovablePoint(this,U({coord:e,constraints:[Cn.MovablePoint.constraints.bound(),r?Cn.MovablePoint.constraints.snap():null,e=>{if(null==this.points||0===this.points.length)return!0;var r,i,s,o=p.a.invoke(this.points,"coord");if(o[t]=e,!this.isClickToAddPoints()){if(Qh(o[n(-2)],o[n(-1)],o[t])||Qh(o[n(-1)],o[t],o[n(1)])||Qh(o[t],o[n(1)],o[n(2)]))return!1;var a=p.a.zip(o,oc(o));if(this.points.length>3)for(var l=-1;l<=0;l++)for(var h=a[n(l)],c=p.a.without(a,h,a[n(l-1)],a[n(l+1)]),u=0;u<c.length;u++){if(Zh(h,c[u]))return!1}}if("angles"===this.props.graph.snapTo&&this.points.length>2){var d,m,f=p.a.map(rc(o),(function(e){return 180*e/Math.PI}));p.a.each([-1,1],(function(e){f[n(e)]=Math.round(f[n(e)])}));var g=function(e,t,r){return(Nt.findAngle(o[n(e)],o[n(r)],o[n(t)])+360)%360},v=[f[n(-1)]-g(-2,-1,1),f[n(1)]-g(-1,1,2)];if(v[2]=180-(v[0]+v[1]),p.a.any(v,(function(e){return ic(e,1)})))return!1;var y=ec(Jh(o[n(-1)],o[n(1)])),b=1===Kh(Xh(o[n(-1)],o[n(1)],o[t])),x=Math.sin(v[1]*Math.PI/180)/Math.sin(v[2]*Math.PI/180)*y,w=Nt.findAngle(o[n(1)],o[n(-1)]),k=null===(d=this.graphie)||void 0===d?void 0:d.polar(x,w+(b?1:-1)*v[0]);return null===(m=this.graphie)||void 0===m?void 0:m.addPoints(o[n(-1)],k)}if("sides"===this.props.graph.snapTo&&this.points.length>1){var C,E,S=p.a.map([[o[n(-1)],o[t]],[o[t],o[n(1)]],[o[n(-1)],o[n(1)]]],(function(e){return ec(Jh(...e))}));if(p.a.each([0,1],(function(e){S[e]=Math.round(S[e])})),ic(S[1]+S[2],S[0])||ic(S[0]+S[2],S[1])||ic(S[0]+S[1],S[2]))return!1;var T=(r=S[0],i=S[2],s=S[1],180*Math.acos((r*r+i*i-s*s)/(2*r*i))/Math.PI),M=Nt.findAngle(o[n(1)],o[n(-1)]),_=1===Kh(Xh(o[n(-1)],o[n(1)],o[t])),A=null===(C=this.graphie)||void 0===C?void 0:C.polar(S[0],M+(_?1:-1)*T);return null===(E=this.graphie)||void 0===E?void 0:E.addPoints(o[n(-1)],A)}return!0}],onMoveStart:()=>{this.isClickToAddPoints()&&this.setTrashCanVisibility(1)},onMove:()=>{var e;null!==(e=this.polygon)&&void 0!==e&&e.closed()&&this.updateCoordsFromPoints()},onMoveEnd:e=>{var t=this.points.length>1&&(o===this.points[0]&&y.c.equal(e,p.a.last(this.points).coord())||o===p.a.last(this.points)&&y.c.equal(e,this.points[0].coord()));if(this.isClickToAddPoints()){if(this.isCoordInTrash(e))i();else if(t){var r,n,a=this.points.pop();if(this.points.length>2)null===(r=this.polygon)||void 0===r||r.update({closed:!0}),this.updateCoordsFromPoints();else null===(n=this.polygon)||void 0===n||n.update({closed:!1}),this.clearCoords();this.updatePolygon(),setTimeout(a.remove.bind(a),0)}else{if(p.a.any(this.points,(function(t){return t!==o&&y.c.equal(t.coord(),e)}))){var l,h;if(this.removePoint(o),this.points.length<3)null===(h=this.polygon)||void 0===h||h.update({closed:!1}),this.clearCoords();else null!==(l=this.polygon)&&void 0!==l&&l.closed()&&this.updateCoordsFromPoints();this.updatePolygon(),setTimeout(o.remove.bind(o),0)}else{var c,u,d=o===p.a.head(this.points)||o===p.a.last(this.points),m=!o.hasMoved(),f=!o.state.isInitialMove,g=!(null!==(c=this.polygon)&&void 0!==c&&c.closed()),v=this.points.length>2;if(d&&m&&f&&g&&v)null===(u=this.polygon)||void 0===u||u.update({closed:!0}),this.updatePolygon(),this.updateCoordsFromPoints()}}this.setTrashCanVisibility(.5)}s(o,!1)}},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:i}:{}));return o.state.isInitialMove=!0,o})),j(this,"updateCoordsFromPoints",(()=>{var e=p.a.extend({},this.props.graph,{coords:p.a.map(this.points,(function(e){return p.a.result(e,"coord")}))});this.onChange({graph:e})})),j(this,"clearCoords",(()=>{var e=p.a.extend({},this.props.graph,{coords:null});this.onChange({graph:e})})),j(this,"onChange",(e=>{this.props.onChange(e),this.props.trackInteraction()})),j(this,"addPointControls",(()=>{if("point"!==this.props.graph.type)throw uc("addPointControls","point");var e=dc.getPointCoords(this.props.graph,this.props);this.points=[],this.points=p.a.map(e,this.createPointForPointsType,this)})),j(this,"removePointControls",(()=>{p.a.invoke(this.points,"remove")})),j(this,"addSegmentControls",(()=>{if("segment"!==this.props.graph.type)throw uc("addSegmentControls","segment");var e=this,t=this.graphie,r=dc.getSegmentCoords(this.props.graph,this.props),n=e=>Cn.addMaybeMobileMovablePoint(this,e);this.points=[],this.lines=p.a.map(r,(function(r,i){for(var s=function(){var t=p.a.extend({},e.props.graph,{coords:p.a.invoke(e.lines,"coords")});e.onChange({graph:t})},o=[],a=function(e){var t=r[e];o.push(n({coord:t,constraints:[Cn.MovablePoint.constraints.bound(),Cn.MovablePoint.constraints.snap(),t=>{var r=o[1-e];return!!r&&!y.c.equal(t,r.coord())}],onMove:s}))},l=0;l<r.length;l+=1)a(l);e.points=e.points.concat(o);var h=Cn.addMovableLine(t,{points:o,static:!1,constraints:[Cn.MovableLine.constraints.bound(),Cn.MovableLine.constraints.snap()],onMove:[Cn.MovableLine.onMove.updatePoints,s],normalStyle:U({stroke:this.props.apiOptions.isMobile?Et.BLUE_C:Et.INTERACTIVE},this._lineStroke()),highlightStyle:U({stroke:this.props.apiOptions.isMobile?Et.BLUE_C:Et.INTERACTING},this._lineStroke())});return p.a.invoke(o,"toFront"),h}),this)})),j(this,"removeSegmentControls",(()=>{p.a.invoke(this.points,"remove"),p.a.invoke(this.lines,"remove")})),j(this,"addRayControls",(()=>{this.addLine("ray")})),j(this,"removeRayControls",(()=>{this.removeLine()})),j(this,"addPolygonControls",(()=>{this.polygon=null;var e=dc.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=p.a.map(e,this.createPointForPolygonType,this),this.updatePolygon()})),j(this,"updatePolygon",(()=>{if("polygon"!==this.props.graph.type)throw uc("updatePolygon","polygon");var e;e=this.polygon?this.polygon.closed():this.points.length>=3;var t=this.graphie,r=this.points.length,n=!p.a.contains(["angles","sides"],this.props.graph.snapTo),i=p.a.times(r,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==r-1)?"angles"===this.props.graph.snapTo?"$deg0":"$deg1":""}),this),s=p.a.times(r,(function(t){return e||0!==t&&t!==r-1}),this),o=p.a.times(r,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==r-1)?1:0}),this),a=p.a.times(r,(function(t){return!this.props.graph.showSides||!e&&t===r-1?"":"sides"===this.props.graph.snapTo?"$len0":"$len1"}),this);if(null==this.polygon){var l=this;l.polygon=Cn.addMovablePolygon(t,{constraints:[Cn.MovablePolygon.constraints.bound(),n?Cn.MovablePolygon.constraints.snap():null],closed:e,points:l.points,angleLabels:i,showRightAngleMarkers:s,numArcs:o,sideLabels:a,onMove:[Cn.MovablePolygon.onMove.updatePoints,function(){this.closed()&&l.updateCoordsFromPoints()}],normalStyle:U({stroke:this.props.apiOptions.isMobile?Et.BLUE_C:Et.INTERACTIVE},this._lineStroke())})}else this.polygon.update({closed:e,points:this.points,angleLabels:i,showRightAngleMarkers:s,numArcs:o,sideLabels:a})})),j(this,"removePolygonControls",(()=>{var e;p.a.invoke(this.points,"remove"),null===(e=this.polygon)||void 0===e||e.remove()})),j(this,"addAngleControls",(()=>{if("angle"!==this.props.graph.type)throw uc("addAngleControls","angle");var e,t,r=this.props.graph,n=this.graphie,i=dc.getAngleCoords(this.props.graph,this.props);this.points=i.map((function(e,t){return null==n?void 0:n.addMovablePoint(p.a.extend({coord:e,normalStyle:{stroke:Et.INTERACTIVE,fill:Et.INTERACTIVE}},1===t?{snapX:n.snap[0],snapY:n.snap[1]}:{}))})),this.angle=null==n?void 0:n.addMovableAngle({points:this.points,snapDegrees:r.snapDegrees||1,snapOffsetDeg:r.angleOffsetDeg||0,angleLabel:r.showAngles?"$deg0":"",pushOut:2,allowReflex:(e=r.allowReflexAngles,t=!0,null==e?t:e)}),f()(this.angle).on("move",(()=>{var e;this.onChange({graph:U(U({},r),{},{coords:null===(e=this.angle)||void 0===e?void 0:e.getClockwiseCoords()})})}))})),j(this,"removeAngleControls",(()=>{var e;p.a.invoke(this.points,"remove"),null===(e=this.angle)||void 0===e||e.remove()})),j(this,"toggleShowAngles",(()=>{if("polygon"!==this.props.graph.type)throw uc("toggleShowAngles","polygon");var e=p.a.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:e})})),j(this,"toggleShowSides",(()=>{if("polygon"!==this.props.graph.type)throw uc("toggleShowSides","polygon");var e=p.a.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})})),j(this,"getUserInput",(()=>dc.getUserInputFromProps(this.props))),j(this,"simpleValidate",(e=>dc.validate(this.getUserInput(),e,this))),j(this,"focus",f.a.noop)}UNSAFE_componentWillMount(){jh.UNSAFE_componentWillMount.call(this)}componentDidMount(){this.setGraphie(this.refs.graph.graphie())}UNSAFE_componentWillReceiveProps(e){var t,r;this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:cc(e)})),(null===(t=this.props.backgroundImage)||void 0===t?void 0:t.url)===(null===(r=e.backgroundImage)||void 0===r?void 0:r.url)&&this.props.backgroundImage===e.backgroundImage&&this.props.containerSizeClass===e.containerSizeClass||(this.shouldResetGraphie=!0)}componentDidUpdate(e,t){var r=e.graph.type,n=this.props.graph.type;(r!==n||"angle"===e.graph.type&&"angle"===this.props.graph.type&&this.areAngleGraphsEqual(e.graph,this.props.graph)||"point"===e.graph.type&&"point"===this.props.graph.type&&this.arePointGraphsEqual(e.graph,this.props.graph)||"polygon"===e.graph.type&&"polygon"===this.props.graph.type&&this.arePolygonGraphsEqual(e.graph,this.props.graph)||"segment"===e.graph.type&&"segment"===this.props.graph.type&&this.areSegmentGraphsEqual(e.graph,this.props.graph))&&(this["remove"+ac(r)+"Controls"](),this["add"+ac(n)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()}areAngleGraphsEqual(e,t){return e.allowReflexAngles!==t.allowReflexAngles||e.angleOffsetDeg!==t.angleOffsetDeg||e.snapDegrees!==t.snapDegrees}arePointGraphsEqual(e,t){return e.numPoints!==t.numPoints}arePolygonGraphsEqual(e,t){return e.numSides!==t.numSides||e.showAngles!==t.showAngles||e.showSides!==t.showSides||e.snapTo!==t.snapTo}areSegmentGraphsEqual(e,t){return e.numSegments!==t.numSegments}render(){var e,t=Ai(this.props.containerSizeClass);this.isClickToAddPoints()&&this.state.shouldShowInstructions?"point"===this.props.graph.type?e=o._("Click to add points"):"polygon"===this.props.graph.type&&(e=o._("Click to add vertices")):e=void 0;var r=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null,n=this.props.gridStep||Pe.getGridStep(this.props.range,this.props.step,t[0]),i=this.props.snapStep||Pe.snapStepFromGridStep(n),s=this.props.apiOptions.isMobile;return h.createElement("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:t[0],height:t[1]}},h.createElement(Wh,{instructions:e,ref:"graph",box:t,labels:this.props.labels,range:this.props.range,step:s?Pe.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:n,snapStep:i,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:r,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:s}))}static getQuadraticCoefficients(e){var t=e[0],r=e[1],n=e[2],i=(t[0]-r[0])*(t[0]-n[0])*(r[0]-n[0]);if(0!==i)return[(n[0]*(r[1]-t[1])+r[0]*(t[1]-n[1])+t[0]*(n[1]-r[1]))/i,(n[0]*n[0]*(t[1]-r[1])+r[0]*r[0]*(n[1]-t[1])+t[0]*t[0]*(r[1]-n[1]))/i,(r[0]*n[0]*(r[0]-n[0])*t[1]+n[0]*t[0]*(n[0]-t[0])*r[1]+t[0]*r[0]*(t[0]-r[0])*n[1])/i]}static getSinusoidCoefficients(e){var t=e[0],r=e[1],n=r[1]-t[1],i=Math.PI/(2*(r[0]-t[0]));return[n,i,t[0]*i,t[1]]}static getLineCoords(e,t){return e.coords||dc.pointsFromNormalized(t,[[.25,.75],[.75,.75]])}static getPointCoords(e,t){var r=e.numPoints||1,n=e.coords;if(n)return n;switch(r){case 1:n=[e.coord||[0,0]];break;case 2:n=[[-5,0],[5,0]];break;case 3:n=[[-5,0],[0,0],[5,0]];break;case 4:n=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:n=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:n=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case Yh:n=[]}var i=dc.normalizeCoords(n,[[-10,10],[-10,10]]);return dc.pointsFromNormalized(t,i)}static getLinearSystemCoords(e,t){return e.coords||p.a.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],(e=>dc.pointsFromNormalized(t,e)))}static getPolygonCoords(e,t){if("polygon"!==e.type)throw uc("toggleShowSides","polygon");var r=e.coords;if(r)return r;var n=e.numSides||3;if(n===Yh)r=[];else{var i=2*Math.PI/n,s=(1/n-.5)*Math.PI,o="sides"===e.snapTo?Math.sqrt(3)/3*7:4;r=p.a.times(n,(function(e){return[o*Math.cos(e*i+s),o*Math.sin(e*i+s)]}))}r=dc.normalizeCoords(r,[[-10,10],[-10,10]]);var a=!p.a.contains(["angles","sides"],e.snapTo);return r=dc.pointsFromNormalized(t,r,!a)}static getSegmentCoords(e,t){var r=e.coords;if(r)return r;var n=e.numSegments||1,i=[[-10,10],[-10,10]];return{1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[n].map((function(e){var r=[[-5,e],[5,e]];return r=dc.normalizeCoords(r,i),r=dc.pointsFromNormalized(t,r)}))}static getAngleCoords(e,t){var r=e.coords;if(r)return r;for(var n=e.snapDegrees||1,i=n;i<20;)i+=n;i=i*Math.PI/180;var s=(e.angleOffsetDeg||0)*Math.PI/180;r=dc.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);var o=ec(Jh(...r));return r[0]=[r[1][0]+o*Math.cos(s),r[1][1]+o*Math.sin(s)],r[2]=[r[1][0]+o*Math.cos(i+s),r[1][1]+o*Math.sin(i+s)],r}static normalizeCoords(e,t){return p.a.map(e,(function(e){return p.a.map(e,(function(e,r){var n=t[r][1]-t[r][0];return(e+t[r][1])/n}))}))}static getEquationString(e){var t="get"+ac(e.graph.type)+"EquationString";return dc[t](e)}static pointsFromNormalized(e,t,r){return p.a.map(t,(function(t){return p.a.map(t,(function(t,n){var i=e.range[n];if(r)return i[0]+(i[1]-i[0])*t;var s=e.step[n],o=function(e,t){return Math.floor((e[1]-e[0])/t)}(i,s),a=Math.round(t*o);return i[0]+s*a}))}))}static getLinearEquationString(e){var t=dc.getLineCoords(e.graph,e);if(Gh(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);var r=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),n=t[0][1]-r*t[0][0];return Gh(r,0)?"y = "+n.toFixed(3):"y = "+r.toFixed(3)+"x + "+n.toFixed(3)}static getCurrentQuadraticCoefficients(e){var t=e.graph.coords||dc.defaultQuadraticCoords(e);return dc.getQuadraticCoefficients(t)}static defaultQuadraticCoords(e){return dc.pointsFromNormalized(e,[[.25,.75],[.5,.25],[.75,.75]])}static getQuadraticEquationString(e){var t=dc.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)}static getCurrentSinusoidCoefficients(e){var t=e.graph.coords||dc.defaultSinusoidCoords(e);return dc.getSinusoidCoefficients(t)}static defaultSinusoidCoords(e){return dc.pointsFromNormalized(e,[[.5,.5],[.65,.6]])}static getSinusoidEquationString(e){var t=dc.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)}static getCircleEquationString(e){var t=e.graph,r=t.center||[0,0],n=t.radius||2;return"center ("+r[0]+", "+r[1]+"), radius "+n}static getLinearSystemEquationString(e){var t=dc.getLinearSystemCoords(e.graph,e);return"\n"+lc(t[0][0],t[0][1])+"\n"+lc(t[1][0],t[1][1])+"\n"+function(e,t){var r=e[0][0],n=e[0][1],i=e[1][0],s=e[1][1],o=t[0][0],a=t[0][1],l=t[1][0],h=t[1][1],c=(r-i)*(a-h)-(n-s)*(o-l);if(Math.abs(c)<1e-9)return"Lines are parallel";var p=((r*s-n*i)*(a-h)-(n-s)*(o*h-a*l))/c;return"Intersection: ("+(((r*s-n*i)*(o-l)-(r-i)*(o*h-a*l))/c).toFixed(3)+", "+p.toFixed(3)+")"}(t[0],t[1])}static getPointEquationString(e){if("point"!==e.graph.type)throw uc("getPointEquationString","point");return dc.getPointCoords(e.graph,e).map((function(e){return"("+e[0]+", "+e[1]+")"})).join(", ")}static getSegmentEquationString(e){if("segment"!==e.graph.type)throw uc("getSegmentEquationString","segment");var t=dc.getSegmentCoords(e.graph,e);return p.a.map(t,(function(e){return"["+p.a.map(e,(function(e){return"("+e.join(", ")+")"})).join(" ")+"]"})).join(" ")}static getRayEquationString(e){if("ray"!==e.graph.type)throw uc("createPointForPolygonType","ray");var t=dc.getLineCoords(e.graph,e),r=t[0],n=t[1],i=dc.getLinearEquationString(e);return r[0]>n[0]?i+=" (for x <= "+r[0].toFixed(3)+")":r[0]<n[0]?i+=" (for x >= "+r[0].toFixed(3)+")":r[1]>n[1]?i+=" (for y <= "+r[1].toFixed(3)+")":i+=" (for y >= "+r[1].toFixed(3)+")",i}static getPolygonEquationString(e){if("polygon"!==e.graph.type)throw uc("getPolygonEquationString","polygon");var t=dc.getPolygonCoords(e.graph,e);return p.a.map(t,(function(e){return"("+e.join(", ")+")"})).join(" ")}static getAngleEquationString(e){if("angle"!==e.graph.type)throw uc("getAngleEquationString","angle");var t=dc.getAngleCoords(e.graph,e);return Nt.findAngle(t[2],t[0],t[1]).toFixed(0)+"° angle at ("+t[1].join(", ")+")"}static validate(e,t,r){var n=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&n)if("linear"===e.type&&"linear"===t.correct.type&&null!=e.coords){var i=e.coords,s=t.correct.coords;if(Qh(s[0],s[1],i[0])&&Qh(s[0],s[1],i[1]))return{type:"points",earned:1,total:1,message:null}}else if("linear-system"===e.type&&"linear-system"===t.correct.type&&null!=e.coords){var o=e.coords,a=t.correct.coords;if(Qh(a[0][0],a[0][1],o[0][0])&&Qh(a[0][0],a[0][1],o[0][1])&&Qh(a[1][0],a[1][1],o[1][0])&&Qh(a[1][0],a[1][1],o[1][1])||Qh(a[0][0],a[0][1],o[1][0])&&Qh(a[0][0],a[0][1],o[1][1])&&Qh(a[1][0],a[1][1],o[0][0])&&Qh(a[1][0],a[1][1],o[0][1]))return{type:"points",earned:1,total:1,message:null}}else if("quadratic"===e.type&&"quadratic"===t.correct.type&&null!=e.coords){var l=this.getQuadraticCoefficients(e.coords),h=this.getQuadraticCoefficients(t.correct.coords);if(Vh(l,h))return{type:"points",earned:1,total:1,message:null}}else if("sinusoid"===e.type&&"sinusoid"===t.correct.type&&null!=e.coords){var c=this.getSinusoidCoefficients(e.coords),u=this.getSinusoidCoefficients(t.correct.coords),d=sc(c),m=sc(u);if(Vh(d,m))return{type:"points",earned:1,total:1,message:null}}else if("circle"===e.type&&"circle"===t.correct.type){if(Vh(e.center,t.correct.center)&&Gh(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if("point"===e.type&&"point"===t.correct.type&&null!=e.coords){var f,g=dc.getPointCoords(t.correct,r),v=null===(f=e.coords)||void 0===f?void 0:f.slice();if(g=g.slice(),null==v||v.sort(),g.sort(),Vh(v,g))return{type:"points",earned:1,total:1,message:null}}else if("polygon"===e.type&&"polygon"===t.correct.type&&null!=e.coords){var b,x,w,k=null===(b=e.coords)||void 0===b?void 0:b.slice(),C=null===(x=t.correct.coords)||void 0===x?void 0:x.slice();if("similar"===t.correct.match?w=nc(k,C,Number.POSITIVE_INFINITY):"congruent"===t.correct.match?w=nc(k,C,y.b.DEFAULT_TOLERANCE):"approx"===t.correct.match?w=nc(k,C,.1):(k.sort(),C.sort(),w=Vh(k,C)),w)return{type:"points",earned:1,total:1,message:null}}else if("segment"===e.type&&"segment"===t.correct.type&&null!=e.coords){var E,S=e.coords.slice(),T=null===(E=t.correct.coords)||void 0===E?void 0:E.slice();if(S=p.a.invoke(S,"sort").sort(),T=p.a.invoke(T,"sort").sort(),Vh(S,T))return{type:"points",earned:1,total:1,message:null}}else if("ray"===e.type&&"ray"===t.correct.type&&null!=e.coords){var M=e.coords,_=t.correct.coords;if(Vh(M[0],_[0])&&Qh(_[0],_[1],M[1]))return{type:"points",earned:1,total:1,message:null}}else if("angle"===e.type&&"angle"===t.correct.type){var A,I=e.coords,O=t.correct.coords;if("congruent"===t.correct.match){var N=p.a.map([I,O],(function(e){return(Nt.findAngle(e[2],e[0],e[1])+360)%360}));A=Gh(...N)}else A=Vh(I[1],O[1])&&Qh(O[1],O[0],I[0])&&Qh(O[1],O[2],I[2]);if(A)return{type:"points",earned:1,total:1,message:null}}return!n||p.a.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}static getUserInputFromProps(e){return e.graph}}j(dc,"defaultProps",{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:{url:null},markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}});var mc={name:"interactive-graph",displayName:"Interactive graph",widget:dc};class fc extends h.Component{constructor(){super(...arguments),j(this,"_input",void 0),j(this,"state",{isInputFocused:!1})}focusInput(){this._input&&this._input.focus()}handleClick(e){var{checked:t,onChange:r}=this.props;e.preventDefault(),this.focusInput(),r(!t)}handleKeyDown(e){var{onFocusPrevAnswer:t,onFocusNextAnswer:r}=this.props;switch(e.key){case"ArrowUp":e.preventDefault(),t();break;case"ArrowDown":e.preventDefault(),r()}}handleInputChange(e){e.preventDefault()}handleInputFocus(){this.setState({isInputFocused:!0})}handleInputBlur(){this.setState({isInputFocused:!1})}renderCheckmark(){var{checked:e}=this.props;return h.createElement("span",{className:Object(C.css)(vc.checkmarkContainer)},e&&h.createElement(qo,{icon:Sr,size:16,color:T.default.offBlack}))}render(){var{content:e,checked:t,groupName:r,index:n,inputType:i}=this.props,{isInputFocused:s}=this.state,o="".concat(r,"-").concat(n);return h.createElement("div",{className:Object(C.css)(vc.answerChoice,s&&vc.answerFocused),onClick:e=>this.handleClick(e),onKeyDown:e=>this.handleKeyDown(e)},h.createElement("span",{className:Object(C.css)(vc.answerInputWrapper)},h.createElement("input",{className:Object(C.css)(To.perseusSrOnly),checked:t,name:r,id:o,type:i,onChange:e=>this.handleInputChange(e),onFocus:()=>this.handleInputFocus(),onBlur:()=>this.handleInputBlur(),ref:e=>this._input=e}),this.renderCheckmark()),h.createElement("label",{htmlFor:o},h.createElement(ss,{content:e})))}}class gc extends h.Component{constructor(e){super(e),j(this,"_choices",void 0),this._choices=[],this.state={groupName:p.a.uniqueId("answer_choices_")}}focusAnswer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props.choices.length;e<0?e+=t:e>=t&&(e-=t);var r=this._choices[e];r&&r.focusInput()}onAnswerChange(e,t){for(var{choices:r,multipleSelect:n,onChange:i}=this.props,s=[],o=0;o<r.length;o++)s.push(n?o===e?t:r[o].checked:o===e&&t);i(s)}onFocusAnswer(e){this.focusAnswer(e)}render(){var{choices:e,multipleSelect:t}=this.props,{groupName:r}=this.state;return h.createElement("fieldset",null,e.map(((e,n)=>h.createElement(fc,G({},e,{key:e.content,groupName:r,index:n,inputType:t?"checkbox":"radio",onChange:e=>this.onAnswerChange(n,e),onFocusPrevAnswer:()=>this.onFocusAnswer(n-1),onFocusNextAnswer:()=>this.onFocusAnswer(n+1),ref:e=>this._choices[n]=e})))))}}var vc=C.StyleSheet.create({answerChoice:{display:"flex",alignItems:"center",userSelect:"none",padding:"10px 16px 10px 0px",fontWeight:"bold",border:"solid 2px transparent",borderRadius:2,":active":{backgroundColor:"rgba(33, 36, 44, 0.08)"}},answerFocused:{borderColor:"#1865f2",":active":{borderColor:"transparent"}},answerInputWrapper:{marginRight:8},checkmarkContainer:{display:"flex",position:"relative",width:16,height:16,marginLeft:8}});class yc extends h.Component{constructor(){super(...arguments),j(this,"_icon",void 0),j(this,"state",{isFocused:!1})}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}renderIcon(){var e,t,{selected:r,showCorrectness:n,showSelected:i,showPulsate:s}=this.props,{isFocused:o}=this.state,a=i||o;return n?(e=h.createElement(qo,{icon:"correct"===n?Er:qr,size:24,color:T.default.white}),t="correct"===n?[kc.markerCorrect,a&&kc.markerCorrectSelected]:[kc.markerIncorrect,a&&kc.markerIncorrectSelected]):t=r&&r.length>0?[kc.markerFilled,a&&kc.markerFilledSelected]:[a?kc.markerUnfilledSelected:s&&kc.markerUnfilledPulsate],h.createElement("div",{className:Object(C.css)(kc.markerIcon,...t),ref:e=>this._icon=e},e)}render(){var{label:e,x:t,y:r,showCorrectness:n}=this.props,i="correct"===n;return h.createElement("button",{"aria-label":e,className:Object(C.css)(kc.unstyledButton,kc.marker,i&&kc.disabled),style:{left:"".concat(t,"%"),top:"".concat(r,"%")},tabIndex:i?-1:0,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onClick:e=>this.props.onClick(e),onKeyDown:e=>this.props.onKeyDown(e)},this.renderIcon())}}j(yc,"defaultProps",{selected:[]});var bc="#2552b0",xc=bc,wc="rgba(33, 36, 44, 0.16)",kc=C.StyleSheet.create({unstyledButton:{padding:0,overflow:"visible",color:"inherit",font:"inherit",lineHeight:"normal",background:"none",border:"none"},marker:{position:"absolute",width:30,height:30,marginLeft:-15,marginTop:-15},disabled:{pointerEvents:"none"},markerIcon:{display:"flex",position:"relative",boxSizing:"content-box",width:16,height:16,marginLeft:5,cursor:"pointer",backgroundColor:"#1865f2",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 6px 0 ".concat("rgba(33, 36, 44, 0.32)")},markerUnfilledPulsate:{animationName:{"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.5)"}},animationDirection:"alternate",animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"ease-in",transformOrigin:"50% 50%"},markerUnfilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:20,height:20,marginLeft:-4,marginTop:-4,border:"solid 2px ".concat(bc),borderRadius:20},":active":{backgroundColor:xc,boxShadow:"none","::before":{display:"none"}}},markerFilled:{width:8,height:8,marginLeft:9,borderRadius:8,boxShadow:"0 1px 1px 0 ".concat(wc)},markerFilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:12,height:12,marginLeft:-4,marginTop:-4,border:"solid 2px ".concat(bc),borderRadius:12},":active":{backgroundColor:xc,boxShadow:"none","::before":{display:"none"}}},markerCorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#00a60e",boxShadow:"0 1px 1px 0 ".concat(wc)},markerCorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px ".concat(bc),borderRadius:28},":active":{backgroundColor:"#167b1f",boxShadow:"none","::before":{display:"none"}}},markerIncorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#909195",boxShadow:"0 1px 1px 0 ".concat(wc)},markerIncorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px ".concat(bc),borderRadius:28},":active":{backgroundColor:"#6c6e73",boxShadow:"none","::before":{display:"none"}}}});class Cc extends h.Component{static gradeMarker(e){var t={hasAnswers:!1,isCorrect:!1};return e.selected&&e.selected.length>0&&(t.hasAnswers=!0),e.answers.length>0?e.selected&&e.selected.length===e.answers.length&&(t.isCorrect=e.selected.every((t=>e.answers.includes(t)))):e.selected&&0!==e.selected.length||(t.isCorrect=!0),t}static validate(e,t){var r=0,n=0;for(var i of e.markers){var s=Cc.gradeMarker(i);s.hasAnswers&&r++,s.isCorrect&&n++}return r!==e.markers.length?{type:"invalid",message:null}:{type:"points",earned:n===e.markers.length?1:0,total:1,message:null}}static pointInTriangle(e,t,r,n){var i=(e,t,r)=>(e.x-r.x)*(t.y-r.y)-(t.x-r.x)*(e.y-r.y),s=i(e,t,r)<0,o=i(e,r,n)<0,a=i(e,n,t)<0;return s===o&&o===a}static imageSideForMarkerPosition(e,t){if(e<20)return"left";if(e>80)return"right";var r={x:20,y:0},n={x:80,y:0},i={x:80,y:100},s={x:20,y:100},o={x:50,y:50},a={top:[r,n,o],right:[o,n,i],bottom:[s,o,i],left:[r,o,s]},l={x:e,y:t};for(var h of Object.keys(a)){var c=a[h];if(Cc.pointInTriangle(l,...c))return h}return"center"}static navigateToMarkerIndex(e,t,r){var n=t[r],i=t.map(((e,t)=>{var r=e.x-n.x,i=e.y-n.y,s=Math.sqrt(r**2+i**2);return{index:t,dist:s,dir:{x:0!==s?r/s:0,y:0!==s?i/s:0}}})).filter((e=>e.index!==r&&"correct"!==t[e.index].showCorrectness)).sort(((t,r)=>{var n,i,s=Math.round(t.dist*(e.x*t.dir.x+e.y*t.dir.y)),o=Math.round(r.dist*(e.x*r.dir.x+e.y*r.dir.y));return e.x>0?(n=t.dir.x>0&&0!==s,i=r.dir.x>0&&0!==o):e.x<0?(n=t.dir.x<0&&0!==s,i=r.dir.x<0&&0!==o):e.y>0?(n=t.dir.y>0&&0!==s,i=r.dir.y>0&&0!==o):e.y<0&&(n=t.dir.y<0&&0!==s,i=r.dir.y<0&&0!==o),n!==i?n?-1:1:s-o}));return i.length>0?i[0].index:r}constructor(e){super(e),j(this,"_markers",void 0),j(this,"_selectedMarkerPopup",void 0),j(this,"_answerChoices",void 0),j(this,"handleDocumentClick",(e=>{if(this._selectedMarkerPopup&&this._answerChoices){var t=v.a.findDOMNode(this._answerChoices),r=e.target;(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return t&&(t.contains(r)||n>0&&e(t.parentElement,n-1))})(t)||this.dismissMarkerPopup()}})),j(this,"handleDocumentKeyDown",(e=>{this._selectedMarkerPopup&&27===e.keyCode&&(e.stopPropagation(),this.dismissMarkerPopup())})),this._markers=[],this.state={selectedMarkerIndex:-1,markersInteracted:!1}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("keydown",this.handleDocumentKeyDown,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("keydown",this.handleDocumentKeyDown,!0)}simpleValidate(e){return Cc.validate(this.getUserInput(),e)}getUserInput(){var{markers:e}=this.props;return{markers:e}}showRationalesForCurrentlySelectedChoices(e){var{markers:t}=this.props,{onChange:r}=this.props;r({markers:t.map((e=>{var t=Cc.gradeMarker(e);return U(U({},e),{},{showCorrectness:t.hasAnswers?t.isCorrect?"correct":"incorrect":void 0})}))},null,!0)}dismissMarkerPopup(){var{selectedMarkerIndex:e}=this.state;-1!==e&&this.setState({selectedMarkerIndex:-1},(()=>{var t=this._markers[e];t&&v.a.findDOMNode(t).focus()}))}handleMarkerChange(e,t){var{markers:r,onChange:n}=this.props;n({markers:[...r.slice(0,e),U(U({},t),{},{showCorrectness:void 0}),...r.slice(e+1)]})}handleMarkerClick(e,t){var{selectedMarkerIndex:r}=this.state;t.preventDefault(),r!==e?this.setState({selectedMarkerIndex:e,markersInteracted:!0},(()=>{setTimeout((()=>{this._answerChoices&&this._answerChoices.focusAnswer()}),100)})):this.dismissMarkerPopup()}handleMarkerKeyDown(e,t){var{markers:r}=this.props;if(!(r.length<2)){var n={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}}[t.key];if(n){t.preventDefault();var i=this._markers[Cc.navigateToMarkerIndex(n,r,e)];i&&v.a.findDOMNode(i).focus()}}}handleAnswerChoicesChangeForMarker(e,t){var{choices:r,markers:n,multipleAnswers:i}=this.props,s=r.filter(((e,r)=>t[r]));this.handleMarkerChange(e,U(U({},n[e]),{},{selected:s})),i||this.dismissMarkerPopup()}renderAnswerChoicesForMarker(e,t){var{choices:r,multipleAnswers:n}=this.props,i=t.selected;return h.createElement("div",{className:l()("perseus-label-image-widget-answer-choices",Object(C.css)(Ec.scrollableChoices))},h.createElement(gc,{choices:r.map((e=>({content:e,checked:!!i&&i.includes(e)}))),multipleSelect:n,onChange:t=>this.handleAnswerChoicesChangeForMarker(e,t),ref:e=>this._answerChoices=e}))}renderMarkers(){var{markers:e,questionCompleted:t}=this.props,{selectedMarkerIndex:r,markersInteracted:n}=this.state;return e.map(((e,i)=>{var s,o=Cc.gradeMarker(e),a=h.createElement(yc,G({},e,{showCorrectness:t&&o.hasAnswers&&o.isCorrect?"correct":e.showCorrectness,showSelected:i===r,showPulsate:!n,key:"".concat(e.x,".").concat(e.y),onClick:e=>this.handleMarkerClick(i,e),onKeyDown:e=>this.handleMarkerKeyDown(i,e),ref:e=>this._markers[i]=e}));return i!==r?a:(s=window.matchMedia(bo.xsOrSmaller.replace("@media ","")).matches?e.y>50?"top":"bottom":{left:"right",top:"bottom",right:"left",bottom:"top",center:"top"}[Cc.imageSideForMarkerPosition(e.x,e.y)],h.createElement(L.Popover,{content:()=>h.createElement(L.PopoverContentCore,{style:Ec.choicesPopover},this.renderAnswerChoicesForMarker(i,e)),placement:s,opened:!0,key:"".concat(e.x,".").concat(e.y),ref:e=>this._selectedMarkerPopup=e},a))}))}renderInstructions(){var{apiOptions:{isMobile:e},choices:t,multipleAnswers:r,hideChoicesFromInstructions:n}=this.props,i=e?r?o._("Tap each dot on the image to select all answers that apply."):o._("Tap each dot on the image to select an answer."):r?o._("Click each dot on the image to select all answers that apply."):o._("Click each dot on the image to select an answer."),s=o._("Choices:");return h.createElement("div",{className:l()("perseus-label-image-widget-instructions",Object(C.css)(Ec.instructions))},h.createElement("div",{className:Object(C.css)(Ec.instructionsCaption)},i," ",!n&&s),!n&&h.createElement("div",{className:Object(C.css)(Ec.instructionsChoices)},t.map(((e,t)=>h.createElement("div",{className:Object(C.css)(Ec.instructionsChoice),key:t},h.createElement(ss,{content:e}))))))}render(){var{imageAlt:e,imageUrl:t,imageWidth:r,imageHeight:n}=this.props,{selectedMarkerIndex:i}=this.state;return h.createElement("div",null,this.renderInstructions(),h.createElement("div",{className:Object(C.css)(Ec.markersCanvas),style:{maxWidth:r,maxHeight:n}},h.createElement("div",{className:Object(C.css)(Ec.imageContainer,-1!==i&&Ec.imageInteractionDisabled)},h.createElement(re.Consumer,null,(i=>{var{setAssetStatus:s}=i;return h.createElement(ei,{alt:e,src:t,width:r,height:n,setAssetStatus:s})}))),this.renderMarkers()))}}var Ec=C.StyleSheet.create({instructions:{paddingBottom:16},instructionsCaption:U(U({},ea.bodyXsmallBold),{},{paddingBottom:16}),instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"},scrollableChoices:{paddingTop:8,paddingBottom:8,[bo.xsOrSmaller]:{maxHeight:250,overflowY:"auto"}},choicesPopover:{padding:0}}),Sc={name:"label-image",displayName:"Label Image",widget:Cc,accessible:!0,isLintable:!0},Tc={display:"table",tableLayout:"fixed"},Mc={display:"table-row"},_c={display:"table-cell",padding:5},Ac={borderRadius:10,cursor:"pointer"},Ic={padding:5,display:"inline-block"},Oc={float:"right",paddingRight:5},Nc={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":e=>e%2?Nc.x():Nc.plus()};class Pc extends h.Component{constructor(){super(...arguments),j(this,"_flip",(()=>{this.props.onChange(!this.props.value)}))}render(){var e=this.props.value?"#55dd55":"#115511",t=p.a.extend({},Ac,{width:this.props.size,height:this.props.size,backgroundColor:e});return h.createElement("div",{style:t,onClick:this._flip})}}j(Pc,"propTypes",{value:d.a.bool.isRequired,size:d.a.number.isRequired});class Rc extends h.Component{render(){return h.createElement("div",{style:Tc,className:"no-select"},p.a.map(this.props.cells,((e,t)=>h.createElement("div",{key:t,style:Mc},p.a.map(e,((e,r)=>h.createElement("div",{key:r,style:_c},h.createElement(Pc,{value:e,size:this.props.size,onChange:p.a.partial(this.props.onChange,t,r)}))))))))}}j(Rc,"propTypes",{cells:d.a.arrayOf(d.a.arrayOf(d.a.bool)).isRequired,size:d.a.number.isRequired});var Lc=(e,t,r,n)=>((e,t)=>p.a.map(e,((e,r)=>p.a.map(e,((e,n)=>t(r,n)?!e:e)))))(e,((e,i)=>{var s=e-t,o=i-r;return Math.abs(s)<=1&&Math.abs(o)<=1&&n[s+1][o+1]}));class Fc extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"_currPattern",void 0),j(this,"_nextPattern",void 0),j(this,"_patternIndex",void 0),j(this,"getUserInput",(()=>ao.getUserInput.call(this))),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"_width",(()=>0!==this.props.cells.length?this.props.cells[0].length:0)),j(this,"_initNextPatterns",(()=>{this._currPattern=Nc[this.props.flipPattern](0),this._nextPattern=Nc[this.props.flipPattern](1),this._patternIndex=2})),j(this,"_shiftPatterns",(()=>{this._currPattern=this._nextPattern,this._nextPattern=Nc[this.props.flipPattern](this._patternIndex),this._patternIndex++})),j(this,"_flipTile",((e,t)=>{var r=Lc(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:r,moveCount:this.props.moveCount+1})})),j(this,"_reset",(()=>{this.change({cells:this.props.startCells,moveCount:0})})),j(this,"simpleValidate",(e=>Dc(e,this.getUserInput())))}render(){var e=60*this._width();return h.createElement("div",null,h.createElement(Rc,{cells:this.props.cells,size:50,onChange:this._flipTile}),h.createElement("div",{style:{width:e}},h.createElement("div",{style:Ic},o.ngettext("Moves: %(num)s","Moves: %(num)s",this.props.moveCount)),h.createElement("div",{style:Oc},h.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),h.createElement("div",{className:"clearfix"}))}componentDidMount(){this._initNextPatterns()}componentDidUpdate(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()}}j(Fc,"propTypes",U(U({},qs),{},{cells:d.a.arrayOf(d.a.arrayOf(d.a.bool)),startCells:d.a.arrayOf(d.a.arrayOf(d.a.bool)),flipPattern:d.a.string.isRequired,moveCount:d.a.number.isRequired})),j(Fc,"defaultProps",{cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0});var Dc=function(e,t){return p.a.all(t.cells,((t,r)=>p.a.all(t,((t,n)=>t===e.startCells[r][n]))))?{type:"invalid",message:o._("Click on the tiles to change the lights.")}:p.a.all(t.cells,(e=>p.a.all(e,(e=>e))))?{type:"points",earned:1,total:1,message:null}:e.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:o._("You must turn on all of the lights to continue.")}},zc={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:!0,widget:Fc,transform:function(e){return{cells:e.startCells,startCells:e.startCells,flipPattern:e.flipPattern}}},Bc="horizontal",qc="vertical",Hc="static",Uc="dragging",Wc="animating",jc="disabled",Gc=(e,t)=>{var r=e.offsetParent();return{top:t.top+r.scrollTop(),left:t.left+r.scrollLeft()}};class Vc extends h.Component{render(){var{layout:e}=this.props,t=Object(C.css)(Qc.card,Qc.placeholder,e===Bc&&Qc.horizontalCard),r={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(r.margin=this.props.margin),h.createElement("li",{className:t,style:r})}}j(Vc,"propTypes",{layout:d.a.oneOf([Bc,qc]),width:d.a.number.isRequired,height:d.a.number.isRequired});class Yc extends h.Component{constructor(){super(...arguments),j(this,"animationFrameRequest",null),j(this,"isMouseMoveUpBound",void 0),j(this,"_mounted",void 0),j(this,"state",{startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}}),j(this,"getCurrentPosition",(()=>({left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top}))),j(this,"bindMouseMoveUp",(()=>{this.isMouseMoveUpBound=!0,f()(document).on("mousemove",this.onMouseMove),f()(document).on("mouseup",this.onMouseUp)})),j(this,"unbindMouseMoveUp",(()=>{this.isMouseMoveUpBound=!1,f()(document).off("mousemove",this.onMouseMove),f()(document).off("mouseup",this.onMouseUp)})),j(this,"onMouseDown",(e=>{if(this.props.type===Hc&&(0===e.button||null!=e.touches&&1===e.touches.length)){e.preventDefault();var t=Pe.extractPointerLocation(e);this.animationFrameRequest=requestAnimationFrame((()=>{var e=f()(v.a.findDOMNode(this)),r=e.position(),n=Gc(e,r);t&&this._mounted&&this.setState({startPosition:n,startMouse:t,mouse:t,dragging:!0},(function(){this.bindMouseMoveUp(),this.props.onMouseDown()}))}))}})),j(this,"onMouseMove",(e=>{if(!(this.props.type!==Uc||!this.state.dragging)){e.preventDefault();var t=Pe.extractPointerLocation(e);t&&(this.animationFrameRequest=requestAnimationFrame((()=>{this.setState({mouse:t},this.props.onMouseMove)})))}})),j(this,"onMouseUp",(e=>{this.props.type!==Uc||!this.state.dragging||(e.preventDefault(),Pe.extractPointerLocation(e)&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp()))}))}componentDidMount(){this._mounted=!0,this.isMouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!Pe.supportsPassiveEvents()&&{passive:!1})}componentWillUnmount(){this._mounted=!1,this.isMouseMoveUpBound&&this.unbindMouseMoveUp(),this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),document.removeEventListener("touchmove",this.onMouseMove)}render(){var{includePadding:e,layout:t,type:r}=this.props,n=Object(C.css)(Qc.card,Qc.draggable,t===Bc&&Qc.horizontalCard,t===qc&&Qc.verticalCard,r===Uc&&Qc.dragging,r===jc&&Qc.disabled,!e&&Qc.unpaddedCard)+" "+ee.INTERACTIVE+" perseus-sortable-draggable";e||(n+=" perseus-sortable-draggable-unpadded");var i={position:"static"};return this.props.type!==Uc&&this.props.type!==Wc||p.a.extend(i,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(i.width=this.props.width+1),this.props.height&&(i.height=this.props.height),null!=this.props.margin&&(i.margin=this.props.margin),h.createElement("li",{className:n,style:i,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},h.createElement(ss,{content:this.props.content,linterContext:s.d(this.props.linterContext,"draggable"),onRender:this.props.onRender}))}componentDidUpdate(e){if(this.props.type!==e.type)if(this.props.type===Wc){var t=this.getCurrentPosition(),r=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-t.left,2)+Math.pow(this.props.endPosition.top-t.top,2)));f()(v.a.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(r,1),complete:this.props.onAnimationEnd})}else this.props.type===Hc&&f()(v.a.findDOMNode(this)).finish()}}j(Yc,"propTypes",{content:d.a.string.isRequired,endPosition:d.a.object.isRequired,includePadding:d.a.bool,layout:d.a.oneOf([Bc,qc]),onAnimationEnd:d.a.func.isRequired,onMouseDown:d.a.func.isRequired,onMouseMove:d.a.func.isRequired,onMouseUp:d.a.func.isRequired,onRender:d.a.func.isRequired,type:d.a.oneOf([Hc,Uc,Wc,jc]),linterContext:s.c}),j(Yc,"defaultProps",{includePadding:!0,type:Hc,linterContext:s.b});class Xc extends h.Component{constructor(e){super(e),j(this,"remeasureItems",p.a.debounce((()=>{this.setState({items:Xc.clearItemMeasurements(this.state.items)})}),20)),this.state={items:Xc.itemsFromProps(this.props),katex:null}}UNSAFE_componentWillReceiveProps(e){var t=this.props;p.a.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&p.a.isEqual(e.constraints,t.constraints)||this.setState({items:Xc.clearItemMeasurements(this.state.items)}):this.setState({items:Xc.itemsFromProps(e)})}componentDidUpdate(){!this.state.items.length||this.state.items[0].width||this.state.items[0].height||setTimeout((()=>{this.measureItems()}),0)}componentDidMount(){ie().getKaTeX().then((e=>{this.setState({katex:e})}))}static itemsFromProps(e){var t=e.disabled?jc:Hc;return e.options.map(((e,r)=>({option:e,key:r,type:t,endPosition:{},width:0,height:0})))}static clearItemMeasurements(e){return e.map((e=>U(U({},e),{},{width:0,height:0})))}measureItems(){var e=p.a.clone(this.state.items),t=p.a.map(e,(function(e){return f()(v.a.findDOMNode(this.refs[e.key]))}),this),r=p.a.invoke(t,"outerWidth"),n=p.a.invoke(t,"outerHeight"),{constraints:i,layout:s}=this.props,o=null;null!=i&&i.width?o=p.a.max(r.concat(i.width)):s===qc&&(o=p.a.max(r));var a=null;null!=i&&i.height?a=p.a.max(n.concat(i.height)):s===Bc&&(a=p.a.max(n)),e=p.a.map(e,(function(e,t){return e.width=o||r[t],e.height=a||n[t],e})),this.setState({items:e},(()=>{this.props.onMeasure&&this.props.onMeasure({widths:r,heights:n})}))}render(){var e,t;if(this.props.waitForKatexLoad&&!this.state.katex)return h.createElement(F.CircularSpinner,null);var r=[],{layout:n}=this.props,i=Object(C.css)(Qc.sortable)+" perseus-sortable",o=(null===(e=this.props.constraints)||void 0===e?void 0:e.width)||n===qc,a=(null===(t=this.props.constraints)||void 0===t?void 0:t.height)||n===Bc;return p.a.each(this.state.items,(function(e,t,i){var l,c=t===i.length-1,p=e.type===Hc||e.type===jc;this.props.layout===Bc?l="0 "+this.props.margin+"px 0 0":this.props.layout===qc&&(l="0 0 "+this.props.margin+"px 0"),r.push(h.createElement(Yc,{content:e.option,key:e.key,type:e.type,ref:e.key,width:o?e.width:void 0,height:a?e.height:void 0,layout:n,includePadding:this.props.padding,margin:c&&p?0:l,endPosition:e.endPosition,linterContext:s.d(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,e.key),onMouseMove:this.onMouseMove.bind(this,e.key),onMouseUp:this.onMouseUp.bind(this,e.key),onTouchMove:this.onMouseMove.bind(this,e.key),onTouchEnd:this.onMouseUp.bind(this,e.key),onTouchCancel:this.onMouseUp.bind(this,e.key),onAnimationEnd:this.onAnimationEnd.bind(this,e.key)})),e.type!==Uc&&e.type!==Wc||r.push(h.createElement(Vc,{key:"placeholder_"+e.key,ref:"placeholder_"+e.key,width:e.width,height:e.height,layout:n,margin:c?0:l}))}),this),h.createElement("ul",{className:i},r)}onMouseDown(e){var t=p.a.map(this.state.items,(function(t){return t.key===e&&(t.type=Uc),t}));this.setState({items:t})}moveOptionToIndex(e,t){var{items:r}=this.state;if(t<0||t>r.length)throw new Error("index ".concat(t," out of bounds"));var n=p.a.clone(r),i=r.filter((t=>t.option===e))[0];if(null==i)throw new Error("option ".concat(e," not found"));var s=r.findIndex((e=>e.key===i.key));n.splice(s,1),n.splice(t,0,i),this.setState({items:n}),this.props.onChange&&this.props.onChange({})}onMouseMove(e){var t=f()(v.a.findDOMNode(this.refs[e])),r=f()(v.a.findDOMNode(this)),n=p.a.clone(this.state.items),i=p.a.findWhere(this.state.items,{key:e}),s=this.props.margin||0,o=p.a.indexOf(n,i),a=0;if(n.splice(o,1),this.props.layout===Bc){var l,h=t.offset().left-r.offset().left,c=0;p.a.each(n,(function(e){l=e.width,h>c+l/2&&(a+=1),c+=l+s}))}else{var u,d=t.offset().top-r.offset().top,m=0;p.a.each(n,(function(e){u=e.height,d>m+u/2&&(a+=1),m+=u+s}))}a!==o&&(n.splice(a,0,i),this.setState({items:n}))}onMouseUp(e){var t=requestAnimationFrame((()=>{var t=p.a.map(this.state.items,(function(t){if(t.key===e){t.type=Wc;var r=f()(v.a.findDOMNode(this.refs["placeholder_"+e])),n=r.position(),i=Gc(r,n);t.endPosition=i}return t}),this);this.setState({items:t}),this.props.onChange&&this.props.onChange({})}));this.animationFrameRequest=t}onAnimationEnd(e){var t=p.a.map(this.state.items,(function(t){return t.key===e&&(t.type=Hc),t}));this.setState({items:t})}getOptions(){return p.a.pluck(this.state.items,"option")}}j(Xc,"defaultProps",{layout:Bc,padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){},linterContext:s.b,waitForKatexLoad:!0});var Qc=C.StyleSheet.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:.8},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}}),{shuffle:Kc,seededRNG:$c}=Pe;class Zc extends h.Component{constructor(){super(...arguments),j(this,"state",{leftHeight:0,rightHeight:0,katex:null}),j(this,"changeAndTrack",(e=>{this.props.onChange(e),this.props.trackInteraction()})),j(this,"onMeasureLeft",(e=>{var t=p.a.max(e.heights);this.setState({leftHeight:t})})),j(this,"onMeasureRight",(e=>{var t=p.a.max(e.heights);this.setState({rightHeight:t})})),j(this,"getUserInput",(()=>this.state.katex?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]})),j(this,"moveLeftOptionToIndex",((e,t)=>{this.refs.left.moveOptionToIndex(e,t)})),j(this,"moveRightOptionToIndex",((e,t)=>{this.refs.right.moveOptionToIndex(e,t)})),j(this,"simpleValidate",(e=>Zc.validate(this.getUserInput(),e)))}componentDidMount(){ie().getKaTeX().then((e=>this.setState({katex:e})))}render(){if(!this.state.katex)return h.createElement(F.CircularSpinner,null);var e,t=$c(this.props.problemNum);e=this.props.orderMatters?Kc(this.props.left,t,!0):this.props.left;var r=Kc(this.props.right,t,!0),n=p.a.any(this.props.labels),i={height:p.a.max([this.state.leftHeight,this.state.rightHeight])},s=this.props.apiOptions.isMobile?8:5;return h.createElement("table",{className:Object(C.css)(ep.widget)+" perseus-widget-matcher"},h.createElement("tbody",null,n&&h.createElement("tr",{className:Object(C.css)(ep.row)},h.createElement("th",{className:Object(C.css)(ep.column,ep.columnLabel)},h.createElement(ss,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext})),h.createElement("th",{className:Object(C.css)(ep.column,ep.columnRight,ep.columnLabel)},h.createElement(ss,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext}))),h.createElement("tr",{className:Object(C.css)(ep.row)},h.createElement("td",{className:Object(C.css)(ep.column)},h.createElement(Xc,{options:e,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:i,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:s,linterContext:this.props.linterContext,ref:"left"})),h.createElement("td",{className:Object(C.css)(ep.column,ep.columnRight)},h.createElement(Xc,{options:r,layout:"vertical",padding:this.props.padding,constraints:i,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:s,linterContext:this.props.linterContext,ref:"right"})))))}}j(Zc,"propTypes",{apiOptions:J.propTypes,labels:d.a.array,left:d.a.array,onChange:d.a.func,orderMatters:d.a.bool,padding:d.a.bool,problemNum:d.a.number,right:d.a.array,trackInteraction:d.a.func.isRequired,linterContext:s.c}),j(Zc,"defaultProps",{left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:s.b}),p.a.extend(Zc,{validate:function(e,t){return{type:"points",earned:p.a.isEqual(e.left,t.left)&&p.a.isEqual(e.right,t.right)?1:0,total:1,message:null}}});var Jc="1px solid #444",ep=C.StyleSheet.create({widget:{paddingTop:5,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:Jc},columnLabel:{fontWeight:"inherit",borderBottom:Jc,padding:"0 ".concat(5,"px ").concat(5,"px ").concat(5,"px"),textAlign:"center"}}),tp={name:"matcher",displayName:"Two column matcher",widget:Zc,isLintable:!0},rp=["onFormatChange","checkValidity","useArrowKeys"],{firstNumericalParse:np,captureScratchpadTouchStart:ip}=Pe,sp=he.toNumericString,op=he.getNumericFormat;class ap extends h.Component{constructor(){super(...arguments),j(this,"state",{format:this.props.format}),j(this,"getValue",(()=>this.parseInputValue(v.a.findDOMNode(this.refs.input).value))),j(this,"getStringValue",(()=>v.a.findDOMNode(this.refs.input).value.toString())),j(this,"parseInputValue",(e=>{if(""===e){var t=this.props.placeholder;return p.a.isFinite(t)?+t:null}var r=np(e);return p.a.isFinite(r)?r:this.props.value})),j(this,"focus",(()=>{v.a.findDOMNode(this.refs.input).focus(),this._handleFocus()})),j(this,"blur",(()=>{v.a.findDOMNode(this.refs.input).blur(),this._handleBlur()})),j(this,"setSelectionRange",((e,t)=>{v.a.findDOMNode(this).setSelectionRange(e,t)})),j(this,"getSelectionStart",(()=>v.a.findDOMNode(this).selectionStart)),j(this,"getSelectionEnd",(()=>v.a.findDOMNode(this).selectionEnd)),j(this,"_checkValidity",(e=>{if(null==e)return!0;var t=np(e),r=this.props.checkValidity;return p.a.isFinite(t)&&r(t)})),j(this,"_handleChange",(e=>{var t=e.target.value,r=this.parseInputValue(t),n=op(t);this.props.onChange(r),n&&(this.props.onFormatChange(r,n),this.setState({format:n}))})),j(this,"_handleFocus",(()=>{this.props.onFocus&&this.props.onFocus()})),j(this,"_handleBlur",(e=>{e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())})),j(this,"_onKeyDown",(e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),this.props.useArrowKeys&&p.a.contains(["ArrowUp","ArrowDown"],e.key)){var t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))}})),j(this,"_setValue",((e,t)=>{f()(v.a.findDOMNode(this.refs.input)).val(sp(e,t))}))}render(){var e=l()({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});null!=this.props.className&&(e=e+" "+this.props.className);var t=V(this.props,rp);return h.createElement("input",G({},t,{className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:ip,defaultValue:sp(this.props.value,this.state.format),value:void 0}))}componentDidUpdate(e){y.b.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}}j(ap,"propTypes",{value:d.a.number,format:d.a.string,placeholder:d.a.oneOfType([d.a.string,d.a.number]),onChange:d.a.func.isRequired,onFormatChange:d.a.func,checkValidity:d.a.func,size:d.a.string,label:d.a.oneOf(["put your labels outside your inputs!"])}),j(ap,"defaultProps",{value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1});var{assert:lp}=wt,{stringArrayOfSize:hp}=Pe,cp={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82},pp={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},up={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64};function dp(e,t){return[""+e,""+t]}var mp=function(){return dp(0,0)},fp=function(e){return lp(p.a.isArray(e)&&2===e.length),+e[0]},gp=function(e){return lp(p.a.isArray(e)&&2===e.length),+e[1]},vp=function(e){return"answer"+fp(e)+","+gp(e)},yp=function(e){var t=[1,1];return p()(e).each(((e,r)=>{var n=0;p()(e).each(((e,t)=>{null!=e&&e.toString().length&&(n=t+1)})),t[1]=Math.max(t[1],n),n>0&&(t[0]=Math.max(t[0],r+1))})),t};class bp extends h.Component{constructor(){super(...arguments),j(this,"cursorPosition",void 0),j(this,"state",{enterTheMatrix:0}),j(this,"getInputPaths",(()=>{var e=[],t=this.props.matrixBoardSize[0],r=this.props.matrixBoardSize[1];return p()(t).times((t=>{p()(r).times((r=>{var n=dp(t,r);e.push(n)}))})),e})),j(this,"getGrammarTypeForPath",(e=>"number")),j(this,"_handleFocus",((e,t)=>{this.props.onFocus(dp(e,t))})),j(this,"_handleBlur",((e,t)=>{this.props.onBlur(dp(e,t))})),j(this,"focus",(()=>(this.focusInputPath(mp()),!0))),j(this,"focusInputPath",(e=>{var t=vp(e);this.refs[t].focus()})),j(this,"blurInputPath",(e=>{0===e.length&&(e=mp());var t=vp(e);this.refs[t].blur()})),j(this,"getDOMNodeForPath",(e=>{var t=vp(e);return v.a.findDOMNode(this.refs[t])})),j(this,"setInputValue",((e,t,r)=>{var n=fp(e),i=gp(e);this.onValueChange(n,i,t,r)})),j(this,"handleKeyDown",((e,t,r)=>{var n=this.props.matrixBoardSize[0],i=this.props.matrixBoardSize[1],s=null,o=this.refs[vp(dp(e,t))],a=o.getStringValue(),l=o.getSelectionStart(),h=o.getSelectionEnd(),c=null;if("ArrowUp"===r.key&&e>0?c=dp(e-1,t):"ArrowDown"===r.key&&e+1<n?c=dp(e+1,t):"ArrowLeft"===r.key&&t>0?0===l&&0===h&&(c=dp(e,t-1)):"ArrowRight"===r.key&&t+1<i?l===a.length&&(c=dp(e,t+1)):"Enter"===r.key?s=this.state.enterTheMatrix+1:"Escape"===r.key&&(s=0),c){r.preventDefault();var p=this.refs[vp(c)],u=2*p.getStringValue().length;p.focus(),"ArrowRight"===r.key?p.setSelectionRange(0,0):p.setSelectionRange(u,u)}null!=s&&this.setState({enterTheMatrix:s})})),j(this,"onValueChange",((e,t,r,n)=>{var i=p.a.map(this.props.answers,p.a.clone);i[e]||(i[e]=[]),i[e][t]=r,this.props.onChange({answers:i},n),this.props.trackInteraction()})),j(this,"getUserInput",(()=>({answers:this.props.answers}))),j(this,"simpleValidate",(e=>bp.validate(this.getUserInput(),e)))}componentDidMount(){this.cursorPosition=[0,0]}render(){var e;e=this.props.apiOptions.customKeypad?up:this.props.apiOptions.staticRender?cp:pp;var{INPUT_MARGIN:t,INPUT_HEIGHT:r,INPUT_WIDTH:n}=e,i=yp(this.props.answers),s=this.props.matrixBoardSize[0],o=this.props.matrixBoardSize[1],a=this.props.cursorPosition[0],c=this.props.cursorPosition[1],u=Math.max(a,i[0]-1),d=Math.max(c,i[1]-1),m=(u+1)*(r+2*t),f=(d+1)*(n+2*t),g=l()({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return h.createElement("div",{className:g},this.props.prefix&&h.createElement("div",{className:"matrix-prefix"},h.createElement(ss,{content:this.props.prefix,linterContext:this.props.linterContext})),h.createElement("div",{className:"matrix-input"},h.createElement("div",{className:"matrix-bracket bracket-left",style:{height:m}}),h.createElement("div",{className:"matrix-bracket bracket-right",style:{height:m,left:f}}),p()(s).times((e=>{var i=this.props.answers[e];return h.createElement("div",{className:"matrix-row",key:e},p()(o).times((s=>{var o,a=e>u||s>d,l={className:a?"outside":"inside",ref:vp(dp(e,s)),value:i?i[s]:null,style:{height:r,width:n,margin:t},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[e,s],this.props.onChange({cursorPosition:[e,s]},(()=>!1)),this._handleFocus(e,s)},onBlur:()=>{e===this.cursorPosition[0]&&s===this.cursorPosition[1]&&this.props.onChange({cursorPosition:[0,0]},(()=>!1)),this._handleBlur(e,s)},onKeyDown:t=>{this.handleKeyDown(e,s,t)},onChange:(t,r)=>{this.onValueChange(e,s,t,r)}};if(this.props.apiOptions.customKeypad){var c={margin:t,minWidth:n,minHeight:r,boxSizing:"border-box",backgroundColor:a?"#f3f3f3":"#fff"};o=h.createElement(Qs,G({},l,{style:c,scrollable:!0,keypadElement:this.props.keypadElement}))}else o=this.props.apiOptions.staticRender?h.createElement(ws,l):this.props.numericInput?h.createElement(ap,l):h.createElement(Cs,l);return h.createElement("span",{key:s,className:"matrix-input-field"},o)})))}))),this.props.suffix&&h.createElement("div",{className:"matrix-suffix"},h.createElement(ss,{content:this.props.suffix,linterContext:this.props.linterContext})))}}j(bp,"defaultProps",{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:J.defaults,linterContext:s.b}),p.a.extend(bp,{validate:function(e,t){var r=t.answers,n=e.answers,i=yp(r),s=yp(n),a=i[0]!==s[0]||i[1]!==s[1],l=ue.number.createValidatorFunctional,h=null,c=!1,u=!1;return p()(s[0]).times((e=>{p()(s[1]).times((t=>{if(null!=n[e][t]&&0!==n[e][t].toString().length||(c=!0),!a){var i=l(r[e][t],{simplify:!0})(n[e][t]);i.message&&(h=i.message),i.correct||(u=!0)}}))})),c?{type:"invalid",message:o._("Make sure you fill in all cells in the matrix.")}:a?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:u?0:1,total:1,message:h}}});var xp={name:"matrix",displayName:"Matrix",widget:bp,transform:e=>{var t=p()(e.matrixBoardSize[0]).times((function(){return hp(e.matrixBoardSize[1])}));return e=p.a.pick(e,"matrixBoardSize","prefix","suffix"),p.a.extend(e,{answers:t})},staticTransform:e=>{var t=p.a.pick(e,"matrixBoardSize","prefix","suffix");return t.answers=p.a.map(e.answers,(e=>p.a.map(e,(e=>null!=e?String(e):"")))),t},isLintable:!0},wp={url:null,top:0,left:0},kp=x()({displayName:"Measurer",propTypes:{apiOptions:J.propTypes,box:d.a.arrayOf(d.a.number),image:d.a.shape({url:d.a.string,top:d.a.number,left:d.a.number}),showProtractor:d.a.bool,protractorX:d.a.number,protractorY:d.a.number,showRuler:d.a.bool,rulerLabel:d.a.string,rulerTicks:d.a.number,rulerPixels:d.a.number,rulerLength:d.a.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){var e=p.a.extend({},wp,this.props.image);return h.createElement("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},e.url&&h.createElement("div",{style:{position:"relative",top:e.top,left:e.left}},h.createElement(ei,{src:e.url})),h.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(e){p.a.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],(function(t){return e[t]!==this.props[t]}),this)&&this.setupGraphie()},setupGraphie:function(){var e=v.a.findDOMNode(this.refs.graphieDiv);f()(e).empty();var t=this.graphie=Nt.createGraphie(e),r=[40,40],n=[[0,this.props.box[0]/r[0]],[0,this.props.box[1]/r[1]]];t.init({range:n,scale:r}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(n[0][0]+n[0][1])/2,(n[1][0]+n[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(e){return kp.validate(this.getUserInput(),e)},focus:f.a.noop});p.a.extend(kp,{validate:function(e,t){return{type:"points",earned:1,total:1,message:null}}});var Cp={name:"measurer",displayName:"Measurer",widget:kp,version:{major:1,minor:0},propUpgrades:{1:e=>p()(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value()}};function Ep(e,t){var r=new Path2D;e.lineWidth=Ap.lineWidth,e.strokeStyle=Ap.fgColor,r.moveTo(t.startPos[0],t.startPos[1]),r.lineTo(t.endPos[0],t.endPos[1]),e.stroke(r)}var Sp={text:function(e,t){null!==t.value&&(e.fillStyle=Ap.fgColor,e.font=Ap.font,e.fillText(t.value,t.pos[0]-Ap.fontSizePx/2+1,t.pos[1]+Ap.fontSizePx/2))},"line:single":Ep,"line:double":function(e,t){var r=new Path2D;e.lineWidth=5*Ap.lineWidth,e.strokeStyle=Ap.fgColor,r.moveTo(t.startPos[0],t.startPos[1]),r.lineTo(t.endPos[0],t.endPos[1]),e.stroke(r),r=new Path2D,e.lineWidth=3*Ap.lineWidth,e.strokeStyle=Ap.bgColor,r.moveTo(t.startPos[0],t.startPos[1]),r.lineTo(t.endPos[0],t.endPos[1]),e.stroke(r)},"line:triple":function(e,t){var r=new Path2D;e.lineWidth=7*Ap.lineWidth,e.strokeStyle=Ap.fgColor,r.moveTo(t.startPos[0],t.startPos[1]),r.lineTo(t.endPos[0],t.endPos[1]),e.stroke(r),r=new Path2D,e.lineWidth=5*Ap.lineWidth,e.strokeStyle=Ap.bgColor,r.moveTo(t.startPos[0],t.startPos[1]),r.lineTo(t.endPos[0],t.endPos[1]),e.stroke(r),Ep(e,t)}};var Tp={"line:single":0,"line:double":0,"line:triple":0,text:1};function Mp(e,t){return Tp[e.type]-Tp[t.type]}function _p(e,t){t.sort(Mp).forEach(function(e){return function(t){Sp[t.type](e,t)}}(e))}var Ap={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1,font:"12px sans"};function Ip(e,t,r,n){var i=e.symbol;if("C"===i&&1!==Object.keys(t).length&&(i=null),"1,0"===e.idx){var s=[0,0];return e.pos=s,e.baseAngle=-30+n,{type:"text",value:i,pos:s,idx:e.idx}}var o=t[e.connections.find((function(e){return t[e].pos}))],a=o.connections.indexOf(e.idx),l=60,h=120;4===o.connections.length?(h=90,l=90):(r.find((t=>"triple"===t.bondType&&t.to===e.idx))||r.find((e=>"triple"===e.bondType&&e.to===o.idx)))&&(h=0,l=0);var c=0,p=o.idx.split(":"),u=p[p.length-1].split(",")[0];c=parseInt(u)%2!=0?o.baseAngle-(l-h*a):o.baseAngle+(l-h*a);var d=function(e,t,r){var n=e[0],i=e[1];return[n+Math.cos(2*t*Math.PI/360)*r,i+-1*Math.sin(2*t*Math.PI/360)*r]}(o.pos,c,30);return e.pos=d,e.baseAngle=c,{type:"text",value:i,pos:d,idx:e.idx}}function Op(e,t){var r=function(e,t){var r=[e.pos[0],e.pos[1]],n=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(r=[t.pos[0]-.75*(t.pos[0]-e.pos[0]),t.pos[1]-.75*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(n=[e.pos[0]-.75*(e.pos[0]-t.pos[0]),e.pos[1]-.75*(e.pos[1]-t.pos[1])]),[r,n]}(t[e.from],t[e.to]);return{type:"line:"+e.bondType,startPos:r[0],endPos:r[1]}}function Np(e){return e.join(":")}function Pp(e,t,r){if(null===r)return[e,t];if("atom"===r.type){var n=Np(r.idx);e[n]={idx:n,symbol:r.symbol,connections:[]},r.bonds&&r.bonds.forEach((function(r){var i=Np(r.to.idx);e[n].connections.push(i),t.push({from:n,to:i,bondType:r.bondType}),Pp(e,t,r.to),e[i].connections.push(n)}))}return[e,t]}function Rp(e,t,r,n,i){if(0===t.length)return e;var s=t.shift(),o=r[s];return o.connections.forEach((function(e){r[e].pos||t.push(e)})),Rp(e.concat(Ip(o,r,n,i)),t,r,n,i)}function Lp(e,t,r){return 0===r.length?e:Lp(e.concat(Op(r[0],t)),t,r.slice(1))}var Fp={layout:function(e,t){var r=Pp({},[],e),n=r[0],i=r[1];return Lp(Rp([],["1,0"],n,i,t),n,i)},_atomLayout:Ip,_bondLayout:Op,_bondLength:30,_convertTree:Pp},Dp=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),zp=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function Bp(e){this.message=e}function qp(e,t,r){var n,i=t[0],s=t.slice(1);n=Array.isArray(e)?[...e]:U({},e||{});var o=r;return s.length>0&&(o=qp(n[i],s,r)),n[i]=o,n}function Hp(e,t){if(0===t.length)return e;if(""===e)throw new Bp("Mismatched parentheses");var r=e[0],n=e.slice(1);return Hp(n,"("===r?t.concat(r):")"===r?t.slice(1):t)}function Up(e,t){var r,n,i,s=e[0],o=e.slice(1);if("("===s){var a=U(U({},t),{},{parens:t.parens+"("});r=t,n=["idx",t.idx.length-1,1],i=n.reduce((function(e,t){return e[t]}),r),a=qp(r,n,i+1);var l=-1;t.idx[t.idx.length-1][0]%2==0&&(l=0);var h=jp(o,U(U({},a),{},{idx:a.idx.concat([[l,0]]),parens:a.parens.concat("(")})),c=jp(Hp(o,["("]),a);return[h].concat(c)}if(")"===s){if("("!==t.parens[t.parens.length-1])throw new Bp("Mismatched parentheses");return null}throw new Bp("Invalid bare character: "+s)}function Wp(e,t){var r=function(e,t){var r=null,n=null;if("["===e[0]){var i=e.indexOf("]");if(-1===i)return["",e];r=e.slice(1,i),n=e.slice(i+1)}else r=zp.exec(e)[1],n=e.slice(r.length);return[r,n]}(e),n=r[0];if(""===n)return["error","Unable to parse bracketed atom."];var i=r[1],s=qp(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]),o=jp(i,qp(s,["bond","bondType"],"single"));!Array.isArray(o)&&o&&(o=[o]);var a={type:"atom",symbol:n,bonds:o,idx:s.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:a}:a}function jp(e,t){if(!function(e){return Dp.test(e)}(e))throw new Bp("Invalid input.");return e&&0!==e.length?(r=e,zp.test(r)?Wp(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):function(e){return"="===e||"#"===e}(e[0])?function(e,t){var r=e[0],n=e.slice(1);if("="===r)return jp(n,qp(t,["bond","bondType"],"double"));if("#"===r)return jp(n,qp(t,["bond","bondType"],"triple"));throw new Bp("Invalid character: "+r)}(e,t):Up(e,t)):null;var r}var Gp=jp,Vp=Bp,{layout:Yp}=Fp,Xp=Gp,Qp=Vp;class Kp extends h.Component{constructor(){super(...arguments),j(this,"state",{parsedSmiles:null,error:null}),j(this,"stateFromSmiles",(e=>{try{this.setState({parsedSmiles:Xp(e),error:null})}catch(e){if(!(e instanceof Qp))throw e;this.setState({error:e.message})}})),j(this,"setCanvasBounds",((e,t)=>{var r=Math.max(...t.map((e=>e.pos?e.pos[0]:-1/0))),n=Math.max(...t.map((e=>e.pos?e.pos[1]:-1/0))),i=Math.min(...t.map((e=>e.pos?e.pos[0]:1/0))),s=Math.min(...t.map((e=>e.pos?e.pos[1]:1/0))),o=r-i+60,a=n-s+60;return e.width=o,e.height=a,[30-i,30-s]})),j(this,"canvasRender",(()=>{if(!this.state.error&&this.state.parsedSmiles){var e=Yp(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,r=this.setCanvasBounds(t,e),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.save(),n.translate(r[0],r[1]),_p(n,e),n.restore()}}))}UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}render(){var e=h.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},o.$_("A molecular structure drawing. SMILES notation: %(content)s",{content:this.props.smiles}));return this.state.error&&(e=h.createElement("div",{className:"error"},this.state.error)),h.createElement("div",{className:"molecule-canvas"},e)}}j(Kp,"propTypes",{id:d.a.string.isRequired,rotationAngle:d.a.number,smiles:d.a.string});class $p extends h.Component{constructor(){super(...arguments),j(this,"simpleValidate",(()=>({type:"points",earned:0,total:0,message:null}))),j(this,"getUserInput",(()=>[])),j(this,"validate",((e,t)=>({type:"points",earned:0,total:0,message:null})))}render(){return h.createElement(Kp,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}j($p,"propTypes",{rotationAngle:d.a.number,smiles:d.a.string,widgetId:d.a.string}),j($p,"defaultProps",{rotationAngle:0});var Zp={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:$p},Jp=qn.MovablePoint,eu=qn.Line,{assert:tu}=wt,ru={ge:"le",gt:"lt",le:"ge",lt:"gt"},nu={ge:"gt",gt:"ge",le:"lt",lt:"le"};function iu(e,t){return 1===t?""+e:"\\dfrac{".concat(e,"}{").concat(t,"}")}function su(e,t){if(e<0)return"-"+su(-e,t);var r=Math.floor(e/t);return 0===r?iu(e,t):e-r*t==0?""+r:r+iu(e-r*t,t)}var ou=(e,t,r,n,i)=>{if(n=n||r,"decimal"===t||"decimal ticks"===t)return e.label([r,-.53],Math.round(100*n)/100,"center");if("improper"===t){var s=he.toFraction(n);return e.label([r,-.17],iu(s[0],s[1]),"below")}if("mixed"===t){var o=he.toFraction(n);return e.label([r,-.17],su(o[0],o[1]),"below")}if("non-reduced"===t){var a=he.toFraction(n);return e.label([r,-.17],function(e,t,r){return iu(e*Math.floor(r/t),r)}(a[0],a[1],i),"below")}},au=qn.createSimpleClass(((e,t)=>{if(!p.a.isFinite(t.tickStep)||t.tickStep<=0)return[];var r,n=[],i=t.range,s=t.labelRange,o=null==s[0]?i[0]:s[0],a=null==s[1]?i[1]:s[1];if("non-reduced"===t.labelStyle){for(var l=[o,a],h=0;h<=t.numDivisions;h++){var c=i[0]+h*t.tickStep;l.push(c)}var u=p.a.map(l,(e=>y.b.toFraction(e)[1]));r=p.a.reduce(u,((e,t)=>he.getLCM(e,t)))}else r=void 0;for(var d=0;d<=t.numDivisions;d++){var m=i[0]+d*t.tickStep;n.push(e.line([m,-.2],[m,.2])),(t.labelTicks||"decimal ticks"===t.labelStyle)&&n.push(ou(e,t.labelStyle,m,m,r))}return n.push(e.style(t.isMobile?{color:Et.BLUE_D}:{},(()=>ou(e,t.labelStyle,o,o,r)))),n.push(e.style(t.isMobile?{color:Et.BLUE_D}:{},(()=>ou(e,t.labelStyle,a,a,r)))),e.style({stroke:t.isMobile?Et.BLUE_D:Et.DYNAMIC,strokeWidth:3.5},(()=>{n.push(e.line([o,-.2],[o,.2])),n.push(e.line([a,-.2],[a,.2]))})),n}));class lu extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"state",{numDivisionsEmpty:!1}),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"isValid",(()=>{var e=this.props.range,t=this.props.numLinePosition,r=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&y.b.sign(t-e[0])>=0&&y.b.sign(t-e[1])<=0&&r[0]<r[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions})),j(this,"onNumDivisionsChange",((e,t)=>{var r=this.props.divisionRange.slice(),n=this.props.range[1]-this.props.range[0];if(e=(e=Math.round(e))<0?-1*e:e){var i=p.a.extend({},this.props,{tickStep:n/e}),s=this.snapNumLinePosition(i,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},(()=>{this.props.onChange({divisionRange:r,numDivisions:e,numLinePosition:s},t)}))}else this.setState({numDivisionsEmpty:!0},t)})),j(this,"_handleTickCtrlFocus",(()=>{this.props.onFocus(["tick-ctrl"])})),j(this,"_handleTickCtrlBlur",(()=>{this.props.onBlur(["tick-ctrl"])})),j(this,"focus",(()=>{if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0})),j(this,"focusInputPath",(e=>{1===e.length&&this.refs[e[0]].focus()})),j(this,"blurInputPath",(e=>{1===e.length&&this.refs[e[0]].blur()})),j(this,"getInputPaths",(()=>this.props.isTickCtrl?[["tick-ctrl"]]:[])),j(this,"getDOMNodeForPath",(e=>{if(1===e.length)return v.a.findDOMNode(this.refs[e[0]])})),j(this,"getGrammarTypeForPath",(e=>{if(1===e.length&&"tick-ctrl"===e[0])return"number"})),j(this,"setInputValue",((e,t,r)=>{1===e.length&&"tick-ctrl"===e[0]&&this.onNumDivisionsChange(t,r)})),j(this,"_renderGraphie",(()=>{var e=this.props.range,t=e[1]-e[0],r=p.a.pick(this.props,["range","isTickCtrl"]),n=p.a.extend({},this.props,{tickStep:t/this.props.numDivisions});return h.createElement(qn,{ref:"graphie",key:this.props.labelStyle,box:[this.props.apiOptions.isMobile?288:460,80],options:r,onMouseDown:e=>{this.refs.graphie.movables.numberLinePoint.grab(e)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile},h.createElement(au,G({},p.a.pick(n,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:this.props.apiOptions.isMobile})),this._renderInequality(n),this._renderNumberLinePoint(n))})),j(this,"snapNumLinePosition",((e,t)=>{var r=e.range[0],n=e.range[1],i=e.tickStep/e.snapDivisions,s=((e,t,r)=>Math.min(Math.max(e,t),r))(t,r,n);return s=r+y.b.roundTo(s-r,i),tu(p.a.isFinite(s)),s})),j(this,"movePosition",(e=>{this.change({numLinePosition:e}),this.props.trackInteraction()})),j(this,"_renderNumberLinePoint",(e=>{var t=p()(["lt","gt"]).contains(e.rel),r={fill:t?Et._BACKGROUND:e.static?Et.DYNAMIC:Et.INTERACTIVE,stroke:e.static?Et.DYNAMIC:Et.INTERACTIVE,"stroke-width":t?3:1},n={fill:t?Et._BACKGROUND:Et.INTERACTING,"stroke-width":t?3:1},i=e.isInequality?{stroke:Et.INTERACTIVE,"fill-opacity":t?0:1}:{};return h.createElement(Jp,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[(e,t)=>[e[0],t[1]],(t,r)=>[this.snapNumLinePosition(e,t[0]),t[1]]],normalStyle:r,highlightStyle:n,onMove:e=>{this.movePosition(e[0])},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:i,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})})),j(this,"handleReverse",(()=>{var e=ru[this.props.rel];this.props.onChange({rel:e})})),j(this,"handleToggleStrict",(()=>{var e=nu[this.props.rel];this.props.onChange({rel:e})})),j(this,"_getInequalityEndpoint",(e=>{var t=p()(["ge","gt"]).contains(e.rel),r=e.range,n=30*((r[1]-r[0])/400),i=r[0]-n,s=r[1]+n;return t?[s,0]:[i,0]})),j(this,"_renderInequality",(e=>{if(e.isInequality){var t=this._getInequalityEndpoint(e),r={arrows:"->",stroke:this.props.apiOptions.isMobile?Et.INTERACTIVE:Et.DYNAMIC,strokeWidth:3.5},n=["ge","gt"].includes(e.rel);return h.createElement(eu,{start:[(n?.4:-.4)+e.numLinePosition,0],end:t,style:r})}return null})),j(this,"_setupGraphie",((e,t)=>{if(this.isValid()){var r=this.props.apiOptions.isMobile?228:400,n=t.range,i=(n[1]-n[0])/r,s=30*i,o=n[0]-s,a=n[1]+s,l="improper"===this.props.labelStyle||"mixed"===this.props.labelStyle||"non-reduced"===this.props.labelStyle?-1.5:-1;e.init({range:[[o,a],[l,1]],scale:[1/i,40],isMobile:this.props.apiOptions.isMobile});var h=(n[0]+n[1])/2;e.line([h,0],[a,0],{arrows:"->"}),e.line([h,0],[o,0],{arrows:"->"})}})),j(this,"getUserInput",(()=>({numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}))),j(this,"simpleValidate",(e=>lu.validate(this.getUserInput(),e)))}render(){var e,t,r=this.props.divisionRange,n=r[0]+"–"+r[1],i=this.props.numDivisions<r[0]||this.props.numDivisions>r[1],s=h.createElement("div",null,h.createElement("input",{type:"button",className:"simple-button",value:o._("Switch direction"),onClick:this.handleReverse}),h.createElement("input",{type:"button",className:"simple-button",value:p()(["le","ge"]).contains(this.props.rel)?o._("Make circle open"):o._("Make circle filled"),onClick:this.handleToggleStrict}));this.props.isTickCtrl&&(t=this.props.apiOptions.customKeypad?Qs:this.props.apiOptions.staticRender?ws:ap,e=h.createElement("label",null,o._("Number of divisions:")," ",h.createElement(t,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||r[0],checkValidity:e=>e>=r[0]&&e<=r[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement})));return h.createElement("div",{className:"perseus-widget perseus-widget-interactive-number-line"},e,this.isValid()?this.props.isTickCtrl&&i?h.createElement("div",{className:"perseus-error"},o.$_("Please make sure the number of divisions is in the range %(divRangeString)s.",{divRangeString:n})):this._renderGraphie():h.createElement("div",{className:"perseus-error"},o.doNotTranslate("Invalid number line configuration.")),!this.props.static&&this.props.isInequality&&s)}}j(lu,"defaultProps",{range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:J.defaults}),p.a.extend(lu,{validate:function(e,t){var r=t.range,n=e.divisionRange,i=null!=t.initialX?t.initialX:r[0],s=t.isInequality?"ge":"eq",o=t.correctRel||"eq",a=y.b.equal(e.numLinePosition,t.correctX||0),l=e.numDivisions>n[1]||e.numDivisions<n[0];return e.isTickCrtl&&l?{type:"invalid",message:"Number of divisions is outside the allowed range."}:a&&o===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===i&&e.rel===s?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});var hu={name:"number-line",displayName:"Number line",widget:lu,transform:e=>{var t,r=p.a.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),n=null!=e.initialX?e.initialX:e.range[0],i=e.range[1]-e.range[0];return t=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?i/e.tickStep:void 0,p.a.extend(r,{numLinePosition:n,numDivisions:t,snapDivisions:r.snapDivisions||void 0}),r},staticTransform:e=>{var t,r=p.a.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),n=null!=e.correctX?e.correctX:e.range[0],i=e.range[1]-e.range[0];return t=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?i/e.tickStep:void 0,p.a.extend(r,{numLinePosition:n,numDivisions:t,rel:e.isInequality?e.correctRel:null,snapDivisions:r.snapDivisions||void 0}),r}};class cu extends h.Component{render(){return h.createElement("div",{className:"card-wrap "+ee.INTERACTIVE,style:{width:this.props.width}},h.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}j(cu,"propTypes",{width:d.a.number.isRequired,height:d.a.number.isRequired});class pu extends h.Component{render(){return h.createElement("div",{className:"card-wrap "+ee.INTERACTIVE},h.createElement("div",{className:"card drag-hint"}))}}var uu=d.a.shape({left:d.a.number,top:d.a.number});class du extends h.Component{constructor(){super(...arguments),j(this,"mouseMoveUpBound",void 0),j(this,"state",{dragging:!1}),j(this,"bindMouseMoveUp",(()=>{this.mouseMoveUpBound=!0,f()(document).on("mousemove",this.onMouseMove),f()(document).on("mouseup",this.onMouseUp)})),j(this,"unbindMouseMoveUp",(()=>{this.mouseMoveUpBound=!1,f()(document).off("mousemove",this.onMouseMove),f()(document).off("mouseup",this.onMouseUp)})),j(this,"onMouseDown",(e=>{e.preventDefault();var t=Pe.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))})),j(this,"onMouseMove",(e=>{if(this.state.dragging){e.preventDefault();var t=Pe.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)}})),j(this,"onMouseUp",(e=>{e.preventDefault();var t=Pe.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}))}render(){var e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);var t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);var r=p.a.pick(this.props,"content"),n=this.props.animating?f.a.noop:this.onMouseDown;return h.createElement("div",{className:"card-wrap "+ee.INTERACTIVE,style:e,onMouseDown:n,onTouchStart:n,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},h.createElement("div",{className:t.join(" ")},h.createElement(ss,G({},r,{linterContext:this.props.linterContext}))))}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!Pe.supportsPassiveEvents()&&{passive:!1})}componentDidUpdate(e,t){if(this.props.animating&&!e.animating){var r=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));f()(v.a.findDOMNode(this)).animate(this.props.animateTo,Math.max(r,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(ae.error("Removing an element with bound event handlers.",oe.Internal),this.unbindMouseMoveUp(),Pe.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}}j(du,"propTypes",{floating:d.a.bool.isRequired,animating:d.a.bool,width:d.a.number,stack:d.a.bool,onMouseDown:d.a.func,onMouseMove:d.a.func,onMouseUp:d.a.func,startMouse:uu,startOffset:uu,animateTo:uu,onAnimationEnd:d.a.func,linterContext:s.c}),j(du,"defaultProps",{stack:!1,animating:!1,linterContext:s.b});var mu="horizontal";class fu extends h.Component{constructor(){super(...arguments),j(this,"state",{current:[],dragging:!1,placeholderIndex:null,dragKey:null,animating:!1,dragContent:null,dragWidth:null,dragHeight:null,offsetPos:null,animateTo:null,grabPos:null}),j(this,"onClick",((e,t,r,n)=>{var i,s=f()(v.a.findDOMNode(n)),o=this.state.current.slice(),a=null;"current"===e?(o.splice(t,1),i=this.state.current[t],a=t):"bank"===e&&(i=this.props.options[t]),this.setState({current:o,dragging:!0,placeholderIndex:a,dragKey:i.key,dragContent:i.content,dragWidth:s.width(),dragHeight:s.height(),grabPos:r,mousePos:r,offsetPos:s.position()})})),j(this,"onRelease",(e=>{var t=this.refs.dragging;if(null!=t){var r=this.isCardInBank(t),n=this.state.placeholderIndex||0,i=()=>{var e=this.state.current.slice();if(!r){var t={content:this.state.dragContent,key:p.a.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};e.splice(n,0,t)}this.props.onChange({current:e}),this.setState({current:e,dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},s=f()(v.a.findDOMNode(t)).position(),o=null;r?p.a.each(this.props.options,(function(e,t){if(e.content===this.state.dragContent){var r=v.a.findDOMNode(this.refs["bank"+t]);o=f()(r).position()}}),this):null!=this.refs.placeholder&&(o=f()(v.a.findDOMNode(this.refs.placeholder)).position()),null==o?i():this.setState({offsetPos:s,animateTo:o,onAnimationEnd:i,animating:!0,dragging:!1})}})),j(this,"onMouseMove",(e=>{var t,r=this.refs.dragging;null!=r&&(t=this.isCardInBank(r)?null:this.findCorrectIndex(r,this.state.current),this.setState({mousePos:e,placeholderIndex:t}))})),j(this,"findCorrectIndex",((e,t)=>{var r=this.props.layout===mu,n=f()(v.a.findDOMNode(this.refs.dragList)),i=n.offset().left,s=n.offset().top,o=f()(v.a.findDOMNode(e)).offset().left-i,a=f()(v.a.findDOMNode(e)).offset().top-s,l=0,h=0,c=0;return r?p.a.each(t,(function(e,t){var r=v.a.findDOMNode(this.refs["sortable"+t]),n=f()(r).outerWidth(!0);o>h+n/2&&(l+=1),h+=n}),this):p.a.each(t,(function(e,t){var r=v.a.findDOMNode(this.refs["sortable"+t]),n=f()(r).outerHeight(!0);a>c+n/2&&(l+=1),c+=n}),this),l})),j(this,"isCardInBank",(e=>{if(null==e)return!1;var t=this.props.layout===mu,r=f()(v.a.findDOMNode(e)),n=f()(v.a.findDOMNode(this.refs.bank)),i=r.offset(),s=n.offset(),o=r.outerHeight(!0),a=n.outerHeight(!0),l=n.outerWidth(!0),h=v.a.findDOMNode(this.refs.dragList);f()(h).width();var c=r.outerWidth(!0);return t?i.top+o/2<s.top+a:i.left+c/2<s.left+l})),j(this,"setListValues",(e=>{var t=e.map((e=>({content:e})));this.props.onChange({current:t}),this.setState({current:t})})),j(this,"getUserInput",(()=>({current:p.a.map(this.props.current,(function(e){return e.content}))}))),j(this,"simpleValidate",(e=>fu.validate(this.getUserInput(),e)))}UNSAFE_componentWillReceiveProps(e){p.a.isEqual(this.props.current,e.current)||this.setState({current:e.current})}render(){var e=this.state.dragging&&h.createElement(du,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),t=this.state.animating&&h.createElement(du,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),r=p.a.map(this.state.current,(function(e,t){return h.createElement(du,{key:"sortableCard".concat(t),ref:"sortable"+t,fakeRef:"sortable"+t,floating:!1,content:e.content,width:e.width,linterContext:this.props.linterContext,onMouseDown:this.state.animating?f.a.noop:this.onClick.bind(null,"current",t)})}),this);if(null!=this.state.placeholderIndex){var n=h.createElement(cu,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});r.splice(this.state.placeholderIndex,0,n)}var i=r.length>0;r.push(e,t);var s=h.createElement("div",{className:"perseus-clearfix draggable-box"},!i&&h.createElement(pu,null),h.createElement("div",{ref:"dragList"},r)),o=h.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},p.a.map(this.props.options,((e,t)=>h.createElement(du,{ref:"bank"+t,floating:!1,content:e.content,stack:!0,key:t,linterContext:this.props.linterContext,onMouseDown:this.state.animating?f.a.noop:this.onClick.bind(null,"bank",t),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease})),this));return h.createElement("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+ee.INTERACTIVE,ref:"orderer"},o,s)}}j(fu,"defaultProps",{current:[],options:[],correctOptions:[],height:"normal",layout:mu,linterContext:s.b}),p.a.extend(fu,{validate:function(e,t){return 0===e.current.length?{type:"invalid",message:null}:{type:"points",earned:p.a.isEqual(e.current,p.a.pluck(t.correctOptions,"content"))?1:0,total:1,message:null}}});var gu={name:"orderer",displayName:"Orderer",widget:fu,isLintable:!0};class vu extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"getUserInput",(()=>ao.getUserInput.call(this))),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"simpleValidate",(e=>vu.validate(this.getUserInput(),e)))}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){return h.createElement(ss,{content:this.props.content,inline:!0,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})}}j(vu,"propTypes",U(U({},qs),{},{content:d.a.string,linterContext:s.c})),j(vu,"defaultProps",{content:"",linterContext:s.b});var yu={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:vu,hidden:!0,transform:e=>p.a.pick(e,"content"),version:{major:0,minor:0},isLintable:!0};function bu(e,t,r,n){var i;return i="start"===t&&"start"===n?Range.START_TO_START:"start"===t&&"end"===n?Range.END_TO_START:"end"===t&&"start"===n?Range.START_TO_END:Range.END_TO_END,e.compareBoundaryPoints(i,r)}function xu(e,t){var r=e.cloneRange();return r.setEnd(t.endContainer,t.endOffset),r}function wu(e,t){return!(bu(e,"end",t,"start")<0||bu(t,"end",e,"start")<0)}function ku(e,t,r,n,i){for(var s=-1,o=n,a=i,l=0;o<=a;){if(++l>2*t.length)throw new Error("Assertion error: Binary search isn't terminating? "+"lower=".concat(o,", upper=").concat(a));var h=Math.floor((o+a)/2);if("first"===r)bu(t[h],"end",e,"start")<=0?o=h+1:(s=h,a=h-1);else bu(t[h],"start",e,"end")>=0?a=h-1:(s=h,o=h+1)}return s}function Cu(e,t){var r,n,i={},s=t.domRange,o=t.firstWordIndex,a=t.lastWordIndex;for(var l of Object.keys(e)){var h=e[l],c=wu(r=h.domRange,n=s)?xu(bu(r,"start",n,"start")<0?r:n,bu(r,"end",n,"end")>0?r:n):null;c?(s=c,o=Math.min(h.firstWordIndex,o),a=Math.max(h.lastWordIndex,a)):i[l]=h}var p={firstWordIndex:o,lastWordIndex:a,domRange:s},u=function(e){var t="".concat((new Date).getTime());if(!e.includes(t))return t;var r,n=0;do{r="".concat(t,"-").concat(n),n++}while(e.includes(r));return r}(Object.keys(i));return i[u]=p,i}function Eu(e,t,r){for(var n of Object.keys(e)){var i=e[n].domRange;if(bu(s=i,"start",o=r,"start")<=0&&bu(s,"end",o,"end")>=0)return null}var s,o,a=function(e,t){var r=ku(e,t,"first",0,t.length-1);if(r<0)return null;var n=ku(e,t,"last",r,t.length-1);return n<0?null:[r,n]}(r,t);if(!a)return null;var[l,h]=a;return{firstWordIndex:l,lastWordIndex:h,domRange:xu(t[l],t[h])}}function Su(e,t){var{firstWordIndex:r,lastWordIndex:n}=e.range,i=t[r];if(!i)throw new le("first word index ".concat(i," is out of bounds: ")+"must be 0–".concat(t.length-1," inclusive"),oe.InvalidInput,{metadata:{firstWord:i,wordRanges:JSON.stringify(t)}});var s=t[n];if(!s)throw new le("last word index ".concat(s," is out of bounds: ")+"must be 0–".concat(t.length-1," inclusive"),oe.InvalidInput,{metadata:{lastWord:s,wordRanges:JSON.stringify(t)}});return{firstWordIndex:r,lastWordIndex:n,domRange:xu(i,s)}}function Tu(e){var{firstWordIndex:t,lastWordIndex:r}=e;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:r}}}function Mu(e,t){return{left:e.left-t.left,top:e.top-t.top}}function _u(e,t){var{left:r,top:n,width:i,height:s}=e;return U(U({},Mu({left:r,top:n},t)),{},{width:i,height:s})}function Au(e){var t=[];return Iu(e.commonAncestorContainer,e,t),t}function Iu(e,t,r){var n,i,s=new Range;if(s.selectNodeContents(e),e.nodeType===Node.TEXT_NODE){var o=wu(n=t,i=s)?xu(bu(n,"start",i,"start")>0?n:i,bu(n,"end",i,"end")<0?n:i):null;o&&function(e,t,r){var n=e.parentElement,i=window.getComputedStyle(n),s=null;if("string"==typeof i.lineHeight&&i.lineHeight.endsWith("px")){var o=parseFloat(i.lineHeight);isNaN(o)||(s=o)}var a=Array.from(t.getClientRects());for(var l of a){var h={left:l.left,top:l.top,height:l.height,width:l.width};if(null!==s){var c=s-h.height;h.top-=c,h.height=s}r.push(h)}}(e,o,r)}else if(e.nodeType===Node.ELEMENT_NODE){if(!wu(t,s))return;for(var a of Array.from(e.childNodes))Iu(a,t,r)}}class Ou extends h.PureComponent{constructor(){super(...arguments),j(this,"state",{cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1})}UNSAFE_componentWillReceiveProps(e){this.props.highlight===e.highlight&&this.props.offsetParent===e.offsetParent||this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){var{highlight:t,offsetParent:r}=e,n=Au(t.domRange),{left:i,top:s}=r.getBoundingClientRect();return n.map((e=>_u(e,{left:i,top:s})))}_rectIsHovered(e,t){var r=Mu(t,{left:e.left,top:e.top});return 0<=r.left&&r.left<e.width&&0<=r.top&&r.top<e.height}isHovered(e){if(!e)return!1;var{offsetParent:t}=this.props,{cachedHighlightRects:r}=this.state,{left:n,top:i}=t.getBoundingClientRect(),s=Mu(e,{left:n,top:i});return r.some((e=>this._rectIsHovered(e,s)))}render(){var e=this.state.cachedHighlightRects;return h.createElement("div",null,e.map(((e,t)=>h.createElement("div",{key:t,className:Object(C.css)(Nu.highlightRect),style:{position:"absolute",width:e.width,height:e.height,top:e.top,left:e.left,zIndex:this.props.zIndexes.belowContent}}))))}}var Nu=C.StyleSheet.create({highlightRect:{background:"#fffabe"}});class Pu extends h.PureComponent{constructor(){super(...arguments),j(this,"_tooltip",void 0)}componentDidUpdate(e){var t;this.props.focusNode===e.focusNode&&this.props.focusOffset===e.focusOffset&&this.props.offsetParent===e.offsetParent||(null===(t=this._tooltip)||void 0===t||t.remeasure())}_getFocusRect(){var{focusNode:e,focusOffset:t,offsetParent:r}=this.props,n=document.createRange();n.setStart(e,t),n.setEnd(e,t);var i=n.getClientRects()[0];if(!i)return ae.log('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;var{left:s,top:o}=r.getBoundingClientRect();return _u({left:i.left,top:i.top,width:i.width,height:i.height},{left:s,top:o})}render(){var e=this._getFocusRect();if(!e)return null;var t=h.createElement("div",{className:Object(C.css)(Ru.tooltipLabel)},this.props.label);return h.createElement(xa,{content:t,color:$o.kaBlue,inverted:!0,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,toggleOnHover:!1,showOnMount:!0,ref:e=>this._tooltip=e},h.createElement("div",{style:{position:"absolute",left:e.left,top:e.top,height:e.height}}))}}var Ru=C.StyleSheet.create({tooltipLabel:{userSelect:"none"}});class Lu extends h.PureComponent{constructor(){super(...arguments),j(this,"state",{hoveredHighlightKey:null,hoveringTooltipFor:null}),j(this,"_highlightRenderers",{}),j(this,"_handleMouseMove",(e=>{var t={left:e.clientX,top:e.clientY},r=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:r})}))}componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),null==this.state.hoveredHighlightKey||this.state.hoveredHighlightKey in e.highlights||this.setState({hoveredHighlightKey:null}),null==this.state.hoveringTooltipFor||this.state.hoveringTooltipFor in e.highlights||this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_getHoveredHighlightKey(e){var{hoveringTooltipFor:t}=this.state;return"string"==typeof t?t:Object.keys(this.props.highlights).find((t=>{var r=this._highlightRenderers[t];return r&&r.isHovered(e)}))}_renderTooltip(){var{hoveredHighlightKey:e}=this.state;if(null==e)return null;var t=this.props.highlights[e];return h.createElement(Pu,{label:o._("Remove highlight"),focusNode:t.domRange.endContainer,focusOffset:t.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(e),onMouseEnter:()=>this.setState({hoveringTooltipFor:e}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return h.createElement("div",null,Object.keys(this.props.highlights).map((e=>h.createElement(Ou,{ref:t=>{t?this._highlightRenderers[e]=t:delete this._highlightRenderers[e]},key:e,highlight:this.props.highlights[e],highlightKey:e,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes}))),this.props.editable&&this._renderTooltip())}}class Fu extends h.PureComponent{constructor(){super(...arguments),j(this,"state",{mouseState:"up",trackedSelection:null}),j(this,"_handleSelectionChange",(()=>{this._updateTrackedSelection(this.props.buildHighlight),"down"===this.state.mouseState&&this.setState({mouseState:"down-and-selecting"})})),j(this,"_handleMouseDown",(()=>{this.setState({mouseState:"down"})})),j(this,"_handleMouseUp",(()=>{this.setState({mouseState:"up"})}))}componentDidMount(){this._updateListeners(!1,this.props.enabled)}UNSAFE_componentWillReceiveProps(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(e.buildHighlight),this._updateListeners(this.props.enabled,e.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){var e=document.getSelection();if(!e||0===e.rangeCount)return null;var t=e.getRangeAt(0);return t.collapsed?null:{focusNode:e.focusNode,focusOffset:e.focusOffset,range:t}}_computeTrackedSelection(e){var t=this._computeFocusAndRange();if(!t)return null;var{focusNode:r,focusOffset:n,range:i}=t,s=e(i);return s?{focusNode:r,focusOffset:n,proposedHighlight:s}:null}_updateTrackedSelection(e){var t=this._computeTrackedSelection(e);this.setState({trackedSelection:t})}render(){var{mouseState:e,trackedSelection:t}=this.state,r="down-and-selecting"===e;return this.props.children?h.createElement("div",null,this.props.children(t,r)):null}}class Du extends h.PureComponent{_handleAddHighlight(e){this.props.onAddHighlight(e);var t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;var{contentNode:t}=this.props,r=new Range;r.selectNodeContents(t);var n=new Range;return n.setStart(e.focusNode,e.focusOffset),n.collapse(!0),wu(r,n)}render(){return h.createElement(Fu,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable},((e,t)=>h.createElement("div",null,h.createElement(Lu,{editable:this.props.editable&&!this._selectionIsValid(e),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(e)&&!t&&h.createElement(Pu,{label:o._("Add highlight"),onClick:()=>this._handleAddHighlight(e.proposedHighlight),focusNode:e.focusNode,focusOffset:e.focusOffset,offsetParent:this.props.offsetParent}))))}}class zu extends h.PureComponent{constructor(){super(...arguments),j(this,"_container",void 0)}componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){var e=this._container;if(!e)throw new le("invariant violation: `this._container` is not defined, but this method is only called after mount/update",oe.NotAllowed);for(var t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(()=>NodeFilter.FILTER_ACCEPT),!1),r=[],n=null;t.nextNode();){var i=t.currentNode;if(i.nodeType===Node.ELEMENT_NODE)"inline"!==getComputedStyle(i).display&&(n=null);else if(i.nodeType===Node.TEXT_NODE){for(var s=i.nodeValue,o=/\S+/g,a=void 0,l=null;null!==(a=o.exec(s));){var h=a.index,c=a.index+a[0].length,p=void 0;0===h&&n?(p=n).setEnd(i,c):((p=i.ownerDocument.createRange()).setStart(i,h),p.setEnd(i,c),r.push(p)),c===s.length&&(l=p)}n=l}}return r}render(){return h.createElement("div",{ref:e=>this._container=e},this.props.children)}}class Bu extends h.PureComponent{constructor(){super(...arguments),j(this,"_container",void 0),j(this,"_content",void 0),j(this,"state",{wordRanges:[]}),j(this,"_handleAddHighlight",(e=>{var t=Cu(this._getDOMHighlights(),e),r={};for(var n of Object.keys(t))r[n]=Tu(t[n]);this.props.onSerializedHighlightsUpdate(r)})),j(this,"_handleRemoveHighlight",(e=>{var{serializedHighlights:t}=this.props,r=U({},t);delete r[e],this.props.onSerializedHighlightsUpdate(r)})),j(this,"_handleWordsUpdate",(e=>{this.setState({wordRanges:e})}))}_buildHighlight(e){return Eu(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){var{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,r={};for(var n of Object.keys(e))r[n]=Su(e[n],t);return r}render(){var e=this._getDOMHighlights();return h.createElement("div",{className:Object(C.css)(qu.container),ref:e=>this._container=e},h.createElement("div",null,this.props.enabled&&this._container&&this._content&&h.createElement(Du,{buildHighlight:e=>this._buildHighlight(e),contentNode:this._content,editable:this.props.editable,highlights:e,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})),h.createElement("div",{className:Object(C.css)(qu.content),ref:e=>this._content=e},h.createElement(zu,{onWordsUpdate:this._handleWordsUpdate},this.props.children)))}}var qu=C.StyleSheet.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}}),Hu="start-ref-",Uu="end-ref-",Wu={display:"inline-block",width:0,visibility:"hidden"},ju={display:"inline",whiteSpace:"nowrap"},Gu={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},Vu={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"};class Yu extends h.Component{constructor(){super(...arguments),j(this,"getRefContent",(()=>this.props.refContent))}render(){return h.createElement("span",{style:Wu},o.doNotTranslate("_"))}}j(Yu,"propTypes",{refContent:d.a.node.isRequired});class Xu extends h.Component{render(){return h.createElement("span",{style:Wu},o.doNotTranslate("_"))}}var Qu={newline:w.a.defaultRules.newline,paragraph:w.a.defaultRules.paragraph,escape:w.a.defaultRules.escape,passageFootnote:{order:w.a.defaultRules.escape.order+.1,match:w.a.inlineRegex(/^\^/),parse:(e,t,r)=>{var n=r.lastFootnote.id+1,i={id:n,text:1===n?"*":""+n};return"*"===r.lastFootnote.text&&(r.lastFootnote.text=""+r.lastFootnote.id),r.lastFootnote=i,i},react:(e,t,r)=>h.createElement("sup",{key:r.key},e.text)},refStart:{order:w.a.defaultRules.escape.order+.2,match:function(e,t){var r=/^\{\{/.exec(e);if(r){for(var n=2,i=0;n<e.length;){var s=e.slice(n,n+2);if("{{"===s)i++,n++;else if("}}"===s){if(!(i>0))break;i--,n++}n++}var o=e.slice(2,n);return[r[0],o]}return null},parse:(e,t,r)=>{if(!r.useRefs)return{ref:null,refContent:null};var n=r.lastRef+1;return r.lastRef=n,r.currentRef.push(n),{ref:n,refContent:t("(“"+e[1]+"”)\n\n",p.a.defaults({useRefs:!1},Ku))}},react:(e,t,r)=>{if(null==e.ref)return null;var n=t(e.refContent,{});return h.createElement(Yu,{ref:Hu+e.ref,key:Hu+e.ref,refContent:n})}},refEnd:{order:w.a.defaultRules.escape.order+.3,match:w.a.inlineRegex(/^\}\}/),parse:(e,t,r)=>r.useRefs?{ref:r.currentRef.pop()||null}:{ref:null},react:(e,t,r)=>null!=e.ref?h.createElement(Xu,{ref:Uu+e.ref,key:Uu+e.ref}):null},squareLabel:{order:w.a.defaultRules.escape.order+.4,match:w.a.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(e,t,r)=>(r.firstQuestionRef||(r.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,r)=>[h.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:ju,"aria-hidden":"true"},h.createElement("span",{style:Gu},e.content)),h.createElement("span",{key:"alt-text",className:"perseus-sr-only"},o.$_("[Marker for question %(number)s]",{number:e.content})),e.space?" ":null]},circleLabel:{order:w.a.defaultRules.escape.order+.5,match:w.a.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(e,t,r)=>({content:e[1],space:e[2].length>0}),react:(e,t,r)=>[h.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:ju,"aria-hidden":!0},h.createElement("span",{style:Vu},e.content)),h.createElement("span",{key:"alt-text",className:"perseus-sr-only"},o.$_("[Circle marker %(number)s]",{number:e.content})),e.space?" ":null]},squareBracketRef:{order:w.a.defaultRules.escape.order+.6,match:w.a.inlineRegex(/^\[(\d+)\]( *)/),parse:(e,t,r)=>(r.firstSentenceRef||(r.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,r)=>[h.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",e.content,"]"),h.createElement("span",{key:"alt-text",className:"perseus-sr-only"},o.$_("[Sentence %(number)s]",{number:e.content})),e.space?" ":null]},highlight:{order:w.a.defaultRules.escape.order+.7,match:w.a.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(e,t,r)=>({content:e[1]}),react:(e,t,r)=>[h.createElement("span",{key:0,className:"perseus-highlight"},e.content)]},reviewHighlight:{order:w.a.defaultRules.escape.order+.7,match:w.a.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(e,t,r)=>({content:e[1]}),react:(e,t,r)=>[h.createElement("span",{key:0,className:"perseus-review-highlight"},e.content)]},strong:w.a.defaultRules.strong,u:w.a.defaultRules.u,em:w.a.defaultRules.em,del:w.a.defaultRules.del,text:U(U({},w.a.defaultRules.text),{},{react:(e,t,r)=>h.createElement("span",{key:r.key},e.content)})},Ku={currentRef:[],useRefs:!0,lastRef:0,lastFootnote:{id:0,text:""}},$u=w.a.parserFor(Qu),Zu={parse:(e,t)=>(t=t||{},$u(e+"\n\n",p.a.extend(t,Ku))),output:w.a.reactFor(w.a.ruleOutput(Qu,"react")),START_REF_PREFIX:Hu,END_REF_PREFIX:Uu,_rulesForTesting:Qu};class Ju extends h.Component{constructor(){super(...arguments),j(this,"_cachedLineHeight",void 0),j(this,"$body",void 0),j(this,"$end",void 0)}measureLineHeight(){return"number"!=typeof this._cachedLineHeight&&this.forceMeasureLineHeight(),this._cachedLineHeight}forceMeasureLineHeight(){var e;this.$body.text(" "),this._cachedLineHeight=(e=this.$body,this.$end.offset().top-e.offset().top),this.$body.text("")}render(){return h.createElement("div",{className:Object(C.css)(ed.measurer)},h.createElement("div",null,h.createElement("div",{ref:e=>this.$body=f()(e),className:"paragraph"}),h.createElement("div",{ref:e=>this.$end=f()(e)})))}}var ed=C.StyleSheet.create({measurer:{position:"absolute",width:"100%",top:0,left:0}});class td extends h.Component{constructor(){super(...arguments),j(this,"_onResize",void 0),j(this,"_lineHeightMeasurer",void 0),j(this,"_stylesAppiedTimer",void 0),j(this,"state",{nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1}),j(this,"_handleSerializedHighlightsUpdate",(e=>{this.props.onChange({highlights:e})}))}componentDidMount(){this._updateState(),this._onResize=p.a.throttle((()=>{this.shouldRenderJipt()||(this._lineHeightMeasurer.forceMeasureLineHeight(),this._updateState())}),500),window.addEventListener("resize",this._onResize),this._stylesAppiedTimer=window.setTimeout((()=>{this.setState({stylesAreApplied:!0})}),0)}shouldComponentUpdate(e,t){return!p.a.isEqual(this.props,e)||!p.a.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize),clearTimeout(this._stylesAppiedTimer)}_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){var e=f()(v.a.findDOMNode(this.refs.content)).height(),t=this._getLineHeight();return Math.round(e/t)}_getInitialLineNumber(){var e=!0;return this.props.findWidgets(((t,r)=>"passage"===r.type&&(t===this.props.widgetId&&(e=!1),e))).map((e=>e.getLineCount())).reduce(((e,t)=>e+t),0)}_getLineHeight(){return this._lineHeightMeasurer.measureLineHeight()}getLineCount(){return null!=this.state.nLines?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){var t=Zu.START_REF_PREFIX+e,r=this.refs[t];if(!r)return null;var n=f()(v.a.findDOMNode(r)),i=n.next();0===i.length&&(i=n);var s=i.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(s)}_getEndRefLineNumber(e){var t=Zu.END_REF_PREFIX+e,r=this.refs[t];if(!r)return null;var n=f()(v.a.findDOMNode(r)),i=n.prev();0===i.length&&(i=n);var s=i.height(),o=i.offset().top,a=this._convertPosToLineNumber(o+s);return 0===s&&(a+=1),this.state.startLineNumbersAfter+a}_convertPosToLineNumber(e){var t=e-f()(v.a.findDOMNode(this.refs.content)).offset().top,r=this._getLineHeight();return Math.round(t/r)}_getRefContent(e){var t=Zu.START_REF_PREFIX+e,r=this.refs[t];return r?r.getRefContent():null}getReference(e){var t=this._getStartRefLineNumber(e),r=this._getEndRefLineNumber(e);return null==t||null==r?null:{startLine:t,endLine:r,content:this._getRefContent(e)}}getUserInput(){return null}simpleValidate(e){return td.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}_renderInstructions(e){var t=e.firstQuestionRef,r=e.firstSentenceRef,n="";t&&(n+=o._("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),r&&(n+=o._(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+r+"]"}));var i=Zu.parse(n);return h.createElement("div",{className:"perseus-widget-passage-instructions"},Zu.output(i))}shouldRenderJipt(){var{JIPT:e}=ie();return e.useJIPT&&-1!==this.props.passageText.indexOf("crwdns")}_renderContent(e){var t=this.state.stylesAreApplied,r=!this.props.reviewModeRubric;return h.createElement(Bu,{editable:r,enabled:t,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.props.highlights},h.createElement("div",{ref:"content"},h.createElement(Ju,{ref:e=>this._lineHeightMeasurer=e}),Zu.output(e)))}_hasFootnotes(){var e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){var e=this.props.footnotes,t=Zu.parse(e);return Zu.output(t)}render(){var e,t=this.state.nLines;this.props.showLineNumbers&&t&&(e=p.a.range(1,t+1).map((e=>{var t=e+this.state.startLineNumbersAfter;if(4===t){var r=o._("Line ");return h.createElement("span",{key:"line-marker",className:"line-marker"},r)}return h.createElement("span",{key:e},t)})));var r={firstSentenceRef:null,firstQuestionRef:null},n=this.props.passageText.replace(/("{1})([^"]*)("{1})/g,"“$2”"),i=Zu.parse(n,r),s=/\S/.test(this.props.passageTitle);return h.createElement("div",null,h.createElement("div",{className:"perseus-widget-passage-container"},this._renderInstructions(r),h.createElement("div",{className:"perseus-widget-passage"},s&&h.createElement("h3",{className:"passage-title"},h.createElement(ss,{content:this.props.passageTitle,linterContext:this.props.linterContext})),e&&h.createElement("div",{className:"line-numbers","aria-hidden":!0},e),!s&&h.createElement("h3",{className:"perseus-sr-only"},o._("Beginning of reading passage.")),h.createElement("div",{className:"passage-text"},this.shouldRenderJipt()?h.createElement(ss,{content:this.props.passageText}):this._renderContent(i)),this._hasFootnotes()&&[h.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},o._("Beginning of reading passage footnotes.")),h.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],h.createElement("div",{className:"perseus-sr-only"},o._("End of reading passage.")))))}}j(td,"defaultProps",{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,highlights:{},linterContext:s.b});var rd={name:"passage",displayName:"Passage (SAT only)",widget:td,transform:e=>p.a.pick(e,"passageTitle","passageText","footnotes","showLineNumbers"),isLintable:!0},{deepEq:nd}=Pe,id="bar",sd="line",od="pic",ad="histogram",ld="dotplot";d.a.oneOf([id,sd,od,ad,ld]),d.a.arrayOf(d.a.string),d.a.arrayOf(d.a.oneOfType([d.a.number,d.a.string])),d.a.number,d.a.number,d.a.number,d.a.number,d.a.number,d.a.string,d.a.arrayOf(d.a.number),d.a.number,d.a.arrayOf(d.a.number),d.a.bool;class hd extends h.Component{constructor(){super(...arguments),j(this,"shouldSetupGraphie",void 0),j(this,"_isMounted",!1),j(this,"horizHairline",void 0),j(this,"hairlineRange",void 0),j(this,"graphie",void 0),j(this,"state",{values:this.props.starting||[1],categoryHeights:{}}),j(this,"DOT_PLOT_POINT_SIZE",(()=>this.props.apiOptions.isMobile?6:4)),j(this,"DOT_PLOT_POINT_PADDING",(()=>8)),j(this,"DOT_TICK_POINT_SIZE",(()=>2)),j(this,"setupGraphie",(e=>{var t=this;t.shouldSetupGraphie=!1;var r=v.a.findDOMNode(t.refs.graphieDiv);f()(r).empty();var n=Nt.createGraphie(r);t.graphie=n,t.graphie.pics=[],t.graphie.dotTicks=[];var i=t.props.type===id,s=t.props.type===sd,a=t.props.type===od,l=t.props.type===ad,h=t.props.type===ld,c=a||h,u={},d=u,m=this.props.apiOptions.isMobile;d.graph={lines:[],bars:[],points:[],dividers:[]},d.scaleY=t.props.scaleY,d.dimX=t.props.categories.length;var g=m?[288,336]:t.props.plotDimensions;if(s)d.dimX+=m?-.2:1;else if(l)d.barPad=0,d.barWidth=1;else if(i)d.barPad=m?.08:.15,d.barWidth=1-2*d.barPad,d.dimX+=(m?-2:2)*d.barPad;else if(c){d.picBoxHeight=t.props.picBoxHeight,d.picBoxWidthPx=g[0]/t.props.categories.length;var y=g[0]-d.dimX*d.picBoxWidthPx;d.picPad=y/(2*d.dimX+2);var b=d.picBoxWidthPx+2*d.picPad;d.picPad=d.picPad/b,d.picBoxWidth=d.picBoxWidthPx/b,d.dimX+=2*d.picPad}h&&(d.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),d.dimY=Math.ceil(t.props.maxY/d.scaleY)*d.scaleY;var x=25;(i||s)&&m&&(x=0!==t.props.labels[1].length?17:11),h&&(x/=2),m&&c&&0===t.props.labels[1].length&&(x=0);var w=25,k=75;if(m&&(i||c)){var C=Math.max(0,...Object.values(t.state.categoryHeights));if(C){var E=25;c&&(E+=10),k=E+C}}if(d.scale=m?[(g[0]-4*x)/d.dimX,(g[1]-(w+k))/d.dimY]:p.a.map([d.dimX,d.dimY],(function(e,t){return g[t]/e})),c&&(d.scale[1]=d.picBoxHeight/d.scaleY),x/=d.scale[0],w/=d.scale[1],k/=d.scale[1],n.init({range:[[-3*x,d.dimX+x],[-k,d.dimY+w]],scale:d.scale,isMobile:this.props.apiOptions.isMobile}),n.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!c)for(var S=function(e){n.label([0,e],he.roundToApprox(e,2),"left",!0),n.style({stroke:m?"#e9ebec":"#000",strokeWidth:1,opacity:m?1:.3},(function(){n.line([0,e],[d.dimX,e])}))},T=m?d.scaleY:0;T<=d.dimY;T+=d.scaleY)S(T);(i||s)&&m&&(t.graphie.dragPrompt=n.label([d.dimX/2,d.dimY/2],o._("Drag handles to make graph"),"center",!1).css("font-weight","bold").css("color",Et.KA_GREEN).css("display","none")),t.setupCategories(u),c&&m&&(t.graphie.dotPrompt=n.label([d.dimX/2,d.dimY/2],o._("Tap to add points"),"center",!1).css("font-weight","bold").css("color",Et.KA_GREEN).css("display","none")),c&&t.drawPicHeights(t.state.values,e.values),n.style({stroke:"#000",strokeWidth:2,opacity:1},(function(){c?h?n.style({stroke:m?Et.GRAY_G:"#000",strokeWidth:m?1:2},(()=>n.line([m?0:.5,0],[d.dimX-(m?0:.5),0]))):(n.line([0,0],[d.dimX,0]),0===t.props.labels[1].length&&m||n.style({stroke:m?Et.GRAY_G:"#000",strokeWidth:m?1:2},(()=>n.line([0,0],[0,d.dimY])))):(n.style({stroke:m?Et.GRAY_G:"#000",strokeWidth:m?1:2},(()=>n.line([m?3*-x:0,0],[d.dimX+(m?x:0),0]))),(i||s)&&m||n.style({stroke:m?Et.GRAY_G:"#000",strokeWidth:m?1:2},(()=>n.line([0,0],[0,d.dimY]))))})),n.label([d.dimX/2,m?-k:-35/d.scale[1]],t.props.labels[0],m?"above":"below",!1).css("font-weight","bold").css("color",m&&Et.GRAY_F),n.label([(m?-35:-60)/d.scale[0],d.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",m&&Et.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new Ht(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:Et.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,d.dimX],[0,d.dimY]])})),j(this,"showHairlines",(e=>{this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())})),j(this,"hideHairlines",(()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()})),j(this,"labelCategory",((e,t)=>{var r=this.props.apiOptions.isMobile,n=this.graphie,i=!1,s=(t+="").match(/^\$(.*)\$$/);s&&(t=s[1],i=!0);var o=Math.PI/180*45,a="translateX(-50%) translateX(".concat(5,"px) ")+"translateY(-50%) rotate(-".concat(45,"deg)"),l=r&&!s;return new Promise((s=>{n.style({color:r?Et.GRAY_G:"inherit",transform:l?a:"none",transformOrigin:"100%"},(()=>{var a=n.label([e,r?-.5:0],t,"below",i),h=14+(l?Math.round(a.height()*Math.cos(o)+(a.width()+5)*Math.sin(o)):a.height());s({category:t,height:h})}))}))})),j(this,"setupCategories",(e=>{var t=this,r=e,n=t.graphie,i=this.props.apiOptions.isMobile,s=[];t.props.type===ad?(p.a.times(t.props.categories.length-1,(function(r){t.setupBar({index:r,startHeight:t.state.values[r],config:e,isHistogram:!0})})),p.a.each(t.props.categories,(function(e,o){var a=.5+o*r.barWidth;s.push(t.labelCategory(a,e));var l=6/r.scale[1];n.style({stroke:"#000",strokeWidth:i?1:2,opacity:1},(function(){n.line([a,-l],[a,0])}))}))):p.a.each(t.props.categories,(function(o,a){var l,h=t.state.values[a];t.props.type===id?l=t.setupBar({index:a,startHeight:h,config:e,isHistogram:!1}):t.props.type===sd?l=t.setupLine(a,h,e):t.props.type===od?l=t.setupPic(a,e):t.props.type===ld&&(l=t.setupDotplot(a,e));var c=0,p=-6/r.scale[1];t.props.type!==ld||i||(c=-p),t.props.type===ld?a%t.props.labelInterval!=0&&a!==t.props.categories.length-1||(s.push(t.labelCategory(l,o)),c*=1.5,p*=1.5):s.push(t.labelCategory(l,o)),n.style({stroke:i?Et.GRAY_G:"#000",strokeWidth:i?1:2,opacity:1},(function(){n.line([l,c],[l,p])}))})),Promise.all(s).then((e=>{if(t._isMounted){var r={};e.forEach((e=>{var{category:t,height:n}=e;return r[t]=n})),t.setState({categoryHeights:r})}}))})),j(this,"_clampValue",((e,t,r)=>Math.max(Math.min(e,r),t))),j(this,"_maybeShowDragPrompt",(()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="inline")})),j(this,"_maybeHideDragPrompt",(()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="none")})),j(this,"setupBar",(e=>{var t,r=this.props.apiOptions.isMobile,n=e.index,i=e.startHeight,s=e.config,o=e.isHistogram,a=this,l=a.graphie,h=s.barWidth/2;t=o?.5+n*s.barWidth+h:(r?h:.5+s.barPad)+n;var c=function(e,t){var n=l.scalePoint(0);if(s.graph.bars[e].scale(1,Math.max(r?.2:.01,t/s.scaleY),n[0],n[1]),o){var i=s.graph.dividers[e-1],h=s.graph.dividers[e];if(i){var c=Math.min(a.state.values[e-1],t);i.scale(1,Math.max(.01,c/s.scaleY),n[0],n[1])}if(h){var p=Math.min(a.state.values[e+1],t);h.scale(1,Math.max(.01,p/s.scaleY),n[0],n[1])}}};if(l.style({stroke:"none",fill:r?Et.BLUE_C:Et.LIGHT_BLUE,opacity:1},(function(){s.graph.bars[n]=l.path([[t-h,0],[t-h,s.scaleY],[t+h,s.scaleY],[t+h,0],[t-h,0]])})),o&&n>0&&l.style({stroke:"#000",strokeWidth:1,opacity:.3},(function(){s.graph.dividers.push(l.path([[t-h,0],[t-h,s.scaleY]]))})),r){var u=s.scaleY/a.props.snapsPerLine;s.graph.lines[n]=Cn.addMaybeMobileMovablePoint(this,{coord:[t,i],constraints:[(e,r,n)=>[t,this._clampValue(Math.round(e[1]/u)*u,0,s.dimY)]],onMoveStart:function(){s.graph.bars[n].attr({fill:Et.INTERACTIVE})},onMove:function(){var e=s.graph.lines[n].coord()[1],t=p.a.clone(a.state.values);t[n]=e,a.setState({values:t}),a.changeAndTrack({values:t}),a._maybeHideDragPrompt(),c(n,e)},onMoveEnd:function(){s.graph.bars[n].attr({fill:Et.BLUE_C})}}),s.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",a._maybeShowDragPrompt()}else s.graph.lines[n]=l.addMovableLineSegment({coordA:[t-h,i],coordZ:[t+h,i],snapY:s.scaleY/a.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:Et.INTERACTIVE,"stroke-width":this.props.static?0:4}}),s.graph.lines[n].onMove=function(e,t){var r=this.coordA[1];(r<0||r>s.dimY)&&(r=Math.min(Math.max(r,0),s.dimY),this.coordA[1]=this.coordZ[1]=r,this.transform());var i=p.a.clone(a.state.values);i[n]=r,a.setState({values:i}),a.changeAndTrack({values:i}),c(n,r)};return c(n,i),t})),j(this,"setupLine",((e,t,r)=>{var n=this.props.apiOptions.isMobile,i=this,s=r,o=i.graphie,a=e+(n?.4:1);if(n){var l=r.scaleY/i.props.snapsPerLine;s.graph.points[e]=Cn.addMaybeMobileMovablePoint(this,{coord:[a,t],constraints:[(e,t,n)=>[a,this._clampValue(Math.round(e[1]/l)*l,0,r.dimY)]],onMove:function(){var t=s.graph.points[e].coord()[1],r=p.a.clone(i.state.values);r[e]=t,i.setState({values:r}),i.changeAndTrack({values:r}),i._maybeHideDragPrompt()}}),i._maybeShowDragPrompt(),e>0&&(s.graph.lines[e]=Cn.addMovableLine(o,{points:[s.graph.points[e-1],s.graph.points[e]],constraints:Cn.MovablePoint.constraints.fixed(),normalStyle:{stroke:Et.BLUE_C,"stroke-width":2},highlightStyle:{stroke:Et.BLUE_C,"stroke-width":2}}))}else s.graph.points[e]=o.addMovablePoint({coord:[a,t],constraints:{constrainX:!0},normalStyle:{fill:Et.INTERACTIVE,stroke:Et.INTERACTIVE},snapY:s.scaleY/i.props.snapsPerLine}),s.graph.points[e].onMove=function(t,r){r=Math.min(Math.max(r,0),s.dimY);var n=p.a.clone(i.state.values);return n[e]=r,i.setState({values:n}),i.changeAndTrack({values:n}),[t,r]},e>0&&(s.graph.lines[e]=o.addMovableLineSegment({pointA:s.graph.points[e-1],pointZ:s.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return a})),j(this,"setupDotplot",((e,t)=>{var r=this.graphie,n=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,n?.5:1,t,((e,t)=>r.ellipse([e,t],[this.DOT_PLOT_POINT_SIZE()/r.scale[0],this.DOT_PLOT_POINT_SIZE()/r.scale[1]],{fill:Et.INTERACTIVE,stroke:Et.INTERACTIVE})))})),j(this,"setupPic",((e,t)=>{var r=this.graphie;return this.setupTiledPlot(e,0,t,((e,t)=>{var n=r.scalePoint([e,t]),i=this.props.picSize;return r.raphael.image(this.props.picUrl,n[0]-i/2,n[1]-i/2,i,i)}))})),j(this,"setupTiledPlot",((e,t,r,n)=>{var i=this,s=r,o=i.graphie,a=o.pics,l=o.dotTicks,h=e+.5+s.picPad;o.mouselayer.canvas.style.touchAction="none",a[e]=[],l[e]=[];var c=Math.round(s.dimY/s.scaleY)+1;return p()(c).times((function(r){var c=((r-=1)+.5)*s.scaleY,p=h-s.picBoxWidth/2,u=c+.5*s.scaleY,d=o.scalePoint([p,u+t]),m=o.mouselayer.rect(d[0],d[1],s.picBoxWidthPx,s.picBoxHeight);f()(m[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",(function(r){r.preventDefault(),i.whichPicClicked=e,i.setPicHeight(e,u),f()(document).on("vmouseup.plotTile",(function(e){f()(document).unbind(".plotTile")})),f()(document).on("vmousemove.plotTile",(function(e){e.preventDefault();var r=o.getMouseCoord(e)[1],n=Math.floor(r-t),a=(Math.max(-1,Math.floor(n/s.scaleY))+.5)*s.scaleY,l=Math.min(a+.5*s.scaleY,s.dimY);i.setPicHeight(i.whichPicClicked,l)}))})),r<0||(a[e][r]=n(h,c+t),l[e][r]=o.ellipse([h,c+t],[i.DOT_TICK_POINT_SIZE()/o.scale[0],i.DOT_TICK_POINT_SIZE()/o.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))})),h})),j(this,"setPicHeight",((e,t)=>{var r=p.a.clone(this.state.values);r[e]=t,this.drawPicHeights(r,this.state.values),this.setState({values:r}),this.changeAndTrack({values:r})})),j(this,"changeAndTrack",(e=>{this.props.onChange(e),this.props.trackInteraction()})),j(this,"drawPicHeights",((e,t)=>{var r=this,n=r.graphie,i=n.pics,s=this.props.apiOptions.isMobile;if(s){var o=e.every((e=>0===e));n.dotPrompt[0].style.display=o?"inline":"none"}p.a.each(i,(function(i,o){p.a.each(i,(function(i,a){var l=(a+1)*r.props.scaleY,h=l<=e[o];if(r.props.type===ld){var c=l<=t[o];h&&!c&&i.animate({"stroke-width":8},75,(()=>i.animate({"stroke-width":2},75)))}f()(i[0]).css({display:h?"inline":"none"}),n.dotTicks[o][a][0].style.display=h||!s?"none":"inline"}))}))})),j(this,"getUserInput",(()=>this.state.values)),j(this,"simpleValidate",(e=>hd.validate(this.getUserInput(),e)))}render(){var e={marginBottom:this.props.labels[0]?75:0};return h.createElement("div",{className:"perseus-widget-plotter graphie "+ee.INTERACTIVE,ref:"graphieDiv",style:e})}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!p.a.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(t)}componentDidMount(){this._isMounted=!0,this.setupGraphie(this.state)}UNSAFE_componentWillReceiveProps(e){this.shouldSetupGraphie=p.a.any(["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"],(function(t){return!p.a.isEqual(this.props[t],e[t])}),this),p.a.isEqual(this.props.starting,e.starting)||p.a.isEqual(this.state.values,e.starting)||(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))}componentWillUnmount(){this._isMounted=!1}}j(hd,"propTypes",{onChange:d.a.func.isRequired,trackInteraction:d.a.func.isRequired}),j(hd,"defaultProps",{type:id,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1}),p.a.extend(hd,{validate:function(e,t){return nd(e,t.starting)?{type:"invalid",message:null}:{type:"points",earned:nd(e,t.correct)?1:0,total:1,message:null}}});var cd=p.a.identity,pd={name:"plotter",displayName:"Plotter",widget:hd,staticTransform:cd};class ud extends h.Component{constructor(){super(...arguments),j(this,"arrowLength",100),j(this,"drawArrow",(()=>{var e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var r=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";r.moveTo(5,e.height/2),r.lineTo(e.width-5,e.height/2),r.moveTo(e.width-10,e.height/2-5),r.lineTo(e.width-5,e.height/2),r.moveTo(e.width-10,e.height/2+5),r.lineTo(e.width-5,e.height/2),t.stroke(r)}))}componentDidMount(){this.drawArrow()}componentDidUpdate(){this.drawArrow()}render(){return h.createElement("div",{className:"arrow-container"},h.createElement("div",{className:"above-text"},this.props.data.topText),h.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},o._("Reaction arrow pointing to the right.")),h.createElement("div",{className:"below-text"},this.props.data.bottomText))}}j(ud,"propTypes",{data:d.a.any,index:d.a.number});class dd extends h.Component{constructor(){super(...arguments),j(this,"simpleValidate",(()=>({type:"points",earned:0,total:0,message:null}))),j(this,"getUserInput",(()=>[])),j(this,"validate",((e,t)=>({type:"points",earned:0,total:0,message:null}))),j(this,"focus",(()=>!0))}render(){return h.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(((e,t)=>{var r=this.props.widgetId+"-"+t;return h.createElement("div",{key:r,className:"molecule-container"},h.createElement(Kp,{id:r,rotationAngle:this.props.rotationAngle[t],smiles:e}),t===this.props.smiles.length-1?null:h.createElement(ud,{data:this.props.separators[t],index:t}))})))}}j(dd,"propTypes",{rotationAngle:d.a.arrayOf(d.a.number),separators:d.a.arrayOf(d.a.object),smiles:d.a.arrayOf(d.a.string),widgetId:d.a.string}),j(dd,"defaultProps",{smiles:[],rotationAngle:[],separators:[]});var md={name:"reaction-diagram",displayName:"Chemical reaction",hidden:!0,widget:dd};class fd extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"state",{visible:1}),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"_handleInteraction",(e=>{var t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){var r=this.refs.renderer.getWidgetInstance("group "+t);r.showRationalesForCurrentlySelectedChoices();var n=r.simpleValidate();"points"===n.type&&n.total===n.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}))}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){var e=h.createElement(Y,G({},Pr,{style:{color:"green"}})),t=p.a.chain(this.props.json).first(this.state.visible).map(((e,t)=>"[[".concat(Pe.snowman," group ").concat(t,"]]"))).join("\n\n").value(),r={};return p.a.each(this.props.json,((t,n)=>{var i="group ".concat(n);r[i]={type:"group",graded:!0,version:{major:0,minor:0},options:p.a.extend({},t,{icon:n<this.state.visible-1?e:null})}})),h.createElement("div",{className:"perseus-sequence"},h.createElement(ss,{ref:"renderer",content:t,widgets:r,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext}))}}j(fd,"propTypes",U(U({},qs),{},{apiOptions:J.propTypes,json:d.a.arrayOf(d.a.shape({content:d.a.string,images:d.a.objectOf(d.a.any),widgets:d.a.objectOf(d.a.any)})),trackInteraction:d.a.func.isRequired,linterContext:s.c})),j(fd,"defaultProps",{json:[{content:"",widgets:{},images:{}}],linterContext:s.b});var gd={name:"sequence",displayName:"Graded Sequence",widget:fd,traverseChildWidgets:function(e,t){var r=e.json;p.a.isArray(r)||(r=[r]);var n=p.a.map(r,(e=>t(e)));return p.a.extend({},e,{json:n})},tracking:"all",hidden:!0,isLintable:!0},vd="#aaa",yd="#ccc",bd="#fff",xd={borderBottom:"9px solid transparent",borderTop:"9px solid transparent",content:'" "',height:"0",position:"absolute",top:"0",width:"0"},wd=C.StyleSheet.create({infoTip:{display:"inline-block",marginLeft:"5px",position:"relative"},infoTipContainer:{position:"absolute",top:"-12px",left:"22px",zIndex:1e3},infoTipTriangle:{height:"10px",left:"0",position:"absolute",top:"8px",width:"0",zIndex:1,":before":U(U({},xd),{},{borderRight:"9px solid #bbb",right:"0"}),":after":U(U({},xd),{},{borderRight:"9px solid ".concat(bd),right:"-1px"})},verticalShadow:{border:"1px solid ".concat(yd),boxShadow:"0 1px 3px ".concat(yd),borderBottom:"1px solid ".concat(vd)},infoTipContentContainer:{background:bd,padding:"5px 10px",width:"240px"}});class kd extends h.Component{constructor(){super(...arguments),j(this,"state",{hover:!1}),j(this,"handleMouseEnter",(()=>{this.setState({hover:!0})})),j(this,"handleMouseLeave",(()=>{this.setState({hover:!1})}))}render(){return h.createElement("div",{className:Object(C.css)(wd.infoTip)},h.createElement("img",{alt:"",width:10,height:10,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2MtYmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlhMTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFhLThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADMSURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyUviFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOLgx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgAvc49kQA4yxgAAAAASUVORK5CYII=",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),h.createElement("div",{className:Object(C.css)(wd.infoTipContainer),style:{display:this.state.hover?"block":"none"}},h.createElement("div",{className:Object(C.css)(wd.infoTipTriangle)}),h.createElement("div",{className:Object(C.css)(wd.verticalShadow,wd.infoTipContentContainer)},this.props.children)))}}class Cd extends h.Component{constructor(){super(...arguments),j(this,"state",{didMount:!1})}componentDidMount(){this.setState({didMount:!0})}render(){return this.state.didMount?h.createElement(kd,this.props):h.createElement("div",null)}}var{assert:Ed}=wt,{Path:Sd,Arc:Td,Circle:Md,Label:_d,Line:Ad,MovablePoint:Id,MovableLine:Od}=qn;class Nd extends h.Component{constructor(){super(...arguments),j(this,"_renderThresholdLine",(()=>{var e=[0,this._range()[1][1]],t=p.a.map(e,(e=>[this.state.threshold,e]));return h.createElement(Od,{onMove:this.handleMouseInteraction},p.a.map(t,((e,t)=>h.createElement(Id,{key:t,static:!0,coord:e,normalStyle:{stroke:"none",fill:"none"}}))))})),j(this,"_renderCircle",(()=>{var e,t=this.props.data,r=p.a.reduce(t,((e,t)=>e+t),0),n=p.a.reduce(t,((e,t,r)=>null!=this.state.threshold&&r<=this.state.threshold?e+t:e),0),i=n/r,s=1e-5,o=[this.props.box[0]-30,30],a=this._range()[0],l=Math.min(Math.max(this.state.threshold,a[0]),a[1]).toFixed(2);return[i>0&&(e={key:"below",center:o,radius:20,startAngle:0,endAngle:i<1?360*i:359.99999,sector:1!==i,unscaled:!0,style:{fill:Et.LIGHT_RED,stroke:Et.RED}},h.createElement(Td,e)),i<1&&(()=>{var e={key:"above",center:o,radius:20,startAngle:i>0?360*i:s,endAngle:360,sector:0!==i,unscaled:!0,style:{fill:Et.LIGHT_BLUE,stroke:Et.BLUE}};return h.createElement(Td,e)})(),(()=>{var e={key:"label",coord:[o[0],o[1]+30],text:n+" of "+r+" results below "+l+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return h.createElement(_d,e)})()]})),j(this,"_renderData",(()=>{var e=this.props.data;this._range();return p.a.map(e,((e,t)=>{if(e){var r=null!=this.state.threshold&&t<=this.state.threshold,n={fill:r?Et.LIGHT_RED:Et.LIGHT_BLUE,stroke:r?Et.RED:Et.BLUE},i=[[t,0],[t,e],[t+1,e],[t+1,0]];return h.createElement(Sd,{key:t,coords:i,style:n})}}))})),j(this,"_setupGraphie",((e,t)=>{var r=t.data,n=t.range,i=t.scale,s=n[0][1]-n[0][0],o=n[1][1]-0,a=Math.ceil(o/20);if(p.a.each(p.a.range(0,n[1][1],a),(t=>{r&&e.label([n[0][0],t],he.roundToApprox(t,2),"left",!0),e.line([n[0][0],t],[n[0][1],t],{stroke:"#000",strokeWidth:1,opacity:.3})})),r){var l=Math.ceil(s/15);p.a.each(p.a.range(n[0][0],n[0][1],l),(t=>{e.label([t,0],y.b.round(t,2),"below",!0);e.line([t,0],[t,-8/i[1]],{stroke:"#000",strokeWidth:1})}))}var h=[n[0][0],0],c=[n[0][0],n[1][1]];e.line(h,c,{stroke:"#000",strokeWidth:2,opacity:1});var u=n[0][0]+s/2,d=r?25:0;e.label([u,-d/i[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");var m=0+o/2,f=r?55:28;e.label([n[0][0]-f/i[0],m],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")})),j(this,"handleMouseInteraction",(e=>{this.setState({threshold:e[0]})})),j(this,"_range",(e=>(e=e||this.props).data?this._getRangeForData(e.data):[[0,100],[-1,10]])),j(this,"_getRangeForData",(e=>{var t=p.a.indexOf(e,p.a.find(e,(e=>e>0))),r=Math.max(0,t-10),n=p.a.lastIndexOf(e,p.a.last(p.a.filter(e,(e=>e>0))));return[[r,Math.min(101,n+1+10)],[-1,p.a.max(e)]]})),j(this,"_getInitialThreshold",(e=>{var t=e[0];return t[0]+(t[1]-t[0])/3})),j(this,"state",{threshold:this._getInitialThreshold(this._range())})}UNSAFE_componentWillReceiveProps(e){var t=this._range(),r=this._range(e);Pe.deepEq(t,r)||this.setState({threshold:this._getInitialThreshold(r)})}render(){var e=this.props.data,t=this._range(),r={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[Pe.scaleFromExtent(t[0],this.props.box[0]),Pe.scaleFromExtent(t[1],this.props.box[1])]},n=[t[0][0],0],i=[t[0][1],0];return h.createElement(qn,{box:r.box,range:r.range,options:r,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},h.createElement(Ad,{start:n,end:i,style:{stroke:"#000",strokeWidth:1,opacity:1}}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine())}}j(Nd,"propTypes",{data:d.a.arrayOf(d.a.number),xAxisLabel:d.a.string,yAxisLabel:d.a.string,box:d.a.arrayOf(d.a.number)}),j(Nd,"defaultProps",{data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[400,400]});class Pd extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"generateNumber",void 0),j(this,"state",{invalidInput:!1}),j(this,"calculateDisplayProportion",(()=>{var e=this.props.userProportion;return"percentage"===this.props.proportionOrPercentage?Math.round(100*e):e})),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"checkProportionValidity",(e=>e>=0&&"proportion"===this.props.proportionOrPercentage&&e<=1||"percentage"===this.props.proportionOrPercentage&&e<=100)),j(this,"handleUserProportionChange",((e,t)=>{var r;null!=(r="percentage"===this.props.proportionOrPercentage?e/100:e)&&(r=Math.min(1,Math.max(0,r))),this.props.onChange({userProportion:r},t)})),j(this,"handleSampleSizeChange",((e,t)=>{null!=e&&(e=Math.min(1e3,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)})),j(this,"handleRunSimulation",(()=>{null!=this.props.numTrials&&null!=this.props.userProportion&&null!=this.props.sampleSize?(this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),this.props.trackInteraction()):this.setState({invalidInput:!0})})),j(this,"generateData",(e=>((e,t,r)=>{var n=()=>this.generateNumber()<r,i=p.a.times(101,(()=>0));return p.a.times(t,(()=>{var t=p.a.times(e,n),r=p.a.filter(t,p.a.identity).length,s=Math.floor(100*r/e);i[s]++})),i})((e=e||this.props).sampleSize,e.numTrials,e.userProportion))),j(this,"getInputPaths",(()=>[["userProportion"],["sampleSize"]])),j(this,"focus",(()=>{var e=p.a.head(this.getInputPaths());return this.focusInputPath(e),!0})),j(this,"focusInputPath",(e=>{Ed(e.length>0);var t=p.a.head(e);this.refs[t].focus()})),j(this,"blurInputPath",(e=>{Ed(e.length>0);var t=p.a.head(e);this.refs[t].blur()})),j(this,"getDOMNodeForPath",(e=>{Ed(e.length>0);var t=p.a.head(e);return v.a.findDOMNode(this.refs[t])})),j(this,"getGrammarTypeForPath",(e=>(Ed(e.length>0),"number"))),j(this,"setInputValue",((e,t,r)=>{Ed(e.length>0);var n=p.a.head(e);this["handle"+(n.charAt(0).toUpperCase()+n.slice(1))+"Change"](t,r)})),j(this,"getUserInput",(()=>null)),j(this,"simpleValidate",(e=>Pd.validate(this.getUserInput(),e)))}UNSAFE_componentWillMount(){null!=this.props.randomSeed&&(this.generateNumber=Pe.seededRNG(this.props.randomSeed))}UNSAFE_componentWillReceiveProps(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=Pe.seededRNG(e.randomSeed))}render(){var e={marginLeft:"5px"},t="0px 0px 0px 2px rgba(255, 165, 0, 1)",r=p.a.extend({},e,{WebkitBoxShadow:t,MozBoxShadow:t,boxShadow:t,transition:"all 0.15s"}),n=p.a.extend({},e,{transition:"all 0.15s"}),i=this.state.invalidInput?r:n,s=this.props.apiOptions.staticRender?ws:ap,a=h.createElement("div",null,h.createElement(s,{ref:"userProportion",style:i,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:()=>this.props.onFocus(["userProportion"]),onBlur:()=>this.props.onBlur(["userProportion"])}),h.createElement(Cd,null,h.createElement("p",null,o._("This controls the proportion or percentage that will be used in your simulation.")))),l=h.createElement("div",null,h.createElement(s,{ref:"sampleSize",style:i,value:this.props.sampleSize,checkValidity:e=>e>=0,disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:()=>this.props.onFocus(["sampleSize"]),onBlur:()=>this.props.onBlur(["sampleSize"])}),h.createElement(Cd,null,h.createElement("p",null,o._("This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated.")))),c=h.createElement("div",{style:{textAlign:"right"}},h.createElement("b",null,this.props.numTrials),h.createElement(Cd,null,h.createElement("p",null,o._("This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times.")))),u=[{title:this.props.proportionLabel+":",value:a},{title:o._("Sample size:"),value:l},{title:o._("Number of trials:"),value:c}],d=h.createElement("button",{className:"simple-button",style:{margin:"20px 0"},disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},o._("Run simulation")),m={paddingBottom:this.props.data?40:0},f=h.createElement("div",{style:m},h.createElement(Nd,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return h.createElement("div",null,(e=>{var t=h.createElement("thead",null,h.createElement("tr",null,h.createElement("th",null,o._("Parameter")),h.createElement("th",null,o._("Value")))),r=h.createElement("tbody",null,p.a.map(e,((e,t)=>h.createElement("tr",{key:t},h.createElement("td",null,e.title),h.createElement("td",null,e.value)))));return h.createElement("table",null,t,r)})(u),d,f)}}j(Pd,"propTypes",U(U({},qs),{},{apiOptions:J.propTypes,data:d.a.arrayOf(d.a.number),numTrials:d.a.number,proportionLabel:d.a.string,proportionOrPercentage:d.a.string,randomSeed:d.a.number,sampleSize:d.a.number,trackInteraction:d.a.func.isRequired,userProportion:d.a.number,xAxisLabel:d.a.string,yAxisLabel:d.a.string})),j(Pd,"defaultProps",{data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:J.defaults}),p.a.extend(Pd,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var Rd={name:"simulator",displayName:"Simulator",widget:Pd,transform:e=>{var t=p.a.clone(e);return t.randomSeed=e.problemNum,t},hidden:!0},{shuffle:Ld}=Pe,Fd="horizontal";class Dd extends h.Component{constructor(){super(...arguments),j(this,"_isMounted",void 0),j(this,"state",{changed:!1}),j(this,"handleChange",(e=>{this._isMounted&&this.setState({changed:!0},(()=>{setTimeout((()=>{this.props.onChange(e),this.props.trackInteraction()}),0)}))})),j(this,"getUserInput",(()=>({options:this.refs.sortable.getOptions()}))),j(this,"moveOptionToIndex",((e,t)=>{this.refs.sortable.moveOptionToIndex(e,t)})),j(this,"simpleValidate",(e=>this.state.changed?Dd.validate(this.getUserInput(),e):{type:"invalid",message:null}))}static validate(e,t){return{type:"points",earned:p.a.isEqual(e.options,t.correct)?1:0,total:1,message:null}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){var e=Ld(this.props.correct,this.props.problemNum,!0),{apiOptions:t}=this.props,r=t.isMobile?8:5;return h.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},h.createElement(Xc,{options:e,layout:this.props.layout,margin:r,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"}))}}j(Dd,"propTypes",{apiOptions:J.propTypes,correct:d.a.array,layout:d.a.oneOf([Fd,"vertical"]),onChange:d.a.func,padding:d.a.bool,problemNum:d.a.number,trackInteraction:d.a.func.isRequired,linterContext:s.c}),j(Dd,"defaultProps",{correct:[],layout:Fd,padding:!0,problemNum:0,onChange:function(){},linterContext:s.b});var zd,Bd={name:"sorter",displayName:"Sorter",widget:Dd,isLintable:!0},{assert:qd}=wt,Hd=function(e,t){return[""+e,""+t]},Ud=function(e){return qd(p.a.isArray(e)&&2===e.length),+e[0]},Wd=function(e){return qd(p.a.isArray(e)&&2===e.length),+e[1]},jd=function(e){return"answer"+Ud(e)+","+Wd(e)};class Gd extends h.Component{constructor(){super(...arguments),j(this,"_getRows",(()=>this.props.answers.length)),j(this,"_getColumns",(()=>this.props.answers[0].length)),j(this,"getUserInput",(()=>p.a.map(this.props.answers,p.a.clone))),j(this,"onValueChange",((e,t,r)=>{var n=p.a.map(this.props.answers,p.a.clone);n[e][t]=r.target?r.target.value:r,this.props.onChange({answers:n}),this.props.trackInteraction()})),j(this,"onHeaderChange",((e,t)=>{var r=this.props.headers.slice();r[e]=t.content,this.props.onChange({headers:r})})),j(this,"simpleValidate",(e=>Gd.validate(this.getUserInput(),e))),j(this,"_handleFocus",(e=>{this.props.onFocus(e)})),j(this,"_handleBlur",(e=>{this.props.onBlur(e)})),j(this,"focus",(()=>(this.focusInputPath(Hd(0,0)),!0))),j(this,"focusInputPath",(e=>{var t=jd(e),r=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?r.focus():v.a.findDOMNode(r).focus()})),j(this,"blurInputPath",(e=>{var t=jd(e),r=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?r.blur():v.a.findDOMNode(r).blur()})),j(this,"getDOMNodeForPath",(e=>{var t=jd(e);return v.a.findDOMNode(this.refs[t])})),j(this,"getInputPaths",(()=>{var e=this._getRows(),t=this._getColumns(),r=[];return p()(e).times((e=>{p()(t).times((t=>{var n=Hd(e,t);r.push(n)}))})),r})),j(this,"getGrammarTypeForPath",(e=>"number")),j(this,"setInputValue",((e,t,r)=>{var n=Ud(e),i=Wd(e),s=p.a.map(this.props.answers,p.a.clone);s[n][i]=t,this.props.onChange({answers:s},r)}))}render(){var e,t,r=this._getRows(),n=this._getColumns(),i=this.props.headers,s={};return this.props.apiOptions.customKeypad?(e=Qs,t={width:80},s.keypadElement=this.props.keypadElement):this.props.apiOptions.staticRender?(e=ws,t={}):(e="input",t={}),h.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},h.createElement("thead",null,h.createElement("tr",null,p.a.map(i,((e,t)=>this.props.editableHeaders?h.createElement("th",{key:t},h.createElement(this.props.Editor,{ref:"columnHeader"+t,apiOptions:this.props.apiOptions,content:e,widgetEnabled:!1,onChange:p.a.partial(this.onHeaderChange,t)})):h.createElement("th",{key:t},h.createElement(ss,{content:e,linterContext:this.props.linterContext})))))),h.createElement("tbody",null,p()(r).times((r=>h.createElement("tr",{key:r},p()(n).times((n=>h.createElement("td",{key:n},h.createElement(e,G({ref:jd(Hd(r,n)),type:"text",value:this.props.answers[r][n],disabled:this.props.apiOptions.readOnly,onFocus:p.a.partial(this._handleFocus,Hd(r,n)),onBlur:p.a.partial(this._handleBlur,Hd(r,n)),onChange:p.a.partial(this.onValueChange,r,n),style:t},s))))))))))}}j(Gd,"propTypes",{answers:d.a.arrayOf(d.a.arrayOf(d.a.string)),editableHeaders:d.a.bool,Editor:d.a.func,headers:d.a.arrayOf(d.a.string),keypadElement:i.keypadElementPropType,trackInteraction:d.a.func.isRequired,linterContext:s.c}),j(Gd,"defaultProps",(zd=p()(4).times((function(){return Pe.stringArrayOfSize(1)})),{apiOptions:J.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,answers:zd,linterContext:s.b})),p.a.extend(Gd,{validate:function(e,t){var r=function(e){return p.a.filter(e,(function(e){return p.a.some(e,p.a.identity)}))},n=r(t.answers),i=r(e);if(p.a.some(i,(function(e){return p.a.some(e,(function(e){return""===e}))}))||!i.length)return{type:"invalid",message:null};if(i.length!==n.length)return{type:"points",earned:0,total:1,message:null};var s=ue.number.createValidatorFunctional,o=null;return{type:"points",earned:p.a.every(n,(function(e){var t;for(t=0;t<i.length;t++){var r=i[t],n=p.a.every(r,(function(t,r){var n=e[r],i=s(n,{simplify:!0})(t);return i.message&&(o=i.message),i.correct}));if(n)return i.splice(t,1),!0}return!1}))?1:0,total:1,message:o}}});var Vd={name:"table",displayName:"Table of values",accessible:!0,widget:Gd,transform:e=>{var t=e.answers.length,r=e.answers[0].length,n=p()(t).times((function(){return Pe.stringArrayOfSize(r)}));return p.a.extend({},e,{answers:n})},hidden:!0,isLintable:!0},{deepEq:Yd,getGridStep:Xd,captureScratchpadTouchStart:Qd}=Pe,{assert:Kd}=wt,$d={url:null};var Zd={apiOptions:J.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};function Jd(e){return e.constraints.fixed?Et.DYNAMIC:Et.INTERACTIVE}function em(e){return String(he.roundTo(9,e))}function tm(e){var{TeX:t}=ie();return[h.createElement(t,{key:"("},"("),em(e[0]),h.createElement(t,{key:","},", {}"),em(e[1]),h.createElement(t,{key:")"},")")]}function rm(e){var{TeX:t}=ie();return[h.createElement(t,{key:"<"},o.doNotTranslate("\\langle")),em(e[0]),h.createElement(t,{key:","},", {}"),em(e[1]),h.createElement(t,{key:">"},o.doNotTranslate("\\rangle"))]}function nm(e,t){return e=p.a.clone(e).sort(y.c.compare),t=p.a.clone(t).sort(y.c.compare),p.a.all(p.a.map(e,(function(e,r){var n=t[r];return y.c.equal(e,n)})))}var im=e=>e.customKeypad?Qs:e.staticRender?ws:ap,sm={apply:function(e){return om[e.type].isValid(e)?om[e.type].apply(e):p.a.identity},append:function(e,t){var r=sm._appendAndCollapseLastTwo(e,t);return sm._collapseFinalNoOps(r)},_collapseFinalNoOps:function(e){return e.length&&sm.isNoOp(p.a.last(e))?p.a.initial(e):e},_appendAndCollapseLastTwo:function(e,t){if(!e.length)return[t];var r=sm.collapse(p.a.last(e),t);return p.a.initial(e).concat(r)},isNoOp:function(e){return om[e.type].isNoOp(e)},collapse:function(e,t){return e.type!==t.type?[e,t]:sm.isEmpty(e)&&sm.isEmpty(t)?[]:sm.isValid(e)&&sm.isValid(t)?sm._collapseValidMonotypedTransforms(e,t):[e,t]},isValid:function(e){return om[e.type].isValid(e)},isEmpty:function(e){return om[e.type].isEmpty(e)},_collapseValidMonotypedTransforms:function(e,t){var r=om[e.type].collapse(e,t);return r?(p.a.isArray(r)||(r=[r]),p.a.each(r,(function(t){t.type=e.type})),r):[e,t]},toTeX:function(e){return om[e.type].toTeX(e)},ListItem:x()({displayName:"ListItem",render:function(){if("dynamic"===this.props.mode)return h.createElement("div",null,sm.toTeX(this.props.transform));if("interactive"===this.props.mode){var e=om[this.props.transform.type].Input;return h.createElement(e,G({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}throw new le("Invalid mode: "+this.props.mode,oe.InvalidInput)},value:function(){return"interactive"===this.props.mode?p.a.extend({type:this.props.transform.type},this.refs.transform.value()):this.props.transform},handleChange:p.a.debounce((function(e){this.props.onChange(this.value(),e)}),300),_getComponentAtPath:function(e){var t=this.refs.transform,r=p.a.head(e);return t.refs[r]},focus:function(){var e=this.refs.transform,t=p.a.head(e.getInputPaths());t&&this.focusInputPath(t)},focusInputPath:function(e){this._getComponentAtPath(e).focus()},blurInputPath:function(e){this._getComponentAtPath(e).blur()},getDOMNodeForPath:function(e){return v.a.findDOMNode(this._getComponentAtPath(e))},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,r){t.length&&(t=parseFloat(t),isNaN(t))||this.refs.transform.setInputValue(e,t,r)},getInputPaths:function(){return"dynamic"===this.props.mode?[]:this.refs.transform.getInputPaths()}})},om={translation:{verbName:o._("Translate"),nounName:o._("Translation"),lowerNounName:o._("translation"),apply:function(e){return function(t){return y.e.add(t,e.vector)}},isValid:function(e){return p.a.isFinite(e.vector[0])&&p.a.isFinite(e.vector[1])},isEmpty:function(e){return null===e.vector[0]&&null===e.vector[1]},isNoOp:function(e){return y.e.equal(e.vector,[0,0])},collapse:function(e,t){return{vector:y.e.add(e.vector,t.vector)}},toTeX:function(e){return o.$_("Translation by %(vector)s",{vector:rm(e.vector)})},Input:class extends h.Component{constructor(){super(...arguments),j(this,"state",{vector:this.props.vector||[null,null]}),j(this,"value",(()=>({vector:[this.refs.x.getValue(),this.refs.y.getValue()]}))),j(this,"setInputValue",((e,t,r)=>{var n=p.a.first(e),i=p.a.clone(this.state.vector);"x"===n?i[0]=t:"y"===n&&(i[1]=t),this.setState({vector:i},(()=>{this.props.onChange(r)}))})),j(this,"getInputPaths",(()=>[["x"],["y"]]))}componentDidUpdate(e){Yd(this.props,e)||this.setState({vector:this.props.vector})}render(){var e=im(this.props.apiOptions),{TeX:t}=ie(),r=[h.createElement(t,{key:"<"},o.doNotTranslate("\\langle")),h.createElement(e,{key:"vec_x",ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:!0,onChange:e=>{var t=this.state.vector[1];this.setState({vector:[e,t]},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"x"),onBlur:p.a.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:","},", {}"),h.createElement(e,{key:"vec_y",ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:!0,onChange:e=>{var t=this.state.vector[0];this.setState({vector:[t,e]},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"y"),onBlur:p.a.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:">"},o.doNotTranslate("\\rangle"))];return h.createElement("div",null,o.$_("Translation by %(vector)s",{vector:r}))}}},rotation:{verbName:o._("Rotate"),nounName:o._("Rotation"),lowerNounName:o._("rotation"),apply:function(e){return function(t){return y.c.rotateDeg(t,e.angleDeg,e.center)}},isValid:function(e){return p.a.isFinite(e.angleDeg)&&p.a.isFinite(e.center[0])&&p.a.isFinite(e.center[1])},isEmpty:function(e){return null===e.angleDeg&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return y.b.equal(e.angleDeg,0)},collapse:function(e,t){return!!y.c.equal(e.center,t.center)&&{center:e.center,angleDeg:e.angleDeg+t.angleDeg}},toTeX:function(e){return o.$_("Rotation by %(degrees)s about %(point)s",{degrees:(t=e.angleDeg,em(t)+"°"),point:tm(e.center)});var t},Input:class extends h.Component{constructor(){super(...arguments),j(this,"state",{center:this.props.center||[null,null],angleDeg:this.props.angleDeg||null}),j(this,"value",(()=>({angleDeg:this.refs.angleDeg.getValue(),center:[this.refs.centerX.getValue(),this.refs.centerY.getValue()]}))),j(this,"setInputValue",((e,t,r)=>{var n=p.a.first(e),i=p.a.clone(this.state.angleDeg),s=p.a.clone(this.state.center);"angleDeg"===n?i=t:"centerX"===n?s[0]=t:"centerY"===n&&(s[1]=t),this.setState({angleDeg:i,center:s},(()=>{this.props.onChange(r)}))})),j(this,"getInputPaths",(()=>[["centerX"],["centerY"],["angleDeg"]]))}componentDidUpdate(e){Yd(this.props,e)||this.setState({center:this.props.center,angleDeg:this.props.angleDeg})}render(){var e=im(this.props.apiOptions),{TeX:t}=ie(),r=[h.createElement(t,{key:"("},"("),h.createElement(e,{key:"X",ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{var t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"centerX"),onBlur:p.a.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:","},", {}"),h.createElement(e,{key:"Y",ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{var t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"centerY"),onBlur:p.a.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:")"},")")],n=[h.createElement(e,{key:"deg",ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:!0,onChange:e=>{this.setState({angleDeg:e},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"angleDeg"),onBlur:p.a.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),"°"],i=o.$_("Rotation about %(point)s by %(degrees)s",{point:r,degrees:n});return h.createElement("div",null,i)}}},reflection:{verbName:o._("Reflect"),nounName:o._("Reflection"),lowerNounName:o._("reflection"),apply:function(e){return function(t){return y.c.reflectOverLine(t,e.line)}},isValid:function(e){return p.a.all(p.a.flatten(e.line),p.a.isFinite)&&!y.c.equal(e.line[0],e.line[1])},isEmpty:function(e){return p.a.all(p.a.flatten(e.line),p.a.isNull)},isNoOp:function(e){return!1},collapse:function(e,t){return!!y.a.equal(e.line,t.line)&&[]},toTeX:function(e){var t=e.line[0],r=e.line[1];return o.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:tm(t),point2:tm(r)})},Input:class extends h.Component{constructor(){super(...arguments),j(this,"state",{line:this.props.line||[[null,null],[null,null]]}),j(this,"changePoint",((e,t,r,n)=>{var i=p.a.map(this.state.line,p.a.clone);i[e][t]=r,this.setState({line:i},(()=>{this.props.onChange(n)}))})),j(this,"value",(()=>({line:[[this.refs.x1.getValue(),this.refs.y1.getValue()],[this.refs.x2.getValue(),this.refs.y2.getValue()]]}))),j(this,"setInputValue",((e,t,r)=>{var n,i,s=p.a.first(e);"x"===s[0]?n=0:"y"===s[0]&&(n=1),"1"===s[1]?i=0:"2"===s[1]&&(i=1),this.changePoint(i,n,t,r)})),j(this,"getInputPaths",(()=>[["x1"],["y1"],["x2"],["y2"]]))}componentDidUpdate(e){Yd(this.props,e)||this.setState({line:this.props.line})}render(){var e=im(this.props.apiOptions),{TeX:t}=ie(),r=[h.createElement(t,{key:"("},"("),h.createElement(e,{key:"x1",ref:"x1",value:this.state.line[0][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,0),onFocus:p.a.partial(this.props.onFocus,"x1"),onBlur:p.a.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:","},", {}"),h.createElement(e,{key:"y1",ref:"y1",value:this.state.line[0][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,1),onFocus:p.a.partial(this.props.onFocus,"y1"),onBlur:p.a.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:")"},")")],n=[h.createElement(t,{key:"("},"("),h.createElement(e,{key:"x2",ref:"x2",value:this.state.line[1][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,0),onFocus:p.a.partial(this.props.onFocus,"x2"),onBlur:p.a.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:","},", {}"),h.createElement(e,{key:"y2",ref:"y2",value:this.state.line[1][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,1),onFocus:p.a.partial(this.props.onFocus,"y2"),onBlur:p.a.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:")"},")")];return h.createElement("div",null,o.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:r,point2:n}))}}},dilation:{verbName:o._("Dilate"),nounName:o._("Dilation"),lowerNounName:o._("dilation"),apply:function(e){return function(t){return r=t,n=e.center,i=e.scale,s=y.e.subtract(r,n),o=y.e.scale(s,i),y.e.add(n,o);var r,n,i,s,o}},isValid:function(e){return p.a.isFinite(e.scale)&&p.a.isFinite(e.center[0])&&p.a.isFinite(e.center[1])},isEmpty:function(e){return null===e.scale&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return y.b.equal(e.scale,1)},collapse:function(e,t){return!!y.c.equal(e.center,t.center)&&{center:e.center,scale:e.scale*t.scale}},toTeX:function(e){var t,r,n=(t=e.scale,1===(r=he.toFraction(t,y.b.DEFAULT_TOLERANCE))[1]?em(t):em(r[0])+"/"+em(r[1]));return o.$_("Dilation of scale %(scale)s about %(point)s",{scale:n,point:tm(e.center)})},Input:class extends h.Component{constructor(){super(...arguments),j(this,"state",{center:this.props.center||[null,null],scale:this.props.scale||null}),j(this,"value",(()=>({scale:this.refs.scale.getValue(),center:[this.refs.x.getValue(),this.refs.y.getValue()]}))),j(this,"setInputValue",((e,t,r)=>{var n=p.a.first(e),i=this.state.scale,s=p.a.clone(this.state.center);"x"===n?s[0]=t:"y"===n?s[1]=t:"scale"===n&&(i=t),this.setState({scale:i,center:s},(()=>{this.props.onChange(r)}))})),j(this,"getInputPaths",(()=>[["x"],["y"],["scale"]]))}componentDidUpdate(e){Yd(this.props,e)||this.setState({center:this.props.center,scale:this.props.scale})}render(){var e=im(this.props.apiOptions),{TeX:t}=ie(),r=[h.createElement(t,{key:"("},"("),h.createElement(e,{key:"point_x",ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{var t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"x"),onBlur:p.a.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:","},", {}"),h.createElement(e,{key:"point_y",ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{var t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"y"),onBlur:p.a.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),h.createElement(t,{key:")"},")")],n=h.createElement(e,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:!0,onChange:e=>{this.setState({scale:e},(()=>{this.props.onChange()}))},onFocus:p.a.partial(this.props.onFocus,"scale"),onBlur:p.a.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return h.createElement("div",null,o.$_("Dilation about %(point)s by %(scale)s",{point:r,scale:n}))}}}},am={getPointCountForType:function(e){var t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new le("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t),oe.InvalidInput);var r=p.a.map(t.shape.coords,(function(i){var s=!1,o=i,a=e.addMovablePoint({coord:i,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:function(e,i){s||(o=a.coord,s=!0);var l=y.e.subtract([e,i],a.coord);t.onMove&&(l=t.onMove(l[0],l[1])),t.translatable&&p.a.each(r,(function(e){e!==a&&e.setCoord(y.e.add(e.coord,l))}));var h=a.coord,c=y.e.add(a.coord,l);return a.coord=c,n.update(),a.coord=h,c},onMoveEnd:function(){if(t.onMoveEnd&&s){s=!1;var e=y.e.subtract(a.coord,o);t.onMoveEnd(e[0],e[1])}n.update()}});return a.bounded=!0,a})),n=am.addShape(e,t,r),i=n.remove;return n.remove=function(){i.apply(n),p.a.invoke(r,"remove")},n},addShape:function(e,t,r){r=r||t.shape.coords;var n=am._typesOf(t.shape),i=t.shape.options||am.defaultOptions(n),s=am._mapTypes(n,r,(function(r,n,s){var o=p.a.extend({},t,i[s]);return am._addType(e,r,n,o)})),o=p.a.filter(p.a.pluck(s,"update"),p.a.identity),a=p.a.filter(p.a.pluck(s,"remove"),p.a.identity),l=function(){return p.a.map(s,(function(e){return e.getOptions?e.getOptions():{}}))};return{type:n,points:r,update:function(){p.a.invoke(o,"call")},remove:function(){p.a.invoke(a,"call")},toJSON:function(){var e=p.a.map(r,(function(e){return p.a.isArray(e)?e:e.coord}));return{type:n,coords:e,options:l()}},getOptions:l}},equal:function(e,t){var r=am._typesOf(e),n=am._typesOf(t);if(r.length!==n.length)return!1;var i=am._mapTypes(r,e.coords,am._combine),s=am._mapTypes(n,t.coords,am._combine);return p.a.all(p.a.map(i,(function(e,t){var r=s[t];return e.type===r.type&&am._forType(e.type).equal(e.coords,r.coords)})))},_typesOf:function(e){var t=e.type;return p.a.isArray(t)||(t=[t]),p.a.map(t,(function(e){return"polygon"===e?"polygon-3":e}))},defaultOptions:function(e){return p.a.map(e,(function(e){var t=am._forType(e).defaultOptions;return p.a.extend({},t)}))},_forType:function(e){var t=e.split("-")[0];return am[t]},_mapTypes:function(e,t,r,n){return p.a.map(e,(function(e,i){var s=am.getPointCountForType(e),o=p.a.first(t,s);return t=p.a.rest(t,s),r.call(n,e,o,i)}))},_addType:function(e,t,r,n){var i=p.a.isArray(r[0])?{coordA:r[0],coordZ:r[1]}:{pointA:r[0],pointZ:r[1]};if("polygon"===(t=t.split("-")[0])){var s=e.addMovablePolygon(p.a.extend({},n,{fixed:!n.editable,snapX:n.snap&&n.snap[0]||0,snapY:n.snap&&n.snap[1]||0,points:r,constrainToGraph:!1}));return{update:s.transform.bind(s),remove:s.remove.bind(s)}}if("line"===t||"lineSegment"===t){var o=e.addMovableLineSegment(p.a.extend({},n,i,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:o.transform.bind(o,!0),remove:o.remove.bind(o)}}if("angle"===t){var a=!!n.editable&&null,l=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:r,normalStyle:n.normalStyle,reflex:n.reflex});return p.a.isArray(r[0])||n.editable||(r[0].remove(),r[2].remove()),{update:l.update.bind(l,a),remove:l.remove.bind(l),getOptions:function(){return{reflex:l.isReflex()}}}}if("circle"===t){var h={remove:p.a.identity},c=function(){var t=r[0].coord||r[0],i=r[1].coord||r[1],s=y.c.distanceToPoint(t,i);h.remove(),h=e.circle(t,s,p.a.extend({stroke:Et.DYNAMIC,"stroke-width":2},n.normalStyle))};return c(),r[1].remove&&!n.editable&&r[1].remove(),{update:c,remove:function(){h.remove()}}}if("point"===t)return{update:null,remove:null};throw new le("Invalid shape type "+t,oe.InvalidInput)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:nm},line:{equal:y.a.equal},lineSegment:{equal:nm},angle:{equal:function(e,t){if(!y.c.equal(e[1],t[1]))return!1;var r=[e[1],e[0]],n=[e[1],e[2]],i=[t[1],t[0]],s=[t[1],t[2]],o=y.d.equal(r,i)&&y.d.equal(n,s),a=y.d.equal(r,s)&&y.d.equal(n,i);return o||a},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){var r=y.c.distanceToPoint(e[0],e[1]),n=y.c.distanceToPoint(t[0],t[1]);return y.c.equal(e[0],t[0])&&y.b.equal(r,n)}},point:{equal:y.c.equal}},lm=sm.ListItem;class hm extends h.Component{constructor(){super(...arguments),j(this,"_transformationRefs",(()=>p.a.times(this.props.transformations.length,(e=>this.refs["transformation"+e])))),j(this,"value",(()=>p.a.invoke(this._transformationRefs(),"value"))),j(this,"handleChange",((e,t)=>{this.props.onChange(this.value(),t)})),j(this,"focusLast",(()=>{var e=this._transformationRefs();0!==e.length&&p.a.last(e).focus()}))}render(){if("static"===this.props.mode)return h.createElement("span",null);var e=p.a.map(this.props.transformations,(function(e,t){return h.createElement(lm,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:p.a.partial(this.props.onFocus,""+t),onBlur:p.a.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})}),this);return h.createElement("div",{className:"perseus-transformation-list"},e)}}class cm extends h.Component{render(){var e=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return h.createElement("button",{type:"button",className:e,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:Qd},this.props.children)}}class pm extends h.Component{constructor(){super(...arguments),j(this,"state",{selected:null}),j(this,"changeSelected",(e=>{this.props.removeTool(this.state.selected),e&&e!==this.state.selected?(this.props.addTool(e),this.setState({selected:e})):this.setState({selected:null})}))}render(){var e=p.a.map(om,(function(e,t){if(this.props.enabled[t])return h.createElement(cm,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)}),this);return h.createElement("div",{className:"transformer-tools-bar"},h.createElement("span",{className:"simple-button-group"},e),h.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:Qd},h.createElement(Y,Br)," "+o._("Undo")),h.createElement("div",{className:"clear"}))}}class um extends h.Component{constructor(){super(...arguments),j(this,"changeSelected",(e=>{e&&this.props.addTool(e)}))}render(){var e=p.a.map(om,(function(e,t){if(this.props.enabled[t])return h.createElement(cm,{key:t,toggled:!1,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},h.createElement(Y,Rr)," ",e.nounName)}),this);return h.createElement("div",{className:"transformer-tools-bar"},e,h.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:Qd},h.createElement(Y,Br)," "+o._("Undo")),h.createElement("div",{className:"clear"}))}}class dm extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"tools",void 0),j(this,"currentTool",void 0),j(this,"transformations",void 0),j(this,"shape",void 0),j(this,"dilationCircle",void 0),j(this,"rotatePoint",void 0),j(this,"rotateHandle",void 0),j(this,"shouldSetupGraphie",((e,t)=>!Yd(t.starting,e.starting)||(t.graphMode!==e.graphMode||(t.listMode!==e.listMode||(t.drawSolutionShape!==e.drawSolutionShape||(!(!e.drawSolutionShape||Yd(t.correct.shape,e.correct.shape))||!Yd(this.tools,e.tools))))))),j(this,"graphie",(()=>this.refs.graph.graphie())),j(this,"setupGraphie",(e=>{this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords&&am.addShape(e,{fixed:!0,shape:this.props.correct.shape,normalStyle:{stroke:Et.GRAY,"stroke-dasharray":"","stroke-width":2}}),this.currentTool=null,this.refs.toolsBar.changeSelected(null),this.addTransformerShape(this.props.starting.shape,!1),this.setTransformations(this.props.transformations),this.tools={translation:p.a.clone(this.props.tools.translation),rotation:p.a.clone(this.props.tools.rotation),reflection:p.a.clone(this.props.tools.reflection),dilation:p.a.clone(this.props.tools.dilation)}})),j(this,"setTransformations",(e=>{this.resetCoords(),this.transformations=p.a.clone(e),p.a.each(this.transformations,this.applyTransform)})),j(this,"addTransformerShape",((e,t)=>{var r=this,n=this.graphie();this.shape=am.addMovableShape(n,{shape:e,editable:!1,showPoints:"static"!==this.props.graphMode,translatable:t,onMove:function(e,t){return e=he.roundToNearest(n.snap[0],e),t=he.roundToNearest(n.snap[1],t),r.addTransform({type:"translation",vector:[e,t]}),[e,t]},normalPointStyle:{fill:t?Et.INTERACTIVE:Et.DYNAMIC,stroke:t?Et.INTERACTIVE:Et.DYNAMIC},highlightPointStyle:{fill:Et.INTERACTING,stroke:Et.INTERACTING}})})),j(this,"addTool",(e=>{var t=this;if("interactive"===this.props.graphMode)if("translation"===e)this.currentTool=this.addTranslationTool();else if("rotation"===e)this.currentTool=this.addRotationTool();else if("reflection"===e)this.currentTool=this.addReflectionTool();else{if("dilation"!==e)throw new le("Invalid tool id: "+e,oe.InvalidInput);this.currentTool=this.addDilationTool()}else{var r;if("translation"===e)r={type:"translation",vector:[null,null]};else if("rotation"===e)r={type:"rotation",center:[null,null],angleDeg:null};else if("reflection"===e)r={type:"reflection",line:[[null,null],[null,null]]};else{if("dilation"!==e)throw new le("Invalid tool id: "+e,oe.InvalidInput);r={type:"dilation",center:[null,null],scale:null}}this.doTransform(r,(function(){t.refs.transformationList.focusLast()}))}})),j(this,"removeTool",(e=>{this.currentTool&&this.currentTool.remove(),this.currentTool=null})),j(this,"addTranslationTool",(()=>{var e,t,r=this;return null===(e=this.shape)||void 0===e||e.remove(),this.addTransformerShape(null===(t=this.shape)||void 0===t?void 0:t.toJSON(),!0),{remove:function(){var e,t;null===(e=r.shape)||void 0===e||e.remove(),r.addTransformerShape(null===(t=r.shape)||void 0===t?void 0:t.toJSON(),!1)}}})),j(this,"snapCoord",(e=>{var t=this.graphie();return p.a.map(e,(function(e,r){return he.roundToNearest(t.snap[r],e)}))})),j(this,"normalizeReflectionCoords",(e=>{var t=this.snapCoord(y.a.midpoint(e)),r=y.e.polarDegFromCart(y.e.subtract(e[0],e[1])),n=y.e.cartFromPolarDeg(1,he.roundToNearest(45,r[1]));return p.a.map([-1,1],(function(e){var r=y.e.add(t,y.e.scale(n,e*this.scaleToCurrentRange(2)));return this.snapCoord(r)}),this)})),j(this,"addReflectionTool",(()=>{var e=this.props.tools.reflection;if(e.enabled){var t,r=this,n=this.refs.graph.graphie(),i=function(){r.changeTool("reflection",{coords:p.a.pluck(o,"coord")})},s=this.normalizeReflectionCoords(e.coords),o=p.a.map(s,(function(e){return n.addMovablePoint({coord:e,visible:!1})}),this),a=Jd(e);n.style({},(function(){t=n.addMovableLineSegment({fixed:e.constraints.fixed,constraints:e.constraints,pointA:o[0],pointZ:o[1],snapX:n.snap[0],snapY:n.snap[1],extendLine:!0,normalStyle:{stroke:a,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:Et.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:!0,onMoveEnd:i})}));var l=n.addReflectButton({fixed:e.constraints.fixed,line:t,size:this.scaleToCurrentRange(1),onClick:function(){r.doTransform({type:"reflection",line:p.a.pluck(o,"coord")}),h&&(h.setCoord(y.e.add(l.coord,y.e.subtract(l.coord,h.coord))),h.update())},normalStyle:{stroke:a,"stroke-width":2,fill:a},highlightStyle:{stroke:Et.INTERACTING,"stroke-width":3,fill:Et.INTERACTING},onMoveEnd:i}),h=null;if(!e.constraints.fixed){var c=y.e.polarDegFromCart(y.e.subtract(o[1].coord,o[0].coord))[1]+90;h=n.addRotateHandle({center:l,radius:this.scaleToCurrentRange(2),angleDeg:c,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function(e){return he.roundToNearest(45,e)},onMoveEnd:i})}return f()(t).on("move",(function(){l.update(),f()(l).trigger("move")})),h&&f()(h).on("move",(function(){var e=r.snapCoord(h.coord),n=y.e.subtract(e,l.coord),i=l.isFlipped()?1:0;o[i].setCoord(y.e.add(l.coord,y.e.rotateDeg(n,90))),o[1-i].setCoord(y.e.add(l.coord,y.e.rotateDeg(n,-90))),t.transform(!0),l.update()})),{remove:function(){l.remove(),h&&h.remove(),t.remove(),o[0].remove(),o[1].remove()}}}})),j(this,"scaleToCurrentRange",(e=>function(e,t){var r=t[0][1]-t[0][0],n=t[1][1]-t[1][0];return e*Math.max(r,n)/20}(e,this.refs.graph.props.range))),j(this,"addRotationTool",(()=>{var e=this.props.tools.rotation;if(e.enabled){var t=this,r=this.refs.graph.graphie(),n=Jd(e);return this.rotatePoint=r.addMovablePoint({constraints:e.constraints,coord:e.coord,snapX:r.snap[0],snapY:r.snap[1],normalStyle:{"stroke-dasharray":"",stroke:n,fill:n},highlightStyle:{"stroke-dasharray":"",stroke:Et.INTERACTING,fill:Et.INTERACTING}}),this.rotateHandle=r.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(1.5),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function(e,r){var n=t.getRotationTransformFromAngle(t.rotatePoint.coord,e-r);return t.doTransform(n),r+n.angleDeg}}),this.rotatePoint.onMoveEnd=(e,r)=>{t.changeTool("rotation",{coord:[e,r]})},{remove:function(){var e,r;null===(e=t.rotateHandle)||void 0===e||e.remove(),null===(r=t.rotatePoint)||void 0===r||r.remove()}}}})),j(this,"addDilationTool",(()=>{var e=this.props.tools.dilation;if(e.enabled){var t=this,r=this.refs.graph.graphie(),n=Jd(e);t.dilationCircle=r.addCircleGraph({centerConstraints:e.constraints,center:e.coord,radius:t.scaleToCurrentRange(2),snapX:r.snap[0],snapY:r.snap[1],minRadius:t.scaleToCurrentRange(1),snapRadius:t.scaleToCurrentRange(.5),onResize:function(e,r){t.doTransform({type:"dilation",center:t.dilationCircle.centerPoint.coord,scale:e/r})},circleNormalStyle:{stroke:n,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:Et.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:Et.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:n,fill:n,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:n,fill:n,"stroke-width":2,"stroke-dasharray":""}});var i=this.dilationCircle.centerPoint.onMoveEnd;return this.dilationCircle.centerPoint.onMoveEnd=function(){if(i){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];i(r)}t.changeTool("dilation",{coord:t.dilationCircle.centerPoint.coord})},{remove:function(){var e;null===(e=t.dilationCircle)||void 0===e||e.remove()}}}})),j(this,"getRotationTransformFromAngle",((e,t)=>((t=(t+360)%360)>180&&(t-=360),{type:"rotation",center:e,angleDeg:15*Math.round(t/15)}))),j(this,"doTransform",((e,t)=>{this.applyTransform(e),this.addTransform(e,t)})),j(this,"applyTransform",(e=>{if("static"!==this.props.graphMode){var t=sm.apply(e);this.applyCoordTransformation(t)}})),j(this,"applyCoordTransformation",(e=>{var t;p.a.each(this.shape.points,(function(t){var r=e(t.coord);t.setCoord(r)})),null===(t=this.shape)||void 0===t||t.update()})),j(this,"resetCoords",(()=>{var e,t=this.props.starting.shape.coords;p.a.each(this.shape.points,(function(e,r){e.setCoord(t[r])})),null===(e=this.shape)||void 0===e||e.update()})),j(this,"handleUndoClick",(()=>{this.refs.toolsBar.changeSelected(null),this.props.transformations.length&&this.props.onChange({transformations:p.a.initial(this.props.transformations)})})),j(this,"setTransformationProps",((e,t)=>{this.props.onChange({transformations:e},t)})),j(this,"addTransform",((e,t)=>{this.transformations=sm.append(this.transformations,e),this.props.onChange({transformations:p.a.clone(this.transformations)},t)})),j(this,"changeTool",((e,t)=>{var r=p.a.clone(this.props.tools);r[e]=p.a.extend({},this.props.tools[e],t),this.tools[e]=p.a.clone(r[e]),this.props.onChange({tools:r}),this.props.trackInteraction()})),j(this,"simpleValidate",(e=>dm.validate(this.getUserInput(),e))),j(this,"getCoords",(()=>{var e=this.props.starting.shape.coords,t=this.props.transformations;return p.a.reduce(t,(function(e,t){return p.a.map(e,sm.apply(t))}),e)})),j(this,"getEditorJSON",(()=>{var e=p.a.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");return e.graph=this.refs.graph.toJSON(),e.version=1.2,e.answer=this.getUserInput(),e})),j(this,"getUserInput",(()=>{var e;return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:null===(e=this.shape)||void 0===e?void 0:e.getOptions()}}})),j(this,"_handleFocus",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.props.onFocus(r)})),j(this,"_handleBlur",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.props.onBlur(r)})),j(this,"_getTransformationForID",(e=>{var t=["transformationList","transformation"+e],r=this;return p.a.each(t,(e=>{r=r.refs[e]})),r})),j(this,"getInputPaths",(()=>{if("static"===this.props.listMode)return[];var e=[];return p.a.each(this.props.transformations,((t,r)=>{var n=this._getTransformationForID(r).getInputPaths(),i=p.a.map(n,(e=>[""+r].concat(e)));e=e.concat(i)})),e})),j(this,"_passToInner",(function(e,t){if(t&&t.length){for(var r=p.a.rest(t),n=p.a.head(t),i=this._getTransformationForID(n),s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];return i[e](r,...o)}})),j(this,"focus",(()=>{var e=this.getInputPaths();return e.length>0&&(this.focusInputPath(e[0]),!0)})),j(this,"focusInputPath",(e=>0!==e.length&&(Kd(e.length>=2),this._passToInner("focusInputPath",e)))),j(this,"blurInputPath",(e=>0!==e.length&&(Kd(e.length>=2),this._passToInner("blurInputPath",e)))),j(this,"setInputValue",((e,t,r)=>(Kd(e.length>=2),this._passToInner("setInputValue",e,t,r)))),j(this,"getDOMNodeForPath",(e=>(Kd(e.length>=2),this._passToInner("getDOMNodeForPath",e)))),j(this,"getGrammarTypeForPath",(e=>(Kd(e.length>=2),this._passToInner("getGrammarTypeForPath",e))))}render(){var e,t,r,n,i,s,a,l=p.a.extend((e=this.props.graph,t=400,r=(e=e||{}).labels||["x","y"],n=e.range||[[-10,10],[-10,10]],i=e.step||[1,1],{box:[t,t],labels:r,range:n,step:i,gridStep:e.gridStep||Xd(n,i,t),valid:!0,backgroundImage:$d,markings:"grid",showProtractor:!1}),this.props.graph),c="interactive"===this.props.graphMode,u=c?pm:um,d=h.createElement("div",{style:{width:l.box[0]}},h.createElement(u,{ref:"toolsBar",enabled:(s=this.props.tools,a="enabled",p.a.object(p.a.map(s,(function(e,t){return[t,e[a]]})))),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));return h.createElement("div",{className:"perseus-widget perseus-widget-transformer"},h.createElement(Wh,{ref:"graph",box:l.box,range:l.range,labels:l.labels,step:l.step,gridStep:l.gridStep,markings:l.markings,backgroundImage:l.backgroundImage,showProtractor:l.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!c&&o._("Add transformations below:"),"static"===this.props.graphMode&&[h.createElement("br",{key:"static-br"}),h.createElement("em",{key:"static-nomove"}," ",o._("Note: For this question, the shape will not move.")," ")],c&&d,h.createElement(hm,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!c&&d)}componentDidMount(){this.setupGraphie(this.graphie())}componentDidUpdate(e){this.shouldSetupGraphie(this.props,e)?this.refs.graph.reset():Yd(this.props.transformations,this.transformations)||this.setTransformations(this.props.transformations)}static validate(e,t){var r=function(r){if(t.tools[r].required){var n=p.a.any(p.a.map(e.transformations,(function(e){return e.type===r&&!sm.isEmpty(e)&&!sm.isNoOp(e)})));if(!n)return{v:{type:"invalid",message:o._("Your transformation must use a %(type)s.",{type:om[r].lowerNounName})}}}};for(var n in om){var i=r(n);if("object"==typeof i)return i.v}return am.equal(e.shape,t.correct.shape)?{type:"points",earned:1,total:1,message:null}:!t.gradeEmpty&&Yd(e.shape.coords,t.starting.shape.coords)?{type:"invalid",message:o._("Use the interactive graph to define a correct transformation.")}:{type:"points",earned:0,total:1,message:null}}}j(dm,"defaultProps",p.a.defaults({transformations:[]},Zd));var mm={name:"transformer",displayName:"Transformer",widget:dm},fm={exports:{}};!function(e,t){var r;r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){var r=function(e){return e===Object(e)},n=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)e[n]=r[n]}return e};e.exports={isObject:r,merge:n,clone:function(e){return r(e)?Array.isArray(e)?e.slice():n(e):e}}},function(e,t,r){var n=r(0),i=n.clone,s=n.isObject,o=n.merge,a=r(2),l=r(3),h=r(4),c=function(e){return Array.isArray(e)?a:s(e)?l:"string"==typeof e?h:void 0},p=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);var r=c(t);this._wrapped=r.thaw?r.thaw(t):t};p.prototype.freeze=function(){var e=this._wrapped,t=c(e);return t.freeze?t.freeze(e):e},p.prototype.zoom=function(e){return void 0===this._zoomStack&&(this._zoomStack=[]),this._zoomStack.push({zoom:e,wrapped:this._wrapped}),this._wrapped=p(this._wrapped).get(e),this},p.prototype.deZoom=function(){var e=this._zoomStack.pop();return this._wrapped=p(e.wrapped).set(e.zoom,this._wrapped).freeze(),this},p.prototype.get=function(e){for(var t=this._wrapped,r=0;r<e.length;r++)t=c(t).get(t,e[r]);return t},p.prototype.mod=function(e,t){var r=this._wrapped,n=i(r),s=c(r);if(0===e.length)this._wrapped=t(this._wrapped);else if(1===e.length)this._wrapped=s.mod(n,e[0],t);else{var o=e[0],a=e.slice(1);n[o]=p(r[o]).mod(a,t).freeze(),this._wrapped=n}return this},p.prototype.merge=function(e,t){return this._wrapped=p(this._wrapped).mod(e,(function(e){return o(e,t)})).freeze(),this},p.prototype.del=function(e){var t=this._wrapped,r=c(t);if(1===e.length)this._wrapped=r.del(t,e[0]);else{var n=e[0],s=e.slice(1),o=i(t);o[n]=p(t[n]).del(s).freeze(),this._wrapped=o}return this},p.prototype.set=function(e,t){return this.mod(e,(function(){return t}))},e.exports=p},function(e,t){e.exports={get:function(e,t){return e[t]},set:function(e,t,r){var n=e.splice();return n[t]=r,n},mod:function(e,t,r){var n=e.slice();return n[t]=r(e[t]),n},del:function(e,t){var r=e.slice();return r.splice(t,1),r}}},function(e,t,r){var n=r(0).clone;e.exports={get:function(e,t){return e[t]},set:function(e,t,r){var i=n(e);return i[t]=r,i},mod:function(e,t,r){var i=n(e);return i[t]=r(e[t]),i},del:function(e,t){var r=n(e);return delete r[t],r}}},function(e,t){e.exports={get:function(e,t){return e[t]},set:function(e,t,r){var n=e.splice();return n[t]=r,n},mod:function(e,t,r){var n=e.splice();return n[t]=r(e[t]),n},del:function(e,t){var r=e.slice();return r.splice(t),r}}}])},e.exports=r()}(fm);var gm=kt(fm.exports);class vm{constructor(e){j(this,"order",void 0),j(this,"mantissa",void 0),j(this,"positive",void 0),j(this,"sigFigs",void 0),j(this,"sigDecs",void 0),this.order=km(e),this.mantissa=wm(e),this.positive=xm(e),this.sigFigs=this.mantissa.length,this.sigDecs=this.order-this.mantissa.length}}function ym(e,t,r,n){var i,s,o,a=""+e,l=km(a),h=wm(a),c=xm(a),p=!1;if(0==e||""==h||"0"==h){h="";for(var u=0;u<t;u++)h+="0";l=t+r,r<0&&-r>=t&&(p=!0)}else{if(s=l-h.length-r,o=t-h.length,(i=Math.min(o,s))<0){var d=Cm(h,-i);d.length>h.length+i&&(l++,s>o&&(d=Cm(d,1))),h=d}else if(i>0)for(var m=0;m<i;m++)h+="0";""!=h&&"0"!=h||(h="0",c=!0,0!=(l=1+r)&&(p=!0))}var f="";if(c||(f+="-"),n||h.length>20||l>4||l<-2||l-h.length>0&&bm(h)>0||p)f+=h.charAt(0),h.length>1&&(f+="."+h.substring(1,h.length)),l-1!=0&&(f+=" x 10^"+(l-1));else{var g="",v="",y=!0;if(l>0)if(h.length>l)g=h.substring(0,l),v=h.substring(l,h.length);else{g=h,y=0!=bm(h);for(var b=0;b<l-h.length;b++)g+="0"}else{for(var x=0;x<-l;x++)v+="0";v+=h}f+=(""==g?"0":g)+(y?".":"")+v}return f}function bm(e){for(var t=0,r=e.length-1;r>=0;r--){if("0"!=e.charAt(r))return t;t++}return t}function xm(e){for(var t=!0,r=!1,n=!1,i="",s="",o=!0,a=0;a<e.length;a++){var l=e.charAt(a);l>="1"&&l<="9"?(s+=i+l,i="",n=!0,t=!1):"0"==l?(r?n&&(s+=i+l,i=""):n&&(i+=l),t=!1):r||"."!=l?"e"==l||"E"==l&&a+1<e.length?(parseInt(e.substring(a+1,e.length)),a=e.length):!t||"+"!=l&&"-"!=l||"-"==l&&(o=!o):(s+=i,i="",r=!0,t=!1)}return""==s||o}function wm(e){for(var t=!1,r=!1,n="",i="",s="",o=0;o<e.length;o++){var a=e.charAt(o);a>="1"&&a<="9"?(s+=n+a,n="",r=!0):"0"==a?t?r?(s+=n+a,n=""):i+=a:r?(i+=a,n+=a):i+=a:t||"."!=a?("e"==a||"E"==a&&o+1<e.length)&&(parseInt(e.substring(o+1,e.length)),o=e.length):(s+=n,n="",t=!0)}return""==s?i:s}function km(e){for(var t=!1,r=!1,n="",i="",s=0,o=0,a=0;a<e.length;a++){var l=e.charAt(a);if(l>="1"&&l<="9")i+=n+l,n="",r=!0,t||(o++,s++);else if("0"==l)t?r?(i+=n+l,n=""):s--:(o++,r&&(s++,n+=l));else if(t||"."!=l){if("e"==l||"E"==l&&a+1<e.length){var h=parseInt(e.substring(a+1,e.length));s+=h,o+=h,a=e.length}}else i+=n,n="",t=!0}return""==i?o:s}function Cm(e,t){var r=e.length-t-1;if(r<0)return"";if(r>=e.length-1)return e;var n=e.charAt(r+1),i=e.charAt(r),s=!1;if(n>"5")s=!0;else if("5"==n){for(var o=r+2;o<e.length;o++)"0"!=e.charAt(o)&&(s=!0);i%2==1&&(s=!0)}for(var a="",l=r;l>=0;l--){var h=e.charAt(l);if(s){var c=void 0;if("9"==h)c="0";else{switch(h){case"0":c="1";break;case"1":c="2";break;case"2":c="3";break;case"3":c="4";break;case"4":c="5";break;case"5":c="6";break;case"6":c="7";break;case"7":c="8";break;case"8":c="9"}s=!1}a=c+a}else a=h+a}return s&&(a="1"+a),a}class Em extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"_errorTimeout",void 0),j(this,"_showError",(()=>{if(""!==this.props.value){var e=f()(v.a.findDOMNode(this.refs.error));e.is(":visible")||e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)}})),j(this,"_hideError",(()=>{var e=f()(v.a.findDOMNode(this.refs.error));e.is(":visible")&&e.animate({top:50,opacity:.1},300,(function(){f()(this).hide()}))})),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)})),j(this,"handleBlur",(()=>{this.props.onBlur([]),clearTimeout(this._errorTimeout),n.f(this.props.value).parsed||this._showError()})),j(this,"handleChange",(e=>{this._hideError(),this.props.onChange({value:e.target.value})})),j(this,"simpleValidate",((e,t)=>Em.validate(this.getUserInput(),e))),j(this,"getUserInput",(()=>this.props.value)),j(this,"getInputPaths",(()=>[[]])),j(this,"focusInputPath",(e=>{var t=v.a.findDOMNode(this.refs.input);t&&t.focus()})),j(this,"handleFocus",(()=>{this.props.onFocus([])})),j(this,"blurInputPath",(e=>{var t=v.a.findDOMNode(this.refs.input);t&&t.blur()})),j(this,"setInputValue",((e,t,r)=>{this.props.onChange({value:t},r)})),j(this,"getDOMNodeForPath",(()=>v.a.findDOMNode(this.refs.input))),j(this,"getGrammarTypeForPath",(e=>"unit"))}static validate(e,t){var r=n.f(t.value).expr,i=n.f(e);if(!i.parsed)return{type:"invalid",message:o._("I couldn't understand those units.")};var s,a,l,h=null,c=t.sigfigs,u=(s=i.coefficient,new vm(s).sigFigs===c);u||(h=o._("Check your significant figures."));try{var d=new n.c("x"),m=new n.a(r.simplify(),"=",new n.b(d,i.expr.simplify())).solveLinearEquationForVariable(d);a=Number(m.eval()).toPrecision(c)===Number(1).toPrecision(c)}catch(e){a=!1}a||(h=o._("That answer is numerically incorrect."));var f=Sm(i.expr.simplify()),g=Sm(r.simplify());return(l="all"===t.accepting?n.d(f,g).equal:p()(t.acceptingUnits).any((e=>{var t=Sm(n.f(e).unit.simplify());return n.d(t,f).equal})))||(h=o._("Check your units.")),{type:"points",earned:l&&a&&u?1:0,total:1,message:h}}render(){var e=this.props.apiOptions.staticRender?h.createElement(ws,{onChange:this.handleChange,ref:"input",className:ee.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur}):h.createElement("input",{onChange:this.handleChange,ref:"input",className:ee.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return h.createElement("div",{className:"old-unit-input"},e,h.createElement("div",{ref:"error",className:"error",style:{display:"none"}},o._("I don't understand that")))}componentDidUpdate(){clearTimeout(this._errorTimeout),n.f(this.props.value).parsed?this._hideError():this._errorTimeout=setTimeout(this._showError,2e3)}componentWillUnmount(){clearTimeout(this._errorTimeout)}}j(Em,"defaultProps",{apiOptions:J.defaults,value:""});var Sm=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()},Tm={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:Em,transform:e=>gm(e).del(["value"]).freeze(),version:{major:0,minor:1},hidden:!0},Mm=/^https?:\/\//,_m=e=>{var t,r,{location:n}=e,{useVideo:i}=ie(),[s,a]=Mm.test(n)?[(t=n,r=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/),r&&11===r[7].length?r[7]:"videoNotFound"),"YOUTUBE_ID"]:[n,"READABLE_ID"],l=i(s,a);switch(l.status){case"loading":return h.createElement(_.View,null,o._("Loading..."));case"success":var c,p=null===(c=l.data)||void 0===c?void 0:c.video;return h.createElement(_.View,{style:Am.transcriptLink},h.createElement(_.Text,null,null==p?void 0:p.title),h.createElement(D.Strut,{size:10}),h.createElement(z.default,{href:"/transcript/"+((null==p?void 0:p.contentId)||"videoNotFound"),target:"_blank",className:"visited-no-recolor"},o._("See video transcript")));default:return h.createElement(_.View,null,o._("Something went wrong."))}},Am=C.StyleSheet.create({transcriptLink:{flexDirection:"row",width:"100%",justifyContent:"center"}}),Im="{host}/embed_video?slug={slug}&internal_video_only=1",Om=/^https?:\/\//,Nm=/(khanacademy\.org|localhost)/;class Pm extends h.Component{constructor(){var e;super(...arguments),e=this,j(this,"getUserInput",(()=>null)),j(this,"simpleValidate",(e=>Pm.validate(null,e))),j(this,"change",(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bs.apply(e,r)}))}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){var e,{InitialRequestUrl:t}=ie(),r=this.props.location;if(!r)return h.createElement("div",null);if(Om.test(r))e=r;else{e=Im.replace("{slug}",r);var n="https://www.khanacademy.org";Nm.test(t.host)&&(n=t.origin),e=e.replace("{host}",n)}return h.createElement(_.View,null,h.createElement(gt,{width:1280,height:720,key:r+this.props.alignment},h.createElement(_.View,{style:ua.srOnly},o._("Khan Academy video wrapper")),h.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:1280,height:720,src:e,allowFullScreen:!0})),h.createElement(_m,{location:r}))}}var Rm=[$a,nl,hl,fl,al,uh,Ml,Ol,mh,vh,kh,qh,mc,Sc,zc,xp,tp,Cp,Zp,hu,gu,rd,ho,yu,pd,md,gd,Rd,Bd,Vd,mm,Tm,{name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:Pm}],Lm=function(e){return Fi(Ya),Fi(Rm),e.skipMathJax?Promise.resolve():new Promise(((e,t)=>{MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:"none","HTML-CSS":{availableFonts:["TeX"],imageFont:null,scale:100,showMathMenu:!1}}),MathJax.Hub.Configured(),MathJax.Hub.Queue(e)}))},Fm=[...Ya,...Rm];Fi(Fm);var Dm=Bi();Dm["::renderer::"]=q;var zm={propTypes:{apiOptions:d.a.shape({customKeypad:d.a.bool,nativeKeypadProxy:d.a.func}),keypadStyle:d.a.any},getInitialState(){var e=this,t=null;return e.props.apiOptions&&e.props.apiOptions.customKeypad&&e.props.apiOptions.nativeKeypadProxy&&(t=e.props.apiOptions.nativeKeypadProxy((()=>e.blur&&e.blur()))),{keypadElement:t}},componentDidMount(){var e,t=this;t.props.apiOptions&&t.props.apiOptions.customKeypad&&!t.props.apiOptions.nativeKeypadProxy&&(t._keypadContainer=document.createElement("div"),null===(e=document.body)||void 0===e||e.appendChild(t._keypadContainer),v.a.render(h.createElement(i.Keypad,{onElementMounted:e=>{t.setState({keypadElement:e})},onDismiss:()=>{t.blur&&t.blur()},style:t.props.keypadStyle}),t._keypadContainer))},componentWillUnmount(){var e=this;e._keypadContainer&&(v.a.unmountComponentAtNode(e._keypadContainer),e._keypadContainer.parentNode&&e._keypadContainer.parentNode.removeChild(e._keypadContainer),e._keypadContainer=null)},keypadElement(){return this.state.keypadElement}},Bm=d.a.shape({content:d.a.string,widgets:d.a.objectOf(d.a.any),images:d.a.objectOf(d.a.any)});class qm extends h.Component{constructor(e){super(e),j(this,"_currentFocus",void 0),j(this,"keypadElement",(()=>zm.keypadElement.call(this))),j(this,"_handleFocusChange",((e,t)=>{e?this._setCurrentFocus(e):this._onRendererBlur(t)})),j(this,"_setCurrentFocus",(e=>{var t=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var n=!1;if(this._currentFocus){var[i,...s]=this._currentFocus;n=this.refs[i].getInputPaths().some((e=>Pe.inputPathsEqual(e,s)))}null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,n&&t&&t.getDOMNode()),t&&(n?t.activate():t.dismiss())})),j(this,"_onRendererBlur",(e=>{var t=this._currentFocus;Pe.inputPathsEqual(e,t)&&setTimeout((()=>{Pe.inputPathsEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}))})),j(this,"blur",(()=>{if(this._currentFocus){var[e,...t]=this._currentFocus;this.refs[e].blurPath(t)}})),j(this,"_sections",(()=>Array.isArray(this.props.json)?this.props.json:[this.props.json])),this.state=zm.getInitialState.call(this)}componentDidMount(){zm.componentDidMount.call(this),this._currentFocus=null}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}componentWillUnmount(){zm.componentWillUnmount.call(this)}render(){var e=U(U(U({},J.defaults),this.props.apiOptions),{},{isArticle:!0}),t=l()({"framework-perseus":!0,"perseus-article":!0,"bibliotron-article":this.props.useNewStyles,[ee.MOBILE]:e.isMobile}),r=this._sections().map(((t,r)=>{var n="section-".concat(r);return h.createElement("div",{key:r,className:"clearfix"},h.createElement(ss,G({},t,{ref:n,key:r,key_:r,keypadElement:this.keypadElement(),apiOptions:U(U({},e),{},{onFocusChange:(e,t)=>{this._handleFocusChange(e&&[n].concat(e),t&&[n].concat(t))}}),linterContext:s.d(this.props.linterContext,"article"),legacyPerseusLint:this.props.legacyPerseusLint})))}));return h.createElement("div",{className:t},r)}}j(qm,"propTypes",U(U({},zm.propTypes),{},{apiOptions:d.a.shape({onFocusChange:d.a.func,isMobile:d.a.bool}),json:d.a.oneOfType([Bm,d.a.arrayOf(Bm)]).isRequired,useNewStyles:d.a.bool,linterContext:s.c,legacyPerseusLint:d.a.arrayOf(d.a.string)})),j(qm,"defaultProps",{apiOptions:{},useNewStyles:!1,linterContext:s.b});class Hm extends h.Component{constructor(){super(...arguments),j(this,"getSerializedState",(()=>this.refs.renderer.getSerializedState())),j(this,"restoreSerializedState",((e,t)=>{this.refs.renderer.restoreSerializedState(e,t)}))}render(){var{apiOptions:e,className:t,hint:r,lastHint:n,lastRendered:i,pos:a,totalHints:c}=this.props,{isMobile:p}=e,u=l()(!p&&"perseus-hint-renderer",p&&Object(C.css)(Um.newHint),p&&i&&Object(C.css)(Um.lastRenderedNewHint),n&&"last-hint",i&&"last-rendered",t),d=U(U({},e),{},{customKeypad:!1,staticRender:!1});return h.createElement("div",{className:u,tabIndex:"-1"},!e.isMobile&&h.createElement("span",{className:"perseus-sr-only"},o._("Hint #%(pos)s",{pos:a+1})),!e.isMobile&&!e.satStyling&&c&&null!=a&&h.createElement("span",{className:"perseus-hint-label",style:{display:"block",color:e.hintProgressColor}},"".concat(a+1," / ").concat(c)),h.createElement(ss,{ref:"renderer",widgets:r.widgets,content:r.content||"",images:r.images,apiOptions:d,findExternalWidgets:this.props.findExternalWidgets,linterContext:s.d(this.props.linterContext,"hint")}))}}j(Hm,"defaultProps",{linterContext:s.b});var Um=C.StyleSheet.create({newHint:{marginBottom:24,borderLeftColor:We,borderLeftStyle:"solid",borderLeftWidth:4,[bo.lgOrSmaller]:{paddingLeft:lt},[bo.smOrSmaller]:{paddingLeft:0},":focus":{outline:"none"}},lastRenderedNewHint:{marginBottom:0,borderLeftColor:qe}});class Wm extends h.Component{constructor(){super(...arguments),j(this,"state",{isFinalHelpPage:!1}),j(this,"_hintsVisible",(()=>null==this.props.hintsVisible||-1===this.props.hintsVisible?this.props.hints.length:this.props.hintsVisible)),j(this,"_cacheImagesInHint",(e=>{p.a.each(e.images,((e,t)=>{(new Image).src=Pe.getRealImageUrl(t)}))})),j(this,"_cacheHintImages",(()=>{this._hintsVisible()>0?p.a.each(this.props.hints,this._cacheImagesInHint):this.props.hints.length>0&&this._cacheImagesInHint(this.props.hints[0])})),j(this,"getApiOptions",(()=>U(U(U({},J.defaults),this.props.apiOptions),{},{readOnly:!1}))),j(this,"getSerializedState",(()=>p.a.times(this._hintsVisible(),(e=>this.refs["hintRenderer"+e].getSerializedState())))),j(this,"restoreSerializedState",((e,t)=>{var r=1,n=()=>{--r,t&&0===r&&t()};p.a.each(e,((e,t)=>{var i=this.refs["hintRenderer"+t];i&&(++r,i.restoreSerializedState(e,n))})),n()}))}componentDidMount(){this._cacheHintImages()}UNSAFE_componentWillReceiveProps(e){e.hintsVisible-this.props.hintsVisible>1&&this.setState({isFinalHelpPage:!0})}componentDidUpdate(e,t){if(p.a.isEqual(e.hints,this.props.hints)&&e.hintsVisible===this.props.hintsVisible||this._cacheHintImages(),e.hintsVisible<this.props.hintsVisible){var r=this.props.hintsVisible-1;v.a.findDOMNode(this.refs["hintRenderer"+r]).focus()}}render(){var e=this.getApiOptions(),t=this._hintsVisible(),r=[],n=this.state.isFinalHelpPage;this.props.hints.slice(0,t).forEach(((i,o)=>{var a=o===this.props.hints.length-1&&!/\*\*/.test(i.content),l=o===t-1,c=h.createElement(Hm,{lastHint:a,lastRendered:l,hint:i,pos:o,totalHints:this.props.hints.length,ref:"hintRenderer"+o,key:"hintRenderer"+o,apiOptions:e,findExternalWidgets:this.props.findExternalWidgets,linterContext:s.d(this.props.linterContext,"hints["+o+"]")});n?r.push(c):i.replace&&r.length>0?r[r.length-1]=c:r.push(c)}));var{getAnotherHint:i}=e,a=i&&t>0&&t<this.props.hints.length,c="(".concat(t,"/").concat(this.props.hints.length,")"),p=l()(this.props.className,e.isMobile&&t>0&&Object(C.css)(jm.mobileHintStylesHintsRenderer));return h.createElement("div",{className:p},e.isMobile&&t>0&&h.createElement("div",{className:Object(C.css)(jm.mobileHintStylesHintTitle,To.responsiveLabel)},o._("Hints")),r,a&&h.createElement("button",{rel:"button",className:Object(C.css)(jm.linkButton,jm.getAnotherHintButton,e.isMobile&&jm.mobileHintStylesGetAnotherHintButton),onClick:e=>{e.preventDefault(),e.stopPropagation(),i&&i()}},h.createElement("span",{className:Object(C.css)(jm.plusText,e.isMobile&&jm.mobileHintStylesPlusText)},"+"),h.createElement("span",{className:Object(C.css)(jm.getAnotherHintText)},o._("Get another hint")," ",c)))}}j(Wm,"defaultProps",{linterContext:s.b});var jm=C.StyleSheet.create({rendererMargins:{marginTop:lt},linkButton:{cursor:"pointer",border:"none",backgroundColor:"transparent",fontSize:"100%",fontFamily:"inherit",fontWeight:"bold",color:qe,padding:0,position:"relative"},plusText:{fontSize:20,position:"absolute",top:-3,left:0},getAnotherHintText:{marginLeft:16},mobileHintStylesHintsRenderer:{marginTop:64,border:"solid ".concat(Ge),borderWidth:"1px 0 0 0",position:"relative",":before":{content:'""',display:"table",clear:"both"},":after":{content:'""',display:"table",clear:"both"}},mobileHintStylesHintTitle:{fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",color:Xe,paddingTop:lt,paddingBottom:24,[bo.lgOrSmaller]:{paddingLeft:0},[bo.smOrSmaller]:{paddingLeft:20}},getAnotherHintButton:{marginTop:24},mobileHintStylesGetAnotherHintButton:{[bo.lgOrSmaller]:{paddingLeft:0},[bo.smOrSmaller]:{paddingLeft:20}},mobileHintStylesPlusText:{[bo.lgOrSmaller]:{left:0},[bo.smOrSmaller]:{left:20}}}),{mapObject:Gm}=Ft;class Vm extends h.Component{constructor(e){super(e),j(this,"questionRenderer",void 0),j(this,"hintsRenderer",void 0),j(this,"_currentFocus",void 0),j(this,"_handleFocusChange",((e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)})),j(this,"handleInteractWithWidget",(e=>{var t=p.a.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()})),this.state=U(U({},zm.getInitialState.call(this)),{},{hintsVisible:e.initialHintsVisible||0,questionCompleted:!1,questionHighlightedWidgets:[]})}componentDidMount(){zm.componentDidMount.call(this),this.props.controlPeripherals&&this.props.apiOptions.setDrawingAreaAvailable&&this.props.apiOptions.setDrawingAreaAvailable(!0),this._currentFocus=null,this.update()}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(){this.update()}componentWillUnmount(){zm.componentWillUnmount.call(this);var e=document.querySelector(this.props.workAreaSelector);null!=e&&g.unmountComponentAtNode(e);var t=document.querySelector(this.props.hintsAreaSelector);if(null!=t&&g.unmountComponentAtNode(t),this.props.controlPeripherals){var r=this.props.item.answerArea||{};r.calculator&&f()("#calculator").hide(),r.periodicTable&&f()(".periodic-table-info-box").hide(),r.zTable&&f()(".z-table-info-box").hide(),r.tTable&&f()(".t-table-info-box").hide(),r.chi2Table&&f()(".chi2-table-info-box").hide()}}keypadElement(){return zm.keypadElement.call(this)}update(){var e=U(U(U({},J.defaults),this.props.apiOptions),{},{onFocusChange:this._handleFocusChange}),t=document.querySelector(this.props.workAreaSelector),r=document.querySelector(this.props.hintsAreaSelector);if(t&&r){g.render(h.createElement(ss,G({ref:t=>{if(t){this.questionRenderer=t;var{answerableCallback:r}=e;if(r)r(0===this.questionRenderer.emptyWidgets().length)}},keypadElement:this.keypadElement(),problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,savedState:this.props.savedState,linterContext:s.d(this.props.linterContext,"question")},this.props.item.question,{legacyPerseusLint:this.props.legacyPerseusLint})),t),g.render(h.createElement(Wm,{ref:e=>this.hintsRenderer=e,hints:this.props.item.hints,hintsVisible:this.state.hintsVisible,apiOptions:e,linterContext:s.d(this.props.linterContext,"hints")}),r);var n=this.props.item.answerArea||{};this.props.controlPeripherals?(f()("#calculator").toggle(n.calculator||!1),f()(".periodic-table-info-box").toggle(n.periodicTable||!1),f()(".z-table-info-box").toggle(n.zTable||!1),f()(".t-table-info-box").toggle(n.tTable||!1),f()(".chi2-table-info-box").toggle(n.chi2Table||!1)):(n.calculator&&this.props.onShowCalculator&&this.props.onShowCalculator(),n.periodicTable&&this.props.onShowPeriodicTable&&this.props.onShowPeriodicTable(),n.zTable&&this.props.onShowZTable&&this.props.onShowZTable(),n.tTable&&this.props.onShowTTable&&this.props.onShowTTable(),n.chi2Table&&this.props.onShowChi2Table&&this.props.onShowChi2Table())}}_setCurrentFocus(e){var t=this.keypadElement(),r=this._currentFocus;this._currentFocus=e;var n=this.getInputPaths(),i=this._currentFocus&&n.some((e=>Pe.inputPathsEqual(e,this._currentFocus)));null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,r,i&&t&&t.getDOMNode()),t&&(i?t.activate():t.dismiss())}_onRendererBlur(e){var t=this._currentFocus;Pe.inputPathsEqual(e,t)&&setTimeout((()=>{Pe.inputPathsEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}))}_setWidgetProps(e,t,r){this.questionRenderer._setWidgetProps(e,t,r)}setInputValue(e,t,r){return this.questionRenderer.setInputValue(e,t,r)}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getGrammarTypeForPath(e){return this.questionRenderer.getGrammarTypeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}showHint(){this.state.hintsVisible<this.getNumHints()&&this.setState({hintsVisible:this.state.hintsVisible+1})}getNumHints(){return this.props.item.hints.length}scoreInput(){var e=this.questionRenderer.guessAndScore(),t=e[0],r=e[1],n=[t,[]],i=Pe.keScoreFromPerseusScore(r,n,this.questionRenderer.getSerializedState()),s=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:i.correct,questionHighlightedWidgets:s}),i}getWidgetIds(){return this.questionRenderer.getWidgetIds()}scoreWidgets(){var e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets(),r=this.questionRenderer.getSerializedState();return Gm(e,((e,n)=>Pe.keScoreFromPerseusScore(e,t[n],r[n])))}getSerializedState(){var e;return{question:this.questionRenderer.getSerializedState(),hints:null===(e=this.hintsRenderer)||void 0===e?void 0:e.getSerializedState()}}restoreSerializedState(e,t){var r,n=2,i=()=>{--n,t&&0===n&&t()};this.questionRenderer.restoreSerializedState(e.question,i),null===(r=this.hintsRenderer)||void 0===r||r.restoreSerializedState(e.hints,i)}showRationalesForCurrentlySelectedChoices(){this.questionRenderer.showRationalesForCurrentlySelectedChoices()}deselectIncorrectSelectedChoices(){this.questionRenderer.deselectIncorrectSelectedChoices()}render(){return h.createElement("div",null)}}j(Vm,"defaultProps",{apiOptions:J.defaults,controlPeripherals:!0,hintsAreaSelector:"#hintsarea",initialHintsVisible:0,workAreaSelector:"#workarea",reviewMode:!1,linterContext:s.b});var Ym={onRendered:e=>{}},Xm=h.createContext(Ym),{mapObject:Qm}=Ft;class Km extends h.Component{constructor(e){super(e),j(this,"questionRenderer",void 0),j(this,"hintsRenderer",void 0),j(this,"_currentFocus",void 0),j(this,"_fullyRendered",void 0),j(this,"blurTimeoutID",void 0),j(this,"_handleFocusChange",((e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)})),j(this,"handleInteractWithWidget",(e=>{var t=p.a.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()})),j(this,"setAssetStatus",((e,t)=>{var r=U(U({},this.state.assetStatuses),{},{[e]:t});this.setState({assetStatuses:r})})),this.state={questionCompleted:!1,questionHighlightedWidgets:[],assetStatuses:{}},this._fullyRendered=!1}componentDidMount(){this._currentFocus=null,this._fullyRendered=!1}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(e,t){if(this.props.apiOptions.answerableCallback){var r=0===this.questionRenderer.emptyWidgets().length,{answerableCallback:n}=this.props.apiOptions;n&&n(r)}this._fullyRendered||Object.values(this.state.assetStatuses).every(Boolean)&&(this._fullyRendered=!0,this.props.onRendered(!0))}componentWillUnmount(){null!=this.blurTimeoutID&&(clearTimeout(this.blurTimeoutID),this.blurTimeoutID=null)}_setCurrentFocus(e){var{apiOptions:{isMobile:t,onFocusChange:r},keypadElement:n}=this.props,i=this._currentFocus;this._currentFocus=e;var s=this.getInputPaths(),o=this._currentFocus&&s.some((e=>Pe.inputPathsEqual(e,this._currentFocus)));null!=r&&r(this._currentFocus,i,o&&n&&n.getDOMNode(),o&&this.questionRenderer.getDOMNodeForPath(e)),n&&t&&(o?n.activate():n.dismiss())}_onRendererBlur(e){var t=this._currentFocus;p.a.isEqual(e,t)&&(this.blurTimeoutID=setTimeout((()=>{p.a.isEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}),0))}_setWidgetProps(e,t,r){this.questionRenderer._setWidgetProps(e,t,r)}setInputValue(e,t,r){return this.questionRenderer.setInputValue(e,t,r)}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getGrammarTypeForPath(e){return this.questionRenderer.getGrammarTypeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}getNumHints(){return this.props.item.hints.length}scoreInput(){var e=this.questionRenderer.guessAndScore(),t=e[0],r=e[1],n=[t,[]],i=Pe.keScoreFromPerseusScore(r,n,this.questionRenderer.getSerializedState()),s=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:i.correct,questionHighlightedWidgets:s}),i}getWidgetIds(){return this.questionRenderer.getWidgetIds()}scoreWidgets(){var e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets(),r=this.questionRenderer.getSerializedState();return Qm(e,((e,n)=>Pe.keScoreFromPerseusScore(e,t[n],r)))}getSerializedState(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}}restoreSerializedState(e,t){var r=2,n=()=>{--r,t&&0===r&&t()};this.questionRenderer.restoreSerializedState(e.question,n),this.hintsRenderer.restoreSerializedState(e.hints,n)}showRationalesForCurrentlySelectedChoices(){this.questionRenderer.showRationalesForCurrentlySelectedChoices()}deselectIncorrectSelectedChoices(){this.questionRenderer.deselectIncorrectSelectedChoices()}render(){var e=U(U(U({},J.defaults),this.props.apiOptions),{},{onFocusChange:this._handleFocusChange}),t={assetStatuses:this.state.assetStatuses,setAssetStatus:this.setAssetStatus},r=h.createElement(re.Provider,{value:t},h.createElement(ss,{keypadElement:this.props.keypadElement,problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,ref:e=>{null!=e&&(this.questionRenderer=e)},content:this.props.item.question.content,widgets:this.props.item.question.widgets,images:this.props.item.question.images})),n=h.createElement(Wm,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:e,ref:e=>this.hintsRenderer=e});return h.createElement("div",null,h.createElement("div",null,r),h.createElement("div",{className:e.isMobile?void 0:Object(C.css)($m.hintsContainer)},n))}}j(Km,"defaultProps",{apiOptions:{},onRendered:e=>{}});var $m=C.StyleSheet.create({hintsContainer:{marginLeft:50}}),Zm=h.forwardRef(((e,t)=>h.createElement(Xm.Consumer,null,(r=>{var{onRendered:n}=r;return h.createElement(Km,G({},e,{onRendered:n,ref:t}))}))));class Jm extends h.Component{render(){return h.createElement(Pl,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:h.createElement("span",null,"—")},{value:"->",content:h.createElement("span",null,"→")}],onChange:this.props.onChange})}}j(Jm,"defaultProps",{value:""});var ef=[Et.BLACK,Et.BLUE,Et.GREEN,Et.PINK,Et.PURPLE,Et.RED,Et.GRAY],tf=[Et.LIGHT_BLUE,Et.LIGHT_ORANGE,Et.LIGHT_PINK,Et.LIGHT_GREEN,Et.LIGHT_PURPLE,Et.LIGHT_RED,"#fff"];class rf extends h.Component{render(){var e=this.props.lightColors?tf:ef;return h.createElement(Pl,{value:this.props.value,allowEmpty:!1,buttons:p.a.map(e,(e=>({value:e,content:h.createElement("span",null,h.createElement("span",{className:"colorpicker-circle",style:{background:e}})," ")}))),onChange:this.props.onChange})}}j(rf,"defaultProps",{value:Et.BLACK,lightColors:!1});class nf extends h.Component{render(){return h.createElement(Pl,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:h.createElement("span",null,"—")},{value:"-",content:h.createElement("span",null,"–––")},{value:"- ",content:h.createElement("span",null,"–  –")},{value:".",content:h.createElement("span",null,"····")},{value:". ",content:h.createElement("span",null,"· · ·")}],onChange:this.props.onChange})}}j(nf,"defaultProps",{value:""});class sf extends h.Component{constructor(e){super(e),j(this,"toggle",(e=>{e.preventDefault(),this.setState({show:!this.state.show})})),this.state={show:e.initiallyVisible}}render(){return h.createElement("div",{className:"perseus-interaction-element"},h.createElement("a",{href:"#",className:"perseus-interaction-element-title "+(this.state.show?"open":"closed"),onClick:this.toggle},this.state.show?h.createElement(Y,Tr):h.createElement(Y,Mr),this.props.title),h.createElement("div",{className:"perseus-interaction-element-content "+(this.state.show?"enter":"leave")},this.props.children,(null!=this.props.onUp||null!=this.props.onDown||null!=this.props.onDelete)&&h.createElement("div",{className:"edit-controls"},null!=this.props.onUp&&h.createElement("button",{onClick:this.props.onUp},h.createElement(Y,Ir)),null!=this.props.onDown&&h.createElement("button",{onClick:this.props.onDown},h.createElement(Y,Ar)),null!=this.props.onDelete&&h.createElement("button",{onClick:this.props.onDelete},h.createElement(Y,zr)))))}}j(sf,"defaultProps",{initiallyVisible:!1,title:"More"});class of extends h.Component{constructor(){super(...arguments),j(this,"renderVisibleIcon",(()=>h.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:Object(C.css)(af.icon)},h.createElement("defs",null,h.createElement("path",{id:"a",d:"M7.401 10.035c-1.424.748-2.599 1.905-3.544 3.48a1 1 0 0 1-1.714-1.03C4.325 8.849 7.652 7 12 7c4.348 0 7.675 1.848 9.857 5.486a1 1 0 0 1-1.714 1.028c-.945-1.574-2.12-2.73-3.544-3.48a5 5 0 1 1-9.198 0zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})),h.createElement("g",{fill:"none",fillRule:"evenodd"},h.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),h.createElement("mask",{id:"b",fill:"#fff"},h.createElement("use",{href:"#a"})),h.createElement("use",{fill:"#fff",fillRule:"nonzero",href:"#a"}),h.createElement("g",{fill:"#fff",mask:"url(#b)"},h.createElement("path",{d:"M0 0h24v24H0z"})))))),j(this,"renderHiddenIcon",(()=>h.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:Object(C.css)(af.icon)},h.createElement("defs",null,h.createElement("path",{id:"a",d:"M8.794 7.38C9.791 7.127 10.86 7 12 7c4.348 0 7.675 1.848 9.857 5.486a1 1 0 0 1-1.714 1.028c-.945-1.574-2.12-2.73-3.544-3.48.258.604.401 1.268.401 1.966 0 1.02-.305 1.967-.828 2.757l2.535 2.536a1 1 0 0 1-1.414 1.414l-12-12a1 1 0 0 1 1.414-1.414L8.794 7.38zm5.914 5.913a3 3 0 0 0-4.001-4.001l4 4.001zM6.072 8.486l2.976 2.976a3 3 0 0 0 3.49 3.49l1.579 1.58A5 5 0 0 1 7.4 10.035c-1.424.747-2.599 1.904-3.544 3.478a1 1 0 0 1-1.714-1.028c1.049-1.75 2.363-3.085 3.929-4z"})),h.createElement("g",{fill:"none",fillRule:"evenodd"},h.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),h.createElement("mask",{id:"b",fill:"#fff"},h.createElement("use",{href:"#a"})),h.createElement("use",{fill:"#fff",fillRule:"nonzero",href:"#a"}),h.createElement("g",{fill:"#fff",mask:"url(#b)"},h.createElement("path",{d:"M0 0h24v24H0z"}))))))}render(){var e,t;return this.props.enabled?(e=af.enabled,t=this.renderVisibleIcon()):(e=af.disabled,t=this.renderHiddenIcon()),h.createElement("button",{className:Object(C.css)(af.hud,this.props.fixedPosition&&af.hudFixedPosition,e),onClick:e=>{this.props.onClick()}},t,this.props.message)}}j(of,"propTypes",{message:d.a.string.isRequired,enabled:d.a.bool.isRequired,onClick:d.a.func.isRequired,fixedPosition:d.a.bool}),j(of,"defaultProps",{fixedPosition:!0});var af=C.StyleSheet.create({hud:{boxSizing:"border-box",height:36,padding:"9px 16px",borderRadius:18,fontFamily:Be,fontSize:"15px",lineHeight:"18px",color:Ue,userSelect:"none",borderWidth:0},hudFixedPosition:{bottom:20,position:"fixed",right:20,zIndex:1},icon:{width:24,height:24,marginRight:8,marginTop:-3,verticalAlign:"middle"},enabled:{backgroundColor:ct,":hover":{backgroundColor:pt},":active":{backgroundColor:ut}},disabled:{backgroundColor:Ve,":hover":{backgroundColor:"#a1a5a9"},":active":{backgroundColor:Ye}}});class lf extends h.Component{constructor(){super(...arguments),j(this,"toggleSelect",(e=>{var t=(this.props.values||[]).slice(0),r=this.props.allowEmpty;t.indexOf(e)>=0&&(t.length>1||r)?t.splice(t.indexOf(e),1):t.indexOf(e)<0&&t.push(e),this.props.onChange(t)}))}focus(){var e;return null===(e=g.findDOMNode(this))||void 0===e||e.focus(),!0}render(){var e=this.props.values||[],t=this.props.buttons.map(((t,r)=>{var n=e.indexOf(t.value)>=0;return h.createElement("button",{title:t.title,type:"button",id:""+r,key:""+r,ref:"button"+r,className:Object(C.css)(hf.buttonStyle,n&&hf.selectedStyle),onClick:()=>this.toggleSelect(t.value)},t.content||""+t.value)}));return h.createElement("div",{style:{display:"inline-block"}},t)}}j(lf,"defaultProps",{values:[],allowEmpty:!0});var hf=C.StyleSheet.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:2}},selectedStyle:{backgroundColor:"#ddd"}}),cf=x()({displayName:"PropCheckBox",propTypes:{labelAlignment:d.a.oneOf(["left","right"])},DEFAULT_PROPS:{label:null,onChange:null,labelAlignment:"left"},getDefaultProps:function(){return this.DEFAULT_PROPS},propName:function(){var e=p.a.find(p.a.keys(this.props),(function(e){return!p.a.has(this.DEFAULT_PROPS,e)}),this);if(!e)throw new le("Attempted to create a PropCheckBox with no prop!",oe.InvalidInput);return e},_labelAlignLeft:function(){return"left"===this.props.labelAlignment},render:function(){var e=this.propName();return h.createElement("label",null,this._labelAlignLeft()&&this.props.label,h.createElement("input",{type:"checkbox",checked:this.props[e],onChange:this.toggle}),!this._labelAlignLeft()&&this.props.label)},toggle:function(){var e=this.propName(),t={};t[e]=!this.props[e],this.props.onChange(t)}}),pf=()=>!0;class uf extends h.Component{constructor(){super(...arguments),j(this,"onChange",((e,t)=>{var r=this.props.value;0===e?this.props.onChange([t,r[1]]):this.props.onChange([r[0],t])}))}render(){var e=this.props.value,t=this.props.checkValidity||pf;return h.createElement("div",{className:"range-input"},h.createElement(ap,G({},this.props,{value:e[0],checkValidity:r=>t([r,e[1]]),onChange:this.onChange.bind(this,0),placeholder:this.props.placeholder[0]})),h.createElement(ap,G({},this.props,{value:e[1],checkValidity:r=>t([e[0],r]),onChange:this.onChange.bind(this,1),placeholder:this.props.placeholder[1]})))}}j(uf,"propTypes",{value:d.a.array.isRequired,onChange:d.a.func.isRequired,placeholder:d.a.array,checkValidity:d.a.func}),j(uf,"defaultProps",{placeholder:[null,null]});var df=Object.freeze({__proto__:null,ButtonGroup:Pl,Graph:Wh,Graphie:qn,HUD:of,Icon:qo,InfoTip:Cd,InlineIcon:Y,MathInput:fs,MultiButtonGroup:lf,NumberInput:ap,PropCheckBox:cf,RangeInput:uf,SvgImage:ei,TextInput:Cs,TexButtons:ds,TextListEditor:K}),mf=Object.freeze({__proto__:null,devices:{PHONE:"phone",TABLET:"tablet",DESKTOP:"desktop"},lintGutterWidth:36,perseusFrameBorderWidth:1}),ff=h.createContext({setKeypadElement:e=>{},keypadElement:null,setRenderer:e=>{},renderer:null,setScrollableElement:e=>{},scrollableElement:null}),gf=function(){},vf=function(e,t,r,n){var i=e.content;if(null!=e.content){var s=t(e.content);void 0!==s&&(i=s)}var o=Ft.mapObject(e.widgets||{},(function(e,t){return null==e||null==e.type?e:r(e,t)})),a=p.a.extend({},e,{content:i,widgets:o}),l=n(a);return void 0!==l?l:a},yf=function(e,t,r,n){return vf(e,t=t||gf,function(e,t,r){return function n(i,s){var o,a,l=Hi(i),h=zi(l.type);a=h&&(null===(o=l.version)||void 0===o?void 0:o.major)===h.major?Wi(l,(t=>vf(t,e,n,r))):l;var c=t(a,s);return void 0!==c?c:a}}(t,r=r||gf,n=n||gf),n)},bf={type:"hint"},xf=e=>({type:"array",elementShape:e}),wf={content:{type:"content"},hint:bf,hints:xf(bf),tags:{type:"tags"},arrayOf:xf,shape:e=>({type:"object",shape:e})};class kf{constructor(e,t,r){j(this,"content",void 0),j(this,"hint",void 0),j(this,"tags",void 0),j(this,"array",void 0),this.content=e,this.hint=t,this.tags=r,this.array=Ef}setContentMapper(e){return new kf(e,this.hint,this.tags)}setHintMapper(e){return new kf(this.content,e,this.tags)}setTagsMapper(e){return new kf(this.content,this.hint,e)}setArrayMapper(e){return new Cf(this.content,this.hint,this.tags,e)}mapTree(e,t){return Tf(e,t,[],this)}}class Cf{constructor(e,t,r,n){j(this,"content",void 0),j(this,"hint",void 0),j(this,"tags",void 0),j(this,"array",void 0),this.content=e,this.hint=t,this.tags=r,this.array=n}setArrayMapper(e){return new Cf(this.content,this.hint,this.tags,e)}mapTree(e,t){return Tf(e,t,[],this)}}function Ef(e){return e}function Sf(){return new kf(Ef,Ef,Ef)}function Tf(e,t,r,n){if("content"===t.type){var i=e;return n.content(i,t,r)}if("hint"===t.type){var s=e;return n.hint(s,t,r)}if("tags"===t.type){var o=e;return n.tags(o,t,r)}if("array"===t.type){var a=e;if(!Array.isArray(a))throw new le('Invalid object of type "'.concat(typeof a,'" found at path ')+"".concat(["<root>"].concat(r).join("."),". Expected array."),oe.Internal);var l=t.elementShape,h=a.map(((e,t)=>Tf(e,l,r.concat(t),n)));return n.array(h,a,t,r)}if("object"===t.type){var c=e;if(c&&"object"!=typeof c)throw new le('Invalid object of type "'.concat(typeof c,'" found at ')+"path ".concat(["<root>"].concat(r).join("."),". Expected ")+'"object" type.',oe.InvalidInput);var p=t.shape;if(!p)throw new le("Unexpected shape ".concat(JSON.stringify(t)," at path ")+"".concat(["<root>"].concat(r).join("."),"."),oe.InvalidInput);var u={};return Object.keys(p).forEach((e=>{if(!(e in c))throw new le('Key "'.concat(e,'" is missing from shape at path ')+"".concat(["<root>"].concat(r).join("."),"."),oe.InvalidInput);u[e]=Tf(c[e],p[e],r.concat(e),n)})),u}throw new le("unexpected shape type ".concat(t.type),oe.InvalidInput)}function Mf(e){if("content"===e.type)return{__type:"content",content:"",images:{},widgets:{}};if("hint"===e.type)return{__type:"hint",replace:!1,content:"",images:{},widgets:{}};if("tags"===e.type)return[];if("array"===e.type)return[];if("object"===e.type){var t=e.shape,r={};return Object.keys(t).forEach((e=>{r[e]=Mf(t[e])})),r}throw new le("unexpected shape type ".concat(e.type),oe.InvalidInput)}function _f(e){if(Array.isArray(e))return e.length?"string"==typeof e[0]?wf.tags:wf.arrayOf(_f(e[0])):wf.arrayOf(wf.content);if("object"==typeof e&&("content"===e.__type||"item"===e.__type))return wf.content;if("object"==typeof e&&"hint"===e.__type)return wf.hint;if("object"==typeof e){var t={};return Object.keys(e).forEach((r=>{t[r]=_f(e[r])})),wf.shape(t)}throw new le("unexpected multi-item node ".concat(JSON.stringify(e)),oe.InvalidInput)}function Af(e){return e._multi}var If=["item","children","shape","serializedState","onSerializedStateUpdated"];class Of extends h.Component{constructor(e){super(e),j(this,"rendererDataTreeMapper",void 0),j(this,"getRenderersMapper",void 0),j(this,"_handleSerializedStateUpdated",((e,t)=>{var{onSerializedStateUpdated:r}=this.props;if(r){var n=this._getSerializedState(this.props.serializedState);r(gm(n).set(e,t).freeze())}})),this.rendererDataTreeMapper=Sf().setContentMapper(((e,t,r)=>this._makeContentRendererData(e,r))).setHintMapper((e=>this._makeHintRendererData(e))).setTagsMapper((e=>null)),this.getRenderersMapper=Sf().setContentMapper((e=>e.makeRenderer())).setHintMapper((e=>e.makeRenderer())).setArrayMapper(((e,t,r)=>this._annotateRendererArray(e,t,r))),this.state=this._tryMakeRendererState(this.props)}UNSAFE_componentWillReceiveProps(e){e.item!==this.props.item&&this.setState(this._tryMakeRendererState(e))}_tryMakeRendererState(e){try{return{rendererDataTree:this._makeRendererDataTree(e.item,e.shape),renderError:null}}catch(e){return ae.error("Error building tree state",oe.Internal,{cause:e}),{rendererDataTree:null,renderError:e}}}_getRendererProps(){return V(this.props,If)}_makeContentRendererData(e,t){var r={ref:null,makeRenderer:null},n=e=>r.ref=e,i=e=>this._findWidgets(r,e),s=e=>this._handleSerializedStateUpdated(t,e);return r.makeRenderer=()=>h.createElement(ss,G({},this._getRendererProps(),e,{ref:n,findExternalWidgets:i,serializedState:this.props.serializedState?gm(this.props.serializedState).get(t):null,onSerializedStateUpdated:s})),r}_makeHintRendererData(e){var t=e=>this._findWidgets({},e);return{hint:e,findExternalWidgets:t,ref:null,makeRenderer:()=>h.createElement(Wm,G({},this._getRendererProps(),{findExternalWidgets:t,hints:[e]}))}}_makeRendererDataTree(e,t){var r=Af(e);return this.rendererDataTreeMapper.mapTree(r,t)}_findWidgets(e,t){var r=[];return this._mapRenderers((n=>{e!==n&&n.ref&&r.push(...n.ref.findInternalWidgets(t))})),r}_mapRenderers(e){var{rendererDataTree:t}=this.state;return t?Sf().setContentMapper(e).setHintMapper(e).mapTree(t,this.props.shape):null}_scoreFromRef(e){if(!e)return null;var t,[r,n]=e.guessAndScore();return e.getSerializedState&&(t=e.getSerializedState()),Pe.keScoreFromPerseusScore(n,r,t)}getScores(){return this._mapRenderers((e=>this._scoreFromRef(e.ref)))}score(){var e=[],t=[],r=this._mapRenderers((r=>{var n;return r.ref?(r.ref.getSerializedState&&t.push(r.ref.getSerializedState()),e.push(r.ref.score()),null===(n=r.ref)||void 0===n?void 0:n.getUserInput()):null})),n=e.reduce(Pe.combineScores);return Pe.keScoreFromPerseusScore(n,r,t)}_getSerializedState(e){return this._mapRenderers(((t,r,n)=>t.ref?t.ref.getSerializedState():e?gm(e).get(n):null))}restoreSerializedState(e,t){var r=0,n=()=>{r--,t&&0===r&&t()};this._mapRenderers(((t,i,s)=>{var o;if(t.ref){var a=gm(e).get(s);a&&(r++,null===(o=t.ref)||void 0===o||o.restoreSerializedState(a,n))}}))}_annotateRendererArray(e,t,r){if("hint"===r.elementShape.type){var n=t;(e=[...e]).firstN=e=>h.createElement(Wm,G({},this._getRendererProps(),{findExternalWidgets:n[0]?n[0].findExternalWidgets:void 0,hints:n.map((e=>e.hint)),hintsVisible:e}))}return e}_getRenderers(){return this.getRenderersMapper.mapTree(this.state.rendererDataTree,this.props.shape)}render(){return this.state.renderError?h.createElement("div",{className:Object(C.css)(Nf.error)},o.$_("Error rendering: %(error)s",{error:String(this.state.renderError)})):this.props.children({renderers:this._getRenderers()})}}var Nf=C.StyleSheet.create({error:{color:"red"}});function Pf(e){if("content"===e.type)return d.a.shape({__type:d.a.oneOf(["content","item"]).isRequired,content:d.a.string,images:d.a.objectOf(d.a.any),widgets:d.a.objectOf(d.a.any)});if("hint"===e.type)return d.a.shape({__type:d.a.oneOf(["hint"]).isRequired,content:d.a.string,images:d.a.objectOf(d.a.any),widgets:d.a.objectOf(d.a.any),replace:d.a.bool});if("tags"===e.type)return d.a.arrayOf(d.a.string.isRequired);if("array"===e.type){var t=Pf(e.elementShape);return d.a.arrayOf(t.isRequired)}if("object"===e.type){var r=e.shape,n={};return Object.keys(r).forEach((e=>{n[e]=Pf(r[e]).isRequired})),d.a.shape(n)}throw new le("unexpected shape type ".concat(e.type),oe.InvalidInput)}var Rf={MultiRenderer:Of,shapes:wf,buildPropTypeForShape:function(e){return d.a.oneOfType([d.a.shape({_multi:Pf(e)}),d.a.oneOf([null,void 0])])},buildEmptyItemForShape:function(e){return{_multi:Mf(e)}},findContentNodesInItem:function(e,t,r){var n=Af(e);Sf().setContentMapper(r).mapTree(n,t)},findHintNodesInItem:function(e,t,r){var n=Af(e);Sf().setHintMapper(r).mapTree(n,t)},inferItemShape:function(e){return _f(Af(e))}},{findContentNodesInItem:Lf,inferItemShape:Ff}=Rf,Df=function(e,t){var r=!0;return yf(e,null,(function(e){r=r&&function(e,t){if(null==e||null==e.type)return!0;var r=Hi(e);return function(e,t){if(null==t)return!1;var r=e.version||{major:0,minor:0};return t.major>r.major||!(t.major<r.major)&&t.minor>=r.minor}(r,t[r.type])}(e,t)})),r},zf=function(e,t){if(null==e||null==t)throw new le("missing parameter to Perseus.isRenderable.item",oe.InvalidInput);if(e._multi){var r=Ff(e),n=!0;return Lf(e,r,(e=>{Df(e,t)||(n=!1)})),n}return Df(e.question,t)},{findContentNodesInItem:Bf,inferItemShape:qf}=Rf;function Hf(e,t){yf(e,null,(function(e){e.type&&!qi(e)&&t.push(e.type)}))}function Uf(e){var t=[];if(e._multi){var r=qf(e);Bf(e,r,(e=>Hf(e,t)))}else Hf(e.question,t);return p.a.uniq(t)}var Wf=()=>{Fi(Fm)},jf={serialize:function(){return p.a.omit(this.props,Ls)}},Gf=B,Vf=q}.call(this,r("yLpj"))}}]);
//# sourceMappingURL=../../sourcemaps/en/79qq.57ccfe78e7081d0cced0.js.map